"use strict";(self.webpackChunk_antv_g6_site=self.webpackChunk_antv_g6_site||[]).push([[2643],{68842:function(n,e,t){t.d(e,{w:function(){return o}});var o=(0,t(58757).createContext)({})},35962:function(n,e,t){t.r(e),t.d(e,{default:function(){return i}});t(58757);var o=t(91808),r=t(68842),a=t(35667);function i(){var n=(0,o.pC)();return(0,a.jsx)(r.w.Provider,{value:{meta:{exampleTopics:[{id:"case",title:{zh:"场景案例",en:"Case"},icon:"gallery",examples:[{demos:[{id:"graphinsight",screenshot:"https://gw.alipayobjects.com/mdn/rms_0d75e8/afts/img/A*eXL9T6xqPlUAAAAAAAAAAAAAARQnAQ",source:"const container = document.getElementById('container');\n\nconst iframe = document.createElement('iframe');\niframe.id = 'graphinsight-bank-demo';\n\niframe.src =\n  'https://codesandbox.io/embed/condescending-platform-mt37im?fontsize=14&hidenavigation=1&theme=dark';\niframe.style =\n  'width:100%; height:100%; min-height:500px; border:0; border-radius: 4px; overflow:hidden;';\niframe.allow =\n  'accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking';\niframe.sandbox =\n  'allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts';\niframe.title = 'condescending-graphinsight-bank';\n\nconst info = document.createElement('div');\ninfo.innerHTML = `\n<p>友情提示，如果CodeSandbox打开比较慢，可以访问 <a href='https://graphinsight.antgroup.com/#/workspace?type=case' target='_blank'>「GraphInsight」</a> 在线查看，\n它是 AntV 团队基于 G6 研发的一款图分析应用低代码搭建工具与分析洞察产品，它既可以帮助用户在线实现关系数据的可视化，也可帮助开发者一键导出图画布SDK，极大提高研发效率\n</p>\n`;\ncontainer.appendChild(info);\ncontainer.appendChild(iframe);\n",title:{zh:"G6VP 案例",en:"G6VP Case"},filename:"graphinsight.js",isNew:!1},{id:"largeGraph",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*a6N9Q6q44Q0AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\n// 实际开发中把 window.AntVUtil 换成从 @antv/util 引入的相关模块\n// replace window.AntVUtil.isObject with\n// import { isNumber, isArray } from '@antv/util';\nconst { isNumber, isArray } = window.AntVUtil;\n\ninsertCss(`\n  .g6-component-contextmenu {\n    position: absolute;\n    z-index: 2;\n    list-style-type: none;\n    background-color: #363b40;\n    border-radius: 6px;\n    font-size: 14px;\n    color: hsla(0,0%,100%,.85);\n    width: fit-content;\n    transition: opacity .2s;\n    text-align: center;\n    padding: 0px 20px 0px 20px;\n\t\tbox-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n\t\tborder: 0px;\n  }\n  .g6-component-contextmenu ul {\n\t\tpadding-left: 0px;\n\t\tmargin: 0;\n  }\n  .g6-component-contextmenu li {\n    cursor: pointer;\n    list-style-type: none;\n    list-style: none;\n    margin-left: 0;\n    line-height: 38px;\n  }\n  .g6-component-contextmenu li:hover {\n    color: #aaaaaa;\n\t}\n`);\n\nconst { labelPropagation, louvain, findShortestPath } = G6.Algorithm;\nconst { uniqueId } = G6.Util;\n\nconst NODESIZEMAPPING = 'degree';\nconst SMALLGRAPHLABELMAXLENGTH = 5;\nlet labelMaxLength = SMALLGRAPHLABELMAXLENGTH;\nconst DEFAULTNODESIZE = 20;\nconst DEFAULTAGGREGATEDNODESIZE = 53;\nconst NODE_LIMIT = 40; // TODO: find a proper number for maximum node number on the canvas\n\nlet graph = null;\nlet currentUnproccessedData = { nodes: [], edges: [] };\nlet nodeMap = {};\nlet aggregatedNodeMap = {};\nlet hiddenItemIds = []; // \b隐藏的元素 id 数组\nlet largeGraphMode = true;\nlet cachePositions = {};\nlet manipulatePosition = undefined;\nlet descreteNodeCenter;\nlet layout = {\n  type: '',\n  instance: null,\n  destroyed: true,\n};\nlet expandArray = [];\nlet collapseArray = [];\nlet shiftKeydown = false;\nlet CANVAS_WIDTH = 800,\n  CANVAS_HEIGHT = 800;\n\nconst duration = 2000;\nconst animateOpacity = 0.6;\nconst animateBackOpacity = 0.1;\nconst virtualEdgeOpacity = 0.1;\nconst realEdgeOpacity = 0.2;\n\nconst darkBackColor = 'rgb(43, 47, 51)';\nconst disableColor = '#777';\nconst theme = 'dark';\nconst subjectColors = [\n  '#5F95FF', // blue\n  '#61DDAA',\n  '#65789B',\n  '#F6BD16',\n  '#7262FD',\n  '#78D3F8',\n  '#9661BC',\n  '#F6903D',\n  '#008685',\n  '#F08BB4',\n];\n\nconst colorSets = G6.Util.getColorSetsBySubjectColors(\n  subjectColors,\n  darkBackColor,\n  theme,\n  disableColor,\n);\n\nconst global = {\n  node: {\n    style: {\n      fill: '#2B384E',\n    },\n    labelCfg: {\n      style: {\n        fill: '#acaeaf',\n        stroke: '#191b1c',\n      },\n    },\n    stateStyles: {\n      focus: {\n        fill: '#2B384E',\n      },\n    },\n  },\n  edge: {\n    style: {\n      stroke: '#acaeaf',\n      realEdgeStroke: '#acaeaf', //'#f00',\n      realEdgeOpacity,\n      strokeOpacity: realEdgeOpacity,\n    },\n    labelCfg: {\n      style: {\n        fill: '#acaeaf',\n        realEdgeStroke: '#acaeaf', //'#f00',\n        realEdgeOpacity: 0.5,\n        stroke: '#191b1c',\n      },\n    },\n    stateStyles: {\n      focus: {\n        stroke: '#fff', // '#3C9AE8',\n      },\n    },\n  },\n};\n\n// Custom super node\nG6.registerNode(\n  'aggregated-node',\n  {\n    draw(cfg, group) {\n      let width = 53,\n        height = 27;\n      const style = cfg.style || {};\n      const colorSet = cfg.colorSet || colorSets[0];\n\n      // halo for hover\n      group.addShape('rect', {\n        attrs: {\n          x: -width * 0.55,\n          y: -height * 0.6,\n          width: width * 1.1,\n          height: height * 1.2,\n          fill: colorSet.mainFill,\n          opacity: 0.9,\n          lineWidth: 0,\n          radius: (height / 2 || 13) * 1.2,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'halo-shape',\n        visible: false,\n      });\n\n      // focus stroke for hover\n      group.addShape('rect', {\n        attrs: {\n          x: -width * 0.55,\n          y: -height * 0.6,\n          width: width * 1.1,\n          height: height * 1.2,\n          fill: colorSet.mainFill, // '#3B4043',\n          stroke: '#AAB7C4',\n          lineWidth: 1,\n          lineOpacty: 0.85,\n          radius: (height / 2 || 13) * 1.2,\n        },\n        name: 'stroke-shape',\n        visible: false,\n      });\n\n      const keyShape = group.addShape('rect', {\n        attrs: {\n          ...style,\n          x: -width / 2,\n          y: -height / 2,\n          width,\n          height,\n          fill: colorSet.mainFill, // || '#3B4043',\n          stroke: colorSet.mainStroke,\n          lineWidth: 2,\n          cursor: 'pointer',\n          radius: height / 2 || 13,\n          lineDash: [2, 2],\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'aggregated-node-keyShape',\n      });\n\n      let labelStyle = {};\n      if (cfg.labelCfg) {\n        labelStyle = Object.assign(labelStyle, cfg.labelCfg.style);\n      }\n      group.addShape('text', {\n        attrs: {\n          text: `${cfg.count}`,\n          x: 0,\n          y: 0,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          cursor: 'pointer',\n          fontSize: 12,\n          fill: '#fff',\n          opacity: 0.85,\n          fontWeight: 400,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'count-shape',\n        className: 'count-shape',\n        draggable: true,\n      });\n\n      // tag for new node\n      if (cfg.new) {\n        group.addShape('circle', {\n          attrs: {\n            x: width / 2 - 3,\n            y: -height / 2 + 3,\n            r: 4,\n            fill: '#6DD400',\n            lineWidth: 0.5,\n            stroke: '#FFFFFF',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'typeNode-tag-circle',\n        });\n      }\n      return keyShape;\n    },\n    setState: (name, value, item) => {\n      const group = item.get('group');\n      if (name === 'layoutEnd' && value) {\n        const labelShape = group.find((e) => e.get('name') === 'text-shape');\n        if (labelShape) labelShape.set('visible', true);\n      } else if (name === 'hover') {\n        if (item.hasState('focus')) {\n          return;\n        }\n        const halo = group.find((e) => e.get('name') === 'halo-shape');\n        const keyShape = item.getKeyShape();\n        const colorSet = item.getModel().colorSet || colorSets[0];\n        if (value) {\n          halo && halo.show();\n          keyShape.attr('fill', colorSet.activeFill);\n        } else {\n          halo && halo.hide();\n          keyShape.attr('fill', colorSet.mainFill);\n        }\n      } else if (name === 'focus') {\n        const stroke = group.find((e) => e.get('name') === 'stroke-shape');\n        const keyShape = item.getKeyShape();\n        const colorSet = item.getModel().colorSet || colorSets[0];\n        if (value) {\n          stroke && stroke.show();\n          keyShape.attr('fill', colorSet.selectedFill);\n        } else {\n          stroke && stroke.hide();\n          keyShape.attr('fill', colorSet.mainFill);\n        }\n      }\n    },\n    update: undefined,\n  },\n  'single-node',\n);\n\n// Custom real node\nG6.registerNode(\n  'real-node',\n  {\n    draw(cfg, group) {\n      let r = 30;\n      if (isNumber(cfg.size)) {\n        r = cfg.size / 2;\n      } else if (isArray(cfg.size)) {\n        r = cfg.size[0] / 2;\n      }\n      const style = cfg.style || {};\n      const colorSet = cfg.colorSet || colorSets[0];\n\n      // halo for hover\n      group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: r + 5,\n          fill: style.fill || colorSet.mainFill || '#2B384E',\n          opacity: 0.9,\n          lineWidth: 0,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'halo-shape',\n        visible: false,\n      });\n\n      // focus stroke for hover\n      group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: r + 5,\n          fill: style.fill || colorSet.mainFill || '#2B384E',\n          stroke: '#fff',\n          strokeOpacity: 0.85,\n          lineWidth: 1,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'stroke-shape',\n        visible: false,\n      });\n\n      const keyShape = group.addShape('circle', {\n        attrs: {\n          ...style,\n          x: 0,\n          y: 0,\n          r,\n          fill: colorSet.mainFill,\n          stroke: colorSet.mainStroke,\n          lineWidth: 2,\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'aggregated-node-keyShape',\n      });\n\n      let labelStyle = {};\n      if (cfg.labelCfg) {\n        labelStyle = Object.assign(labelStyle, cfg.labelCfg.style);\n      }\n\n      if (cfg.label) {\n        const text = cfg.label;\n        let labelStyle = {};\n        let refY = 0;\n        if (cfg.labelCfg) {\n          labelStyle = Object.assign(labelStyle, cfg.labelCfg.style);\n          refY += cfg.labelCfg.refY || 0;\n        }\n        let offsetY = 0;\n        const fontSize = labelStyle.fontSize < 8 ? 8 : labelStyle.fontSize;\n        const lineNum = cfg.labelLineNum || 1;\n        offsetY = lineNum * (fontSize || 12);\n        group.addShape('text', {\n          attrs: {\n            text,\n            x: 0,\n            y: r + refY + offsetY + 5,\n            textAlign: 'center',\n            textBaseLine: 'alphabetic',\n            cursor: 'pointer',\n            fontSize,\n            fill: '#fff',\n            opacity: 0.85,\n            fontWeight: 400,\n            stroke: global.edge.labelCfg.style.stroke,\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'text-shape',\n          className: 'text-shape',\n        });\n      }\n\n      // tag for new node\n      if (cfg.new) {\n        group.addShape('circle', {\n          attrs: {\n            x: r - 3,\n            y: -r + 3,\n            r: 4,\n            fill: '#6DD400',\n            lineWidth: 0.5,\n            stroke: '#FFFFFF',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'typeNode-tag-circle',\n        });\n      }\n\n      return keyShape;\n    },\n    setState: (name, value, item) => {\n      const group = item.get('group');\n      if (name === 'layoutEnd' && value) {\n        const labelShape = group.find((e) => e.get('name') === 'text-shape');\n        if (labelShape) labelShape.set('visible', true);\n      } else if (name === 'hover') {\n        if (item.hasState('focus')) {\n          return;\n        }\n        const halo = group.find((e) => e.get('name') === 'halo-shape');\n        const keyShape = item.getKeyShape();\n        const colorSet = item.getModel().colorSet || colorSets[0];\n        if (value) {\n          halo && halo.show();\n          keyShape.attr('fill', colorSet.activeFill);\n        } else {\n          halo && halo.hide();\n          keyShape.attr('fill', colorSet.mainFill);\n        }\n      } else if (name === 'focus') {\n        const stroke = group.find((e) => e.get('name') === 'stroke-shape');\n        const label = group.find((e) => e.get('name') === 'text-shape');\n        const keyShape = item.getKeyShape();\n        const colorSet = item.getModel().colorSet || colorSets[0];\n        if (value) {\n          stroke && stroke.show();\n          keyShape.attr('fill', colorSet.selectedFill);\n          label && label.attr('fontWeight', 800);\n        } else {\n          stroke && stroke.hide();\n          keyShape.attr('fill', colorSet.mainFill); // '#2B384E'\n          label && label.attr('fontWeight', 400);\n        }\n      }\n    },\n    update: undefined,\n  },\n  'aggregated-node',\n); // 这样可以继承 aggregated-node 的 setState\n\n// Custom the quadratic edge for multiple edges between one node pair\nG6.registerEdge(\n  'custom-quadratic',\n  {\n    setState: (name, value, item) => {\n      const group = item.get('group');\n      const model = item.getModel();\n      if (name === 'focus') {\n        const back = group.find((ele) => ele.get('name') === 'back-line');\n        if (back) {\n          back.stopAnimate();\n          back.remove();\n          back.destroy();\n        }\n        const keyShape = group.find((ele) => ele.get('name') === 'edge-shape');\n        const arrow = model.style.endArrow;\n        if (value) {\n          if (keyShape.cfg.animation) {\n            keyShape.stopAnimate(true);\n          }\n          keyShape.attr({\n            strokeOpacity: animateOpacity,\n            opacity: animateOpacity,\n            stroke: '#fff',\n            endArrow: {\n              ...arrow,\n              stroke: '#fff',\n              fill: '#fff',\n            },\n          });\n          if (model.isReal) {\n            const { lineWidth, path, endArrow, stroke } = keyShape.attr();\n            const back = group.addShape('path', {\n              attrs: {\n                lineWidth,\n                path,\n                stroke,\n                endArrow,\n                opacity: animateBackOpacity,\n              },\n              // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n              name: 'back-line',\n            });\n            back.toBack();\n            const length = keyShape.getTotalLength();\n            keyShape.animate(\n              (ratio) => {\n                // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations\n                const startLen = ratio * length;\n                // Calculate the lineDash\n                const cfg = {\n                  lineDash: [startLen, length - startLen],\n                };\n                return cfg;\n              },\n              {\n                repeat: true, // Whether executes the animation repeatly\n                duration, // the duration for executing once\n              },\n            );\n          } else {\n            let index = 0;\n            const lineDash = keyShape.attr('lineDash');\n            const totalLength = lineDash[0] + lineDash[1];\n            keyShape.animate(\n              () => {\n                index++;\n                if (index > totalLength) {\n                  index = 0;\n                }\n                const res = {\n                  lineDash,\n                  lineDashOffset: -index,\n                };\n                // returns the modified configurations here, lineDash and lineDashOffset here\n                return res;\n              },\n              {\n                repeat: true, // whether executes the animation repeatly\n                duration, // the duration for executing once\n              },\n            );\n          }\n        } else {\n          keyShape.stopAnimate();\n          const stroke = '#acaeaf';\n          const opacity = model.isReal ? realEdgeOpacity : virtualEdgeOpacity;\n          keyShape.attr({\n            stroke,\n            strokeOpacity: opacity,\n            opacity,\n            endArrow: {\n              ...arrow,\n              stroke,\n              fill: stroke,\n            },\n          });\n        }\n      }\n    },\n  },\n  'quadratic',\n);\n\n// Custom the line edge for single edge between one node pair\nG6.registerEdge(\n  'custom-line',\n  {\n    setState: (name, value, item) => {\n      const group = item.get('group');\n      const model = item.getModel();\n      if (name === 'focus') {\n        const keyShape = group.find((ele) => ele.get('name') === 'edge-shape');\n        const back = group.find((ele) => ele.get('name') === 'back-line');\n        if (back) {\n          back.stopAnimate();\n          back.remove();\n          back.destroy();\n        }\n        const arrow = model.style.endArrow;\n        if (value) {\n          if (keyShape.cfg.animation) {\n            keyShape.stopAnimate(true);\n          }\n          keyShape.attr({\n            strokeOpacity: animateOpacity,\n            opacity: animateOpacity,\n            stroke: '#fff',\n            endArrow: {\n              ...arrow,\n              stroke: '#fff',\n              fill: '#fff',\n            },\n          });\n          if (model.isReal) {\n            const { path, stroke, lineWidth } = keyShape.attr();\n            const back = group.addShape('path', {\n              attrs: {\n                path,\n                stroke,\n                lineWidth,\n                opacity: animateBackOpacity,\n              },\n              // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n              name: 'back-line',\n            });\n            back.toBack();\n            const length = keyShape.getTotalLength();\n            keyShape.animate(\n              (ratio) => {\n                // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations\n                const startLen = ratio * length;\n                // Calculate the lineDash\n                const cfg = {\n                  lineDash: [startLen, length - startLen],\n                };\n                return cfg;\n              },\n              {\n                repeat: true, // Whether executes the animation repeatly\n                duration, // the duration for executing once\n              },\n            );\n          } else {\n            const lineDash = keyShape.attr('lineDash');\n            const totalLength = lineDash[0] + lineDash[1];\n            let index = 0;\n            keyShape.animate(\n              () => {\n                index++;\n                if (index > totalLength) {\n                  index = 0;\n                }\n                const res = {\n                  lineDash,\n                  lineDashOffset: -index,\n                };\n                // returns the modified configurations here, lineDash and lineDashOffset here\n                return res;\n              },\n              {\n                repeat: true, // whether executes the animation repeatly\n                duration, // the duration for executing once\n              },\n            );\n          }\n        } else {\n          keyShape.stopAnimate();\n          const stroke = '#acaeaf';\n          const opacity = model.isReal ? realEdgeOpacity : virtualEdgeOpacity;\n          keyShape.attr({\n            stroke,\n            strokeOpacity: opacity,\n            opacity: opacity,\n            endArrow: {\n              ...arrow,\n              stroke,\n              fill: stroke,\n            },\n          });\n        }\n      }\n    },\n  },\n  'single-edge',\n);\n\nconst descendCompare = (p) => {\n  // 这是比较函数\n  return function (m, n) {\n    const a = m[p];\n    const b = n[p];\n    return b - a; // 降序\n  };\n};\n\nconst clearFocusItemState = (graph) => {\n  if (!graph) return;\n  clearFocusNodeState(graph);\n  clearFocusEdgeState(graph);\n};\n\n// 清除图上所有节点的 focus 状态及相应样式\nconst clearFocusNodeState = (graph) => {\n  const focusNodes = graph.findAllByState('node', 'focus');\n  focusNodes.forEach((fnode) => {\n    graph.setItemState(fnode, 'focus', false); // false\n  });\n};\n\n// 清除图上所有边的 focus 状态及相应样式\nconst clearFocusEdgeState = (graph) => {\n  const focusEdges = graph.findAllByState('edge', 'focus');\n  focusEdges.forEach((fedge) => {\n    graph.setItemState(fedge, 'focus', false);\n  });\n};\n\n// 截断长文本。length 为文本截断后长度，elipsis 是后缀\nconst formatText = (text, length = 5, elipsis = '...') => {\n  if (!text) return '';\n  if (text.length > length) {\n    return `${text.substr(0, length)}${elipsis}`;\n  }\n  return text;\n};\n\nconst labelFormatter = (text, minLength = 10) => {\n  if (text && text.split('').length > minLength) return `${text.substr(0, minLength)}...`;\n  return text;\n};\n\nconst processNodesEdges = (\n  nodes,\n  edges,\n  width,\n  height,\n  largeGraphMode,\n  edgeLabelVisible,\n  isNewGraph = false,\n) => {\n  if (!nodes || nodes.length === 0) return {};\n  const currentNodeMap = {};\n  let maxNodeCount = -Infinity;\n  const paddingRatio = 0.3;\n  const paddingLeft = paddingRatio * width;\n  const paddingTop = paddingRatio * height;\n  nodes.forEach((node) => {\n    node.type = node.level === 0 ? 'real-node' : 'aggregated-node';\n    node.isReal = node.level === 0 ? true : false;\n    node.label = `${node.id}`;\n    node.labelLineNum = undefined;\n    node.oriLabel = node.label;\n    node.label = formatText(node.label, labelMaxLength, '...');\n    node.degree = 0;\n    node.inDegree = 0;\n    node.outDegree = 0;\n    if (currentNodeMap[node.id]) {\n      console.warn('node exists already!', node.id);\n      node.id = `${node.id}${Math.random()}`;\n    }\n    currentNodeMap[node.id] = node;\n    if (node.count > maxNodeCount) maxNodeCount = node.count;\n    const cachePosition = cachePositions ? cachePositions[node.id] : undefined;\n    if (cachePosition) {\n      node.x = cachePosition.x;\n      node.y = cachePosition.y;\n      node.new = false;\n    } else {\n      node.new = isNewGraph ? false : true;\n      if (manipulatePosition && !node.x && !node.y) {\n        node.x = manipulatePosition.x + 30 * Math.cos(Math.random() * Math.PI * 2);\n        node.y = manipulatePosition.y + 30 * Math.sin(Math.random() * Math.PI * 2);\n      }\n    }\n  });\n\n  let maxCount = -Infinity;\n  let minCount = Infinity;\n  // let maxCount = 0;\n  edges.forEach((edge) => {\n    // to avoid the dulplicated id to nodes\n    if (!edge.id) edge.id = uniqueId('edge');\n    else if (edge.id.split('-')[0] !== 'edge') edge.id = `edge-${edge.id}`;\n    // TODO: delete the following line after the queried data is correct\n    if (!currentNodeMap[edge.source] || !currentNodeMap[edge.target]) {\n      console.warn('edge source target does not exist', edge.source, edge.target, edge.id);\n      return;\n    }\n    const sourceNode = currentNodeMap[edge.source];\n    const targetNode = currentNodeMap[edge.target];\n\n    if (!sourceNode || !targetNode)\n      console.warn('source or target is not defined!!!', edge, sourceNode, targetNode);\n\n    // calculate the degree\n    sourceNode.degree++;\n    targetNode.degree++;\n    sourceNode.outDegree++;\n    targetNode.inDegree++;\n\n    if (edge.count > maxCount) maxCount = edge.count;\n    if (edge.count < minCount) minCount = edge.count;\n  });\n\n  nodes.sort(descendCompare(NODESIZEMAPPING));\n  const maxDegree = nodes[0].degree || 1;\n\n  const descreteNodes = [];\n  nodes.forEach((node, i) => {\n    // assign the size mapping to the outDegree\n    const countRatio = node.count / maxNodeCount;\n    const isRealNode = node.level === 0;\n    node.size = isRealNode ? DEFAULTNODESIZE : DEFAULTAGGREGATEDNODESIZE;\n    node.isReal = isRealNode;\n    node.labelCfg = {\n      position: 'bottom',\n      offset: 5,\n      style: {\n        fill: global.node.labelCfg.style.fill,\n        fontSize: 6 + countRatio * 6 || 12,\n        stroke: global.node.labelCfg.style.stroke,\n        lineWidth: 3,\n      },\n    };\n\n    if (!node.degree) {\n      descreteNodes.push(node);\n    }\n  });\n\n  const countRange = maxCount - minCount;\n  const minEdgeSize = 1;\n  const maxEdgeSize = 7;\n  const edgeSizeRange = maxEdgeSize - minEdgeSize;\n  edges.forEach((edge) => {\n    // set edges' style\n    const targetNode = currentNodeMap[edge.target];\n\n    const size = ((edge.count - minCount) / countRange) * edgeSizeRange + minEdgeSize || 1;\n    edge.size = size;\n\n    const arrowWidth = Math.max(size / 2 + 2, 3);\n    const arrowLength = 10;\n    const arrowBeging = targetNode.size + arrowLength;\n    let arrowPath = `M ${arrowBeging},0 L ${arrowBeging + arrowLength},-${arrowWidth} L ${arrowBeging + arrowLength\n      },${arrowWidth} Z`;\n    let d = targetNode.size / 2 + arrowLength;\n    if (edge.source === edge.target) {\n      edge.type = 'loop';\n      arrowPath = undefined;\n    }\n    const sourceNode = currentNodeMap[edge.source];\n    const isRealEdge = targetNode.isReal && sourceNode.isReal;\n    edge.isReal = isRealEdge;\n    const stroke = isRealEdge ? global.edge.style.realEdgeStroke : global.edge.style.stroke;\n    const opacity = isRealEdge\n      ? global.edge.style.realEdgeOpacity\n      : global.edge.style.strokeOpacity;\n    const dash = Math.max(size, 2);\n    const lineDash = isRealEdge ? undefined : [dash, dash];\n    edge.style = {\n      stroke,\n      strokeOpacity: opacity,\n      cursor: 'pointer',\n      lineAppendWidth: Math.max(edge.size || 5, 5),\n      fillOpacity: 1,\n      lineDash,\n      endArrow: arrowPath\n        ? {\n          path: arrowPath,\n          d,\n          fill: stroke,\n          strokeOpacity: 0,\n        }\n        : false,\n    };\n    edge.labelCfg = {\n      autoRotate: true,\n      style: {\n        stroke: global.edge.labelCfg.style.stroke,\n        fill: global.edge.labelCfg.style.fill,\n        lineWidth: 4,\n        fontSize: 12,\n        lineAppendWidth: 10,\n        opacity: 1,\n      },\n    };\n    if (!edge.oriLabel) edge.oriLabel = edge.label;\n    if (largeGraphMode || !edgeLabelVisible) edge.label = '';\n    else {\n      edge.label = labelFormatter(edge.label, labelMaxLength);\n    }\n\n    // arrange the other nodes around the hub\n    const sourceDis = sourceNode.size / 2 + 20;\n    const targetDis = targetNode.size / 2 + 20;\n    if (sourceNode.x && !targetNode.x) {\n      targetNode.x = sourceNode.x + sourceDis * Math.cos(Math.random() * Math.PI * 2);\n    }\n    if (sourceNode.y && !targetNode.y) {\n      targetNode.y = sourceNode.y + sourceDis * Math.sin(Math.random() * Math.PI * 2);\n    }\n    if (targetNode.x && !sourceNode.x) {\n      sourceNode.x = targetNode.x + targetDis * Math.cos(Math.random() * Math.PI * 2);\n    }\n    if (targetNode.y && !sourceNode.y) {\n      sourceNode.y = targetNode.y + targetDis * Math.sin(Math.random() * Math.PI * 2);\n    }\n\n    if (!sourceNode.x && !sourceNode.y && manipulatePosition) {\n      sourceNode.x = manipulatePosition.x + 30 * Math.cos(Math.random() * Math.PI * 2);\n      sourceNode.y = manipulatePosition.y + 30 * Math.sin(Math.random() * Math.PI * 2);\n    }\n    if (!targetNode.x && !targetNode.y && manipulatePosition) {\n      targetNode.x = manipulatePosition.x + 30 * Math.cos(Math.random() * Math.PI * 2);\n      targetNode.y = manipulatePosition.y + 30 * Math.sin(Math.random() * Math.PI * 2);\n    }\n  });\n\n  descreteNodeCenter = {\n    x: width - paddingLeft,\n    y: height - paddingTop,\n  };\n  descreteNodes.forEach((node) => {\n    if (!node.x && !node.y) {\n      node.x = descreteNodeCenter.x + 30 * Math.cos(Math.random() * Math.PI * 2);\n      node.y = descreteNodeCenter.y + 30 * Math.sin(Math.random() * Math.PI * 2);\n    }\n  });\n\n  G6.Util.processParallelEdges(edges, 12.5, 'custom-quadratic', 'custom-line');\n  return {\n    maxDegree,\n    edges,\n  };\n};\n\nconst getForceLayoutConfig = (graph, largeGraphMode, configSettings) => {\n  let {\n    linkDistance,\n    edgeStrength,\n    nodeStrength,\n    nodeSpacing,\n    preventOverlap,\n    nodeSize,\n    collideStrength,\n    alpha,\n    alphaDecay,\n    alphaMin,\n  } = configSettings || { preventOverlap: true };\n\n  if (!linkDistance && linkDistance !== 0) linkDistance = 225;\n  if (!edgeStrength && edgeStrength !== 0) edgeStrength = 50;\n  if (!nodeStrength && nodeStrength !== 0) nodeStrength = 200;\n  if (!nodeSpacing && nodeSpacing !== 0) nodeSpacing = 5;\n\n  const config = {\n    type: 'gForce',\n    minMovement: 0.01,\n    maxIteration: 5000,\n    preventOverlap,\n    damping: 0.99,\n    linkDistance: (d) => {\n      let dist = linkDistance;\n      const sourceNode = nodeMap[d.source] || aggregatedNodeMap[d.source];\n      const targetNode = nodeMap[d.target] || aggregatedNodeMap[d.target];\n      // // 两端都是聚合点\n      // if (sourceNode.level && targetNode.level) dist = linkDistance * 3;\n      // // 一端是聚合点，一端是真实节点\n      // else if (sourceNode.level || targetNode.level) dist = linkDistance * 1.5;\n      if (!sourceNode.level && !targetNode.level) dist = linkDistance * 0.3;\n      return dist;\n    },\n    edgeStrength: (d) => {\n      const sourceNode = nodeMap[d.source] || aggregatedNodeMap[d.source];\n      const targetNode = nodeMap[d.target] || aggregatedNodeMap[d.target];\n      // 聚合节点之间的引力小\n      if (sourceNode.level && targetNode.level) return edgeStrength / 2;\n      // 聚合节点与真实节点之间引力大\n      if (sourceNode.level || targetNode.level) return edgeStrength;\n      return edgeStrength;\n    },\n    nodeStrength: (d) => {\n      // 给离散点引力，让它们聚集\n      if (d.degree === 0) return -10;\n      // 聚合点的斥力大\n      if (d.level) return nodeStrength * 2;\n      return nodeStrength;\n    },\n    nodeSize: (d) => {\n      if (!nodeSize && d.size) return d.size;\n      return 50;\n    },\n    nodeSpacing: (d) => {\n      if (d.degree === 0) return nodeSpacing * 2;\n      if (d.level) return nodeSpacing;\n      return nodeSpacing;\n    },\n    onLayoutEnd: () => {\n      if (largeGraphMode) {\n        graph.getEdges().forEach((edge) => {\n          if (!edge.oriLabel) return;\n          edge.update({\n            label: labelFormatter(edge.oriLabel, labelMaxLength),\n          });\n        });\n      }\n    },\n    tick: () => {\n      graph.refreshPositions();\n    },\n  };\n\n  if (nodeSize) config['nodeSize'] = nodeSize;\n  if (collideStrength) config['collideStrength'] = collideStrength;\n  if (alpha) config['alpha'] = alpha;\n  if (alphaDecay) config['alphaDecay'] = alphaDecay;\n  if (alphaMin) config['alphaMin'] = alphaMin;\n\n  return config;\n};\n\nconst hideItems = (graph) => {\n  hiddenItemIds.forEach((id) => {\n    graph.hideItem(id);\n  });\n};\n\nconst showItems = (graph) => {\n  graph.getNodes().forEach((node) => {\n    if (!node.isVisible()) graph.showItem(node);\n  });\n  graph.getEdges().forEach((edge) => {\n    if (!edge.isVisible()) edge.showItem(edge);\n  });\n  hiddenItemIds = [];\n};\n\nconst handleRefreshGraph = (\n  graph,\n  graphData,\n  width,\n  height,\n  largeGraphMode,\n  edgeLabelVisible,\n  isNewGraph,\n) => {\n  if (!graphData || !graph) return;\n  clearFocusItemState(graph);\n  // reset the filtering\n  graph.getNodes().forEach((node) => {\n    if (!node.isVisible()) node.show();\n  });\n  graph.getEdges().forEach((edge) => {\n    if (!edge.isVisible()) edge.show();\n  });\n\n  let nodes = [],\n    edges = [];\n\n  nodes = graphData.nodes;\n  const processRes = processNodesEdges(\n    nodes,\n    graphData.edges || [],\n    width,\n    height,\n    largeGraphMode,\n    edgeLabelVisible,\n    isNewGraph,\n  );\n\n  edges = processRes.edges;\n\n  graph.changeData({ nodes, edges });\n\n  hideItems(graph);\n  graph.getNodes().forEach((node) => {\n    node.toFront();\n  });\n\n  // layout.instance.stop();\n  // force 需要使用不同 id 的对象才能进行全新的布局，否则会使用原来的引用。因此复制一份节点和边作为 force 的布局数据\n  layout.instance.init({\n    nodes: graphData.nodes,\n    edges,\n  });\n\n  layout.instance.minMovement = 0.0001;\n  // layout.instance.getCenter = d => {\n  // \tconst cachePosition = cachePositions[d.id];\n  // \tif (!cachePosition && (d.x || d.y)) return [d.x, d.y, 10];\n  // \telse if (cachePosition) return [cachePosition.x, cachePosition.y, 10];\n  // \treturn [width / 2, height / 2, 10];\n  // }\n  layout.instance.getMass = (d) => {\n    const cachePosition = cachePositions[d.id];\n    if (cachePosition) return 5;\n    return 1;\n  };\n  layout.instance.execute();\n  return { nodes, edges };\n};\n\nconst getMixedGraph = (\n  aggregatedData,\n  originData,\n  nodeMap,\n  aggregatedNodeMap,\n  expandArray,\n  collapseArray,\n) => {\n  let nodes = [],\n    edges = [];\n\n  const expandMap = {},\n    collapseMap = {};\n  expandArray.forEach((expandModel) => {\n    expandMap[expandModel.id] = true;\n  });\n  collapseArray.forEach((collapseModel) => {\n    collapseMap[collapseModel.id] = true;\n  });\n\n  aggregatedData.clusters.forEach((cluster, i) => {\n    if (expandMap[cluster.id]) {\n      nodes = nodes.concat(cluster.nodes);\n      aggregatedNodeMap[cluster.id].expanded = true;\n    } else {\n      nodes.push(aggregatedNodeMap[cluster.id]);\n      aggregatedNodeMap[cluster.id].expanded = false;\n    }\n  });\n  originData.edges.forEach((edge) => {\n    const isSourceInExpandArray = expandMap[nodeMap[edge.source].clusterId];\n    const isTargetInExpandArray = expandMap[nodeMap[edge.target].clusterId];\n    if (isSourceInExpandArray && isTargetInExpandArray) {\n      edges.push(edge);\n    } else if (isSourceInExpandArray) {\n      const targetClusterId = nodeMap[edge.target].clusterId;\n      const vedge = {\n        source: edge.source,\n        target: targetClusterId,\n        id: uniqueId('edge'),\n        label: '',\n      };\n      edges.push(vedge);\n    } else if (isTargetInExpandArray) {\n      const sourceClusterId = nodeMap[edge.source].clusterId;\n      const vedge = {\n        target: edge.target,\n        source: sourceClusterId,\n        id: uniqueId('edge'),\n        label: '',\n      };\n      edges.push(vedge);\n    }\n  });\n  aggregatedData.clusterEdges.forEach((edge) => {\n    if (expandMap[edge.source] || expandMap[edge.target]) return;\n    else edges.push(edge);\n  });\n  return { nodes, edges };\n};\n\nconst getNeighborMixedGraph = (\n  centerNodeModel,\n  step,\n  originData,\n  clusteredData,\n  currentData,\n  nodeMap,\n  aggregatedNodeMap,\n  maxNeighborNumPerNode = 5,\n) => {\n  // update the manipulate position for center gravity of the new nodes\n  manipulatePosition = { x: centerNodeModel.x, y: centerNodeModel.y };\n\n  // the neighborSubGraph does not include the centerNodeModel. the elements are all generated new nodes and edges\n  const neighborSubGraph = generateNeighbors(centerNodeModel, step, maxNeighborNumPerNode);\n  // update the origin data\n  originData.nodes = originData.nodes.concat(neighborSubGraph.nodes);\n  originData.edges = originData.edges.concat(neighborSubGraph.edges);\n  // update the origin nodeMap\n  neighborSubGraph.nodes.forEach((node) => {\n    nodeMap[node.id] = node;\n  });\n  // update the clusteredData\n  const clusterId = centerNodeModel.clusterId;\n  clusteredData.clusters.forEach((cluster) => {\n    if (cluster.id !== clusterId) return;\n    cluster.nodes = cluster.nodes.concat(neighborSubGraph.nodes);\n    cluster.sumTot += neighborSubGraph.edges.length;\n  });\n  // update the count\n  aggregatedNodeMap[clusterId].count += neighborSubGraph.nodes.length;\n\n  currentData.nodes = currentData.nodes.concat(neighborSubGraph.nodes);\n  currentData.edges = currentData.edges.concat(neighborSubGraph.edges);\n  return currentData;\n};\n\nconst generateNeighbors = (centerNodeModel, step, maxNeighborNumPerNode = 5) => {\n  if (step <= 0) return undefined;\n  let nodes = [],\n    edges = [];\n  const clusterId = centerNodeModel.clusterId;\n  const centerId = centerNodeModel.id;\n  const neighborNum = Math.ceil(Math.random() * maxNeighborNumPerNode);\n  for (let i = 0; i < neighborNum; i++) {\n    const neighborNode = {\n      id: uniqueId('node'),\n      clusterId,\n      level: 0,\n      colorSet: centerNodeModel.colorSet,\n    };\n    nodes.push(neighborNode);\n    const dire = Math.random() > 0.5;\n    const source = dire ? centerId : neighborNode.id;\n    const target = dire ? neighborNode.id : centerId;\n    const neighborEdge = {\n      id: uniqueId('edge'),\n      source,\n      target,\n      label: `${source}-${target}`,\n    };\n    edges.push(neighborEdge);\n    const subNeighbors = generateNeighbors(neighborNode, step - 1, maxNeighborNumPerNode);\n    if (subNeighbors) {\n      nodes = nodes.concat(subNeighbors.nodes);\n      edges = edges.concat(subNeighbors.edges);\n    }\n  }\n  return { nodes, edges };\n};\n\nconst getExtractNodeMixedGraph = (\n  extractNodeData,\n  originData,\n  nodeMap,\n  aggregatedNodeMap,\n  currentUnproccessedData,\n) => {\n  const extractNodeId = extractNodeData.id;\n  // const extractNodeClusterId = extractNodeData.clusterId;\n  // push to the current rendering data\n  currentUnproccessedData.nodes.push(extractNodeData);\n  // update the count of aggregatedNodeMap, when to revert?\n  // aggregatedNodeMap[extractNodeClusterId].count --;\n\n  // extract the related edges\n  originData.edges.forEach((edge) => {\n    if (edge.source === extractNodeId) {\n      const targetClusterId = nodeMap[edge.target].clusterId;\n      if (!aggregatedNodeMap[targetClusterId].expanded) {\n        // did not expand, create an virtual edge fromt he extract node to the cluster\n        currentUnproccessedData.edges.push({\n          id: uniqueId('edge'),\n          source: extractNodeId,\n          target: targetClusterId,\n        });\n      } else {\n        // if the cluster is already expanded, push the origin edge\n        currentUnproccessedData.edges.push(edge);\n      }\n    } else if (edge.target === extractNodeId) {\n      const sourceClusterId = nodeMap[edge.source].clusterId;\n      if (!aggregatedNodeMap[sourceClusterId].expanded) {\n        // did not expand, create an virtual edge fromt he extract node to the cluster\n        currentUnproccessedData.edges.push({\n          id: uniqueId('edge'),\n          target: extractNodeId,\n          source: sourceClusterId,\n        });\n      } else {\n        // if the cluster is already expanded, push the origin edge\n        currentUnproccessedData.edges.push(edge);\n      }\n    }\n  });\n  return currentUnproccessedData;\n};\n\nconst examAncestors = (model, expandedArray, length, keepTags) => {\n  for (let i = 0; i < length; i++) {\n    const expandedNode = expandedArray[i];\n    if (!keepTags[i] && model.parentId === expandedNode.id) {\n      keepTags[i] = true; // 需要被保留\n      examAncestors(expandedNode, expandedArray, length, keepTags);\n      break;\n    }\n  }\n};\n\nconst manageExpandCollapseArray = (nodeNumber, model, collapseArray, expandArray) => {\n  manipulatePosition = { x: model.x, y: model.y };\n\n  // 维护 expandArray，若当前画布节点数高于上限，移出 expandedArray 中非 model 祖先的节点)\n  if (nodeNumber > NODE_LIMIT) {\n    // 若 keepTags[i] 为 true，则 expandedArray 的第 i 个节点需要被保留\n    const keepTags = {};\n    const expandLen = expandArray.length;\n    // 检查 X 的所有祖先并标记 keepTags\n    examAncestors(model, expandArray, expandLen, keepTags);\n    // 寻找 expandedArray 中第一个 keepTags 不为 true 的点\n    let shiftNodeIdx = -1;\n    for (let i = 0; i < expandLen; i++) {\n      if (!keepTags[i]) {\n        shiftNodeIdx = i;\n        break;\n      }\n    }\n    // 如果有符合条件的节点，将其从 expandedArray 中移除\n    if (shiftNodeIdx !== -1) {\n      let foundNode = expandArray[shiftNodeIdx];\n      if (foundNode.level === 2) {\n        let foundLevel1 = false;\n        // 找到 expandedArray 中 parentId = foundNode.id 且 level = 1 的第一个节点\n        for (let i = 0; i < expandLen; i++) {\n          const eNode = expandArray[i];\n          if (eNode.parentId === foundNode.id && eNode.level === 1) {\n            foundLevel1 = true;\n            foundNode = eNode;\n            expandArray.splice(i, 1);\n            break;\n          }\n        }\n        // 若未找到，则 foundNode 不变, 直接删去 foundNode\n        if (!foundLevel1) expandArray.splice(shiftNodeIdx, 1);\n      } else {\n        // 直接删去 foundNode\n        expandArray.splice(shiftNodeIdx, 1);\n      }\n      // const removedNode = expandedArray.splice(shiftNodeIdx, 1); // splice returns an array\n      const idSplits = foundNode.id.split('-');\n      let collapseNodeId;\n      // 去掉最后一个后缀\n      for (let i = 0; i < idSplits.length - 1; i++) {\n        const str = idSplits[i];\n        if (collapseNodeId) collapseNodeId = `${collapseNodeId}-${str}`;\n        else collapseNodeId = str;\n      }\n      const collapseNode = {\n        id: collapseNodeId,\n        parentId: foundNode.id,\n        level: foundNode.level - 1,\n      };\n      collapseArray.push(collapseNode);\n    }\n  }\n\n  const currentNode = {\n    id: model.id,\n    level: model.level,\n    parentId: model.parentId,\n  };\n\n  // 加入当前需要展开的节点\n  expandArray.push(currentNode);\n\n  graph.get('canvas').setCursor('default');\n  return { expandArray, collapseArray };\n};\n\nconst cacheNodePositions = (nodes) => {\n  const positionMap = {};\n  const nodeLength = nodes.length;\n  for (let i = 0; i < nodeLength; i++) {\n    const node = nodes[i].getModel();\n    positionMap[node.id] = {\n      x: node.x,\n      y: node.y,\n      level: node.level,\n    };\n  }\n  return positionMap;\n};\n\nconst stopLayout = () => {\n  layout.instance.stop();\n};\n\nconst bindListener = (graph) => {\n  graph.on('keydown', (evt) => {\n    const code = evt.key;\n    if (!code) {\n      return;\n    }\n    if (code.toLowerCase() === 'shift') {\n      shiftKeydown = true;\n    } else {\n      shiftKeydown = false;\n    }\n  });\n  graph.on('keyup', (evt) => {\n    const code = evt.key;\n    if (!code) {\n      return;\n    }\n    if (code.toLowerCase() === 'shift') {\n      shiftKeydown = false;\n    }\n  });\n  graph.on('node:mouseenter', (evt) => {\n    const { item } = evt;\n    const model = item.getModel();\n    const currentLabel = model.label;\n    model.oriFontSize = model.labelCfg.style.fontSize;\n    item.update({\n      label: model.oriLabel,\n    });\n    model.oriLabel = currentLabel;\n    graph.setItemState(item, 'hover', true);\n    item.toFront();\n  });\n\n  graph.on('node:mouseleave', (evt) => {\n    const { item } = evt;\n    const model = item.getModel();\n    const currentLabel = model.label;\n    item.update({\n      label: model.oriLabel,\n    });\n    model.oriLabel = currentLabel;\n    graph.setItemState(item, 'hover', false);\n  });\n\n  graph.on('edge:mouseenter', (evt) => {\n    const { item } = evt;\n    const model = item.getModel();\n    const currentLabel = model.label;\n    item.update({\n      label: model.oriLabel,\n    });\n    model.oriLabel = currentLabel;\n    item.toFront();\n    item.getSource().toFront();\n    item.getTarget().toFront();\n  });\n\n  graph.on('edge:mouseleave', (evt) => {\n    const { item } = evt;\n    const model = item.getModel();\n    const currentLabel = model.label;\n    item.update({\n      label: model.oriLabel,\n    });\n    model.oriLabel = currentLabel;\n  });\n  // click node to show the detail drawer\n  graph.on('node:click', (evt) => {\n    stopLayout();\n    if (!shiftKeydown) clearFocusItemState(graph);\n    else clearFocusEdgeState(graph);\n    const { item } = evt;\n\n    // highlight the clicked node, it is down by click-select\n    graph.setItemState(item, 'focus', true);\n\n    if (!shiftKeydown) {\n      // 将相关边也高亮\n      const relatedEdges = item.getEdges();\n      relatedEdges.forEach((edge) => {\n        graph.setItemState(edge, 'focus', true);\n      });\n    }\n  });\n\n  // click edge to show the detail of integrated edge drawer\n  graph.on('edge:click', (evt) => {\n    stopLayout();\n    if (!shiftKeydown) clearFocusItemState(graph);\n    const { item } = evt;\n    // highlight the clicked edge\n    graph.setItemState(item, 'focus', true);\n  });\n\n  // click canvas to cancel all the focus state\n  graph.on('canvas:click', (evt) => {\n    clearFocusItemState(graph);\n    console.log(graph.getGroup(), graph.getGroup().getBBox(), graph.getGroup().getCanvasBBox());\n  });\n};\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const descriptionDiv = document.createElement('div');\n    descriptionDiv.innerHTML = `<a href='/en/largegraph' target='_blanck'>Click【HERE】To Full Demo</a>\n      <br/>\n      <a href='/zh/largegraph' target='_blanck'>点击【这里】进入完整 Demo</a>`;\n    descriptionDiv.style.textAlign = 'right';\n    descriptionDiv.style.color = '#fff';\n    descriptionDiv.style.position = 'absolute';\n    descriptionDiv.style.right = '32px';\n    descriptionDiv.style.marginTop = '8px';\n    container.appendChild(descriptionDiv);\n\n    container.style.backgroundColor = '#2b2f33';\n\n    CANVAS_WIDTH = container.scrollWidth;\n    CANVAS_HEIGHT = (container.scrollHeight || 500) - 30;\n\n    nodeMap = {};\n    const clusteredData = louvain(data, false, 'weight');\n    const aggregatedData = { nodes: [], edges: [] };\n    clusteredData.clusters.forEach((cluster, i) => {\n      cluster.nodes.forEach((node) => {\n        node.level = 0;\n        node.label = node.id;\n        node.type = '';\n        node.colorSet = colorSets[i];\n        nodeMap[node.id] = node;\n      });\n      const cnode = {\n        id: cluster.id,\n        type: 'aggregated-node',\n        count: cluster.nodes.length,\n        level: 1,\n        label: cluster.id,\n        colorSet: colorSets[i],\n        idx: i,\n      };\n      aggregatedNodeMap[cluster.id] = cnode;\n      aggregatedData.nodes.push(cnode);\n    });\n    clusteredData.clusterEdges.forEach((clusterEdge) => {\n      const cedge = {\n        ...clusterEdge,\n        size: Math.log(clusterEdge.count),\n        label: '',\n        id: uniqueId('edge'),\n      };\n      if (cedge.source === cedge.target) {\n        cedge.type = 'loop';\n        cedge.loopCfg = {\n          dist: 20,\n        };\n      } else cedge.type = 'line';\n      aggregatedData.edges.push(cedge);\n    });\n\n    data.edges.forEach((edge) => {\n      edge.label = `${edge.source}-${edge.target}`;\n      edge.id = uniqueId('edge');\n    });\n\n    currentUnproccessedData = aggregatedData;\n\n    const { edges: processedEdges } = processNodesEdges(\n      currentUnproccessedData.nodes,\n      currentUnproccessedData.edges,\n      CANVAS_WIDTH,\n      CANVAS_HEIGHT,\n      largeGraphMode,\n      true,\n      true,\n    );\n\n    const contextMenu = new G6.Menu({\n      shouldBegin(evt) {\n        if (evt.target && evt.target.isCanvas && evt.target.isCanvas()) return true;\n        if (evt.item) return true;\n        return false;\n      },\n      getContent(evt) {\n        const { item } = evt;\n        if (evt.target && evt.target.isCanvas && evt.target.isCanvas()) {\n          return `<ul>\n          <li id='show'>Show all Hidden Items</li>\n          <li id='collapseAll'>Collapse all Clusters</li>\n        </ul>`;\n        } else if (!item) return;\n        const itemType = item.getType();\n        const model = item.getModel();\n        if (itemType && model) {\n          if (itemType === 'node') {\n            if (model.level !== 0) {\n              return `<ul>\n              <li id='expand'>Expand the Cluster</li>\n              <li id='hide'>Hide the Node</li>\n            </ul>`;\n            } else {\n              return `<ul>\n              <li id='collapse'>Collapse the Cluster</li>\n              <li id='neighbor-1'>Find 1-degree Neighbors</li>\n              <li id='neighbor-2'>Find 2-degree Neighbors</li>\n              <li id='neighbor-3'>Find 3-degree Neighbors</li>\n              <li id='hide'>Hide the Node</li>\n            </ul>`;\n            }\n          } else {\n            return `<ul>\n            <li id='hide'>Hide the Edge</li>\n          </ul>`;\n          }\n        }\n      },\n      handleMenuClick: (target, item) => {\n        const model = item && item.getModel();\n        const liIdStrs = target.id.split('-');\n        let mixedGraphData;\n        switch (liIdStrs[0]) {\n          case 'hide':\n            graph.hideItem(item);\n            hiddenItemIds.push(model.id);\n            break;\n          case 'expand':\n            const newArray = manageExpandCollapseArray(\n              graph.getNodes().length,\n              model,\n              collapseArray,\n              expandArray,\n            );\n            expandArray = newArray.expandArray;\n            collapseArray = newArray.collapseArray;\n            mixedGraphData = getMixedGraph(\n              clusteredData,\n              data,\n              nodeMap,\n              aggregatedNodeMap,\n              expandArray,\n              collapseArray,\n            );\n            break;\n          case 'collapse':\n            const aggregatedNode = aggregatedNodeMap[model.clusterId];\n            manipulatePosition = { x: aggregatedNode.x, y: aggregatedNode.y };\n            collapseArray.push(aggregatedNode);\n            for (let i = 0; i < expandArray.length; i++) {\n              if (expandArray[i].id === model.clusterId) {\n                expandArray.splice(i, 1);\n                break;\n              }\n            }\n            mixedGraphData = getMixedGraph(\n              clusteredData,\n              data,\n              nodeMap,\n              aggregatedNodeMap,\n              expandArray,\n              collapseArray,\n            );\n            break;\n          case 'collapseAll':\n            expandArray = [];\n            collapseArray = [];\n            mixedGraphData = getMixedGraph(\n              clusteredData,\n              data,\n              nodeMap,\n              aggregatedNodeMap,\n              expandArray,\n              collapseArray,\n            );\n            break;\n          case 'neighbor':\n            const expandNeighborSteps = parseInt(liIdStrs[1]);\n            mixedGraphData = getNeighborMixedGraph(\n              model,\n              expandNeighborSteps,\n              data,\n              clusteredData,\n              currentUnproccessedData,\n              nodeMap,\n              aggregatedNodeMap,\n              10,\n            );\n            break;\n          case 'show':\n            showItems(graph);\n            break;\n          default:\n            break;\n        }\n        if (mixedGraphData) {\n          cachePositions = cacheNodePositions(graph.getNodes());\n          currentUnproccessedData = mixedGraphData;\n          handleRefreshGraph(\n            graph,\n            currentUnproccessedData,\n            CANVAS_WIDTH,\n            CANVAS_HEIGHT,\n            largeGraphMode,\n            true,\n            false,\n          );\n        }\n      },\n      // offsetX and offsetY include the padding of the parent container\n      // 需要加上父级容器的 padding-left 16 与自身偏移量 10\n      offsetX: 16 + 10,\n      // 需要加上父级容器的 padding-top 24 、画布兄弟元素高度、与自身偏移量 10\n      offsetY: 0,\n      // the types of items that allow the menu show up\n      // 在哪些类型的元素上响应\n      itemTypes: ['node', 'edge', 'canvas'],\n    });\n\n    graph = new G6.Graph({\n      container: 'container',\n      width: CANVAS_WIDTH,\n      height: CANVAS_HEIGHT,\n      linkCenter: true,\n      minZoom: 0.1,\n      groupByTypes: false,\n      modes: {\n        default: [\n          {\n            type: 'drag-canvas',\n            enableOptimize: true,\n          },\n          {\n            type: 'zoom-canvas',\n            enableOptimize: true,\n            optimizeZoom: 0.01,\n          },\n          'drag-node',\n          'shortcuts-call',\n        ],\n        lassoSelect: [\n          {\n            type: 'zoom-canvas',\n            enableOptimize: true,\n            optimizeZoom: 0.01,\n          },\n          {\n            type: 'lasso-select',\n            selectedState: 'focus',\n            trigger: 'drag',\n          },\n        ],\n        fisheyeMode: [],\n      },\n      defaultNode: {\n        type: 'aggregated-node',\n        size: DEFAULTNODESIZE,\n      },\n      plugins: [contextMenu],\n    });\n\n    graph.get('canvas').set('localRefresh', false);\n\n    const layoutConfig = getForceLayoutConfig(graph, largeGraphMode);\n    layoutConfig.center = [CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2];\n    layout.instance = new G6.Layout['gForce'](layoutConfig);\n    layout.instance.init({\n      nodes: currentUnproccessedData.nodes,\n      edges: processedEdges,\n    });\n    layout.instance.execute();\n\n    bindListener(graph);\n    graph.data({ nodes: aggregatedData.nodes, edges: processedEdges });\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    const container = document.getElementById('container');\n    if (!container) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:{zh:"大规模图下钻式探索",en:"Large Graph Exploration"},filename:"largeGraph.js",isNew:!1},{id:"christmasBubbles",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yRU1QZbcQN4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n// 实际开发中把 window.AntVUtil 换成从 @antv/util 引入的相关模块\n// replace window.AntVUtil.isObject with\n// import { mix } from '@antv/util';\nconst { mix } = window.AntVUtil;\n\nlet showNodes = [];\nlet showEdges = [];\nlet curShowNodes = [];\nlet curShowEdges = [];\nlet nodes = [];\nlet edges = [];\nlet nodeMap = new Map();\nlet edgesMap = new Map();\nlet curShowNodesMap = new Map();\nlet highlighting = false;\nlet currentFocus;\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\n\nconst LIMIT_OVERFLOW_WIDTH = width;\nconst LIMIT_OVERFLOW_HEIGHT = height;\n\nconst mapNodeSizeAndFontSize = (nodes, propertyName, visualRange) => {\n  let minp = 9999999999;\n  let maxp = -9999999999;\n  nodes.forEach((node) => {\n    const propertyValue = node[propertyName] > 5000 ? 5000 : node[propertyName];\n    minp = propertyValue < minp ? propertyValue : minp;\n    maxp = propertyValue > maxp ? propertyValue : maxp;\n  });\n  const rangepLength = maxp - minp;\n  const rangevLength = visualRange[1] - visualRange[0];\n  nodes.forEach((node) => {\n    const propertyValue = node[propertyName] > 5000 ? 5000 : node[propertyName];\n    node.size = ((propertyValue - minp) / rangepLength) * rangevLength + visualRange[0];\n    if (node.labelCfg && node.labelCfg.style) {\n      const textLength = node.label.length;\n      let fontSize = (1.3 * node.size) / textLength;\n      if (fontSize < 11) fontSize = 11;\n      node.labelCfg.style.fontSize = fontSize;\n    }\n  });\n};\n\nconst Colors = { noun: '#588c73', adj: '#f2e394', v: '#d96459', adv: '#f2ae72' };\n\nlet graph;\nconst layoutCfg = {\n  type: 'force',\n  nodeSize: (d) => {\n    return d.size / 2 + 5;\n  },\n  nodeStrength: 2500,\n  collideStrength: 0.8,\n  alphaDecay: 0.01,\n  preventOverlap: true,\n  onTick: () => {\n    const nodeItems = graph.getNodes();\n    const height = graph.get('height');\n    const width = graph.get('width');\n    const padding = 10;\n    nodeItems.forEach((item) => {\n      const model = item.getModel();\n      if (model.x > width - padding) model.x = width - padding;\n      else if (model.x < padding) model.x = padding;\n\n      if (model.y > height - padding) model.y = height - padding;\n      else if (model.y < padding) model.y = padding;\n    });\n  },\n};\n\n// G6.registerBehavior('double-finger-drag-canvas', {\n//   getEvents: function getEvents() {\n//     return {\n//       wheel: 'onWheel'\n//     };\n//   },\n\n//   onWheel: ev => {\n//     if (ev.ctrlKey) {\n//       const canvas = graph.get('canvas');\n//       const point = canvas.getPointByClient(ev.clientX, ev.clientY);\n//       let ratio = graph.getZoom();\n//       if (ev.wheelDelta > 0) {\n//         ratio = ratio + ratio * 0.05;\n//       } else {\n//         ratio = ratio - ratio * 0.05;\n//       }\n//       graph.zoomTo(ratio, {\n//         x: point.x,\n//         y: point.y\n//       });\n//     } else {\n//       const x = ev.deltaX || ev.movementX;\n//       const y = ev.deltaY || ev.movementY;\n//       translate(x, y);\n//     }\n//     ev.preventDefault();\n//   }\n// });\n\nG6.registerNode(\n  'bubble',\n  {\n    drawShape(cfg, group) {\n      const self = this;\n      const r = cfg.size / 2;\n      // a circle by path\n      const path = [\n        ['M', -r, 0],\n        ['C', -r, r / 2, -r / 2, r, 0, r],\n        ['C', r / 2, r, r, r / 2, r, 0],\n        ['C', r, -r / 2, r / 2, -r, 0, -r],\n        ['C', -r / 2, -r, -r, -r / 2, -r, 0],\n        ['Z'],\n      ];\n      const keyShape = group.addShape('path', {\n        attrs: {\n          x: 0,\n          y: 0,\n          path,\n          fill: cfg.color || 'steelblue',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape',\n      });\n\n      const mask = group.addShape('path', {\n        attrs: {\n          x: 0,\n          y: 0,\n          path,\n          opacity: 0.25,\n          fill: cfg.color || 'steelblue',\n          shadowColor: cfg.color, // cfg.color.split(' ')[2].substr(2),\n          shadowBlur: 40,\n          shadowOffsetX: 0,\n          shadowOffsetY: 30,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'mask-shape',\n      });\n\n      const spNum = 10; // split points number\n      const directions = [],\n        rs = [];\n      self.changeDirections(spNum, directions);\n      for (let i = 0; i < spNum; i++) {\n        const rr = r + directions[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions\n        if (rs[i] < 0.97 * r) rs[i] = 0.97 * r;\n        else if (rs[i] > 1.03 * r) rs[i] = 1.03 * r;\n        rs.push(rr);\n      }\n      keyShape.animate(\n        () => {\n          const path = self.getBubblePath(r, spNum, directions, rs);\n          return { path };\n        },\n        {\n          repeat: true,\n          duration: 1000,\n        },\n      );\n\n      const directions2 = [],\n        rs2 = [];\n      self.changeDirections(spNum, directions2);\n      for (let i = 0; i < spNum; i++) {\n        const rr = r + directions2[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions\n        if (rs2[i] < 0.97 * r) rs2[i] = 0.97 * r;\n        else if (rs2[i] > 1.03 * r) rs2[i] = 1.03 * r;\n        rs2.push(rr);\n      }\n      mask.animate(\n        () => {\n          const path = self.getBubblePath(r, spNum, directions2, rs2);\n          return { path };\n        },\n        {\n          repeat: true,\n          duration: 1000,\n        },\n      );\n      return keyShape;\n    },\n    changeDirections(num, directions) {\n      for (let i = 0; i < num; i++) {\n        if (!directions[i]) {\n          const rand = Math.random();\n          const dire = rand > 0.5 ? 1 : -1;\n          directions.push(dire);\n        } else {\n          directions[i] = -1 * directions[i];\n        }\n      }\n      return directions;\n    },\n    getBubblePath(r, spNum, directions, rs) {\n      const path = [];\n      const cpNum = spNum * 2; // control points number\n      const unitAngle = (Math.PI * 2) / spNum; // base angle for split points\n      let angleSum = 0;\n      const sps = [];\n      const cps = [];\n      for (let i = 0; i < spNum; i++) {\n        const speed = 0.001 * Math.random();\n        rs[i] = rs[i] + directions[i] * speed * r; // +-r/6, the sign according to the directions\n        if (rs[i] < 0.97 * r) {\n          rs[i] = 0.97 * r;\n          directions[i] = -1 * directions[i];\n        } else if (rs[i] > 1.03 * r) {\n          rs[i] = 1.03 * r;\n          directions[i] = -1 * directions[i];\n        }\n        const spX = rs[i] * Math.cos(angleSum);\n        const spY = rs[i] * Math.sin(angleSum);\n        sps.push({ x: spX, y: spY });\n        for (let j = 0; j < 2; j++) {\n          const cpAngleRand = unitAngle / 3;\n          const cpR = rs[i] / Math.cos(cpAngleRand);\n          const sign = j === 0 ? -1 : 1;\n          const x = cpR * Math.cos(angleSum + sign * cpAngleRand);\n          const y = cpR * Math.sin(angleSum + sign * cpAngleRand);\n          cps.push({ x, y });\n        }\n        angleSum += unitAngle;\n      }\n      path.push(['M', sps[0].x, sps[0].y]);\n      for (let i = 1; i < spNum; i++) {\n        path.push([\n          'C',\n          cps[2 * i - 1].x,\n          cps[2 * i - 1].y,\n          cps[2 * i].x,\n          cps[2 * i].y,\n          sps[i].x,\n          sps[i].y,\n        ]);\n      }\n      path.push(['C', cps[cpNum - 1].x, cps[cpNum - 1].y, cps[0].x, cps[0].y, sps[0].x, sps[0].y]);\n      path.push(['Z']);\n      return path;\n    },\n  },\n  'single-node',\n);\n\nG6.registerNode(\n  'animate-circle',\n  {\n    setState(name, value, item) {\n      const shape = item.get('keyShape');\n      const label = shape.get('parent').get('children')[1];\n      if (name === 'disappearing' && value) {\n        shape.animate(\n          (ratio) => {\n            return {\n              opacity: 1 - ratio,\n              r: shape.attr('r') * (1 - ratio),\n            };\n          },\n          {\n            duration: 200,\n          },\n        );\n        label.animate(\n          (ratio) => {\n            return {\n              opacity: 1 - ratio,\n            };\n          },\n          {\n            duration: 500,\n          },\n        );\n      } else if (name === 'appearing' && value) {\n        const r = item.getModel().size / 2;\n        shape.animate(\n          (ratio) => {\n            return {\n              opacity: ratio,\n              r: r * ratio,\n              fill: shape.attr('fill'),\n            };\n          },\n          {\n            duration: 300,\n          },\n        );\n        label.animate(\n          (ratio) => {\n            return {\n              opacity: ratio,\n            };\n          },\n          {\n            duration: 500,\n          },\n        );\n      }\n    },\n  },\n  'circle',\n);\n\nG6.registerEdge(\n  'animate-line',\n  {\n    drawShape(cfg, group) {\n      const self = this;\n      let shapeStyle = self.getShapeStyle(cfg);\n      shapeStyle = mix(shapeStyle, {\n        opacity: 0,\n        strokeOpacity: 0,\n      });\n      const keyShape = group.addShape('path', {\n        attrs: shapeStyle,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape',\n      });\n      return keyShape;\n    },\n    afterDraw(cfg, group) {\n      const shape = group.get('children')[0];\n      shape.animate(\n        (ratio) => {\n          const opacity = ratio * cfg.style.opacity;\n          const strokeOpacity = ratio * cfg.style.strokeOpacity;\n          return {\n            opacity: ratio || opacity,\n            strokeOpacity: ratio || strokeOpacity,\n          };\n        },\n        {\n          duration: 300,\n        },\n      );\n    },\n    setState(name, value, item) {\n      const shape = item.get('keyShape');\n      if (name === 'disappearing' && value) {\n        shape.animate(\n          (ratio) => {\n            return {\n              opacity: 1 - ratio,\n              strokeOpacity: 1 - ratio,\n            };\n          },\n          {\n            duration: 200,\n          },\n        );\n      }\n    },\n  },\n  'line',\n);\n\ngraph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  layout: layoutCfg,\n  modes: {\n    default: ['drag-canvas'],\n  },\n  defaultNode: {\n    type: 'bubble',\n    size: 30,\n    labelCfg: {\n      position: 'center',\n      style: {\n        fill: 'white',\n        fontStyle: 'bold',\n      },\n    },\n  },\n  defaultEdge: {\n    color: '#888',\n    type: 'animate-line',\n  },\n});\n\nfunction translate(x, y) {\n  let moveX = x;\n  let moveY = y;\n\n  /* 获得当前偏移量*/\n  const group = graph.get('group');\n  const bbox = group.getBBox();\n  const leftTopPoint = graph.getCanvasByPoint(bbox.minX, bbox.minY);\n  const rightBottomPoint = graph.getCanvasByPoint(bbox.maxX, bbox.maxY);\n  /* 如果 x 轴在区域内，不允许左右超过100 */\n  if (x < 0 && leftTopPoint.x - x > LIMIT_OVERFLOW_WIDTH) {\n    moveX = 0;\n  }\n  if (x > 0 && rightBottomPoint.x - x < width - LIMIT_OVERFLOW_WIDTH) {\n    moveX = 0;\n  }\n\n  if (y < 0 && leftTopPoint.y - y > LIMIT_OVERFLOW_HEIGHT) {\n    moveY = 0;\n  }\n  if (y > 0 && rightBottomPoint.y - y < height - LIMIT_OVERFLOW_HEIGHT) {\n    moveY = 0;\n  }\n  graph.translate(-moveX, -moveY);\n}\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n}\ngraph.on('node:dragstart', (e) => {\n  graph.layout();\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:drag', (e) => {\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:dragend', (e) => {\n  e.item.get('model').fx = null;\n  e.item.get('model').fy = null;\n});\n\nconst loadData = (data) => {\n  const layoutController = graph.get('layoutController');\n  layoutController.layoutCfg.nodeStrength = 30;\n  layoutController.layoutCfg.collideStrength = 0.8;\n  layoutController.layoutCfg.alphaDecay = 0.01;\n  nodes = data.nodes;\n  edges = data.edges;\n\n  showNodes = [];\n  showEdges = [];\n  nodeMap = new Map();\n  edgesMap = new Map();\n  // find the roots\n  nodes.forEach((node) => {\n    if (!node.neighbor) {\n      node.label = node.text;\n      node.color = Colors[node.type];\n      node.style = {\n        fill: Colors[node.type],\n        lineWidth: 0,\n      };\n      let labelColor = '#fff';\n      if (node.type === 'adj') {\n        labelColor = Colors.noun;\n      }\n      node.labelCfg = {\n        style: {\n          fontSize: 15,\n          fill: labelColor,\n          fontWeight: 300,\n        },\n      };\n      node.x = Math.random() * 800;\n      node.y = Math.random() * 800;\n      showNodes.push(node);\n    }\n    nodeMap.set(node.id, node);\n  });\n\n  mapNodeSizeAndFontSize(showNodes, 'count', [40, 120]);\n  showNodes.forEach((snode) => {\n    if (snode.size < 80) {\n      snode.type = 'circle';\n    }\n  });\n\n  edges.forEach((edge) => {\n    // map the id\n    edge.id = `${edge.source}-${edge.target}`;\n    edge.style = {\n      lineWidth: 0.5,\n      opacity: 1,\n      strokeOpacity: 1,\n    };\n    edgesMap.set(edge.id, edge);\n  });\n  graph.data({\n    nodes: showNodes,\n    edges: showEdges,\n  });\n  graph.render();\n};\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/0a749386-8593-44a2-a132-81dfa1fc3158.json')\n  .then((res) => res.json())\n  .then((data) => {\n    loadData(data);\n  });\n\n// click root to expand\ngraph.on('node:click', (e) => {\n  curShowNodes = [];\n  curShowEdges = [];\n  const item = e.item;\n  const model = item.getModel();\n  if (model.neighbor) {\n    return;\n  }\n  // if clicked a root, hide unrelated items and show the related items\n  if (!model.neighbor) {\n    const layoutController = graph.get('layoutController');\n    const forceLayout = layoutController.layoutMethods[0];\n    forceLayout.forceSimulation.stop();\n    // light the level 0 nodes\n    showNodes.forEach((snode) => {\n      if (snode.x < 0.5 * width) {\n        snode.x = 300;\n      } else {\n        snode.x = width - 300;\n      }\n    });\n    model.x = width / 2;\n    model.y = height / 2;\n    // animatively hide the items which are going to disappear\n    if (curShowEdges.length) {\n      curShowEdges.forEach((csedge) => {\n        const item = graph.findById(csedge.id);\n        item && graph.setItemState(item, 'disappearing', true);\n      });\n    }\n    curShowNodes.forEach((csnode) => {\n      const item = graph.findById(csnode.id);\n      item && graph.setItemState(item, 'disappearing', true);\n    });\n    graph.positionsAnimate();\n\n    // reset curShowNodes nad curShowEdges\n    curShowNodes = [];\n    curShowEdges = [];\n\n    // click on the same node which is the current focus node, hide the small nodes, change the layout parameters to roots view\n    if (currentFocus && currentFocus.id === model.id) {\n      currentFocus = undefined;\n      layoutController.layoutCfg.nodeStrength = 100;\n      layoutController.layoutCfg.collideStrength = 0.8;\n      layoutController.layoutCfg.alphaDecay = 0.01;\n    } else {\n      // click other focus node, hide the current small nodes and show the related nodes\n      currentFocus = model;\n      // change data after the original items disappearing\n      const layoutController = graph.get('layoutController');\n      layoutController.layoutCfg.nodeStrength = () => {\n        return -80;\n      };\n      layoutController.layoutCfg.collideStrength = 0.2;\n      layoutController.layoutCfg.linkDistance = (d) => {\n        if (!d.source.neighbor && !d.target.neighbor) return 150;\n        return 80;\n      };\n      layoutController.layoutCfg.edgeStrength = () => {\n        return 2;\n      };\n\n      curShowNodesMap = new Map();\n      // find the nodes which are the descendants of clicked model\n      edges.forEach((edge) => {\n        let nodeId = '';\n        let node;\n        if (edge.source === model.id) {\n          nodeId = edge.target;\n        } else if (edge.target === model.id) {\n          nodeId = edge.source;\n        } else {\n          return;\n        }\n        nodes.forEach((tnode) => {\n          if (tnode.id === nodeId) {\n            node = tnode;\n          }\n        });\n        if (!node) return;\n        const randomAngle = Math.random() * 2 * Math.PI;\n        node.x = model.x + (Math.cos(randomAngle) * model.size) / 2 + 10;\n        node.y = model.y + (Math.sin(randomAngle) * model.size) / 2 + 10;\n        // const dist = (model.x - node.x) * (model.x - node.x) + (model.y - node.y) * (model.y - node.y);\n\n        if (!node.style) node.style = {};\n        node.style.lineWidth = 0;\n        node.style.opacity = 1;\n        if (node.neighbor) {\n          node.type = 'animate-circle';\n          node.label = node.text;\n          const color = model.style.fill;\n          node.color = color;\n          node.style.fill = '#fff';\n          node.style.lineWidth = 1;\n          node.size = 30;\n          node.labelCfg = {\n            style: {\n              fontSize: 13,\n              lineHeight: 19,\n              fill: '#697B8C',\n            },\n            position: 'center',\n          };\n        }\n        curShowNodes.push(node);\n        curShowNodesMap.set(node.id, node);\n\n        // add the edge connect from model to node which exists in edges\n        const edgeId = `${model.id}-${node.id}`;\n        const medge = edgesMap.get(edgeId);\n        if (medge) {\n          medge.color = model.color;\n          curShowEdges.push(medge);\n        }\n      });\n\n      edges.forEach((edge) => {\n        if (edge.source === model.id || edge.target === model.id) {\n          curShowEdges.push(edge);\n        }\n      });\n    }\n    setTimeout(() => {\n      graph.changeData({\n        nodes: showNodes.concat(curShowNodes),\n        edges: showEdges.concat(curShowEdges),\n      });\n      const nodeItems = graph.getNodes();\n      const edgeItems = graph.getEdges();\n      edgeItems.forEach((item) => {\n        graph.clearItemStates(item);\n      });\n      nodeItems.forEach((item) => {\n        graph.clearItemStates(item);\n        graph.setItemState(item, 'appearing', true);\n      });\n    }, 400);\n  }\n});\ngraph.on('canvas:click', () => {\n  currentFocus = undefined;\n  const forceLayout = graph.get('layoutController').layoutMethods[0];\n  forceLayout.forceSimulation.stop();\n  const nodeItems = graph.getNodes();\n  const edgeItems = graph.getEdges();\n  if (highlighting) {\n    highlighting = false;\n  } else {\n    nodeItems.forEach((item) => {\n      const model = item.getModel();\n      if (model.neighbor) {\n        graph.setItemState(item, 'disappearing', true);\n      }\n    });\n    edgeItems.forEach((item) => {\n      graph.setItemState(item, 'disappearing', true);\n    });\n    curShowNodes = [];\n    curShowEdges = [];\n    setTimeout(() => {\n      const layoutController = graph.get('layoutController');\n      layoutController.layoutCfg.nodeStrength = 100;\n      layoutController.layoutCfg.collideStrength = 0.8;\n      layoutController.layoutCfg.alphaDecay = 0.01;\n\n      graph.changeData({\n        nodes: showNodes,\n        edges: showEdges,\n      });\n    }, 400);\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"圣诞推文可视化",en:"Christmas Bubbles"},filename:"christmasBubbles.js",isNew:!1},{id:"edgeBundling",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*z9iXQq_kcrYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\n/**\n * 该示例演示边绑定\n * by 十吾\n */\n\ninsertCss(`\n  .g6-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nconst lightBlue = 'rgb(119, 243, 252)';\nconst llightBlue16 = '#C8FDFC';\nconst lightOrange = 'rgb(230, 100, 64)';\nconst llightOrange16 = '#FFAA86';\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/7ba82250-8367-4351-82b2-d48604cd2261.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const nodes = data.nodes;\n    const edges = data.edges;\n    nodes.forEach((n) => {\n      n.y = -n.y;\n      n.degree = 0;\n      n.inDegree = 0;\n      n.outDegree = 0;\n    });\n    // compute the degree of each node\n    const nodeIdMap = new Map();\n    nodes.forEach((node) => {\n      nodeIdMap.set(node.id, node);\n    });\n    edges.forEach((e) => {\n      const source = nodeIdMap.get(e.source);\n      const target = nodeIdMap.get(e.target);\n      source.outDegree++;\n      target.inDegree++;\n      source.degree++;\n      target.degree++;\n      if (e.sytle === undefined) e.style = {};\n      e.style.lineWidth = 0.7;\n      e.style.strokeOpacity = 0.1;\n      e.style.stroke = `l(0) 0:${llightOrange16} 1:${llightBlue16}`;\n      if (nodeIdMap.get(e.source).x < nodeIdMap.get(e.target).x) {\n        e.style.stroke = `l(0) 0:${llightBlue16} 1:${llightOrange16}`;\n      }\n    });\n    let maxDegree = -9999;\n    let minDegree = 9999;\n    nodes.forEach((n) => {\n      if (maxDegree < n.degree) maxDegree = n.degree;\n      if (minDegree > n.degree) minDegree = n.degree;\n    });\n    const sizeRange = [1, 20];\n    const sizeDataRange = [minDegree, maxDegree];\n    scaleNodeProp(nodes, 'size', 'degree', sizeDataRange, sizeRange);\n\n    // customize the node\n    G6.registerNode(\n      'pie-node',\n      {\n        draw: (cfg, group) => {\n          const radius = cfg.size / 2;\n          const inPercentage = cfg.inDegree / cfg.degree;\n          const inAngle = inPercentage * Math.PI * 2;\n          const inArcEnd = [radius * Math.cos(inAngle), radius * Math.sin(inAngle)];\n          let isInBigArc = 1;\n          let isOutBigArc = 0;\n          if (inAngle > Math.PI) {\n            isInBigArc = 0;\n            isOutBigArc = 1;\n          }\n          const fanIn = group.addShape('path', {\n            attrs: {\n              path: [\n                ['M', radius, 0],\n                ['A', radius, radius, 0, isInBigArc, 0, inArcEnd[0], inArcEnd[1]],\n                ['L', 0, 0],\n                ['Z'],\n              ],\n              stroke: lightOrange,\n              lineWidth: 0,\n              fill: lightOrange,\n            },\n            // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n            name: 'fan-in-path',\n          });\n\n          group.addShape('path', {\n            attrs: {\n              path: [\n                ['M', inArcEnd[0], inArcEnd[1]],\n                ['A', radius, radius, 0, isOutBigArc, 0, radius, 0],\n                ['L', 0, 0],\n                ['Z'],\n              ],\n              stroke: lightBlue,\n              lineWidth: 0,\n              fill: lightBlue,\n            },\n            // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n            name: 'fan-out-path',\n          });\n          return fanIn;\n        },\n      },\n      'single-node',\n    );\n\n    const edgeBundling = new G6.Bundling({\n      bundleThreshold: 0.6,\n      K: 100,\n    });\n\n    const container = document.getElementById('container');\n    container.style.background = '#000';\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.Graph({\n      container: 'container',\n      width,\n      height,\n      plugins: [edgeBundling],\n      fitView: true,\n      defaultNode: {\n        type: 'pie-node',\n        size: 3,\n        color: 'steelblue',\n        style: {\n          lineWidth: 0,\n          fill: 'steelblue',\n        },\n      },\n      modes: {\n        default: [\n          'drag-canvas',\n          'zoom-canvas',\n          {\n            type: 'tooltip',\n            formatText(model) {\n              const text = `Longitude: ${model.lon} \\n Latitude: ${model.lat}`;\n              return text;\n            },\n            shouldUpdate: (e) => true,\n          },\n        ],\n      },\n    });\n\n    edgeBundling.bundling(data);\n    graph.data(data);\n    graph.render();\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n\nfunction scaleNodeProp(nodes, propName, refPropName, dataRange, outRange) {\n  const outLength = outRange[1] - outRange[0];\n  const dataLength = dataRange[1] - dataRange[0];\n  nodes.forEach((n) => {\n    n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];\n  });\n}\n",title:{zh:"美国迁徙图边绑定",en:"Edge Bundling"},filename:"edgeBundling.js",isNew:!1},{id:"decisionBubbles",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wvofQ6DuC0YAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * by Shiwu\n */\nlet showNodes = [];\nlet showEdges = [];\nlet curShowNodes = [];\nlet curShowEdges = [];\nlet nodes = [];\nlet edges = [];\nlet nodeMap = new Map();\nlet edgesMap = new Map();\nlet curShowNodesMap = new Map();\nlet highlighting = false;\nlet currentFocus;\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\n\nconst LIMIT_OVERFLOW_WIDTH = width;\nconst LIMIT_OVERFLOW_HEIGHT = height;\n\nconst mapNodeSize = (nodes, propertyName, visualRange) => {\n  let minp = 9999999999;\n  let maxp = -9999999999;\n  nodes.forEach((node) => {\n    minp = node[propertyName] < minp ? node[propertyName] : minp;\n    maxp = node[propertyName] > maxp ? node[propertyName] : maxp;\n  });\n  const rangepLength = maxp - minp;\n  const rangevLength = visualRange[1] - visualRange[0];\n  nodes.forEach((node) => {\n    node.size = ((node[propertyName] - minp) / rangepLength) * rangevLength + visualRange[0];\n  });\n};\n\nconst lightColors = [\n  '#8FE9FF',\n  '#87EAEF',\n  '#FFC9E3',\n  '#A7C2FF',\n  '#FFA1E3',\n  '#FFE269',\n  '#BFCFEE',\n  '#FFA0C5',\n  '#D5FF86',\n];\nconst darkColors = [\n  '#7DA8FF',\n  '#44E6C1',\n  '#FF68A7',\n  '#7F86FF',\n  '#AE6CFF',\n  '#FF5A34',\n  '#5D7092',\n  '#FF6565',\n  '#6BFFDE',\n];\nconst uLightColors = [\n  '#CFF6FF',\n  '#BCFCFF',\n  '#FFECF5',\n  '#ECFBFF',\n  '#EAD9FF',\n  '#FFF8DA',\n  '#DCE2EE',\n  '#FFE7F0',\n  '#EEFFCE',\n];\nconst uDarkColors = [\n  '#CADBFF',\n  '#A9FFEB',\n  '#FFC4DD',\n  '#CACDFF',\n  '#FFD4F2',\n  '#FFD3C9',\n  '#EBF2FF',\n  '#FFCBCB',\n  '#CAFFF3',\n];\n\nconst gColors = [];\nconst unlightColorMap = new Map();\nlightColors.forEach((lcolor, i) => {\n  gColors.push('l(0) 0:' + lcolor + ' 1:' + darkColors[i]);\n  unlightColorMap.set(gColors[i], 'l(0) 0:' + uLightColors[i] + ' 1:' + uDarkColors[i]);\n});\n\nlet graph;\nconst layoutCfg = {\n  type: 'force',\n  nodeSize: (d) => {\n    return d.size / 2 + 5;\n  },\n  nodeStrength: 2500,\n  collideStrength: 0.8,\n  alphaDecay: 0.01,\n  preventOverlap: true,\n  onTick: () => {\n    const nodeItems = graph.getNodes();\n    const height = graph.get('height');\n    const width = graph.get('width');\n    const padding = 10;\n    nodeItems.forEach((item) => {\n      const model = item.getModel();\n      if (model.x > width - padding) model.x = width - padding;\n      else if (model.x < padding) model.x = padding;\n\n      if (model.y > height - padding) model.y = height - padding;\n      else if (model.y < padding) model.y = padding;\n    });\n  },\n};\n\nG6.registerBehavior('double-finger-drag-canvas', {\n  getEvents: function getEvents() {\n    return {\n      wheel: 'onWheel',\n    };\n  },\n\n  onWheel: (ev) => {\n    if (ev.ctrlKey) {\n      const canvas = graph.get('canvas');\n      const point = canvas.getPointByClient(ev.clientX, ev.clientY);\n      let ratio = graph.getZoom();\n      if (ev.wheelDelta > 0) {\n        ratio = ratio + ratio * 0.05;\n      } else {\n        ratio = ratio - ratio * 0.05;\n      }\n      graph.zoomTo(ratio, {\n        x: point.x,\n        y: point.y,\n      });\n    } else {\n      const x = ev.deltaX || ev.movementX;\n      const y = ev.deltaY || ev.movementY || (-ev.wheelDelta * 125) / 3;\n      translate(x, y);\n    }\n    ev.preventDefault();\n  },\n});\n\nG6.registerNode(\n  'bubble',\n  {\n    drawShape(cfg, group) {\n      const self = this;\n      const r = cfg.size / 2;\n      // a circle by path\n      const path = [\n        ['M', -r, 0],\n        ['C', -r, r / 2, -r / 2, r, 0, r],\n        ['C', r / 2, r, r, r / 2, r, 0],\n        ['C', r, -r / 2, r / 2, -r, 0, -r],\n        ['C', -r / 2, -r, -r, -r / 2, -r, 0],\n        ['Z'],\n      ];\n      const keyShape = group.addShape('path', {\n        attrs: {\n          x: 0,\n          y: 0,\n          path,\n          fill: cfg.color || 'steelblue',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape',\n      });\n\n      const mask = group.addShape('path', {\n        attrs: {\n          x: 0,\n          y: 0,\n          path,\n          opacity: 0.25,\n          fill: cfg.color || 'steelblue',\n          shadowColor: cfg.color.split(' ')[2].substr(2),\n          shadowBlur: 40,\n          shadowOffsetX: 0,\n          shadowOffsetY: 30,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'mask-shape',\n      });\n\n      const spNum = 10; // split points number\n      const directions = [],\n        rs = [];\n      self.changeDirections(spNum, directions);\n      for (let i = 0; i < spNum; i++) {\n        const rr = r + directions[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions\n        if (rs[i] < 0.97 * r) rs[i] = 0.97 * r;\n        else if (rs[i] > 1.03 * r) rs[i] = 1.03 * r;\n        rs.push(rr);\n      }\n      keyShape.animate(\n        () => {\n          const path = self.getBubblePath(r, spNum, directions, rs);\n          return { path };\n        },\n        {\n          repeat: true,\n          duration: 10000,\n        },\n      );\n\n      const directions2 = [],\n        rs2 = [];\n      self.changeDirections(spNum, directions2);\n      for (let i = 0; i < spNum; i++) {\n        const rr = r + directions2[i] * ((Math.random() * r) / 1000); // +-r/6, the sign according to the directions\n        if (rs2[i] < 0.97 * r) rs2[i] = 0.97 * r;\n        else if (rs2[i] > 1.03 * r) rs2[i] = 1.03 * r;\n        rs2.push(rr);\n      }\n      mask.animate(\n        () => {\n          const path = self.getBubblePath(r, spNum, directions2, rs2);\n          return { path };\n        },\n        {\n          repeat: true,\n          duration: 10000,\n        },\n      );\n      return keyShape;\n    },\n    changeDirections(num, directions) {\n      for (let i = 0; i < num; i++) {\n        if (!directions[i]) {\n          const rand = Math.random();\n          const dire = rand > 0.5 ? 1 : -1;\n          directions.push(dire);\n        } else {\n          directions[i] = -1 * directions[i];\n        }\n      }\n      return directions;\n    },\n    getBubblePath(r, spNum, directions, rs) {\n      const path = [];\n      const cpNum = spNum * 2; // control points number\n      const unitAngle = (Math.PI * 2) / spNum; // base angle for split points\n      let angleSum = 0;\n      const sps = [];\n      const cps = [];\n      for (let i = 0; i < spNum; i++) {\n        const speed = 0.001 * Math.random();\n        rs[i] = rs[i] + directions[i] * speed * r; // +-r/6, the sign according to the directions\n        if (rs[i] < 0.97 * r) {\n          rs[i] = 0.97 * r;\n          directions[i] = -1 * directions[i];\n        } else if (rs[i] > 1.03 * r) {\n          rs[i] = 1.03 * r;\n          directions[i] = -1 * directions[i];\n        }\n        const spX = rs[i] * Math.cos(angleSum);\n        const spY = rs[i] * Math.sin(angleSum);\n        sps.push({ x: spX, y: spY });\n        for (let j = 0; j < 2; j++) {\n          const cpAngleRand = unitAngle / 3;\n          const cpR = rs[i] / Math.cos(cpAngleRand);\n          const sign = j === 0 ? -1 : 1;\n          const x = cpR * Math.cos(angleSum + sign * cpAngleRand);\n          const y = cpR * Math.sin(angleSum + sign * cpAngleRand);\n          cps.push({ x, y });\n        }\n        angleSum += unitAngle;\n      }\n      path.push(['M', sps[0].x, sps[0].y]);\n      for (let i = 1; i < spNum; i++) {\n        path.push([\n          'C',\n          cps[2 * i - 1].x,\n          cps[2 * i - 1].y,\n          cps[2 * i].x,\n          cps[2 * i].y,\n          sps[i].x,\n          sps[i].y,\n        ]);\n      }\n      path.push(['C', cps[cpNum - 1].x, cps[cpNum - 1].y, cps[0].x, cps[0].y, sps[0].x, sps[0].y]);\n      path.push(['Z']);\n      return path;\n    },\n    setState(name, value, item) {\n      const shape = item.get('keyShape');\n      if (name === 'dark') {\n        if (value) {\n          if (shape.attr('fill') !== '#fff') {\n            shape.oriFill = shape.attr('fill');\n            const uColor = unlightColorMap.get(shape.attr('fill'));\n            shape.attr('fill', uColor);\n          } else {\n            shape.attr('opacity', 0.2);\n          }\n        } else {\n          if (shape.attr('fill') !== '#fff') {\n            shape.attr('fill', shape.oriFill || shape.attr('fill'));\n          } else {\n            shape.attr('opacity', 1);\n          }\n        }\n      }\n    },\n  },\n  'single-node',\n);\n\nG6.registerNode(\n  'animate-circle',\n  {\n    setState(name, value, item) {\n      const shape = item.get('keyShape');\n      const label = shape.get('parent').get('children')[1];\n      if (name === 'disappearing' && value) {\n        shape.animate(\n          (ratio) => {\n            return {\n              opacity: 1 - ratio,\n              r: shape.attr('r') * (1 - ratio),\n            };\n          },\n          {\n            duration: 200,\n          },\n        );\n        label.animate(\n          (ratio) => {\n            return {\n              opacity: 1 - ratio,\n            };\n          },\n          {\n            duration: 500,\n          },\n        );\n      } else if (name === 'appearing' && value) {\n        const r = item.getModel().size / 2;\n        shape.animate(\n          (ratio) => {\n            return {\n              opacity: ratio,\n              r: r * ratio,\n              fill: shape.attr('fill'),\n            };\n          },\n          {\n            duration: 300,\n          },\n        );\n        label.animate(\n          {\n            onFrame(ratio) {\n              return {\n                opacity: ratio,\n              };\n            },\n          },\n          {\n            duration: 300,\n          },\n        );\n      } else if (name === 'dark') {\n        if (value) {\n          if (shape.attr('fill') !== '#fff') {\n            shape.oriFill = shape.attr('fill');\n            const uColor = unlightColorMap.get(shape.attr('fill'));\n            shape.attr('fill', uColor);\n          } else {\n            shape.attr('opacity', 0.2);\n            label.attr('fill', '#A3B1BF');\n          }\n        } else {\n          if (shape.attr('fill') !== '#fff') {\n            shape.attr('fill', shape.oriFill || shape.attr('fill'));\n          } else {\n            shape.attr('opacity', 1);\n            label.attr('fill', '#697B8C');\n          }\n        }\n      }\n    },\n  },\n  'circle',\n);\n\nG6.registerEdge(\n  'animate-line',\n  {\n    drawShape(cfg, group) {\n      const self = this;\n      let shapeStyle = self.getShapeStyle(cfg);\n      shapeStyle = Object.assign(shapeStyle, {\n        opacity: 0,\n        strokeOpacity: 0,\n      });\n      const keyShape = group.addShape('path', {\n        attrs: shapeStyle,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape',\n      });\n      return keyShape;\n    },\n    afterDraw(cfg, group) {\n      const shape = group.get('children')[0];\n      shape.animate(\n        (ratio) => {\n          const opacity = ratio * cfg.style.opacity;\n          const strokeOpacity = ratio * cfg.style.strokeOpacity;\n          return {\n            opacity: ratio || opacity,\n            strokeOpacity: ratio || strokeOpacity,\n          };\n        },\n        {\n          duration: 300,\n        },\n      );\n    },\n    setState(name, value, item) {\n      const shape = item.get('keyShape');\n      if (name === 'disappearing' && value) {\n        shape.animate(\n          (ratio) => {\n            return {\n              opacity: 1 - ratio,\n              strokeOpacity: 1 - ratio,\n            };\n          },\n          {\n            duration: 200,\n          },\n        );\n      } else if (name === 'dark') {\n        if (value) shape.attr('opacity', 0.2);\n        else shape.attr('opacity', 1);\n      }\n    },\n  },\n  'line',\n);\n\ngraph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  layout: layoutCfg,\n  modes: {\n    default: ['drag-canvas'],\n  },\n  defaultNode: {\n    type: 'bubble',\n    size: 95,\n    labelCfg: {\n      position: 'center',\n      style: {\n        fill: 'white',\n        fontStyle: 'bold',\n      },\n    },\n  },\n  defaultEdge: {\n    color: '#888',\n    type: 'animate-line', //'animate-line'\n  },\n});\ngraph.get('canvas').set('localRefresh', false);\n\nfunction translate(x, y) {\n  let moveX = x;\n  let moveY = y;\n\n  /* 获得当前偏移量*/\n  const group = graph.get('group');\n  const bbox = group.getBBox();\n  const leftTopPoint = graph.getCanvasByPoint(bbox.minX, bbox.minY);\n  const rightBottomPoint = graph.getCanvasByPoint(bbox.maxX, bbox.maxY);\n  /* 如果 x 轴在区域内，不允许左右超过100 */\n  if (x < 0 && leftTopPoint.x - x > LIMIT_OVERFLOW_WIDTH) {\n    moveX = 0;\n  }\n  if (x > 0 && rightBottomPoint.x - x < width - LIMIT_OVERFLOW_WIDTH) {\n    moveX = 0;\n  }\n\n  if (y < 0 && leftTopPoint.y - y > LIMIT_OVERFLOW_HEIGHT) {\n    moveY = 0;\n  }\n  if (y > 0 && rightBottomPoint.y - y < height - LIMIT_OVERFLOW_HEIGHT) {\n    moveY = 0;\n  }\n  graph.translate(-moveX, -moveY);\n}\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n}\ngraph.on('node:dragstart', (e) => {\n  graph.layout();\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:drag', (e) => {\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:dragend', (e) => {\n  e.item.get('model').fx = null;\n  e.item.get('model').fy = null;\n});\n\nconst loadData = (data) => {\n  const layoutController = graph.get('layoutController');\n  layoutController.layoutCfg.nodeStrength = 2500;\n  layoutController.layoutCfg.collideStrength = 0.8;\n  layoutController.layoutCfg.alphaDecay = 0.01;\n  nodes = data.nodes;\n  edges = data.edges;\n\n  showNodes = [];\n  showEdges = [];\n  nodeMap = new Map();\n  edgesMap = new Map();\n  // find the roots\n  nodes.forEach((node) => {\n    if (node.level === 0) {\n      node.color = gColors[showNodes.length % gColors.length];\n      node.style = {\n        fill: gColors[showNodes.length % gColors.length],\n        lineWidth: 0,\n      };\n      node.labelCfg = {\n        style: {\n          fontSize: 25,\n          fill: '#fff',\n          fontWeight: 300,\n        },\n      };\n      node.x = Math.random() * 800;\n      node.y = Math.random() * 800;\n      showNodes.push(node);\n    }\n    if (!node.isLeaf) {\n      const num = node.childrenNum ? `\\n(${node.childrenNum})` : '';\n      node.label = `${node.name}${num}`;\n    } else {\n      node.label = node.name;\n    }\n    nodeMap.set(node.id, node);\n  });\n\n  mapNodeSize(showNodes, 'childrenNum', [120, 180]);\n\n  // map the color to F nodes, same to its parent\n  nodes.forEach((node) => {\n    if (node.level !== 0 && !node.isLeaf) {\n      const parent = nodeMap.get(node.tags[0]);\n      node.color = parent.color;\n      node.style = {\n        fill: parent.color,\n      };\n    }\n  });\n  edges.forEach((edge) => {\n    // map the id\n    edge.id = `${edge.source}-${edge.target}`;\n    edge.style = {\n      lineWidth: 0.5,\n      opacity: 1,\n      strokeOpacity: 1,\n    };\n    edgesMap.set(edge.id, edge);\n  });\n  graph.data({\n    nodes: showNodes,\n    edges: showEdges,\n  });\n  graph.render();\n};\n\ngraph.on('node:mouseenter', (e) => {\n  const item = e.item;\n  const model = item.getModel();\n  if (model.level === 0) {\n    return;\n  }\n  highlighting = true;\n  graph.setAutoPaint(false);\n  const nodeItems = graph.getNodes();\n  const edgeItems = graph.getEdges();\n  nodeItems.forEach((node) => {\n    graph.setItemState(node, 'dark', true);\n    node.getModel().light = false;\n  });\n  graph.setItemState(item, 'dark', false);\n  model.light = true;\n  const tags = model.tags;\n  const findTagsMap = new Map();\n  let mid = 0;\n\n  let fTag = '';\n  // if the model is F node, find the leaves of it\n  if (!model.isLeaf && model.level !== 0) {\n    fTag = model.tag;\n    nodeItems.forEach((item) => {\n      const itemModel = item.getModel();\n      if (!itemModel.isLeaf) return;\n      const modelTags = itemModel.tags;\n      modelTags.forEach((mt) => {\n        const mts = mt.split('-');\n        if (mts[1] === fTag) {\n          graph.setItemState(item, 'dark', false);\n          itemModel.light = true;\n        }\n      });\n    });\n  }\n\n  // find the tags\n  tags.forEach((t) => {\n    const ts = t.split('-');\n    findTagsMap.set(ts[0], mid);\n    mid++;\n    if (ts[1]) {\n      findTagsMap.set(ts[1], mid);\n      mid++;\n    }\n  });\n  // find the nodes with tag === tags[?]\n  nodeItems.forEach((item) => {\n    const node = item.getModel();\n    if (findTagsMap.get(node.tag) !== undefined) {\n      graph.setItemState(item, 'dark', false);\n      node.light = true;\n    }\n  });\n  edgeItems.forEach((item) => {\n    const source = item.getSource().getModel();\n    const target = item.getTarget().getModel();\n    if (source.light && target.light) {\n      graph.setItemState(item, 'dark', false);\n    } else {\n      graph.setItemState(item, 'dark', true);\n    }\n  });\n  graph.paint();\n  graph.setAutoPaint(true);\n});\n\ngraph.on('node:mouseleave', () => {\n  if (highlighting) {\n    const nodeItems = graph.getNodes();\n    const edgeItems = graph.getEdges();\n    highlighting = false;\n    nodeItems.forEach((item) => {\n      graph.setItemState(item, 'dark', false);\n    });\n    edgeItems.forEach((item) => {\n      graph.setItemState(item, 'dark', false);\n    });\n  }\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/fc6e64fc-be94-40fb-b9e2-2d13dd414f38.json')\n  .then((res) => res.json())\n  .then((data) => {\n    loadData(data);\n  });\n\n// click root to expand\ngraph.on('node:click', (e) => {\n  curShowNodes = [];\n  curShowEdges = [];\n  const item = e.item;\n  const model = item.getModel();\n  if (!model.isLeaf && model.level !== 0) {\n    return;\n  }\n  // if clicked a root, hide unrelated items and show the related items\n  if (model.level === 0) {\n    const layoutController = graph.get('layoutController');\n    const forceLayout = layoutController.layoutMethods[0];\n    forceLayout.forceSimulation.stop();\n    // light the level 0 nodes\n    showNodes.forEach((snode) => {\n      const item = graph.findById(snode.id);\n      graph.setItemState(item, 'dark', false);\n      if (snode.x < 0.5 * width) {\n        snode.x = 300;\n      } else {\n        snode.x = width - 300;\n      }\n    });\n    model.x = width / 2;\n    model.y = height / 2;\n    // animatively hide the items which are going to disappear\n    if (curShowEdges.length) {\n      curShowEdges.forEach((csedge) => {\n        const item = graph.findById(csedge.id);\n        item && graph.setItemState(item, 'disappearing', true);\n      });\n    }\n    curShowNodes.forEach((csnode) => {\n      const item = graph.findById(csnode.id);\n      item && graph.setItemState(item, 'disappearing', true);\n    });\n    graph.positionsAnimate();\n\n    // reset curShowNodes nad curShowEdges\n    curShowNodes = [];\n    curShowEdges = [];\n\n    // click on the same node which is the current focus node, hide the small nodes, change the layout parameters to roots view\n    if (currentFocus && currentFocus.id === model.id) {\n      currentFocus = undefined;\n      layoutController.layoutCfg.nodeStrength = 2500;\n      layoutController.layoutCfg.collideStrength = 0.8;\n      layoutController.layoutCfg.alphaDecay = 0.01;\n    } else {\n      // click other focus node, hide the current small nodes and show the related nodes\n      currentFocus = model;\n      // change data after the original items disappearing\n      const layoutController = graph.get('layoutController');\n      layoutController.layoutCfg.nodeStrength = () => {\n        return -80;\n      };\n      layoutController.layoutCfg.collideStrength = 0.2;\n      layoutController.layoutCfg.linkDistance = (d) => {\n        if (d.source.level !== 0) return 120;\n        const length = 250;\n        return length;\n      };\n      layoutController.layoutCfg.edgeStrength = () => {\n        return 2;\n      };\n\n      const tag = model.tag;\n      const findTags = [];\n      curShowNodesMap = new Map();\n      // find the nodes which are the descendants of clicked model\n      nodes.forEach((node) => {\n        if (!node.tags) return;\n        const tags = node.tags;\n        const tlength = tags.length;\n        let isChild = false;\n        const parents = [];\n        for (let i = 0; i < tlength; i++) {\n          const ts = tags[i].split('-');\n          if (ts[0] === tag) {\n            isChild = true;\n          }\n          parents.push(nodeMap.get(ts[0]));\n        }\n        if (isChild) {\n          const randomAngle = Math.random() * 2 * Math.PI;\n          node.x = model.x + (Math.cos(randomAngle) * model.size) / 2 + 10;\n          node.y = model.y + (Math.sin(randomAngle) * model.size) / 2 + 10;\n          // const dist = (model.x - node.x) * (model.x - node.x) + (model.y - node.y) * (model.y - node.y);\n\n          if (!node.style) node.style = {};\n          node.style.lineWidth = 0;\n          node.style.opacity = 1;\n          if (node.isLeaf) {\n            node.type = 'animate-circle';\n            let color = 'l(0)';\n            const parentsNum = parents.length;\n            parents.forEach((parent, i) => {\n              const parentColor = parent.color.split(' ')[1].substr(2);\n              color += ` ${i / (parentsNum - 1)}:${parentColor}`;\n            });\n            if (parentsNum === 1) {\n              color = model.color.split(' ')[1].substr(2);\n            }\n            node.color = color;\n            node.style.fill = color;\n            node.style.fill = '#fff';\n            node.style.lineWidth = 1;\n            node.size = 60;\n            node.labelCfg = {\n              style: {\n                fontSize: 11,\n                lineHeight: 19,\n                fill: '#697B8C',\n              },\n              position: 'center',\n            };\n          } else if (node.level !== 0) {\n            node.type = 'circle'; // 'bubble';\n            node.size = 95;\n            if (!node.style) node.style = {};\n            node.color = model.color;\n            node.style.fill = model.color;\n            node.labelCfg = {\n              style: {\n                fill: '#fff',\n                fontSize: 14,\n              },\n              position: 'center',\n            };\n          }\n          curShowNodes.push(node);\n          curShowNodesMap.set(node.id, node);\n\n          // add the edge connect from model to node which exists in edges\n          const edgeId = `${model.id}-${node.id}`;\n          const edge = edgesMap.get(edgeId);\n          if (edge) {\n            edge.color = model.color;\n            curShowEdges.push(edge);\n          }\n          tags.forEach((t) => {\n            const ts = t.split('-');\n            if (ts[0] !== tag) {\n              findTags.push(ts[0]);\n            }\n            if (ts[1]) {\n              findTags.push(ts[1]);\n            }\n          });\n        }\n      });\n\n      // find the nodes which are the ancestors of the current curShowNodes\n      nodes.forEach((node) => {\n        const findTagsLength = findTags.length;\n        for (let i = 0; i < findTagsLength; i++) {\n          if (node.tag === findTags[i] && curShowNodesMap.get(node.id) === undefined) {\n            curShowNodes.push(node);\n            curShowNodesMap.set(node.id, node);\n            return;\n          }\n        }\n      });\n\n      // find the edges whose target end source are in the curShowNodes\n      curShowNodes.forEach((nu, i) => {\n        const lu = nu.level;\n        curShowNodes.forEach((nv, j) => {\n          if (j <= i) return;\n          const lv = nv.level;\n          let edgeId;\n          if (lu < lv) {\n            edgeId = `${nu.id}-${nv.id}`;\n          } else {\n            edgeId = `${nv.id}-${nu.id}`;\n          }\n          let color = model.color;\n          if (nu.isLeaf) {\n            if (nv.level === 0 && nv.tag !== model.tag) color = '#DFE5EB';\n            else if (!nv.isLeaf && nv.tags[0] !== model.tag) {\n              color = '#DFE5EB';\n            }\n          } else if (nv.isLeaf) {\n            if (nu.level === 0 && nu.tag !== model.tag) color = '#DFE5EB';\n            else if (!nu.isLeaf && nu.tags[0] !== model.tag) {\n              color = '#DFE5EB';\n            }\n          }\n          const edge = edgesMap.get(edgeId);\n          if (edge) {\n            edge.color = color;\n            curShowEdges.push(edge);\n          }\n        });\n      });\n    }\n    setTimeout(() => {\n      graph.changeData({\n        nodes: showNodes.concat(curShowNodes),\n        edges: showEdges.concat(curShowEdges),\n      });\n      const nodeItems = graph.getNodes();\n      const edgeItems = graph.getEdges();\n      edgeItems.forEach((item) => {\n        graph.clearItemStates(item);\n      });\n      nodeItems.forEach((item) => {\n        graph.clearItemStates(item);\n        graph.setItemState(item, 'appearing', true);\n      });\n    }, 400);\n  }\n});\ngraph.on('canvas:click', () => {\n  currentFocus = undefined;\n  const forceLayout = graph.get('layoutController').layoutMethods[0];\n  forceLayout.forceSimulation.stop();\n  const nodeItems = graph.getNodes();\n  const edgeItems = graph.getEdges();\n  if (highlighting) {\n    highlighting = false;\n    nodeItems.forEach((item) => {\n      graph.setItemState(item, 'dark', false);\n    });\n    edgeItems.forEach((item) => {\n      graph.setItemState(item, 'dark', false);\n    });\n  } else {\n    nodeItems.forEach((item) => {\n      const model = item.getModel();\n      if (model.level === 0) {\n        graph.setItemState(item, 'dark', false);\n      } else {\n        graph.setItemState(item, 'disappearing', true);\n      }\n    });\n    edgeItems.forEach((item) => {\n      graph.setItemState(item, 'disappearing', true);\n    });\n    curShowNodes = [];\n    curShowEdges = [];\n    setTimeout(() => {\n      const layoutController = graph.get('layoutController');\n      layoutController.layoutCfg.nodeStrength = 2500;\n      layoutController.layoutCfg.collideStrength = 0.8;\n      layoutController.layoutCfg.alphaDecay = 0.01;\n\n      graph.changeData({\n        nodes: showNodes,\n        edges: showEdges,\n      });\n    }, 400);\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"图表决策",en:"Decision Bubbles"},filename:"decisionBubbles.js",isNew:!1},{id:"simplifyCluster",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yU5sRLivdLIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\n/**\n * 该示例演示 Fruchterman 布局算法的聚类效果，以及点击交互进行聚类的聚合和扩散效果\n * by 十吾\n */\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Reading data & Doing layout......';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\nconst width = container.scrollWidth;\nconst height = container.scrollHeight - 30;\n\nconst colors = ['#f5222d', '#faad14', '#a0d911', '#13c2c2', '#1890ff', '#b37feb', '#eb2f96'];\nconst beginColor = '#5b8c00'; // green\nconst endColor = '#ff4d4f'; // red\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const nodes = data.nodes;\n    const edges = data.edges;\n\n    const nodeMap = new Map();\n    const clusterMap = new Map();\n    let cidx = 0;\n    nodes.forEach(function (n) {\n      nodeMap.set(n.id, n);\n      let region = n.region.split(' ');\n      if (n.region === 'East Asia') region = n.region;\n      else region = region[region.length - 1];\n\n      if (clusterMap.get(region) === undefined) {\n        clusterMap.set(region, cidx);\n        cidx++;\n      }\n      const clusterId = clusterMap.get(region);\n      const color = colors[clusterId % colors.length];\n      n.style = {\n        color,\n        fill: color,\n        stroke: '#666',\n        lineWidth: 0.6,\n      };\n      n.cluster = clusterId;\n      n.importValue = 0;\n      n.exportValue = 0;\n    });\n    // map the value of\n    edges.forEach(function (e) {\n      if (e.value === '') e.value = 0;\n      const v = parseFloat(e.value);\n      nodeMap.get(e.source).exportValue += v;\n      nodeMap.get(e.target).importValue += v;\n    });\n    mapValueToProp(nodes, 'exportValue', 'size', [2, 12]);\n    const graph = new G6.Graph({\n      container: 'container',\n      width,\n      height,\n      layout: {\n        type: 'fruchterman',\n        maxIteration: 8000,\n        gravity: 10,\n        clustering: true,\n        clusterGravity: 30,\n        workerEnabled: true,\n      },\n      fitView: true,\n      linkCenter: true,\n      defaultNode: {\n        type: 'circle',\n        size: 5,\n      },\n      defaultEdge: {\n        type: 'quadratic',\n      },\n      modes: {\n        default: [\n          'drag-node',\n          'drag-canvas',\n          {\n            type: 'tooltip',\n            formatText: function formatText(model) {\n              let name = '';\n              let countries = '';\n              if (model.name) name = model.name + '<br/>';\n              if (model.countries) countries = '<br/>Number of Countries: ' + model.countries;\n              const text = `${name} Export Value: ${model.exportValue}(1000USD)<br/>Region: ${model.region}<br/>Cluster: ${model.cluster} ${countries}`;\n              return text;\n            },\n\n            shouldUpdate: function shouldUpdate() {\n              return true;\n            },\n          },\n        ],\n      },\n    });\n\n    graph.on('afterlayout', function () {\n      descriptionDiv.innerHTML = 'Done!';\n    });\n\n    graph.data(data);\n    graph.render();\n\n    const edgeItems = graph.getEdges();\n    edgeItems.forEach(function (e) {\n      const lineWidth = 0.4;\n      const strokeOpacity = 0.2;\n      let stroke = 'l(0) 0:' + beginColor + ' 1:' + endColor;\n      const sourceModel = e.getSource().getModel();\n      const targetModel = e.getTarget().getModel();\n      if (sourceModel.x > targetModel.x) {\n        stroke = 'l(0) 0:' + endColor + ' 1:' + beginColor;\n      }\n      e.update({\n        style: {\n          lineWidth,\n          strokeOpacity,\n          stroke,\n        },\n      });\n    });\n    graph.paint();\n\n    graph.on('node:click', function (e) {\n      const targetItem = e.item;\n      const model = targetItem.getModel();\n      const graphEdges = graph.getEdges();\n      const graphNodes = graph.getNodes();\n      // click on the cluster node\n      if (model.id.substr(0, 7) === 'cluster') {\n        graphNodes.forEach(function (gn) {\n          const gnModel = gn.getModel();\n          // show the common nodes\n          if (gnModel.cluster === model.cluster && gnModel.id.substr(0, 7) !== 'cluster') {\n            gn.show();\n          }\n          // remove the cluster nodes\n          if (gnModel.id === model.id) graph.removeItem(gn);\n        });\n\n        graphEdges.forEach(function (ge) {\n          const sourceModel = ge.get('sourceNode').getModel();\n          const targetModel = ge.get('targetNode').getModel();\n          // show the common edges\n          if (\n            (sourceModel.cluster === model.cluster && sourceModel.id.substr(0, 7) !== 'cluster') ||\n            (targetModel.cluster === model.cluster && targetModel.id.substr(0, 7) !== 'cluster')\n          ) {\n            ge.show();\n            // add the edges to other cluster nodes\n            if (!ge.get('sourceNode').get('visible') && sourceModel.cluster !== model.cluster) {\n              let c1 = beginColor,\n                c2 = endColor;\n              if (model.x > targetModel.x) {\n                c1 = endColor;\n                c2 = beginColor;\n              }\n              graph.addItem('edge', {\n                source: 'cluster' + sourceModel.cluster,\n                target: targetModel.id,\n                id: 'cluster-edge-' + ge.id,\n                style: {\n                  stroke: 'l(0) 0:' + c1 + ' 1:' + c2,\n                  lineWidth: 0.4,\n                  strokeOpacity: 0.2,\n                },\n              });\n            } else if (\n              ge.get('targetNode').get('visible') &&\n              targetModel.cluster !== model.cluster\n            ) {\n              let _c = beginColor,\n                _c2 = endColor;\n              if (sourceModel.x > model.x) {\n                _c = endColor;\n                _c2 = beginColor;\n              }\n              graph.addItem('edge', {\n                source: sourceModel.id,\n                target: 'cluster' + targetModel.id,\n                id: 'cluster-edge-' + ge.id,\n                style: {\n                  stroke: 'l(0) 0:' + _c + ' 1:' + _c2,\n                  lineWidth: 0.4,\n                  strokeOpacity: 0.2,\n                },\n              });\n            }\n            // hide the edges to the common nodes in other clusters\n            if (!ge.get('sourceNode').get('visible') || !ge.get('targetNode').get('visible')) {\n              ge.hide();\n            }\n          }\n          // remove the cluster edges\n          if (sourceModel.id === model.id || targetModel.id === model.id) {\n            graph.removeItem(ge);\n          }\n        });\n      } else {\n        // click on the common node, cllapse them\n        // calculate the cluster center\n        const center = {\n          x: 0,\n          y: 0,\n          count: 0,\n          exportValue: 0,\n        };\n        nodes.forEach(function (n) {\n          if (n.cluster === model.cluster) {\n            center.x += n.x;\n            center.y += n.y;\n            center.count++;\n            center.exportValue += n.exportValue;\n          }\n        });\n        center.x /= center.count;\n        center.y /= center.count;\n        // add cluster node on the center\n        const size = center.count * 1;\n        const clusterNodeId = 'cluster' + model.cluster;\n        const color = colors[model.cluster % colors.length];\n        const regionStrs = model.region.split(' ');\n        let region = regionStrs[regionStrs.length - 1];\n        if (model.region === 'East Asia') region = model.region;\n        let labelPosition = 'center';\n        if (region.length > size) labelPosition = 'left';\n        graph.addItem('node', {\n          x: center.x,\n          y: center.y,\n          id: clusterNodeId,\n          cluster: model.cluster,\n          region,\n          countries: center.count,\n          exportValue: center.exportValue,\n          style: {\n            color,\n            fill: color,\n            stroke: '#666',\n            lineWidth: 0.6,\n          },\n          size,\n          label: region,\n          labelCfg: {\n            style: {\n              fontSize: 8.5,\n            },\n            position: labelPosition,\n          },\n        });\n\n        // add edges about the cluster\n        graphEdges.forEach(function (ge) {\n          const sourceModel = ge.get('sourceNode').getModel();\n          const targetModel = ge.get('targetNode').getModel();\n          if (!ge.get('sourceNode').get('visible') || !ge.get('targetNode').get('visible')) return;\n          if (sourceModel.cluster === model.cluster && targetModel.cluster !== model.cluster) {\n            let c1 = beginColor,\n              c2 = endColor;\n            if (center.x > targetModel.x) {\n              c1 = endColor;\n              c2 = beginColor;\n            }\n            graph.addItem('edge', {\n              source: clusterNodeId,\n              target: targetModel.id,\n              id: 'cluster-edge-' + ge.id,\n              style: {\n                stroke: 'l(0) 0:' + c1 + ' 1:' + c2,\n                lineWidth: 0.4,\n                strokeOpacity: 0.2,\n              },\n            });\n          } else if (\n            targetModel.cluster === model.cluster &&\n            sourceModel.cluster !== model.cluster\n          ) {\n            let _c3 = beginColor,\n              _c4 = endColor;\n            if (sourceModel.x > center.x) {\n              _c3 = endColor;\n              _c4 = beginColor;\n            }\n            graph.addItem('edge', {\n              source: sourceModel.id,\n              target: clusterNodeId,\n              id: 'cluster-edge-' + ge.id,\n              style: {\n                stroke: 'l(0) 0:' + _c3 + ' 1:' + _c4,\n                lineWidth: 0.4,\n                strokeOpacity: 0.2,\n              },\n            });\n          }\n        });\n\n        // hide the common nodes in the cluster\n        graphNodes.forEach(function (gn) {\n          if (\n            gn.getModel().cluster === model.cluster &&\n            gn.getModel().id.substr(0, 7) !== 'cluster'\n          )\n            gn.hide();\n        });\n        // hide the common edges about cluster\n        graphEdges.forEach(function (ge) {\n          if (!ge.get('sourceNode').get('visible') || !ge.get('targetNode').get('visible'))\n            ge.hide();\n        });\n      }\n    });\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n\nfunction mapValueToProp(items, valueName, propName, range) {\n  const valueRange = [9999999999, -9999999999];\n  items.forEach(function (n) {\n    if (n[valueName] > valueRange[1]) valueRange[1] = n[valueName];\n    if (n[valueName] < valueRange[0]) valueRange[0] = n[valueName];\n  });\n  const valueLength = valueRange[1] - valueRange[0];\n  const rLength = range[1] - range[0];\n  const propNameStrs = propName.split('.');\n  if (propNameStrs[0] === 'style' && propNameStrs.length > 1) {\n    items.forEach(function (n) {\n      if (n.style === undefined) n.style = {};\n      n.style[propNameStrs[1]] =\n        (rLength * (n[valueName] - valueRange[0])) / valueLength + range[0];\n    });\n  } else {\n    items.forEach(function (n) {\n      n[propNameStrs[0]] = (rLength * (n[valueName] - valueRange[0])) / valueLength + range[0];\n    });\n  }\n}\n",title:{zh:"聚类的折叠/扩展",en:"Collapse/Expand Cluster"},filename:"simplifyCluster.js",isNew:!1},{id:"donutTransfer",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YK6yRIfKQaIAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * by Shiwu\n */\n\nconst data = {\n  nodes: [\n    {\n      id: 'person A',\n      label: 'person A',\n      // the attributes for drawing donut\n      donutAttrs: {\n        'income': 10,\n        'outcome': 20,\n        'unknown': 25\n      },\n    },\n    {\n      id: 'person B',\n      label: 'person B',\n      donutAttrs: {\n        'income': 20,\n        'outcome': 10,\n        'unknown': 5\n      },\n    },\n    {\n      id: 'person C',\n      label: 'person C',\n      donutAttrs: {\n        'income': 200,\n        'outcome': 20,\n        'unknown': 25\n      },\n    },\n    {\n      id: 'person D',\n      label: 'person D',\n      donutAttrs: {\n        'income': 50,\n        'outcome': 10,\n        'unknown': 15\n      },\n    },\n    {\n      id: 'person E',\n      label: 'person E',\n      donutAttrs: {\n        'income': 80,\n        'outcome': 40,\n        'unknown': 45\n      },\n    },\n    {\n      id: 'person F',\n      label: 'person F',\n      donutAttrs: {\n        'income': 90,\n        'outcome': 110,\n        'unknown': 15\n      },\n    },\n  ],\n  edges: [\n    {source: 'person C', target: 'person F', size: 10},\n    {source: 'person B', target: 'person A', size: 5},\n    {source: 'person D', target: 'person E', size: 20},\n    {source: 'person D', target: 'person C', size: 5},\n    {source: 'person B', target: 'person C', size: 10},\n    {source: 'person A', target: 'person C', size: 5},\n  ]\n};\n\ndata.edges.forEach(edge=> {\n  edge.label = `Transfer $${edge.size}`\n})\n\nconst colors = {\n  'income': '#61DDAA',\n  'outcome': '#F08BB4',\n  'unknown': '#65789B'\n}\n\ndata.nodes.forEach(node => {\n  node.donutColorMap = colors;\n  node.size = 0;\n  Object.keys(node.donutAttrs).forEach(key => {\n    node.size += node.donutAttrs[key];\n  })\n  node.size = Math.sqrt(node.size) * 5\n})\n\n\nconst legendData = {\n  nodes: [{\n    id: 'income',\n    label: 'Income',\n    order: 0,\n    style: {\n      fill: '#61DDAA',\n    }\n  }, {\n    id: 'outcome',\n    label: 'Outcome',\n    order: 2,\n    style: {\n      fill: '#F08BB4',\n    }\n  }, {\n    id: 'unknown',\n    label: 'Unknown',\n    order: 2,\n    style: {\n      fill: '#65789B',\n    }\n  }]\n}\nconst legend = new G6.Legend({\n  data: legendData,\n  align: 'center',\n  layout: 'horizontal', // vertical\n  position: 'bottom-left',\n  vertiSep: 12,\n  horiSep: 24,\n  offsetY: -24,\n  padding: [4, 16, 8, 16],\n  containerStyle: {\n    fill: '#ccc',\n    lineWidth: 1\n  },\n  title: ' ',\n  titleConfig: {\n    offsetY: -8,\n  },\n});\n\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  plugins: [legend],\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'radial',\n    focusNode: 'li',\n    linkDistance: 200,\n    unitRadius: 200\n  },\n  defaultEdge: {\n    style: {\n      endArrow: true\n    },\n    labelCfg: {\n      autoRotate: true,\n      style: {\n        stroke: \"#fff\",\n        lineWidth: 5\n      }\n    }\n  },\n  defaultNode: {\n    type: 'donut',\n    style: {\n      lineWidth: 0,\n    },\n    labelCfg: {\n      position: 'bottom',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"甜甜圈转账图",en:"Donut Transfer"},filename:"donutTransfer.js",isNew:!1},{id:"customFlow",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hk1QTqVIHnIAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * by Zhihui Hu\n * https://www.zhihu.com/people/wisdommm\n */\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\n\n/** ====== data preparation ======= */\n// the first layer nodes\nconst baseData = {\n  nodes: [\n    { id: \"intention1\", time: \"2022/03/20\", title: \"User Intend\", expandRange: [0, 2], show: false, startPosition: 0, endPosition: 0 },\n    { id: \"intention2\", time: \"2022/03/20\", title: \"User Intend\", expandRange: [1, 3], show: false, startPosition: 0, endPosition: 0 },\n    { id: \"intention3\", time: \"2022/03/20\", title: \"User Intend\", expandRange: [3, 5], show: false, startPosition: 0, endPosition: 0 },\n  ],\n  edges: [\n    { id: \"edge1\", source: \"intention1\", target: \"intention2\" },\n    { id: \"edge2\", source: \"intention2\", target: \"intention3\" },\n  ]\n};\nbaseData.nodes.forEach(node => {\n  node.type = 'customNode';\n});\n// layout for the first layer nodes\nconst gridLayout = new G6.Layout['grid']({\n  rows: 1,\n  width,\n  sortBy: 'id'\n});\ngridLayout.init(baseData);\ngridLayout.execute()\n\n// the second layer nodes\nconst rangeData = {\n  nodes: [\n    { id: \"0\", label: \"Like\" },\n    { id: \"1\", label: \"Follow\" },\n    { id: \"2\", label: \"Collect\" },\n    { id: \"3\", label: \"Shop\" },\n    { id: \"4\", label: \"Pay\" },\n    { id: \"5\", label: \"Comment\" }\n  ],\n};\nrangeData.nodes.forEach(node => node.visible = false);\n\n\nconst graphData = {\n  nodes: baseData.nodes.concat(rangeData.nodes),\n  edges: baseData.edges\n}\n\n/** ====== custom a node type ======= */\nG6.registerNode('customNode',\n  {\n    draw(cfg, group) {\n      group.shapeMap = {};\n      const rect = group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: 50,\n          lineWidth: 1,\n          fillOpacity: 1,\n          radius: 12,\n          stroke: 'rgba(0,0,0,0.2)',\n          lineWidth: 1,\n          fill: '#fff',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-intention',\n      });\n      // title\n      group.addShape('text', {\n        attrs: {\n          x: 0,\n          y: -10,\n          text: cfg.title,\n          fontSize: 14,\n          fill: '#000',\n          fontWeight: 'bold',\n          textAlign: 'center'\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-title',\n      });\n      // time\n      group.addShape('text', {\n        attrs: {\n          x: 0,\n          y: 20,\n          text: cfg.time,\n          fontSize: 14,\n          fill: '#999',\n          textAlign: 'center'\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-time',\n      });\n      if (cfg.expandRange) {\n        // expand button\n        group.addShape('rect', {\n          attrs: {\n            x: -32.5,\n            y: 35,\n            width: 65,\n            height: 20,\n            radius: 8,\n            stroke: '#FF6107',\n            lineWidth: 1,\n            fill: '#FFF',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'rectBtn',\n        });\n        // button text\n        group.addShape('text', {\n          attrs: {\n            x: 0,\n            y: 51,\n            text: cfg.show ? '- collapse' : '+ expand',\n            fill: '#FF6107',\n            fontSize: 12,\n            textAlign: 'center'\n          },\n          capture: false,\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'rectBtn-text',\n        });\n        group.shapeMap['rectBtn-text'] = expandShape;\n      }\n\n      const expandShape = group.addShape('polygon', {\n        attrs: {\n          points: [\n            [30, 60],\n            [-30, 60],\n            [cfg.startPosition, 200],\n            [cfg.endPosition, 200],\n          ],\n          fill: 'l(90) 0:rgba(255,97,7,0.18)  1:rgba(255,97,7,0)',\n          opacity: 0.5\n        },\n        visible: false,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'polygon-shape',\n      });\n      expandShape.toBack();\n      group.shapeMap['polygon-shape'] = expandShape;\n\n      return rect;\n    },\n    update: (cfg, item) => {\n      const group = item.getContainer();\n      const expandText = group.shapeMap?.['rectBtn-text'] || group.find(e => e.get('name') === 'rectBtn-text');\n      expandText.attr({\n        text: cfg.show ? '- collapse' : '+ expand'\n      });\n      const expandShape = group.shapeMap?.['polygon-shape'] || group.find(e => e.get('name') === 'polygon-shape');\n      if (cfg.show) {\n        expandShape.set('visible', true);\n        expandShape.attr({\n          points: [\n            [30, 60],\n            [-30, 60],\n            [cfg.startPosition, 200],\n            [cfg.endPosition, 200],\n          ],\n          opacity: 0,\n        });\n        expandShape.animate({ opacity: 1 }, { duration: 300, repeat: false });\n      } else {\n        expandShape.set('visible', false);\n        expandShape.animate({ opacity: 0 }, { duration: 300, repeat: false });\n      }\n    }\n  },\n  'single-node'\n);\n\n\n/** ====== init the graph ======= */\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas']\n  },\n  defaultNode: {\n    type: 'circle',\n    style: {\n      r: 30,\n      fill: '#fff',\n      stroke: '#ccc',\n      lineWidth: 1,\n    },\n  },\n  defaultEdge: {\n    style: {\n      color: \"#fff\",\n      stroke: \"#FF6107\",\n      lineWidth: 12,\n      opacity: 0.6\n    }\n  }\n});\ngraph.read(graphData);\n\n\n/** ====== bind listener ======= */\ngraph.on('rectBtn:click', (e) => {\n  const model = e.item.getModel();\n  const { expandRange } = model;\n  if (expandRange) {\n    showRoute(model);\n  }\n});\nconst showRoute = (nodeData) => {\n  nodeData.show = !nodeData.show;\n\n  let { nodes, edges } = graphData;\n  const routeNodes = [];\n  const routeEdges = [];\n  const routeNodesMap = {};\n\n  // the nodes will be shown in the second layer\n  let showRangeIds = new Set();\n  baseData.nodes.forEach(node => {\n    if (!node.show) return;\n    const { expandRange } = node;\n    for (let i = +expandRange[0]; i < +expandRange[1] + 1; i++) {\n      showRangeIds.add(i);\n    }\n  });\n  showRangeIds = Array.from(showRangeIds);\n  showRangeIds.sort((a, b) => a - b);\n\n  const rangeLayoutNodes = [];\n  rangeData.nodes.forEach(node => {\n    const showIdx = showRangeIds.indexOf(+node.id);\n    if (showIdx > -1) {\n      graph.showItem(node.id);\n      rangeLayoutNodes.push(node);\n    }\n    else graph.hideItem(node.id);\n  });\n\n  // layout for the second row nodes\n  const rangeGridLayout = new G6.Layout['grid']({\n    rows: 1,\n    width: 1000,\n    begin: [0, 200]\n  });\n  rangeGridLayout.init({ nodes: rangeLayoutNodes, edges: [] });\n  rangeGridLayout.execute();\n  rangeLayoutNodes.forEach(node => graph.update(node.id, { x: node.x, y: node.y }))\n\n  // update the 'show', 'startPosition', and 'endPosition' for first layer node\n  baseData.nodes.forEach((node) => {\n    const { id: nodeId, expandRange, x } = node;\n    if (!node.show) {\n      graph.updateItem(nodeId, { show: false });\n      return;\n    }\n    const [start, end] = expandRange;\n    graph.updateItem(nodeId, {\n      show: true,\n      // the position for the bottom vertexes of the range polygon\n      startPosition: graph.findById(`${start}`).getModel().x - 30 - x,\n      endPosition: graph.findById(`${end}`).getModel().x + 30 - x,\n    });\n  });\n\n  // remove the blue range edges\n  graph.getEdges().forEach(edge => {\n    if (edge.getModel().tag === 'range') graph.removeItem(edge);\n  });\n\n  // add new blue range edges\n  showRangeIds.forEach((id, i) => {\n    if (i === 0) return;\n    graph.addItem('edge', {\n      id: `edge-${Math.random()}`,\n      source: `${showRangeIds[i - 1]}`,\n      target: `${id}`,\n      tag: 'range',\n      style: {\n        lineWidth: 2,\n        stroke: '#8CC2FC'\n      }\n    })\n  })\n}\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };",title:{zh:"自定义分类图",en:"Custom Category Graph"},filename:"customFlow.js",isNew:!1},{id:"sequence",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*2eo7So4AY4IAAAAAAAAAAAAADmJ7AQ",source:'\n/**\n * by @WontonCat from GitHub\n */\n\n\nimport G6 from \'@antv/g6\';\n\nconst sequenceStyle = {\n  nodeHeight: 30, // Object节点高度\n  nodeWidth: 150, // Object节点宽度\n  nodeMargin: 10, // Object节点间距\n  activeWidth: 10, // active区域宽度\n  activeHeight: 40 // active区域高度\n};\n\n/* 已知条件 */\nconst data = [\n  {\n    source: "A",\n    target: "B",\n    message: "Hello B, how are you?"\n  },\n  {\n    source: "A",\n    target: "C",\n    message: "Hello C, how are you?"\n  },\n  {\n    source: "B",\n    target: "A",\n    message: "Great!"\n  }\n];\n\n// 数据处理\nconst nodeArr = [\n  ...new Set(\n    data.map((item) => item.source).concat(data.map((item) => item.target))\n  )\n];\n\nconst sequenceData = {\n  nodes: [],\n  edges: []\n};\n\nconst sequenceNodes = [];\n\nconst getSequenceNode = (data, nodeArr, sequenceStyle) => {\n  const { nodeWidth, activeHeight, nodeMargin, nodeHeight } = sequenceStyle;\n  // 计算整体高度\n  const height = (data.length + 1) * activeHeight + nodeHeight;\n  // 生成上下节点\n  nodeArr.forEach((nodeName, index) => {\n    const x = index * (nodeWidth + nodeMargin) + nodeWidth * 0.5;\n    sequenceData.nodes.push(\n      {\n        name: nodeName,\n        type: "sequence-node",\n        id: `${nodeName}-start`,\n        x: x,\n        y: 0\n      },\n      {\n        name: nodeName,\n        type: "sequence-node",\n        id: `${nodeName}-end`,\n        x: x,\n        y: height\n      }\n    );\n    // 下节点中心点坐标\n    sequenceNodes[nodeName] = x;\n    // 节点关系（ 连线 ）\n    sequenceData.edges.push({\n      source: `${nodeName}-start`,\n      target: `${nodeName}-end`\n    });\n  });\n};\n\nconst getSequenceLine = (data, sequenceStyle) => {\n  const { activeHeight, nodeHeight } = sequenceStyle;\n  data.forEach((node, index) => {\n    const height = index * activeHeight + activeHeight + nodeHeight * 0.5;\n    sequenceData.nodes.push(\n      {\n        type: "active-node",\n        id: `${node.source}-${index}`,\n        x: sequenceNodes[node.source],\n        y: height\n      },\n      {\n        type: "active-node",\n        id: `${node.target}-${index}`,\n        x: sequenceNodes[node.target],\n        y: height\n      }\n    );\n    sequenceData.edges.push({\n      text: node.message,\n      source: `${node.source}-${index}`,\n      target: `${node.target}-${index}`,\n      type: "sequence-line-arrow"\n    });\n  });\n};\n\n// Object\ngetSequenceNode(data, nodeArr, sequenceStyle);\n// Message连线\ngetSequenceLine(data, sequenceStyle);\n\nG6.registerNode(\n  "sequence-node",\n  {\n    drawShape(cfg, group) {\n      console.log(3344);\n\n      const { nodeHeight, nodeWidth } = sequenceStyle;\n      // 矩形框框\n      const nodeBox = group.addShape("rect", {\n        attrs: {\n          x: -nodeWidth * 0.5,\n          y: -nodeHeight * 0.5,\n          width: nodeWidth,\n          height: nodeHeight,\n          fill: "#e6f7ff",\n          stroke: "#91d5ff",\n          radius: 3\n        }\n      });\n\n      group.addShape("text", {\n        attrs: {\n          text: cfg.name,\n          x: 0,\n          y: 0,\n          fontSize: 9,\n          textAlign: "center",\n          textBaseline: "middle",\n          fill: "#555"\n        }\n      });\n      return nodeBox;\n    }\n  },\n  "extend-node"\n);\n\nG6.registerEdge(\n  "sequence-line-arrow",\n  {\n    draw: function draw(cfg, group) {\n      const { startPoint, endPoint } = cfg;\n      const { activeWidth } = sequenceStyle;\n      const isFromLine = endPoint.x - startPoint.x > 0;\n      const newEndPoint = {\n        x: isFromLine\n          ? endPoint.x - activeWidth * 0.5\n          : endPoint.x + activeWidth * 0.5,\n        y: endPoint.y\n      };\n\n      const newStartPoint = {\n        x: isFromLine\n          ? startPoint.x + activeWidth * 0.5\n          : startPoint.x - activeWidth * 0.5,\n        y: startPoint.y\n      };\n\n      const path = this.getPath([newStartPoint, newEndPoint]);\n\n      group.addShape("path", {\n        attrs: {\n          path: path,\n          lineWidth: 1,\n          stroke: "#555",\n          cursor: "pointer",\n          endArrow: {\n            path: "M 0,0 L 8,4 L 8,-4 Z",\n            fill: "#333"\n          },\n          lineAppendWidth: 10 // 可点击范围\n        }\n      });\n\n      const shape = group.addShape("text", {\n        attrs: {\n          text: cfg.text,\n          x: (startPoint.x + endPoint.x) * 0.5,\n          y: startPoint.y - 4,\n          fontSize: 10,\n          textAlign: "center",\n          textBaseline: "bottom",\n          fill: "#096dd9",\n          fontWeight: "400"\n        }\n      });\n      return shape;\n    },\n    update: null\n  },\n  "line"\n);\n\nG6.registerNode(\n  "active-node",\n  {\n    drawShape(cfg, group) {\n      const { activeHeight, activeWidth } = sequenceStyle;\n      console.log(1122);\n      const nodeBox = group.addShape("rect", {\n        attrs: {\n          x: -activeWidth * 0.5,\n          y: -activeHeight * 0.5,\n          width: activeWidth,\n          height: activeHeight,\n          fill: "#91d5ff"\n        }\n      });\n      return nodeBox;\n    }\n  },\n  "extend-node"\n);\nconst width = document.getElementById(\'container\').scrollWidth;\nconst height = document.getElementById(\'container\').scrollHeight || 500;\n\nconst graph = new G6.Graph({\n  container: "container",\n  width,\n  height,\n  fitView: true,\n  defaultNode: {\n    anchorPoints: [[0.5, 0.5]]\n  },\n  defaultEdge: {\n    type: "line"\n  }\n});\n\ngraph.data(sequenceData);\ngraph.render();\n\nif (typeof window !== \'undefined\')\n  window.onresize = () => {\n    if (!graph || graph.get(\'destroyed\')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };',title:{zh:"时序图",en:"Sequence Graph"},filename:"sequence.js",isNew:!1}],icon:"",id:"graphDemos",title:{en:"General Graph Demos",zh:"一般图场景案例"},childrenKey:"demos",order:0},{demos:[{id:"australiaFire",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WLzKQpZl5QEAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  #legendContainer{\n    position: absolute;\n    top: 92px;\n    left: 8px;\n    width: 100px;\n    height: 100px;\n  }\n  .g6-tooltip {\n    border-radius: 6px;\n    font-size: 12px;\n    color: #fff;\n    background-color: #000;\n    padding: 2px 8px;\n    text-align: center;\n  }\n  #time {\n    position: absolute;\n    color: #fff;\n    font-size: 25px;\n    top: 80px;\n    width: 700px;\n    text-align: center;\n    height: auto;\n  }\n`);\n\nconst LANG = 'en'; // 'zh'\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graphDiv = document.getElementById('container');\n\nconst timeDiv = document.createElement('div');\ntimeDiv.id = 'time';\ntimeDiv.innerHTML = '11th January, 2020';\ngraphDiv.parentNode.appendChild(timeDiv);\n\nconst colors = ['#FD5854', '#FDA25A', '#FFD574', '#3A5A3C'];\nconst imgs = {\n  'state-New South Wales': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/828aec79-8123-4ca7-baa8-1422a964003a.svg',\n    width: 183,\n    height: 146,\n  },\n  'state-Victoria': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/463d3b0c-b03f-40b3-b6e9-6309b5d637cf.svg',\n    width: 116,\n    height: 88,\n  },\n  'state-Queensland': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/617bc829-50e5-4537-978e-81bf424cb8fd.svg',\n    width: 215,\n    height: 311,\n  },\n  'state-Western Australia': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/c8b4cbb0-57fd-4c18-bbd1-4993b52e5048.svg',\n    width: 221,\n    height: 357,\n  },\n  'state-South Australia': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/6582ef8e-e5ce-4815-9183-b6a70caeb1db.svg',\n    width: 169,\n    height: 198,\n  },\n  'state-Tasmania': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/056fb079-58c1-4697-bb66-15f08512cfb8.svg',\n    width: 50,\n    height: 45,\n  },\n  'state-Northern Territory': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/a616ae60-ebe6-4e61-b085-1a207237e193.svg',\n    width: 140,\n    height: 243,\n  },\n  'country-australia': {\n    src: 'https://gw.alipayobjects.com/zos/basement_prod/85c5e2e2-c015-495a-8710-3c881c49a3ed.svg',\n    width: 559,\n    height: 464,\n  },\n};\nconst mapImgScale = 0.2;\nlet minPop = Infinity;\nlet maxPop = -Infinity;\nlet minBrightness = Infinity;\nlet maxBrightness = -Infinity;\nconst leafSizeRange = [10, 100];\n\nG6.registerNode(\n  'circle-bar',\n  {\n    drawShape(cfg, group) {\n      const dist2Ori = Math.sqrt(cfg.x * cfg.x + cfg.y * cfg.y);\n      const vecToOrin = [cfg.x / dist2Ori, cfg.y / dist2Ori];\n      const startPoint = [(vecToOrin[0] * cfg.size) / 2, (vecToOrin[1] * cfg.size) / 2];\n      const scale = Math.sqrt(cfg.data.firePointNums[0]);\n      const path = [\n        ['M', startPoint[0], startPoint[1]],\n        ['L', vecToOrin[0] * scale + startPoint[0], vecToOrin[1] * scale + startPoint[1]],\n      ];\n\n      let fillColor = colors[3];\n      if (cfg.data.fireBrightnesses[0]) {\n        const normalizedBrightness =\n          (cfg.data.fireBrightnesses[0] - minBrightness) / (maxBrightness - minBrightness); // [0, 1];\n        const colorIdx = Math.floor(normalizedBrightness * 2);\n        fillColor = colors[colorIdx];\n      }\n      let count = 0;\n      const timeDiv = document.getElementById('time');\n\n      const keyShape = group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: cfg.size / 2,\n          fill: fillColor,\n          shadowColor: fillColor,\n          shadowBlur: 20,\n        },\n      });\n      const bar = group.addShape('path', {\n        attrs: {\n          path,\n          lineWidth: 2,\n          fill: fillColor,\n          stroke: fillColor,\n          shadowColor: fillColor,\n          shadowBlur: 20,\n        },\n      });\n\n      setInterval(\n        () => {\n          // if (count >= 7) return;\n          bar.stopAnimate();\n          count++;\n          if (cfg.id === 'city-Sydney') {\n            timeDiv.innerHTML = `${(count % 8) + 11}th January, 2020`;\n          }\n          const firePointNum = cfg.data.firePointNums[count % 8] || 0;\n          const targetScale = Math.sqrt(firePointNum);\n          const targetPath = [\n            ['M', startPoint[0], startPoint[1]],\n            [\n              'L',\n              vecToOrin[0] * targetScale + startPoint[0],\n              vecToOrin[1] * targetScale + startPoint[1],\n            ],\n          ];\n\n          fillColor = colors[3];\n          if (cfg.data.fireBrightnesses[count % 8]) {\n            const normalizedBrightness =\n              (cfg.data.fireBrightnesses[count % 8] - minBrightness) /\n              (maxBrightness - minBrightness); // [0, 1];\n            const colorIdx = Math.floor(normalizedBrightness * 2);\n            fillColor = colors[colorIdx];\n          }\n          bar.animate(\n            {\n              path: targetPath,\n              stroke: fillColor,\n              fill: fillColor,\n              shadowColor: fillColor,\n            },\n            {\n              repeat: false,\n              duration: 300,\n            },\n          );\n\n          keyShape.stopAnimate();\n          keyShape.animate(\n            {\n              fill: fillColor,\n              shadowColor: fillColor,\n            },\n            {\n              repeat: false,\n              duration: 300,\n            },\n          );\n        },\n        1300,\n        'easeCubic',\n      );\n\n      return keyShape;\n    },\n  },\n  'circle',\n);\n\nconst tooltip = new G6.Tooltip({\n  // offsetX and offsetY include the padding of the parent container\n  offsetX: 10,\n  offsetY: 10,\n  // the types of items that allow the tooltip show up\n  // 允许出现 tooltip 的 item 类型\n  itemTypes: ['node'],\n  // custom the tooltip's content\n  // 自定义 tooltip 内容\n  getContent: (e) => {\n    const outDiv = document.createElement('div');\n    const populationDes = LANG === 'en' ? 'Population' : '人口总数';\n    const model = e.item.getModel();\n    const name = `${model.xlabel}</br>${populationDes}: ${model.population}`;\n    outDiv.style.width = 'fit-content';\n    //outDiv.style.padding = '0px 0px 20px 0px';\n    outDiv.innerHTML = `<div>${name}</div>`;\n    return outDiv;\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/d676014a-0a11-4ea9-9af4-4038bae3c0a1.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    container.style.backgroundColor = '#000';\n    container.style.textAlign = 'center';\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width: height < width ? height : width,\n      height: height < width ? height : width,\n      fitView: true,\n      fitViewPadding: 80,\n      linkCenter: true,\n      defaultNode: {\n        size: 30,\n        style: {\n          lineWidth: 0,\n          fill: '#3A5A3C',\n        },\n      },\n      defaultEdge: {\n        color: '#FEAB58',\n        style: {\n          lineWidth: 0.3,\n          shadowBlur: 100,\n          shadowColor: '#FF4654',\n        },\n      },\n      nodeStateStyles: {\n        hover: {\n          stroke: '#fff',\n          lineWidth: 1,\n        },\n      },\n      modes: {\n        default: ['drag-canvas', 'zoom-canvas'],\n      },\n      layout: {\n        type: 'dendrogram',\n        direction: 'LR',\n        radial: true,\n        nodeSep: 10,\n        rankSep: 100,\n      },\n      plugins: [tooltip],\n    });\n\n    graph.node((node) => {\n      const xlabel = node.label;\n      let type = 'circle';\n      if (node.isLeaf) type = 'circle-bar';\n      else if (node.img) type = 'image';\n      let label = node.isLeaf ? '' : node.label;\n      switch (label) {\n        case 'Australian Capital Territory':\n          label = 'Australian\\nCapital Territory';\n          break;\n        case 'South Australia':\n          label = 'South\\nAustralia';\n          break;\n        case 'New South Wales':\n          label = 'New South\\nWales';\n          break;\n        case 'Northern Territory':\n          label = 'Northern\\nTerritory';\n          break;\n        default:\n          break;\n      }\n      return {\n        type,\n        xlabel,\n        label,\n        labelCfg: {\n          position: 'center',\n          style: {\n            fill: '#fff',\n            fontSize: 10,\n          },\n        },\n      };\n    });\n\n    G6.Util.traverseTree(data, (item) => {\n      if (minPop > item.population) minPop = item.population;\n      if (maxPop < item.population) maxPop = item.population;\n      if (item.data && item.data.fireBrightnesses) {\n        item.data.fireBrightnesses.forEach((b) => {\n          if (minBrightness > b && b) minBrightness = b;\n          if (maxBrightness < b) maxBrightness = b;\n        });\n      }\n    });\n    const sizeScale = leafSizeRange[1] - leafSizeRange[0];\n    G6.Util.traverseTree(data, (item) => {\n      if (!item.isLeaf) {\n        if (imgs[item.id]) {\n          item.img = imgs[item.id].src;\n          item.size = [imgs[item.id].width * mapImgScale, imgs[item.id].height * mapImgScale];\n        } else {\n          item.size = 10;\n        }\n        item.style = {\n          shadowColor: '#FF4654',\n          shadowBlur: 200,\n        };\n      } else {\n        item.size = ((item.population - minPop) / (maxPop - minPop)) * sizeScale + leafSizeRange[0];\n      }\n      if (item.id === 'country-australia') {\n        item.size = [559 * mapImgScale, 464 * mapImgScale];\n        item.style.shadowBlur = 200;\n      }\n    });\n\n    graph.data(data);\n    graph.render();\n\n    graph.on('node:mouseenter', (e) => {\n      graph.setItemState(e.item, 'hover', true);\n    });\n    graph.on('node:mouseleave', () => {\n      graph.getNodes().forEach((node) => {\n        graph.setItemState(node, 'hover', false);\n      });\n    });\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n\nconst legendContainer = document.createElement('div');\nlegendContainer.id = 'legendContainer';\nconst legendGraphDiv = document.createElement('div');\nlegendGraphDiv.id = 'legend';\nlegendContainer.appendChild(legendGraphDiv);\ngraphDiv.parentNode.appendChild(legendContainer);\nconst legendGraph = new G6.Graph({\n  container: 'legend',\n  width: 200,\n  height: 200,\n  defaultNode: {\n    size: 10,\n    type: 'circle',\n    labelCfg: {\n      position: 'right',\n      offset: 10,\n      style: {\n        fill: '#fff',\n      },\n    },\n  },\n});\nconst legendX = 20;\nconst legendBeginY = 50;\nconst legendYPadding = 25;\nconst legendData = {\n  nodes: [\n    {\n      id: 'level1',\n      x: legendX,\n      y: legendBeginY,\n      label: '受灾情况严重',\n      label_en: 'Severely Affected',\n      style: {\n        fill: '#FD5854',\n        lineWidth: 0,\n      },\n    },\n    {\n      id: 'level2',\n      x: legendX,\n      y: legendBeginY + legendYPadding,\n      label_en: 'Affected',\n      label: '受灾情况一般',\n      style: {\n        fill: '#FDA25A',\n        lineWidth: 0,\n      },\n    },\n    {\n      id: 'level3',\n      label: '受灾情况较轻',\n      label_en: 'Lightly Affected',\n      x: legendX,\n      y: legendBeginY + legendYPadding * 2,\n      style: {\n        fill: '#FFD574',\n        lineWidth: 0,\n      },\n    },\n    {\n      id: 'level4',\n      label: '火灾未涉及',\n      label_en: 'Not Affected',\n      x: legendX,\n      y: legendBeginY + legendYPadding * 3,\n      style: {\n        fill: '#3A5A3C',\n        lineWidth: 0,\n      },\n    },\n    {\n      id: 'legendSize',\n      label: '圆面积代表城市人口总数',\n      label_en: 'Node Size - Population',\n      x: legendX,\n      y: legendBeginY + legendYPadding * 4,\n      size: 15,\n      style: {\n        fill: '#3A5A3C',\n        lineWidth: 0,\n      },\n    },\n    {\n      id: 'legendBar',\n      label: '受灾点数量',\n      label_en: 'Bar Height - # Fire Points',\n      x: legendX,\n      y: legendBeginY + legendYPadding * 5 + 10,\n      type: 'rect',\n      size: [2, 30],\n      style: {\n        fill: '#3A5A3C',\n        lineWidth: 0,\n      },\n    },\n  ],\n};\nif (LANG === 'en') {\n  legendData.nodes.forEach((node) => {\n    node.label = node.label_en;\n  });\n}\nlegendGraph.data(legendData);\nlegendGraph.render();\n",title:{zh:"澳大利亚大火",en:"Australia Fire"},filename:"australiaFire.js",isNew:!1},{id:"mindmap",screenshot:"https://gw.alipayobjects.com/zos/antfincdn/N5tGvsqQR9/xiazai%252520%2812%29.png",source:"import G6 from '@antv/g6';\n\nconst {\n  Util\n} = G6;\n\nconst colorArr = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#6F5EF9',\n  '#6DC8EC',\n  '#D3EEF9',\n  '#DECFEA',\n  '#FFE0C7',\n  '#1E9493',\n  '#BBDEDE',\n  '#FF99C3',\n  '#FFE0ED',\n  '#CDDDFD',\n  '#CDF3E4',\n  '#CED4DE',\n  '#FCEBB9',\n  '#D3CEFD',\n  '#945FB9',\n  '#FF9845',\n];\n\nconst rawData = {\n  label: 'Modeling Methods',\n  id: '0',\n  children: [{\n      label: 'Classification',\n      id: '0-1',\n      color: '#5AD8A6',\n      children: [{\n          label: 'Logistic regression',\n          id: '0-1-1',\n        },\n        {\n          label: 'Linear discriminant analysis',\n          id: '0-1-2',\n        },\n        {\n          label: 'Rules',\n          id: '0-1-3',\n        },\n        {\n          label: 'Decision trees',\n          id: '0-1-4',\n        },\n        {\n          label: 'Naive Bayes',\n          id: '0-1-5',\n        },\n        {\n          label: 'K nearest neighbor',\n          id: '0-1-6',\n        },\n        {\n          label: 'Probabilistic neural network',\n          id: '0-1-7',\n        },\n        {\n          label: 'Support vector machine',\n          id: '0-1-8',\n        },\n      ],\n    },\n    {\n      label: 'Consensus',\n      id: '0-2',\n      color: '#F6BD16',\n      children: [{\n          label: 'Models diversity',\n          id: '0-2-1',\n          children: [{\n              label: 'Different initializations',\n              id: '0-2-1-1',\n            },\n            {\n              label: 'Different parameter choices',\n              id: '0-2-1-2',\n            },\n            {\n              label: 'Different architectures',\n              id: '0-2-1-3',\n            },\n            {\n              label: 'Different modeling methods',\n              id: '0-2-1-4',\n            },\n            {\n              label: 'Different training sets',\n              id: '0-2-1-5',\n            },\n            {\n              label: 'Different feature sets',\n              id: '0-2-1-6',\n            },\n          ],\n        },\n        {\n          label: 'Methods',\n          id: '0-2-2',\n          children: [{\n              label: 'Classifier selection',\n              id: '0-2-2-1',\n            },\n            {\n              label: 'Classifier fusion',\n              id: '0-2-2-2',\n            },\n          ],\n        },\n        {\n          label: 'Common',\n          id: '0-2-3',\n          children: [{\n              label: 'Bagging',\n              id: '0-2-3-1',\n            },\n            {\n              label: 'Boosting',\n              id: '0-2-3-2',\n            },\n            {\n              label: 'AdaBoost',\n              id: '0-2-3-3',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      label: 'Regression',\n      id: '0-3',\n      color: '#269A99',\n      children: [{\n          label: 'Multiple linear regression',\n          id: '0-3-1',\n        },\n        {\n          label: 'Partial least squares',\n          id: '0-3-2',\n        },\n        {\n          label: 'Multi-layer feedforward neural network',\n          id: '0-3-3',\n        },\n        {\n          label: 'General regression neural network',\n          id: '0-3-4',\n        },\n        {\n          label: 'Support vector regression',\n          id: '0-3-5',\n        },\n      ],\n    },\n  ],\n};\n\nG6.registerNode(\n  'dice-mind-map-root', {\n    jsx: (cfg) => {\n      const width = Util.getTextSize(cfg.label, 16)[0] + 24;\n      const stroke = cfg.style.stroke || '#096dd9';\n      const fill = cfg.style.fill;\n\n      return `\n      <group>\n        <rect draggable=\"true\" style={{width: ${width}, height: 42, stroke: ${stroke}, radius: 4}} keyshape>\n          <text style={{ fontSize: 16, marginLeft: 12, marginTop: 12 }}>${cfg.label}</text>\n          <text style={{ marginLeft: ${\n            width - 16\n          }, marginTop: -20, stroke: '#66ccff', fill: '#000', cursor: 'pointer', opacity: ${\n        cfg.hover ? 0.75 : 0\n      } }} action=\"add\">+</text>\n        </rect>\n      </group>\n    `;\n    },\n    getAnchorPoints() {\n      return [\n        [0, 0.5],\n        [1, 0.5],\n      ];\n    },\n  },\n  'single-node',\n);\nG6.registerNode(\n  'dice-mind-map-sub', {\n    jsx: (cfg) => {\n      const width = Util.getTextSize(cfg.label, 14)[0] + 24;\n      const color = cfg.color || cfg.style.stroke;\n\n      return `\n      <group>\n        <rect draggable=\"true\" style={{width: ${width + 24}, height: 22}} keyshape>\n          <text draggable=\"true\" style={{ fontSize: 14, marginLeft: 12, marginTop: 6 }}>${\n            cfg.label\n          }</text>\n          <text style={{ marginLeft: ${\n            width - 8\n          }, marginTop: -10, stroke: ${color}, fill: '#000', cursor: 'pointer', opacity: ${\n        cfg.hover ? 0.75 : 0\n      }, next: 'inline' }} action=\"add\">+</text>\n          <text style={{ marginLeft: ${\n            width - 4\n          }, marginTop: -10, stroke: ${color}, fill: '#000', cursor: 'pointer', opacity: ${\n        cfg.hover ? 0.75 : 0\n      }, next: 'inline' }} action=\"delete\">-</text>\n        </rect>\n        <rect style={{ fill: ${color}, width: ${width + 24}, height: 2, x: 0, y: 22 }} />\n        \n      </group>\n    `;\n    },\n    getAnchorPoints() {\n      return [\n        [0, 0.965],\n        [1, 0.965],\n      ];\n    },\n  },\n  'single-node',\n);\nG6.registerNode(\n  'dice-mind-map-leaf', {\n    jsx: (cfg) => {\n      const width = Util.getTextSize(cfg.label, 12)[0] + 24;\n      const color = cfg.color || cfg.style.stroke;\n\n      return `\n      <group>\n        <rect draggable=\"true\" style={{width: ${width + 20}, height: 26, fill: 'transparent' }}>\n          <text style={{ fontSize: 12, marginLeft: 12, marginTop: 6 }}>${cfg.label}</text>\n              <text style={{ marginLeft: ${\n                width - 8\n              }, marginTop: -10, stroke: ${color}, fill: '#000', cursor: 'pointer', opacity: ${\n        cfg.hover ? 0.75 : 0\n      }, next: 'inline' }} action=\"add\">+</text>\n              <text style={{ marginLeft: ${\n                width - 4\n              }, marginTop: -10, stroke: ${color}, fill: '#000', cursor: 'pointer', opacity: ${\n        cfg.hover ? 0.75 : 0\n      }, next: 'inline' }} action=\"delete\">-</text>\n        </rect>\n        <rect style={{ fill: ${color}, width: ${width + 24}, height: 2, x: 0, y: 32 }} />\n        \n      </group>\n    `;\n    },\n    getAnchorPoints() {\n      return [\n        [0, 0.965],\n        [1, 0.965],\n      ];\n    },\n  },\n  'single-node',\n);\nG6.registerBehavior('dice-mindmap', {\n  getEvents() {\n    return {\n      'node:click': 'clickNode',\n      'node:dblclick': 'editNode',\n      'node:mouseenter': 'hoverNode',\n      'node:mouseleave': 'hoverNodeOut',\n    };\n  },\n  clickNode(evt) {\n    const model = evt.item.get('model');\n    const name = evt.target.get('action');\n    switch (name) {\n      case 'add':\n        const newId =\n          model.id +\n          '-' +\n          (((model.children || []).reduce((a, b) => {\n              const num = Number(b.id.split('-').pop());\n              return a < num ? num : a;\n            }, 0) || 0) +\n            1);\n        evt.currentTarget.updateItem(evt.item, {\n          children: (model.children || []).concat([{\n            id: newId,\n            direction: newId.charCodeAt(newId.length - 1) % 2 === 0 ? 'right' : 'left',\n            label: 'New',\n            type: 'dice-mind-map-leaf',\n            color: model.color || colorArr[Math.floor(Math.random() * colorArr.length)],\n          }, ]),\n        });\n        evt.currentTarget.layout(false);\n        break;\n      case 'delete':\n        const parent = evt.item.get('parent');\n        evt.currentTarget.updateItem(parent, {\n          children: (parent.get('model').children || []).filter((e) => e.id !== model.id),\n        });\n        evt.currentTarget.layout(false);\n        break;\n      case 'edit':\n        break;\n      default:\n        return;\n    }\n  },\n  editNode(evt) {\n    const item = evt.item;\n    const model = item.get('model');\n    const {\n      x,\n      y\n    } = item.calculateBBox();\n    const graph = evt.currentTarget;\n    const realPosition = evt.currentTarget.getClientByPoint(x, y);\n    const el = document.createElement('div');\n    const fontSizeMap = {\n      'dice-mind-map-root': 24,\n      'dice-mind-map-sub': 18,\n      'dice-mind-map-leaf': 16,\n    };\n    el.style.fontSize = fontSizeMap[model.type] + 'px';\n    el.style.position = 'fixed';\n    el.style.top = realPosition.y + 'px';\n    el.style.left = realPosition.x + 'px';\n    el.style.paddingLeft = '12px';\n    el.style.transformOrigin = 'top left';\n    el.style.transform = `scale(${evt.currentTarget.getZoom()})`;\n    const input = document.createElement('input');\n    input.style.border = 'none';\n    input.value = model.label;\n    input.style.width = Util.getTextSize(model.label, fontSizeMap[model.type])[0] + 'px';\n    input.className = 'dice-input';\n    el.className = 'dice-input';\n    el.appendChild(input);\n    document.body.appendChild(el);\n    const destroyEl = () => {\n      document.body.removeChild(el);\n    };\n    const clickEvt = (event) => {\n      if (!(event.target && event.target.className && event.target.className.includes('dice-input'))) {\n        window.removeEventListener('mousedown', clickEvt);\n        window.removeEventListener('scroll', clickEvt);\n        graph.updateItem(item, {\n          label: input.value,\n        });\n        graph.layout(false);\n        graph.off('wheelZoom', clickEvt);\n        destroyEl();\n      }\n    };\n    graph.on('wheelZoom', clickEvt);\n    window.addEventListener('mousedown', clickEvt);\n    window.addEventListener('scroll', clickEvt);\n    input.addEventListener('keyup', (event) => {\n      if (event.key === 'Enter') {\n        clickEvt({\n          target: {},\n        });\n      }\n    });\n  },\n  hoverNode(evt) {\n    evt.currentTarget.updateItem(evt.item, {\n      hover: true,\n    });\n  },\n  hoverNodeOut(evt) {\n    evt.currentTarget.updateItem(evt.item, {\n      hover: false,\n    });\n  },\n});\nG6.registerBehavior('scroll-canvas', {\n  getEvents: function getEvents() {\n    return {\n      wheel: 'onWheel',\n    };\n  },\n\n  onWheel: function onWheel(ev) {\n    const {\n      graph\n    } = this;\n    if (!graph) {\n      return;\n    }\n    if (ev.ctrlKey) {\n      const canvas = graph.get('canvas');\n      const point = canvas.getPointByClient(ev.clientX, ev.clientY);\n      let ratio = graph.getZoom();\n      if (ev.wheelDelta > 0) {\n        ratio += ratio * 0.05;\n      } else {\n        ratio *= ratio * 0.05;\n      }\n      graph.zoomTo(ratio, {\n        x: point.x,\n        y: point.y,\n      });\n    } else {\n      const x = ev.deltaX || ev.movementX;\n      const y = ev.deltaY || ev.movementY || (-ev.wheelDelta * 125) / 3;\n      graph.translate(-x, -y);\n    }\n    ev.preventDefault();\n  },\n});\n\nconst dataTransform = (data) => {\n  const changeData = (d, level = 0, color) => {\n    const data = {\n      ...d,\n    };\n    switch (level) {\n      case 0:\n        data.type = 'dice-mind-map-root';\n        break;\n      case 1:\n        data.type = 'dice-mind-map-sub';\n        break;\n      default:\n        data.type = 'dice-mind-map-leaf';\n        break;\n    }\n\n    data.hover = false;\n\n    if (color) {\n      data.color = color;\n    }\n\n    if (level === 1 && !d.direction) {\n      if (!d.direction) {\n        data.direction = d.id.charCodeAt(d.id.length - 1) % 2 === 0 ? 'right' : 'left';\n      }\n    }\n\n    if (d.children) {\n      data.children = d.children.map((child) => changeData(child, level + 1, data.color));\n    }\n    return data;\n  };\n  return changeData(data);\n};\n\nconst container = document.getElementById('container');\nconst el = document.createElement('pre');\nel.innerHTML =\n  'Double click on node to change title, hover node to display ops buttons\\n双击修改节点标题, hover节点显示操作按钮';\n\ncontainer.appendChild(el);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst tree = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  fitViewPadding: [10, 20],\n  layout: {\n    type: 'mindmap',\n    direction: 'H',\n    getHeight: () => {\n      return 16;\n    },\n    getWidth: (node) => {\n      return node.level === 0 ?\n        Util.getTextSize(node.label, 16)[0] + 12 :\n        Util.getTextSize(node.label, 12)[0];\n    },\n    getVGap: () => {\n      return 10;\n    },\n    getHGap: () => {\n      return 60;\n    },\n    getSide: (node) => {\n      return node.data.direction;\n    },\n  },\n  defaultEdge: {\n    type: 'cubic-horizontal',\n    style: {\n      lineWidth: 2,\n    },\n  },\n  minZoom: 0.5,\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas', 'dice-mindmap'],\n  },\n});\n\ntree.data(dataTransform(rawData));\n\ntree.render();\n",title:{zh:"思维导图",en:"Mindmap"},filename:"mindmap.js",isNew:!1},{id:"customFlow",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1AZTQ4oSPowAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n// 实际开发中把 window.AntVUtil 换成从 @antv/util 引入的相关模块\n// replace window.AntVUtil.isObject with\n// import { isObject } from '@antv/util';\nconst isObject = window.AntVUtil.isObject;\n\n/**\n * Fund Transfer Demo\n * by 十吾\n */\nconst colorMap = {\n  A: '#72CC4A',\n  B: '#1A91FF',\n  C: '#FFAA15',\n};\nconst data = {\n  nodes: [\n    {\n      id: '1',\n      label: 'Company1',\n    },\n    {\n      id: '2',\n      label: 'Company2',\n    },\n    {\n      id: '3',\n      label: 'Company3',\n    },\n    {\n      id: '4',\n      label: 'Company4',\n    },\n    {\n      id: '5',\n      label: 'Company5',\n    },\n    {\n      id: '6',\n      label: 'Company6',\n    },\n    {\n      id: '7',\n      label: 'Company7',\n    },\n    {\n      id: '8',\n      label: 'Company8',\n    },\n    {\n      id: '9',\n      label: 'Company9',\n    },\n  ],\n  edges: [\n    {\n      source: '1',\n      target: '2',\n      data: {\n        type: 'A',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '1',\n      target: '3',\n      data: {\n        type: 'B',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '2',\n      target: '5',\n      data: {\n        type: 'C',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '5',\n      target: '6',\n      data: {\n        type: 'B',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '3',\n      target: '4',\n      data: {\n        type: 'C',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '4',\n      target: '7',\n      data: {\n        type: 'B',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '1',\n      target: '8',\n      data: {\n        type: 'B',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '1',\n      target: '9',\n      data: {\n        type: 'C',\n        amount: '100,000 Yuan',\n        date: '2019-08-03',\n      },\n    },\n  ],\n};\n\nG6.registerNode(\n  'round-rect',\n  {\n    drawShape: function drawShape(cfg, group) {\n      const width = cfg.style.width;\n      const stroke = cfg.style.stroke;\n      const rect = group.addShape('rect', {\n        attrs: {\n          x: -width / 2,\n          y: -15,\n          width,\n          height: 30,\n          radius: 15,\n          stroke,\n          lineWidth: 1.2,\n          fillOpacity: 1,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-shape',\n      });\n      group.addShape('circle', {\n        attrs: {\n          x: -width / 2,\n          y: 0,\n          r: 3,\n          fill: stroke,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape',\n      });\n      group.addShape('circle', {\n        attrs: {\n          x: width / 2,\n          y: 0,\n          r: 3,\n          fill: stroke,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape2',\n      });\n      return rect;\n    },\n    getAnchorPoints: function getAnchorPoints() {\n      return [\n        [0, 0.5],\n        [1, 0.5],\n      ];\n    },\n    update: function update(cfg, item) {\n      const group = item.getContainer();\n      const children = group.get('children');\n      const node = children[0];\n      const circleLeft = children[1];\n      const circleRight = children[2];\n\n      const stroke = cfg.style.stroke;\n\n      if (stroke) {\n        node.attr('stroke', stroke);\n        circleLeft.attr('fill', stroke);\n        circleRight.attr('fill', stroke);\n      }\n    },\n  },\n  'single-node',\n);\n\nG6.registerEdge('fund-polyline', {\n  itemType: 'edge',\n  draw: function draw(cfg, group) {\n    const startPoint = cfg.startPoint;\n    const endPoint = cfg.endPoint;\n\n    const Ydiff = endPoint.y - startPoint.y;\n\n    const slope = Ydiff !== 0 ? Math.min(500 / Math.abs(Ydiff), 20) : 0;\n\n    const cpOffset = slope > 15 ? 0 : 16;\n    const offset = Ydiff < 0 ? cpOffset : -cpOffset;\n\n    const line1EndPoint = {\n      x: startPoint.x + slope,\n      y: endPoint.y + offset,\n    };\n    const line2StartPoint = {\n      x: line1EndPoint.x + cpOffset,\n      y: endPoint.y,\n    };\n\n    // 控制点坐标\n    const controlPoint = {\n      x:\n        ((line1EndPoint.x - startPoint.x) * (endPoint.y - startPoint.y)) /\n          (line1EndPoint.y - startPoint.y) +\n        startPoint.x,\n      y: endPoint.y,\n    };\n\n    let path = [\n      ['M', startPoint.x, startPoint.y],\n      ['L', line1EndPoint.x, line1EndPoint.y],\n      ['Q', controlPoint.x, controlPoint.y, line2StartPoint.x, line2StartPoint.y],\n      ['L', endPoint.x, endPoint.y],\n    ];\n\n    if (Math.abs(Ydiff) <= 5) {\n      path = [\n        ['M', startPoint.x, startPoint.y],\n        ['L', endPoint.x, endPoint.y],\n      ];\n    }\n\n    const endArrow = cfg?.style && cfg.style.endArrow ? cfg.style.endArrow : false;\n    if (isObject(endArrow)) endArrow.fill = stroke;\n    const line = group.addShape('path', {\n      attrs: {\n        path,\n        stroke: colorMap[cfg.data && cfg.data.type],\n        lineWidth: 1.2,\n        endArrow,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'path-shape',\n    });\n\n    const labelLeftOffset = 0;\n    const labelTopOffset = 8;\n    // amount\n    const amount = group.addShape('text', {\n      attrs: {\n        text: cfg.data && cfg.data.amount,\n        x: line2StartPoint.x + labelLeftOffset,\n        y: endPoint.y - labelTopOffset - 2,\n        fontSize: 14,\n        textAlign: 'left',\n        textBaseline: 'middle',\n        fill: '#000000D9',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'text-shape-amount',\n    });\n    // type\n    group.addShape('text', {\n      attrs: {\n        text: cfg.data && cfg.data.type,\n        x: line2StartPoint.x + labelLeftOffset,\n        y: endPoint.y - labelTopOffset - amount.getBBox().height - 2,\n        fontSize: 10,\n        textAlign: 'left',\n        textBaseline: 'middle',\n        fill: '#000000D9',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'text-shape-type',\n    });\n    // date\n    group.addShape('text', {\n      attrs: {\n        text: cfg.data && cfg.data.date,\n        x: line2StartPoint.x + labelLeftOffset,\n        y: endPoint.y + labelTopOffset + 4,\n        fontSize: 12,\n        fontWeight: 300,\n        textAlign: 'left',\n        textBaseline: 'middle',\n        fill: '#000000D9',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'text-shape-date',\n    });\n    return line;\n  },\n});\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'dagre',\n    rankdir: 'LR',\n    nodesep: 30,\n    ranksep: 100,\n  },\n  modes: {\n    default: ['drag-canvas'],\n  },\n  defaultNode: {\n    type: 'round-rect',\n    labelCfg: {\n      style: {\n        fill: '#000000A6',\n        fontSize: 10,\n      },\n    },\n    style: {\n      stroke: '#72CC4A',\n      width: 150,\n    },\n  },\n  defaultEdge: {\n    type: 'fund-polyline',\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nconst edges = graph.getEdges();\nedges.forEach(function (edge) {\n  const line = edge.getKeyShape();\n  const stroke = line.attr('stroke');\n  const targetNode = edge.getTarget();\n  targetNode.update({\n    style: {\n      stroke,\n    },\n  });\n});\ngraph.paint();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义流向图",en:"Custom Flow"},filename:"customFlow.js",isNew:!1},{id:"indentedTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*9EHDSZVmLVgAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst { Util } = G6;\n\n\nconst rawData = {\n  label: 'Modeling Methods',\n  id: '0',\n  isRoot: true,\n  children: [\n    {\n      label: 'Classification',\n      id: '0-1',\n      color: '#5AD8A6',\n      children: [\n        {\n          label: 'Logistic regression',\n          id: '0-1-1',\n        },\n        {\n          label: 'Linear discriminant analysis',\n          id: '0-1-2',\n        },\n        {\n          label: 'Rules',\n          id: '0-1-3',\n        },\n        {\n          label: 'Decision trees',\n          id: '0-1-4',\n        },\n        {\n          label: 'Naive Bayes',\n          id: '0-1-5',\n        },\n        {\n          label: 'K nearest neighbor',\n          id: '0-1-6',\n        },\n        {\n          label: 'Probabilistic neural network',\n          id: '0-1-7',\n        },\n        {\n          label: 'Support vector machine',\n          id: '0-1-8',\n        },\n      ],\n    },\n    {\n      label: 'Consensus',\n      id: '0-2',\n      color: '#F6BD16',\n      children: [\n        {\n          label: 'Models diversity',\n          id: '0-2-1',\n          children: [\n            {\n              label: 'Different initializations',\n              id: '0-2-1-1',\n            },\n            {\n              label: 'Different parameter choices',\n              id: '0-2-1-2',\n            },\n            {\n              label: 'Different architectures',\n              id: '0-2-1-3',\n            },\n            {\n              label: 'Different modeling methods',\n              id: '0-2-1-4',\n            },\n            {\n              label: 'Different training sets',\n              id: '0-2-1-5',\n            },\n            {\n              label: 'Different feature sets',\n              id: '0-2-1-6',\n            },\n          ],\n        },\n        {\n          label: 'Methods',\n          id: '0-2-2',\n          children: [\n            {\n              label: 'Classifier selection',\n              id: '0-2-2-1',\n            },\n            {\n              label: 'Classifier fusion',\n              id: '0-2-2-2',\n            },\n          ],\n        },\n        {\n          label: 'Common',\n          id: '0-2-3',\n          children: [\n            {\n              label: 'Bagging',\n              id: '0-2-3-1',\n            },\n            {\n              label: 'Boosting',\n              id: '0-2-3-2',\n            },\n            {\n              label: 'AdaBoost',\n              id: '0-2-3-3',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      label: 'Regression',\n      id: '0-3',\n      color: '#269A99',\n      children: [\n        {\n          label: 'Multiple linear regression',\n          id: '0-3-1',\n        },\n        {\n          label: 'Partial least squares',\n          id: '0-3-2',\n        },\n        {\n          label: 'Multi-layer feedforward neural network',\n          id: '0-3-3',\n        },\n        {\n          label: 'General regression neural network',\n          id: '0-3-4',\n        },\n        {\n          label: 'Support vector regression',\n          id: '0-3-5',\n        },\n      ],\n    },\n  ],\n};\n\nconst COLORS = ['#5B8FF9', '#F6BD16', '#5AD8A6', '#945FB9', '#E86452', '#6DC8EC', '#FF99C3', '#1E9493', '#FF9845', '#5D7092'];\nconst BaseConfig = {\n  nameFontSize: 12,\n  childCountWidth: 22,\n  countMarginLeft: 0,\n  propertyCountWidth: 30,\n  itemPadding: 16,\n  selectedIconWidth: 12,\n  nameMarginLeft: 4,\n  rootPadding: 18,\n};\nconst KeyStyle = {\n  background: {\n    default: '',\n    hover: '#e8f7ff',\n    selected: '#e8f7ff',\n    actived: '#e8f7ff',\n  },\n  borderColor: {\n    default: '',\n    hover: '#1890FF',\n    selected: '#1890FF',\n    actived: '#1890FF',\n  },\n};\nconst ChildCountStyle = {\n  background: {\n    default: '#fff',\n    hover: '#E8F7FF',\n    expanded: '#E6FFFB',\n    expandedHover: '#CEF5EF',\n  },\n  borderColor: {\n    default: '#1890ff',\n    expanded: '#5CDBD3',\n  },\n};\nconst NameStyle = {\n  color: {\n    default: 'rgba(0, 0, 0, .65)',\n    dash: 'rgba(0, 0, 0, .3)',\n    hover: '#40A8FF',\n    actived: '#40A8FF',\n    selected: '#40A8FF',\n  },\n};\nconst MainStyle = {\n  background: {\n    default: '#fff',\n    hover: '#e8f7ff',\n    actived: '#e8f7ff',\n    selected: '#e8f7ff',\n  },\n};\n\n\nG6.registerNode('treeNode', {\n  options: {\n    style: {\n      fill: '#e8f7ff',\n    },\n    stateStyles: {\n      hover: {\n        fillOpacity: 0.6,\n      },\n      selected: {},\n    },\n  },\n  addLabel(group, label, x, y) {\n    return group.addShape('text', {\n      attrs: {\n        text: label,\n        x: x * 2,\n        y,\n        textAlign: 'left',\n        textBaseline: 'top',\n        fontFamily: 'PingFangSC-Regular',\n      },\n      cursor: 'pointer',\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'name-text-shape',\n    });\n  },\n  addBottomLine(group, rootNode, props) {\n    if (!rootNode) {\n      const { x, width, stroke, lineWidth } = props;\n      return group.addShape('path', {\n        attrs: {\n          path: [\n            ['M', x - 1, 0],\n            ['L', width, 0],\n          ],\n          stroke,\n          lineWidth,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'node-path-shape',\n      });\n    }\n  },\n  addHoverBack(group, rootNode, props) {\n    const {\n      hasChildren,\n      width,\n      selectedIconWidth,\n      childCountWidth,\n      selected,\n      fill,\n      height,\n      selectedUrl,\n      x,\n      y,\n      mainX,\n      mainY\n    } = props;\n\n    if (!rootNode) {\n      // hover背景\n      let backgroundWidth = hasChildren ? width - childCountWidth : width;\n\n      if (!selected) {\n        backgroundWidth -= selectedIconWidth;\n      }\n      group.addShape('rect', {\n        attrs: {\n          x: mainX,\n          y: mainY,\n          width: backgroundWidth,\n          height,\n          radius: 14,\n          fill: fill,\n          cursor: 'pointer',\n        },\n        // capture: false,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'main-shape',\n      });\n\n      // 选中状态\n      group.addShape('image', {\n        attrs: {\n          img: selected ? selectedUrl : '',\n          x,\n          y: y - 6,\n          width: selectedIconWidth,\n          height: 12,\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'main-selected-shape',\n      });\n    }\n  },\n  addName(group, rootNode, props) {\n    const {\n      label,\n      mainX,\n      rootPadding,\n      fill,\n      selected,\n      selectedIconWidth,\n      nameMarginLeft,\n      y\n    } = props;\n    if (rootNode) {\n      group.addShape('text', {\n        attrs: {\n          text: label,\n          x: mainX + rootPadding,\n          y: 1,\n          textAlign: 'left',\n          textBaseline: 'middle',\n          fill,\n          fontSize: 12,\n          fontFamily: 'PingFangSC-Regular',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'root-text-shape',\n      });\n    } else {\n      group.addShape('text', {\n        attrs: {\n          text: label,\n          x: selected ? mainX + 6 + selectedIconWidth + nameMarginLeft : mainX + 6,\n          y: y - 5,\n          textAlign: 'start',\n          textBaseline: 'top',\n          fill,\n          fontSize: 12,\n          fontFamily: 'PingFangSC-Regular',\n          cursor: 'pointer'\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'not-root-text-shape',\n      });\n    }\n  },\n  addChildCount(group, rootNode, props) {\n    const {\n      hasChildren, width, childCountWidth, collapsed, schemaType\n    } = props\n    if (hasChildren && !rootNode) {\n      const childCountHeight = 12;\n      const childCountX = width - childCountWidth;\n      const childCountY = -childCountHeight / 2;\n\n      group.addShape('rect', {\n        attrs: {\n          width: childCountWidth,\n          height: 12,\n          stroke: collapsed\n            ? ChildCountStyle.borderColor.default\n            : ChildCountStyle.borderColor.expanded,\n          fill: collapsed\n            ? ChildCountStyle.background.default\n            : ChildCountStyle.background.expanded,\n          x: childCountX,\n          y: childCountY,\n          radius: 6,\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-rect-shape',\n      });\n      group.addShape('text', {\n        attrs: {\n          text: schemaType ? `${schemaType.subTypeCount}` : '0',\n          fill: 'rgba(0, 0, 0, .65)',\n          x: childCountX + childCountWidth / 2,\n          y: childCountY + 12,\n          fontSize: 10,\n          width: childCountWidth,\n          textAlign: 'center',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-text-shape',\n      });\n    }\n  },\n  draw(model, group) {\n    const { collapsed, selected, isInclude, children, label } = model;\n    const schemaType = model.schemaType;\n    const hasChildren = children?.length;\n    const {\n      childCountWidth,\n      countMarginLeft,\n      itemPadding,\n      selectedIconWidth,\n      nameMarginLeft,\n      rootPadding,\n    } = BaseConfig;\n\n    let width = 0;\n    const height = 28;\n    // let x = -width / 2;\n    const x = 0;\n    const y = -height / 2;\n    const borderRadius = 4;\n    // 名称文本\n    const text = this.addLabel(group, label, x, y);\n    const textWidth = text.getBBox().width;\n    width = textWidth + itemPadding + selectedIconWidth + nameMarginLeft;\n\n    width = width < minWidth ? minWidth : width;\n\n    if (!rootNode && hasChildren) {\n      width += countMarginLeft;\n      width += childCountWidth;\n    }\n\n    const keyShapeAttrs = {\n      x,\n      y,\n      width,\n      height,\n      radius: borderRadius,\n      fill: undefined,\n      stroke: undefined,\n    };\n    // keyShape根节点选中样式\n    if (rootNode && selected) {\n      keyShapeAttrs.fill = KeyStyle.background.selected;\n      keyShapeAttrs.stroke = KeyStyle.borderColor.selected;\n    }\n    const keyShape = group.addShape('rect', {\n      attrs: keyShapeAttrs,\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'root-key-shape-rect-shape',\n    });\n\n    this.addBottomLine(group, rootNode, {\n      stroke: '#AAB7C4',\n      lineWidth: 1,\n      x,\n      width\n    })\n\n    const mainX = x - 6;\n    const mainY = -height - 1;\n\n    const hoverBackProps = {\n      hasChildren, width, selectedIconWidth,\n      childCountWidth,\n      selected,\n      fill: MainStyle.background.default,\n      height,\n      selectedUrl,\n      x,\n      y,\n      mainX,\n      mainY\n    };\n    this.addHoverBack(group, rootNode, hoverBackProps);\n\n    let nameColor = NameStyle.color.default;\n    if (selected) {\n      nameColor = NameStyle.color.selected;\n    }\n\n    if (model.showInclude && !isInclude) {\n      nameColor = NameStyle.color.dash;\n    }\n\n    // 名称\n    const nameProps = {\n      label,\n      mainX,\n      rootPadding,\n      fill: nameColor,\n      selected,\n      selectedIconWidth,\n      nameMarginLeft,\n      y\n    };\n    this.addName(group, rootNode, nameProps);\n\n    // 子类数量\n    const childCountProps = {\n      hasChildren, width, childCountWidth, collapsed, schemaType\n    }\n    this.addChildCount(group, rootNode, childCountProps);\n\n    return keyShape;\n  },\n});\n\nG6.registerNode('indentedRoot', {\n  draw(model, group) {\n    const rootColor = '#576286';\n    const keyShape = group.addShape('rect', {\n      attrs: {\n        x: -46,\n        y: -16,\n        width: 92,\n        height: 32,\n        fill: rootColor,\n        radius: 2,\n        stroke: '#5B8FF9',\n        lineWidth: model.selected ? 2 : 0,\n        cursor: 'pointer'\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'key-shape'\n    })\n\n    if (model.label) {\n      const text = group.addShape('text', {\n        attrs: {\n          text: model.label,\n          fill: \"#fff\",\n          fontSize: 12,\n          x: 0,\n          y: 0,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          cursor: 'pointer'\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'root-text-shape'\n      });\n      const textBBox = text.getBBox();\n      const width = textBBox.width + 24;\n      const height = textBBox.height + 12;\n      keyShape.attr({\n        x: -width / 2,\n        y: -height / 2,\n        width,\n        height\n      })\n    }\n\n    const { collapsed, children } = model;\n    const hasChildren = children?.length;\n    let clickCircleY = 22;\n    // 子类数量，绘制圆点在节点正下方\n    if (hasChildren) {\n      const schemaType = model.schemaType;\n      const childCountGroup = group.addGroup({\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-group'\n      })\n      childCountGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, clickCircleY, 1])\n      const countBackWidth = collapsed ? 26 : 12;\n      childCountGroup.addShape('rect', {\n        attrs: {\n          width: countBackWidth,\n          height: 12,\n          radius: 6,\n          stroke: rootColor,\n          lineWidth: 2,\n          fill: collapsed ? rootColor : '#fff',\n          x: -countBackWidth / 2,\n          y: -6,\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-rect-shape',\n      });\n      const childCountText = childCountGroup.addShape('text', {\n        attrs: {\n          text: schemaType ? `${schemaType.subTypeCount}` : '0',\n          fill: '#fff',\n          x: 0,\n          y: 0,\n          fontSize: 10,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-text-shape',\n      });\n      const childHoverIcon = childCountGroup.addShape('path', {\n        attrs: {\n          stroke: '#fff',\n          lineWidth: 1,\n          cursor: 'pointer',\n          path: [['M', -3, 2], ['L', 0, -2], ['L', 3, 2]]\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-expand-icon',\n        capture: false\n      });\n      childCountGroup.addShape('path', {\n        attrs: {\n          path: [['M', 0, -13], ['L', 0, -6]],\n          stroke: rootColor,\n          lineWidth: 2,\n        }\n      })\n      childHoverIcon.hide();\n\n      // 连接 count 的线段\t\n      const countLink = group.addShape('path', {\n        attrs: {\n          path: [['M', 0, 0], ['L', 0, 11]],\n          stroke: model.branchColor,\n          lineWidth: 2,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'count-link'\n      });\n      countLink.toBack();\n\n      if (collapsed) {\n        childCountGroup.show();\n        childCountText.show();\n        countLink.show();\n      }\n      else {\n        childCountGroup.hide();\n        childCountText.hide();\n        countLink.hide();\n      }\n      clickCircleY += 16;\n    }\n\n    // 增加子节点 icon\t\n    const addChildIcon = group.addShape('marker', {\n      attrs: {\n        x: 0,\n        y: clickCircleY,\n        r: 6,\n        symbol: G6.Marker.expand,\n        stroke: '#999',\n        fill: '#fff',\n        lineWidth: 1,\n        cursor: 'pointer'\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'add-child-icon',\n    });\n\n    addChildIcon.hide();\n    // 连接增加子节点 icon 的线段\t\n    const addChildLink = group.addShape('path', {\n      attrs: {\n        path: [['M', 0, clickCircleY - 10], ['L', 0, clickCircleY]],\n        stroke: model.branchColor,\n        lineWidth: 2,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'add-child-link'\n    });\n    addChildLink.toBack();\n    addChildLink.hide();\n\n    const bbox = keyShape.getBBox();\n    const backContainer = group.addShape('path', {\n      attrs: {\n        path: hasChildren ? [\n          ['M', bbox.minX, bbox.minY],\n          ['L', bbox.maxX, bbox.minY],\n          ['L', bbox.maxX, bbox.maxY],\n          ['L', 10, bbox.maxY],\n          ['L', 10, bbox.maxY + 28],\n          ['L', -10, bbox.maxY + 28],\n          ['L', -10, bbox.maxY],\n          ['L', bbox.minX, bbox.maxY],\n          ['Z']\n        ] : [\n          ['M', bbox.minX, bbox.minY],\n          ['L', bbox.maxX, bbox.minY],\n          ['L', bbox.maxX, bbox.maxY],\n          ['L', 10, bbox.maxY],\n          ['L', 10, bbox.maxY + 14],\n          ['L', -10, bbox.maxY + 14],\n          ['L', -10, bbox.maxY],\n          ['L', bbox.minX, bbox.maxY],\n          ['Z']\n        ],\n        fill: '#fff',\n        opacity: 0\n      },\n      draggable: true\n    })\n    backContainer.toBack();\n    return keyShape;\n  },\n  getAnchorPoints() {\n    return [\n      [0.5, 1],\n    ];\n  },\n  update: undefined,\n  setState(name, value, node) {\n    if (name === 'closest') {\n      const keyShape = node.getKeyShape();\n      if (value) keyShape.attr('lineWidth', 2);\n      else if (!node.getModel().selected) keyShape.attr('lineWidth', 1);\n    }\n  }\n});\n\nG6.registerNode('indentedNode', {\n  addChildCount(group, tag, props) {\n    const { collapsed, branchColor, count } = props;\n    let clickCircleY = 10;\n    // 子类数量 icon，绘制圆点在节点正下方\n    if (tag) {\n      const childCountGroup = group.addGroup({\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-group'\n      });\n      childCountGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, clickCircleY, 1])\n      const countBackWidth = collapsed ? 26 : 12;\n      childCountGroup.addShape('rect', {\n        attrs: {\n          width: countBackWidth,\n          height: 12,\n          radius: 6,\n          stroke: branchColor,\n          lineWidth: 2,\n          fill: collapsed ? branchColor : '#fff',\n          x: -countBackWidth / 2,\n          y: -6,\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-rect-shape',\n      });\n      const childCountText = childCountGroup.addShape('text', {\n        attrs: {\n          text: count,\n          fill: '#fff',\n          x: 0,\n          y: 0,\n          fontSize: 10,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-text-shape',\n      });\n      const childHoverIcon = childCountGroup.addShape('path', {\n        attrs: {\n          stroke: '#fff',\n          lineWidth: 1,\n          cursor: 'pointer',\n          path: [['M', -3, 2], ['L', 0, -2], ['L', 3, 2]]\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-expand-icon',\n        capture: false\n      });\n      childHoverIcon.hide();\n\n      // 连接 count 的线段\n      const countLink = group.addShape('path', {\n        attrs: {\n          path: [['M', 0, 0], ['L', 0, 11]],\n          stroke: branchColor,\n          lineWidth: 2,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'count-link'\n      });\n      countLink.toBack();\n\n      if (collapsed) {\n        childCountGroup.show();\n        childCountText.show();\n        countLink.show();\n      }\n      else {\n        childCountGroup.hide();\n        childCountText.hide();\n        countLink.hide();\n      }\n\n      clickCircleY += 16;\n    }\n\n    // 增加子节点 icon\n    const addChildIcon = group.addShape('marker', {\n      attrs: {\n        x: 0,\n        y: clickCircleY,\n        r: 6,\n        symbol: G6.Marker.expand,\n        stroke: '#999',\n        fill: '#fff',\n        lineWidth: 1,\n        cursor: 'pointer'\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'add-child-icon',\n    });\n    addChildIcon.hide();\n\n    // 连接增加子节点 icon 的线段\n    const addChildLink = group.addShape('path', {\n      attrs: {\n        path: [['M', 0, clickCircleY - 10], ['L', 0, clickCircleY]],\n        stroke: branchColor,\n        lineWidth: 2,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'add-child-link'\n    });\n    addChildLink.toBack();\n    addChildLink.hide();\n  },\n  addHoverBack(group, props) {\n    const { mainX, mainY, width, height, fill } = props\n    group.addShape('rect', {\n      attrs: {\n        x: mainX,\n        y: mainY,\n        width,\n        height,\n        radius: 11,\n        fill,\n        cursor: 'pointer'\n      },\n      // capture: false,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'main-shape',\n      draggable: true\n    });\n  },\n  addName(group, props) {\n    const { label, x = 0, y, fill } = props;\n    return group.addShape('text', {\n      attrs: {\n        text: label,\n        x,\n        y,\n        textAlign: 'start',\n        textBaseline: 'top',\n        fill,\n        fontSize: 14,\n        fontFamily: 'PingFangSC-Regular',\n        cursor: 'pointer',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'not-root-text-shape',\n      draggable: true\n    });\n  },\n  draw(model, group) {\n    const { collapsed, selected, depth, label } = model;\n    // 是否为根节点\n    const rootNode = depth === 0;\n    // 子节点数量\n    const childCount = model.children?.length || 0;\n\n    const {\n      itemPadding,\n      nameMarginLeft,\n    } = BaseConfig;\n\n    let width = 0;\n    const height = 24;\n    // let x = -width / 2;\n    const x = 0;\n    const y = -height / 2;\n    const borderRadius = 4;\n    // 名称文本\n    const text = this.addName(group, { label, x, y });\n\n    let textWidth = text.getBBox().width;\n    width = textWidth + itemPadding + nameMarginLeft;\n\n    const keyShapeAttrs = {\n      x,\n      y,\n      width,\n      height,\n      radius: borderRadius,\n      fill: undefined,\n      stroke: undefined,\n    };\n\n    const keyShape = group.addShape('rect', {\n      attrs: keyShapeAttrs,\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'root-key-shape-rect-shape',\n    });\n\n    // 底部横线\n    // const branchThick = model.depth <= 2 ? 3 : model.depth <= 4 ? 2 : 1;\n    const bottomLine = this.addBottomLine(group, false, {\n      stroke: model.branchColor || '#AAB7C4',\n      lineWidth: 3, // model.lineWidth || branchThick || 1,\n      x,\n      width\n    });\n\n    const mainX = x - 6;\n    const mainY = -height - 6;\n\n    // hover背景\n    this.addHoverBack(group, {\n      fill: selected ? MainStyle.background.hover : MainStyle.background.default,\n      height,\n      width,\n      mainX,\n      mainY,\n    });\n\n    let nameColor = NameStyle.color.default;\n    if (selected) {\n      nameColor = NameStyle.color.hover;\n    }\n\n    // 名称\n    text.attr({\n      y: y - 12,\n      fill: nameColor\n    });\n    text.toFront();\n    textWidth = text.getBBox().width;\n\n    if (bottomLine) bottomLine.toFront();\n\n    this.addChildCount(group, childCount && !rootNode, {\n      collapsed,\n      branchColor: model.branchColor,\n      count: childCount ? `${childCount}` : undefined,\n    });\n\n    const bbox = group.getBBox();\n    const backContainer = group.addShape('path', {\n      attrs: {\n        path: childCount ? [\n          ['M', bbox.minX, bbox.minY],\n          ['L', bbox.maxX, bbox.minY],\n          ['L', bbox.maxX, bbox.maxY],\n          ['L', bbox.minX + 20, bbox.maxY],\n          ['L', bbox.minX + 20, bbox.maxY + 20],\n          ['L', bbox.minX, bbox.maxY + 20],\n          ['Z']\n        ] : [\n          ['M', bbox.minX, bbox.minY],\n          ['L', bbox.maxX, bbox.minY],\n          ['L', bbox.maxX, bbox.maxY],\n          ['L', bbox.minX, bbox.maxY],\n          ['Z']\n        ],\n        fill: '#fff',\n        opacity: 0\n      },\n      draggable: true\n    })\n    backContainer.toBack();\n    return keyShape;\n  },\n  setState(name, value, node) {\n    if (name === 'closest' || name === 'selected') {\n      const group = node.getContainer();\n      const textShape = group.find(child => child.get('name') === 'not-root-text-shape');\n      const mainShape = group.find(child => child.get('name') === 'main-shape');\n      if (value) {\n        if (textShape) {\n          textShape.attr('fill', NameStyle.color.hover);\n        }\n        if (mainShape) {\n          mainShape.attr('fill', MainStyle.background.hover);\n        }\n      } else {\n        const selected = node.hasState('selected');\n        if (selected) {\n          if (textShape) {\n            textShape.attr('fill', NameStyle.color.selected);\n          }\n          if (mainShape) {\n            mainShape.attr('fill', MainStyle.background.default);\n          }\n        } else {\n          if (textShape) {\n            textShape.attr('fill', NameStyle.color.default);\n          }\n          if (mainShape) {\n            mainShape.attr('fill', MainStyle.background.default);\n          }\n        }\n      }\n    }\n  }\n}, 'treeNode');\n\nG6.registerEdge('indentedEdge', {\n  afterDraw: (cfg, group) => {\n    const sourceNode = cfg.sourceNode?.getModel();\n    const targetNode = cfg.targetNode?.getModel();\n    const color = sourceNode.branchColor || targetNode.branchColor || cfg.color || '#000';\n    // const branchThick = sourceNode.depth <= 1 ? 3 : sourceNode.depth <= 3 ? 2 : 1;\n    const keyShape = group.get('children')[0];\n    keyShape.attr({\n      stroke: color,\n      lineWidth: 3 // branchThick\n    });\n    group.toBack();\n  },\n  getControlPoints: (cfg) => {\n    const startPoint = cfg.startPoint;\n    const endPoint = cfg.endPoint;\n    return [\n      startPoint,\n      {\n        x: startPoint.x,\n        y: endPoint.y,\n      },\n      endPoint,\n    ];\n  },\n  update: undefined\n}, 'polyline');\n\n\nG6.registerBehavior('wheel-scroll', {\n  getDefaultCfg() {\n    return {\n      direction: 'y',\n      zoomKey: 'ctrl',\n      sensitivity: 3,\n      // wheel-scroll 可滚动的扩展范围，默认为 0，即最多可以滚动一屏的位置\n      // 当设置的值大于 0 时，即滚动可以超过一屏\n      // 当设置的值小于 0 时，相当于缩小了可滚动范围\n      // 具体实例可参考：https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IFfoS67_HssAAAAAAAAAAAAAARQnAQ\n      scalableRange: -64,\n    };\n  },\n\n  getEvents() {\n    if (!this.zoomKey || ['shift', 'ctrl', 'alt', 'control'].indexOf(this.zoomKey) === -1) this.zoomKey = 'ctrl';\n    return {\n      wheel: 'onWheel',\n    };\n  },\n\n  onWheel(ev) {\n    const graph = this.graph;\n    let keyDown = ev[`${this.zoomKey}Key`];\n    if (this.zoomKey === 'control') keyDown = ev.ctrlKey;\n    if (keyDown) {\n      const sensitivity = this.get('sensitivity');\n      const canvas = graph.get('canvas');\n      const point = canvas.getPointByClient(ev.clientX, ev.clientY);\n      let ratio = graph.getZoom();\n      if (ev.wheelDelta > 0) {\n        ratio *= (1 + 0.01 * sensitivity);\n      } else {\n        ratio *= (1 - 0.01 * sensitivity);\n      }\n      graph.zoomTo(ratio, {\n        x: point.x,\n        y: point.y,\n      });\n      graph.emit('wheelzoom', ev);\n    } else {\n      let dx = ev.deltaX || ev.movementX;\n      let dy = ev.deltaY || ev.movementY;\n      if (!dy && navigator.userAgent.indexOf('Firefox') > -1) dy = (-ev.wheelDelta * 125) / 3\n\n      const width = this.graph.get('width');\n      const height = this.graph.get('height');\n      const graphCanvasBBox = this.graph.get('group').getCanvasBBox();\n\n      let expandWidth = this.scalableRange;\n      let expandHeight = this.scalableRange;\n      // 若 scalableRange 是 0~1 的小数，则作为比例考虑\n      if (expandWidth < 1 && expandWidth > -1) {\n        expandWidth = width * expandWidth;\n        expandHeight = height * expandHeight;\n      }\n\n      const { minX, maxX, minY, maxY } = graphCanvasBBox;\n\n      if (dx > 0) {\n        if (maxX < -expandWidth) {\n          dx = 0\n        } else if (maxX - dx < -expandWidth) {\n          dx = maxX + expandWidth\n        }\n      } else if (dx < 0) {\n        if (minX > width + expandWidth) {\n          dx = 0\n        } else if (minX - dx > width + expandWidth) {\n          dx = minX - (width + expandWidth)\n        }\n      }\n\n      if (dy > 0) {\n        if (maxY < -expandHeight) {\n          dy = 0\n        } else if (maxY - dy < -expandHeight) {\n          dy = maxY + expandHeight\n        }\n      } else if (dy < 0) {\n        if (minY > height + expandHeight) {\n          dy = 0\n        } else if (minY - dy > height + expandHeight) {\n          dy = minY - (height + expandHeight)\n        }\n      }\n\n      if (this.get('direction') === 'x') {\n        dy = 0;\n      } else if (this.get('direction') === 'y') {\n        dx = 0;\n      }\n\n      graph.translate(-dx, -dy);\n    }\n    ev.preventDefault();\n  },\n});\nG6.registerBehavior('drag-branch', {\n\n  getEvents: function getEvents() {\n    return {\n      'node:dragstart': 'dragstart',\n      'node:drag': 'drag',\n      'node:dragend': 'dragend',\n      'node:dragenter': 'dragenter',\n      'node:dragleave': 'dragleave',\n    };\n  },\n  dragstart: function dragstart(e) {\n    this.set('foundNode', undefined)\n    this.origin = {\n      x: e.x,\n      y: e.y,\n    };\n    this.target = e.item;\n    const graph = this.get('graph');\n    // 未配置 shouldBegin 时 默认为 true\n    if (this.shouldBegin && !this.shouldBegin(graph.findDataById(this.target?.getID()))) {\n      this.began = false;\n      return;\n    }\n    this.began = true;\n  },\n  dragenter: function dragenter(e) {\n    if (!this.began) {\n      return;\n    }\n    const graph = this.get('graph');\n    const foundNode = e.item;\n    if (foundNode) graph.setItemState(foundNode, 'closest', true);\n    this.set('foundNode', foundNode);\n  },\n  dragleave: function dragleave(e) {\n    if (!this.began) {\n      return;\n    }\n    const graph = this.get('graph');\n    const foundNode = this.get('foundNode');\n    if (foundNode) graph.setItemState(foundNode, 'closest', false);\n    this.set('foundNode', foundNode);\n  },\n  drag: function drag(e) {\n    if (!this.began) {\n      return;\n    }\n    // move the delegate\n    this.updateDelegate(e);\n  },\n  dragend: function dragend(e) {\n    const graph = this.get('graph');\n    const foundNode = this.get('foundNode');\n    if (foundNode) {\n      graph.setItemState(foundNode, 'closest', false);\n    }\n    if (!this.began) {\n      return;\n    }\n    this.began = false;\n    const { item } = e;\n    const id = item.getID();\n    const data = graph.findDataById(id);\n\n    // remove delegate\n    if (this.delegateRect) {\n      this.delegateRect.remove();\n      this.delegateRect = null;\n    }\n\n    if (!foundNode) {\n      graph.emit('afterdragbranch', { success: false, message: 'Failed. No node close to the dragged node.', branch: data })\n      return;\n    }\n\n    const foundNodeId = foundNode.getID();\n\n    let oriParentData;\n    Util.traverseTree(graph.get('data'), (d) => {\n      if (oriParentData) return false;\n      if (d.children?.filter(child => child.id === id)?.length) {\n        oriParentData = d;\n      }\n      return true;\n    });\n\n    // 未配置 shouldEnd，则默认为 true\n    if (this.shouldEnd && !this.shouldEnd(data, graph.findDataById(foundNodeId), oriParentData)) {\n      return;\n    }\n\n    // if the foundNode is a descent of the dragged node, return\n    let isDescent = false;\n\n    Util.traverseTree(data, (d) => {\n      if (d.id === foundNodeId) isDescent = true;\n    });\n    if (isDescent) {\n      const newParentData = graph.findDataById(foundNodeId);\n      graph.emit('afterdragbranch', { success: false, message: 'Failed. The target node is a descendant of the dragged node.', newParentData, branch: data })\n      return;\n    }\n\n    const newParentData = graph.findDataById(foundNodeId);\n    // 触发外部对数据的改变\n    graph.emit('afterdragbranch', { success: true, message: 'Success.', newParentData, oriParentData, branch: data })\n    graph.removeChild(data.id);\n    setTimeout(() => {\n      let newChildren = newParentData.children;\n      if (newChildren) newChildren.push(data);\n      else newChildren = [data];\n      // 更新正在被操作的子树颜色\n      Util.traverseTree(data, d => {\n        d.branchColor = newParentData.branchColor\n      })\n      graph.updateChildren(newChildren, newParentData.id);\n    }, 600);\n  },\n  updateDelegate(e) {\n    const { graph } = this;\n    if (!this.delegateRect) {\n      // 拖动多个\n      const parent = graph.get('group');\n      const attrs = {\n        fill: '#F3F9FF',\n        fillOpacity: 0.5,\n        stroke: '#1890FF',\n        strokeOpacity: 0.9,\n        lineDash: [5, 5],\n      };\n\n      const { x: cx, y: cy, width, height, minX, minY } = this.calculationGroupPosition(e);\n      this.originPoint = { x: cx, y: cy, width, height, minX, minY };\n      // model上的x, y是相对于图形中心的，delegateShape是g实例，x,y是绝对坐标\n      this.delegateRect = parent.addShape('rect', {\n        attrs: {\n          width,\n          height,\n          x: cx,\n          y: cy,\n          ...attrs,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-delegate-shape',\n      });\n      this.delegateRect.set('capture', false);\n    } else {\n      const clientX = e.x - this.origin.x + this.originPoint.minX;\n      const clientY = e.y - this.origin.y + this.originPoint.minY;\n      this.delegateRect.attr({\n        x: clientX,\n        y: clientY,\n      });\n    }\n  },\n  calculationGroupPosition(evt) {\n    let node = this.target;\n    if (!node) {\n      node = evt.item;\n    }\n\n    const bbox = node.getBBox();\n    const { minX, minY, maxX, maxY } = bbox;\n\n    return {\n      x: Math.floor(minX),\n      y: Math.floor(minY),\n      width: Math.ceil(maxX) - Math.floor(minX),\n      height: Math.ceil(maxY) - Math.floor(minY),\n      minX,\n      minY,\n    };\n  },\n});\nG6.registerBehavior('hover-node', {\n  getEvents() {\n    return {\n      'node:mouseover': 'onNodeMouseOver',\n      'node:mouseleave': 'onNodeMouseLeave',\n      'node:mouseenter': 'onNodeMouseEnter'\n    };\n  },\n  onNodeMouseEnter(ev) {\n    const { item } = ev;\n    if (!item || item.get('destroyed')) return;\n    item.toFront();\n    const model = item.getModel();\n    const { collapsed, depth } = model;\n    const rootNode = depth === 0 || model.isRoot;\n    const group = item.getContainer();\n\n    if (rootNode) return;\n\n    // 控制子节点个数标记\n    if (!collapsed) {\n      const childCountGroup = group.find(e => e.get('name') === 'child-count-group');\n      if (childCountGroup) {\n        childCountGroup.show();\n      }\n    }\n    this.graph.setItemState(item, 'hover', true);\n  },\n  onNodeMouseOver(ev) {\n    const shape = ev.target;\n\n    // tooltip显示、隐藏\n    this.graph.emit('tooltip: show', ev);\n\n    // expand 状态下，若 hover 到子节点个数标记，填充背景+显示收起 icon\n    const { item } = ev;\n    const group = item.getContainer();\n    const model = item.getModel();\n    if (!model.collapsed) {\n      const childCountGroup = group.find(e => e.get('name') === 'child-count-group');\n      if (childCountGroup) {\n        childCountGroup.show();\n        const back = childCountGroup.find(e => e.get('name') === 'child-count-rect-shape');\n        const expandIcon = childCountGroup.find(e => e.get('name') === 'child-count-expand-icon');\n        const rootNode = model.depth === 0 || model.isRoot;\n        const branchColor = rootNode ? '#576286' : model.branchColor;\n        if (shape.get('parent').get('name') === 'child-count-group') {\n          if (back) {\n            back.attr('fill', branchColor || '#fff');\n          }\n          if (expandIcon) {\n            expandIcon.show();\n          }\n        } else {\n          if (back) {\n            back.attr('fill', '#fff');\n          }\n          if (expandIcon) {\n            expandIcon.hide();\n          }\n        }\n      }\n    }\n\n    const addChildIcon = group.find(e => e.get('name') === 'add-child-icon');\n    if (addChildIcon) {\n      addChildIcon.show();\n    }\n    const addChildLink = group.find(e => e.get('name') === 'add-child-link');\n    if (addChildLink) {\n      addChildLink.show();\n    }\n  },\n  onNodeMouseLeave(ev) {\n    const { item } = ev;\n    const model = item.getModel();\n    const group = item.getContainer();\n    const { collapsed } = model;\n\n    if (!collapsed) {\n      const childCountGroup = group.find(e => e.get('name') === 'child-count-group');\n      if (childCountGroup) {\n        childCountGroup.hide();\n      }\n\n      const iconsLinkPath = group.find(e => e.get('name') === 'icons-link-path');\n      if (iconsLinkPath) {\n        iconsLinkPath.hide();\n      }\n    }\n\n    const addChildIcon = group.find(e => e.get('name') === 'add-child-icon');\n    if (addChildIcon) {\n      addChildIcon.hide();\n    }\n\n    const addChildLink = group.find(e => e.get('name') === 'add-child-link');\n    if (addChildLink) {\n      addChildLink.hide();\n    }\n\n    this.graph.emit('tooltip: hide', ev);\n  },\n});\nG6.registerBehavior('click-node', {\n  getEvents() {\n    return {\n      'node:click': 'onNodeClick',\n      'canvas:click': 'onCanvasClick'\n    };\n  },\n  onNodeClick(e) {\n    const { item, target } = e;\n    const shape = target;\n    const shapeName = shape.cfg.name;\n\n    // 点击增加节点\n    if (shapeName === 'add-child-icon') {\n      const data = this.graph.findDataById(item.getID());\n      if (!data.children) data.children = [];\n      data.children.push({\n        id: `node-${Math.random()}`,\n        label: 'new node',\n        branchColor: data.branchColor,\n        type: 'indentedNode'\n      });\n      this.graph.updateChildren(data.children, data.id)\n      return;\n    }\n    // 点击收起/展开 icon\n    if (shapeName === 'child-count-rect-shape' || shapeName === 'child-count-text-shape') {\n      const model = item.getModel();\n      const updatedCollapsed = !model.collapsed;\n      this.graph.updateItem(item, { collapsed: updatedCollapsed });\n      this.graph.layout();\n      return;\n    }\n\n    // 选中节点\n    this.graph.getNodes().forEach(node => {\n      this.graph.setItemState(node, 'selected', false);\n    });\n    this.graph.setItemState(item, 'selected', true);\n\n    return;\n  },\n  onCanvasClick(e) {\n    this.graph.getNodes().forEach(node => {\n      this.graph.setItemState(node, 'selected', false);\n    })\n  }\n})\n\nconst dataTransform = (data) => {\n  const changeData = (d, level = 0, color) => {\n    const data = {\n      ...d,\n    };\n    data.type = level === 0 ? 'indentedRoot' : 'indentedNode';\n    data.hover = false;\n\n    if (color) {\n      data.color = color;\n    }\n\n    if (level === 1 && !d.direction) {\n      if (!d.direction) {\n        data.direction = d.id.charCodeAt(d.id.length - 1) % 2 === 0 ? 'right' : 'left';\n      }\n    }\n\n    if (d.children) {\n      data.children = d.children.map((child) => changeData(child, level + 1, data.color));\n    }\n    // 给定 branchColor 和 0-2 层节点 depth\n    if (data.children?.length) {\n      data.depth = 0;\n      data.children.forEach((subtree, i) => {\n        subtree.branchColor = COLORS[i % COLORS.length];\n        // dfs\n        let currentDepth = 1;\n        subtree.depth = currentDepth;\n        Util.traverseTree(subtree, child => {\n          child.branchColor = COLORS[i % COLORS.length];\n\n          if (!child.depth) {\n            child.depth = currentDepth + 1;\n          }\n          else currentDepth = subtree.depth;\n          if (child.children) {\n            child.children.forEach(subChild => {\n              subChild.depth = child.depth + 1;\n            })\n          }\n          // 把没有 children 但有 schemaType.subTypeCount 的节点设置为 collapsed\n          // 说明展开需要增量请求 children，未请求前展示 collapsed 状态\n          if (!child.children?.length && child.schemaType?.subTypeCount) {\n            child.collapsed = true;\n          }\n          return true;\n        })\n      });\n    }\n\n    return data;\n  };\n  return changeData(data);\n};\n\nconst tree = new G6.TreeGraph({\n  container: 'container',\n  width: 800,\n  height: 800,\n  layout: {\n    type: 'indented',\n    direction: 'LR',\n    isHorizontal: true,\n    indent: 40,\n    getHeight: (d) => {\n      if (d.isRoot) {\n        return 30;\n      }\n      if (d.collapsed && d.children?.length) {\n        return 36;\n      }\n      return 22;\n    },\n    getVGap: () => {\n      return 10;\n    },\n  },\n  defaultEdge: {\n    type: 'indentedEdge',\n    style: {\n      lineWidth: 2,\n      radius: 16,\n    },\n  },\n  nodeStateStyles: {\n    closest: {\n      fill: '#f00',\n      'node-label': {\n        fill: '#f00',\n      }\n    },\n  },\n  minZoom: 0.5,\n  modes: {\n    default: [\n      'drag-canvas',\n      'wheel-scroll',\n      'hover-node',\n      'click-node',\n      'drag-branch', {\n        type: 'collapse-expand',\n        trigger: 'dblclick'\n      }\n    ],\n  },\n});\n\ntree.on('afterrender', e => {\n  tree.getEdges().forEach(edge => {\n    const targetNode = edge.getTarget().getModel();\n    const color = targetNode.branchColor;\n    tree.updateItem(edge, { color });\n  });\n  setTimeout(() => {\n    tree.moveTo(32, 32);\n    tree.zoomTo(0.7)\n  }, 16);\n});\n\ntree.data(dataTransform(rawData));\n\ntree.render();\n\n",title:{zh:"缩进文件树",en:"Indented File Tree"},filename:"indentedTree.js",isNew:!1},{id:"knowledgeTreeGraph",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*2J5YTbvU5FoAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst minWidth = 60;\n\nconst BaseConfig = {\n  nameFontSize: 12,\n  childCountWidth: 22,\n  countMarginLeft: 0,\n  itemPadding: 16,\n  nameMarginLeft: 4,\n  rootPadding: 18,\n};\n\nG6.registerNode('treeNode', {\n  draw: (cfg, group) => {\n    const { id, label, collapsed, selected, children, depth } = cfg;\n    const rootNode = depth === 0;\n    const hasChildren = children && children.length !== 0;\n\n    const {\n      childCountWidth,\n      countMarginLeft,\n      itemPadding,\n      selectedIconWidth,\n      nameMarginLeft,\n      rootPadding,\n    } = BaseConfig;\n\n    let width = 0;\n    const height = 28;\n    const x = 0;\n    const y = -height / 2;\n\n    // 名称文本\n    const text = group.addShape('text', {\n      attrs: {\n        text: label,\n        x: x * 2,\n        y,\n        textAlign: 'left',\n        textBaseline: 'top',\n        fontFamily: 'PingFangSC-Regular',\n      },\n      cursor: 'pointer',\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'name-text-shape',\n    });\n    const textWidth = text.getBBox().width;\n    width = textWidth + itemPadding + nameMarginLeft;\n\n    width = width < minWidth ? minWidth : width;\n\n    if (!rootNode && hasChildren) {\n      width += countMarginLeft;\n      width += childCountWidth;\n    }\n\n    const keyShapeAttrs = {\n      x,\n      y,\n      width,\n      height,\n      radius: 4,\n    };\n\n    // keyShape根节点选中样式\n    if (rootNode && selected) {\n      keyShapeAttrs.fill = '#e8f7ff';\n      keyShapeAttrs.stroke = '#e8f7ff';\n    }\n    const keyShape = group.addShape('rect', {\n      attrs: keyShapeAttrs,\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'root-key-shape-rect-shape',\n    });\n\n    if (!rootNode) {\n      // 底部横线\n      group.addShape('path', {\n        attrs: {\n          path: [\n            ['M', x - 1, 0],\n            ['L', width, 0],\n          ],\n          stroke: '#AAB7C4',\n          lineWidth: 1,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'node-path-shape',\n      });\n    }\n\n    const mainX = x - 10;\n    const mainY = -height + 15;\n\n    if (rootNode) {\n      group.addShape('rect', {\n        attrs: {\n          x: mainX,\n          y: mainY,\n          width: width + 12,\n          height,\n          radius: 14,\n          fill: '#e8f7ff',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'main-shape',\n      });\n    }\n\n    let nameColor = 'rgba(0, 0, 0, .65)';\n    if (selected) {\n      nameColor = '#40A8FF';\n    }\n\n    // 名称\n    if (rootNode) {\n      group.addShape('text', {\n        attrs: {\n          text: label,\n          x: mainX + rootPadding,\n          y: 1,\n          textAlign: 'left',\n          textBaseline: 'middle',\n          fill: nameColor,\n          fontSize: 12,\n          fontFamily: 'PingFangSC-Regular',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'root-text-shape',\n      });\n    } else {\n      group.addShape('text', {\n        attrs: {\n          text: label,\n          x: selected ? mainX + 6 + nameMarginLeft : mainX + 6,\n          y: y - 5,\n          textAlign: 'start',\n          textBaseline: 'top',\n          fill: nameColor,\n          fontSize: 12,\n          fontFamily: 'PingFangSC-Regular',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'not-root-text-shape',\n      });\n    }\n\n    // 子类数量\n    if (hasChildren && !rootNode) {\n      const childCountHeight = 12;\n      const childCountX = width - childCountWidth;\n      const childCountY = -childCountHeight / 2;\n\n      group.addShape('rect', {\n        attrs: {\n          width: childCountWidth,\n          height: 12,\n          stroke: collapsed ? '#1890ff' : '#5CDBD3',\n          fill: collapsed ? '#fff' : '#E6FFFB',\n          x: childCountX,\n          y: childCountY,\n          radius: 6,\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-rect-shape',\n      });\n      group.addShape('text', {\n        attrs: {\n          text: `${children?.length}`,\n          fill: 'rgba(0, 0, 0, .65)',\n          x: childCountX + childCountWidth / 2,\n          y: childCountY + 12,\n          fontSize: 10,\n          width: childCountWidth,\n          textAlign: 'center',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'child-count-text-shape',\n      });\n    }\n\n    return keyShape;\n  },\n});\n\nG6.registerEdge('smooth', {\n  draw(cfg, group) {\n    const { startPoint, endPoint } = cfg;\n    const hgap = Math.abs(endPoint.x - startPoint.x);\n\n    const path = [\n      ['M', startPoint.x, startPoint.y],\n      [\n        'C',\n        startPoint.x + hgap / 4,\n        startPoint.y,\n        endPoint.x - hgap / 2,\n        endPoint.y,\n        endPoint.x,\n        endPoint.y,\n      ],\n    ];\n\n    const shape = group.addShape('path', {\n      attrs: {\n        stroke: '#AAB7C4',\n        path,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'smooth-path-shape',\n    });\n    return shape;\n  },\n});\n\nconst data = {\n  id: '200000004',\n  tooltip: 'Thing',\n  label: '事物',\n  description: null,\n  descriptionZh: null,\n  depth: 3,\n  subTypeCount: 9,\n  status: 0,\n  children: [\n    {\n      id: '500000061',\n      tooltip: 'Person',\n      label: '自然人',\n      description: null,\n      descriptionZh: null,\n      depth: 1,\n      subTypeCount: 1,\n      status: 0,\n      children: [\n        {\n          id: '707000085',\n          tooltip: 'FilmPerson',\n          label: '电影人',\n          description: null,\n          descriptionZh: null,\n          depth: 5,\n          subTypeCount: 3,\n          status: 1,\n          children: [\n            {\n              id: '707000090',\n              tooltip: 'FilmDirector',\n              label: '电影导演',\n              description: null,\n              descriptionZh: null,\n              depth: 0,\n              subTypeCount: 0,\n              status: 1,\n              children: [],\n            },\n            {\n              id: '707000091',\n              tooltip: 'FilmWriter',\n              label: '电影编剧',\n              description: null,\n              descriptionZh: null,\n              depth: 4,\n              subTypeCount: 0,\n              status: 1,\n              children: [],\n            },\n            {\n              id: '707000092',\n              tooltip: 'FilmStar',\n              label: '电影主演',\n              description: null,\n              descriptionZh: null,\n              depth: 4,\n              subTypeCount: 0,\n              status: 1,\n              children: [],\n            },\n          ],\n        },\n        {\n          id: '707000086',\n          tooltip: 'MusicPerson',\n          label: '音乐人',\n          description: null,\n          descriptionZh: null,\n          depth: 17,\n          subTypeCount: 2,\n          status: 1,\n          children: [],\n        },\n      ],\n    },\n    {\n      id: '200000005',\n      tooltip: 'Music',\n      label: '音乐',\n      description: null,\n      descriptionZh: null,\n      depth: 3,\n      subTypeCount: 2,\n      status: 1,\n      children: [],\n    },\n    {\n      id: '707000128',\n      tooltip: 'Film',\n      label: '电影',\n      description: null,\n      descriptionZh: null,\n      depth: 4,\n      subTypeCount: 0,\n      status: 1,\n      children: [\n        {\n          id: '7070032328',\n          tooltip: 'Comedy',\n          label: '喜剧',\n          description: null,\n          descriptionZh: null,\n          depth: 4,\n          operation: 'C',\n          subTypeCount: 0,\n          status: 1,\n          children: [],\n        },\n      ],\n    },\n    {\n      id: '707000095',\n      tooltip: 'FilmGenre',\n      label: '电影类别',\n      description: null,\n      descriptionZh: null,\n      depth: 4,\n      subTypeCount: 0,\n      status: 1,\n      children: [],\n    },\n    {\n      id: '702000021',\n      tooltip: 'Organization',\n      label: '机构',\n      description: null,\n      descriptionZh: null,\n      depth: 47,\n      subTypeCount: 1,\n      status: 0,\n      children: [\n        {\n          id: '500000063',\n          tooltip: 'Company',\n          label: '公司',\n          description: null,\n          descriptionZh: null,\n          depth: 4,\n          subTypeCount: 2,\n          status: 1,\n          children: [\n            {\n              id: '707000093',\n              tooltip: 'FilmCompany',\n              label: '电影公司',\n              description: null,\n              descriptionZh: null,\n              depth: 4,\n              subTypeCount: 0,\n              status: 1,\n              children: [],\n            },\n            {\n              id: '707000094',\n              tooltip: 'MusicCompany',\n              label: '音乐公司',\n              description: null,\n              descriptionZh: null,\n              depth: 2,\n              subTypeCount: 0,\n              status: 1,\n              children: [],\n            },\n          ],\n        },\n      ],\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: [\n      {\n        type: 'collapse-expand',\n      },\n      'drag-canvas',\n      'zoom-canvas',\n    ],\n  },\n  defaultNode: {\n    type: 'treeNode',\n    anchorPoints: [\n      [0, 0.5],\n      [1, 0.5],\n    ],\n  },\n  defaultEdge: {\n    type: 'smooth',\n  },\n  layout: {\n    type: 'compactBox',\n    direction: 'LR',\n    getId: function getId(d) {\n      return d.id;\n    },\n    getHeight: function getHeight() {\n      return 16;\n    },\n    getWidth: function getWidth(d) {\n      const labelWidth = G6.Util.getTextSize(d.label, BaseConfig.nameFontSize)[0];\n      const width =\n        BaseConfig.itemPadding +\n        BaseConfig.nameMarginLeft +\n        labelWidth +\n        BaseConfig.rootPadding +\n        BaseConfig.childCountWidth;\n      return width;\n    },\n    getVGap: function getVGap() {\n      return 15;\n    },\n    getHGap: function getHGap() {\n      return 30;\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\ngraph.fitView();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"知识图谱树",en:"Knowledge Tree Graph"},filename:"knowledgeTreeGraph.js",isNew:!1},{id:"decisionTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HS5gQ6yCiL4AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\n// 我们用 insert-css 演示引入自定义样式\n// 推荐将样式添加到自己的样式文件中\n// 若拷贝官方代码，别忘了 npm install insert-css\ninsertCss(`\n  .g6-component-tooltip {\n    background-color: rgba(0,0,0, 0.65);\n    padding: 10px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n    width: fit-content;\n    color: #fff;\n    border-radius = 4px;\n  }\n`);\n\n// mocked data\nconst mockData = {\n  id: 'g1',\n  name: 'Name1',\n  count: 123456,\n  label: '538.90',\n  currency: 'Yuan',\n  rate: 1.0,\n  status: 'B',\n  variableName: 'V1',\n  variableValue: 0.341,\n  variableUp: false,\n  children: [\n    {\n      id: 'g12',\n      name: 'Deal with LONG label LONG label LONG label LONG label',\n      count: 123456,\n      label: '338.00',\n      rate: 0.627,\n      status: 'R',\n      currency: 'Yuan',\n      variableName: 'V2',\n      variableValue: 0.179,\n      variableUp: true,\n      children: [\n        {\n          id: 'g121',\n          name: 'Name3',\n          collapsed: true,\n          count: 123456,\n          label: '138.00',\n          rate: 0.123,\n          status: 'B',\n          currency: 'Yuan',\n          variableName: 'V2',\n          variableValue: 0.27,\n          variableUp: true,\n          children: [\n            {\n              id: 'g1211',\n              name: 'Name4',\n              count: 123456,\n              label: '138.00',\n              rate: 1.0,\n              status: 'B',\n              currency: 'Yuan',\n              variableName: 'V1',\n              variableValue: 0.164,\n              variableUp: false,\n              children: [],\n            },\n          ],\n        },\n        {\n          id: 'g122',\n          name: 'Name5',\n          collapsed: true,\n          count: 123456,\n          label: '100.00',\n          rate: 0.296,\n          status: 'G',\n          currency: 'Yuan',\n          variableName: 'V1',\n          variableValue: 0.259,\n          variableUp: true,\n          children: [\n            {\n              id: 'g1221',\n              name: 'Name6',\n              count: 123456,\n              label: '40.00',\n              rate: 0.4,\n              status: 'G',\n              currency: 'Yuan',\n              variableName: 'V1',\n              variableValue: 0.135,\n              variableUp: true,\n              children: [\n                {\n                  id: 'g12211',\n                  name: 'Name6-1',\n                  count: 123456,\n                  label: '40.00',\n                  rate: 1.0,\n                  status: 'R',\n                  currency: 'Yuan',\n                  variableName: 'V1',\n                  variableValue: 0.181,\n                  variableUp: true,\n                  children: [],\n                },\n              ],\n            },\n            {\n              id: 'g1222',\n              name: 'Name7',\n              count: 123456,\n              label: '60.00',\n              rate: 0.6,\n              status: 'G',\n              currency: 'Yuan',\n              variableName: 'V1',\n              variableValue: 0.239,\n              variableUp: false,\n              children: [],\n            },\n          ],\n        },\n        {\n          id: 'g123',\n          name: 'Name8',\n          collapsed: true,\n          count: 123456,\n          label: '100.00',\n          rate: 0.296,\n          status: 'DI',\n          currency: 'Yuan',\n          variableName: 'V2',\n          variableValue: 0.131,\n          variableUp: false,\n          children: [\n            {\n              id: 'g1231',\n              name: 'Name8-1',\n              count: 123456,\n              label: '100.00',\n              rate: 1.0,\n              status: 'DI',\n              currency: 'Yuan',\n              variableName: 'V2',\n              variableValue: 0.131,\n              variableUp: false,\n              children: [],\n            },\n          ],\n        },\n      ],\n    },\n    {\n      id: 'g13',\n      name: 'Name9',\n      count: 123456,\n      label: '100.90',\n      rate: 0.187,\n      status: 'B',\n      currency: 'Yuan',\n      variableName: 'V2',\n      variableValue: 0.221,\n      variableUp: true,\n      children: [\n        {\n          id: 'g131',\n          name: 'Name10',\n          count: 123456,\n          label: '33.90',\n          rate: 0.336,\n          status: 'R',\n          currency: 'Yuan',\n          variableName: 'V1',\n          variableValue: 0.12,\n          variableUp: true,\n          children: [],\n        },\n        {\n          id: 'g132',\n          name: 'Name11',\n          count: 123456,\n          label: '67.00',\n          rate: 0.664,\n          status: 'G',\n          currency: 'Yuan',\n          variableName: 'V1',\n          variableValue: 0.241,\n          variableUp: false,\n          children: [],\n        },\n      ],\n    },\n    {\n      id: 'g14',\n      name: 'Name12',\n      count: 123456,\n      label: '100.00',\n      rate: 0.186,\n      status: 'G',\n      currency: 'Yuan',\n      variableName: 'V2',\n      variableValue: 0.531,\n      variableUp: true,\n      children: [],\n    },\n  ],\n};\n\nconst colors = {\n  B: '#5B8FF9',\n  R: '#F46649',\n  Y: '#EEBC20',\n  G: '#5BD8A6',\n  DI: '#A7A7A7',\n};\n\n//  组件props\nconst props = {\n  data: mockData,\n  config: {\n    padding: [20, 50],\n    defaultLevel: 3,\n    defaultZoom: 0.8,\n    modes: { default: ['zoom-canvas', 'drag-canvas'] },\n  },\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\n// 默认配置\nconst defaultConfig = {\n  width,\n  height,\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas'],\n  },\n  fitView: true,\n  animate: true,\n  defaultNode: {\n    type: 'flow-rect',\n  },\n  defaultEdge: {\n    type: 'cubic-horizontal',\n    style: {\n      stroke: '#CED4D9',\n    },\n  },\n  layout: {\n    type: 'indented',\n    direction: 'LR',\n    dropCap: false,\n    indent: 300,\n    getHeight: () => {\n      return 60;\n    },\n  },\n};\n\n// 自定义节点、边\nconst registerFn = () => {\n  /**\n   * 自定义节点\n   */\n  G6.registerNode(\n    'flow-rect',\n    {\n      shapeType: 'flow-rect',\n      draw(cfg, group) {\n        const {\n          name = '',\n          variableName,\n          variableValue,\n          variableUp,\n          label,\n          collapsed,\n          currency,\n          status,\n          rate\n        } = cfg;\n\n        const grey = '#CED4D9';\n        const rectConfig = {\n          width: 202,\n          height: 60,\n          lineWidth: 1,\n          fontSize: 12,\n          fill: '#fff',\n          radius: 4,\n          stroke: grey,\n          opacity: 1,\n        };\n\n        const nodeOrigin = {\n          x: -rectConfig.width / 2,\n          y: -rectConfig.height / 2,\n        };\n\n        const textConfig = {\n          textAlign: 'left',\n          textBaseline: 'bottom',\n        };\n\n        const rect = group.addShape('rect', {\n          attrs: {\n            x: nodeOrigin.x,\n            y: nodeOrigin.y,\n            ...rectConfig,\n          },\n        });\n\n        const rectBBox = rect.getBBox();\n\n        // label title\n        group.addShape('text', {\n          attrs: {\n            ...textConfig,\n            x: 12 + nodeOrigin.x,\n            y: 20 + nodeOrigin.y,\n            text: name.length > 28 ? name.substr(0, 28) + '...' : name,\n            fontSize: 12,\n            opacity: 0.85,\n            fill: '#000',\n            cursor: 'pointer',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'name-shape',\n        });\n\n        // price\n        const price = group.addShape('text', {\n          attrs: {\n            ...textConfig,\n            x: 12 + nodeOrigin.x,\n            y: rectBBox.maxY - 12,\n            text: label,\n            fontSize: 16,\n            fill: '#000',\n            opacity: 0.85,\n          },\n        });\n\n        // label currency\n        group.addShape('text', {\n          attrs: {\n            ...textConfig,\n            x: price.getBBox().maxX + 5,\n            y: rectBBox.maxY - 12,\n            text: currency,\n            fontSize: 12,\n            fill: '#000',\n            opacity: 0.75,\n          },\n        });\n\n        // percentage\n        const percentText = group.addShape('text', {\n          attrs: {\n            ...textConfig,\n            x: rectBBox.maxX - 8,\n            y: rectBBox.maxY - 12,\n            text: `${((variableValue || 0) * 100).toFixed(2)}%`,\n            fontSize: 12,\n            textAlign: 'right',\n            fill: colors[status],\n          },\n        });\n\n        // percentage triangle\n        const symbol = variableUp ? 'triangle' : 'triangle-down';\n        const triangle = group.addShape('marker', {\n          attrs: {\n            ...textConfig,\n            x: percentText.getBBox().minX - 10,\n            y: rectBBox.maxY - 12 - 6,\n            symbol,\n            r: 6,\n            fill: colors[status],\n          },\n        });\n\n        // variable name\n        group.addShape('text', {\n          attrs: {\n            ...textConfig,\n            x: triangle.getBBox().minX - 4,\n            y: rectBBox.maxY - 12,\n            text: variableName,\n            fontSize: 12,\n            textAlign: 'right',\n            fill: '#000',\n            opacity: 0.45,\n          },\n        });\n\n        // bottom line background\n        const bottomBackRect = group.addShape('rect', {\n          attrs: {\n            x: nodeOrigin.x,\n            y: rectBBox.maxY - 4,\n            width: rectConfig.width,\n            height: 4,\n            radius: [0, 0, rectConfig.radius, rectConfig.radius],\n            fill: '#E0DFE3',\n          },\n        });\n\n        // bottom percent\n        const bottomRect = group.addShape('rect', {\n          attrs: {\n            x: nodeOrigin.x,\n            y: rectBBox.maxY - 4,\n            width: rate * rectBBox.width,\n            height: 4,\n            radius: [0, 0, 0, rectConfig.radius],\n            fill: colors[status],\n          },\n        });\n\n        // collapse rect\n        if (cfg.children && cfg.children.length) {\n          group.addShape('rect', {\n            attrs: {\n              x: rectConfig.width / 2 - 8,\n              y: -8,\n              width: 16,\n              height: 16,\n              stroke: 'rgba(0, 0, 0, 0.25)',\n              cursor: 'pointer',\n              fill: '#fff',\n            },\n            // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n            name: 'collapse-back',\n            modelId: cfg.id,\n          });\n\n          // collpase text\n          group.addShape('text', {\n            attrs: {\n              x: rectConfig.width / 2,\n              y: -1,\n              textAlign: 'center',\n              textBaseline: 'middle',\n              text: collapsed ? '+' : '-',\n              fontSize: 16,\n              cursor: 'pointer',\n              fill: 'rgba(0, 0, 0, 0.25)',\n            },\n            // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n            name: 'collapse-text',\n            modelId: cfg.id,\n          });\n        }\n\n        this.drawLinkPoints(cfg, group);\n        return rect;\n      },\n      update(cfg, item) {\n        const { level, status, name } = cfg;\n        const group = item.getContainer();\n        let mask = group.find(ele => ele.get('name') === 'mask-shape');\n        let maskLabel = group.find(ele => ele.get('name') === 'mask-label-shape');\n        if (level === 0) {\n          group.get('children').forEach(child => {\n            if (child.get('name')?.includes('collapse')) return;\n            child.hide();\n          })\n          if (!mask) {\n            mask = group.addShape('rect', {\n              attrs: {\n                x: -101,\n                y: -30,\n                width: 202,\n                height: 60,\n                opacity: 0,\n                fill: colors[status]\n              },\n              // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n              name: 'mask-shape',\n            });\n            maskLabel = group.addShape('text', {\n              attrs: {\n                fill: '#fff',\n                fontSize: 20,\n                x: 0,\n                y: 10,\n                text: name.length > 28 ? name.substr(0, 16) + '...' : name,\n                textAlign: 'center',\n                opacity: 0,\n              },\n              // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n              name: 'mask-label-shape',\n            });\n            const collapseRect = group.find(ele => ele.get('name') === 'collapse-back');\n            const collapseText = group.find(ele => ele.get('name') === 'collapse-text');\n            collapseRect?.toFront();\n            collapseText?.toFront();\n          } else {\n            mask.show();\n            maskLabel.show();\n          }\n          mask.animate({ opacity: 1 }, 200);\n          maskLabel.animate({ opacity: 1 }, 200);\n          return mask;\n        } else {\n          group.get('children').forEach(child => {\n            if (child.get('name')?.includes('collapse')) return;\n            child.show();\n          })\n          mask?.animate({ opacity: 0 }, {\n            duration: 200,\n            callback: () => mask.hide()\n          });\n          maskLabel?.animate({ opacity: 0 }, {\n            duration: 200,\n            callback: () => maskLabel.hide()\n          });\n        }\n        this.updateLinkPoints(cfg, group);\n      },\n      setState(name, value, item) {\n        if (name === 'collapse') {\n          const group = item.getContainer();\n          const collapseText = group.find((e) => e.get('name') === 'collapse-text');\n          if (collapseText) {\n            if (!value) {\n              collapseText.attr({\n                text: '-',\n              });\n            } else {\n              collapseText.attr({\n                text: '+',\n              });\n            }\n          }\n        }\n      },\n      getAnchorPoints() {\n        return [\n          [0, 0.5],\n          [1, 0.5],\n        ];\n      },\n    },\n    'rect',\n  );\n\n  G6.registerEdge(\n    'flow-cubic',\n    {\n      getControlPoints(cfg) {\n        let controlPoints = cfg.controlPoints; // 指定controlPoints\n        if (!controlPoints || !controlPoints.length) {\n          const { startPoint, endPoint, sourceNode, targetNode } = cfg;\n          const { x: startX, y: startY, coefficientX, coefficientY } = sourceNode\n            ? sourceNode.getModel()\n            : startPoint;\n          const { x: endX, y: endY } = targetNode ? targetNode.getModel() : endPoint;\n          let curveStart = (endX - startX) * coefficientX;\n          let curveEnd = (endY - startY) * coefficientY;\n          curveStart = curveStart > 40 ? 40 : curveStart;\n          curveEnd = curveEnd < -30 ? curveEnd : -30;\n          controlPoints = [\n            { x: startPoint.x + curveStart, y: startPoint.y },\n            { x: endPoint.x + curveEnd, y: endPoint.y },\n          ];\n        }\n        return controlPoints;\n      },\n      getPath(points) {\n        const path = [];\n        path.push(['M', points[0].x, points[0].y]);\n        path.push([\n          'C',\n          points[1].x,\n          points[1].y,\n          points[2].x,\n          points[2].y,\n          points[3].x,\n          points[3].y,\n        ]);\n        return path;\n      },\n    },\n    'single-line',\n  );\n};\n\nregisterFn();\n\nconst { data } = props;\nlet graph = null;\n\nconst initGraph = (data) => {\n  if (!data) {\n    return;\n  }\n  const { onInit, config } = props;\n  const tooltip = new G6.Tooltip({\n    // offsetX and offsetY include the padding of the parent container\n    offsetX: 20,\n    offsetY: 30,\n    // the types of items that allow the tooltip show up\n    // 允许出现 tooltip 的 item 类型\n    itemTypes: ['node'],\n    // custom the tooltip's content\n    // 自定义 tooltip 内容\n    getContent: (e) => {\n      const outDiv = document.createElement('div');\n      //outDiv.style.padding = '0px 0px 20px 0px';\n      const nodeName = e.item.getModel().name;\n      let formatedNodeName = '';\n      for (let i = 0; i < nodeName.length; i++) {\n        formatedNodeName = `${formatedNodeName}${nodeName[i]}`;\n        if (i !== 0 && i % 20 === 0) formatedNodeName = `${formatedNodeName}<br/>`;\n      }\n      outDiv.innerHTML = `${formatedNodeName}`;\n      return outDiv;\n    },\n    shouldBegin: (e) => {\n      if (e.target.get('name') === 'name-shape' || e.target.get('name') === 'mask-label-shape') return true;\n      return false;\n    },\n  });\n  graph = new G6.TreeGraph({\n    container: 'container',\n    ...defaultConfig,\n    ...config,\n    plugins: [tooltip],\n  });\n  if (typeof onInit === 'function') {\n    onInit(graph);\n  }\n  graph.data(data);\n  graph.render();\n\n  const handleCollapse = (e) => {\n    const target = e.target;\n    const id = target.get('modelId');\n    const item = graph.findById(id);\n    const nodeModel = item.getModel();\n    nodeModel.collapsed = !nodeModel.collapsed;\n    graph.layout();\n    graph.setItemState(item, 'collapse', nodeModel.collapsed);\n  };\n  graph.on('collapse-text:click', (e) => {\n    handleCollapse(e);\n  });\n  graph.on('collapse-back:click', (e) => {\n    handleCollapse(e);\n  });\n\n  // 监听画布缩放，缩小到一定程度，节点显示缩略样式\n  let currentLevel = 1;\n  const briefZoomThreshold = Math.max(graph.getZoom(), 0.5);\n  graph.on('viewportchange', e => {\n    if (e.action !== 'zoom') return;\n    const currentZoom = graph.getZoom();\n    let toLevel = currentLevel;\n    if (currentZoom < briefZoomThreshold) {\n      toLevel = 0;\n    } else {\n      toLevel = 1;\n    }\n    if (toLevel !== currentLevel) {\n      currentLevel = toLevel;\n      graph.getNodes().forEach(node => {\n        graph.updateItem(node, {\n          level: toLevel\n        })\n      })\n    }\n  });\n};\n\ninitGraph(data);\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"决策树",en:"Decision Tree"},filename:"decisionTree.js",isNew:!1},{id:"decisionTree2",screenshot:"https://user-images.githubusercontent.com/26192378/143408151-5b238ad6-65c9-4a17-85e9-b047af13e7a4.png",source:"import G6 from '@antv/g6';\n\n// root node\nG6.registerNode('root', {\n  draw: (cfg, group) => {\n    const size = [80, 30];\n    const keyShape = group.addShape('rect', {\n      attrs: {\n        width: size[0],\n        height: size[1],\n        x: -size[0] / 2,\n        y: -size[1] / 2,\n        fill: 'rgb(19, 33, 92)',\n        radius: 5\n      },\n      draggable: true,\n      name: 'root-keyshape'\n    });\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.ratio}%`,\n        fill: 'rgba(255, 255, 255, 0.85)',\n        fontSize: 6,\n        x: 10 - size[0] / 2,\n        y: 3,\n      },\n      draggable: true,\n      name: 'ratio-shape'\n    });\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.label}`,\n        fill: 'rgba(255, 255, 255, 0.85)',\n        fontSize: 9,\n        x: -6,\n        y: 0,\n      },\n      draggable: true,\n      name: 'label-shape'\n    });\n    group.addShape('line', {\n      attrs: {\n        x1: -6,\n        x2: 35,\n        y1: 2,\n        y2: 2,\n        stroke: 'rgba(255, 255, 255, 0.85)',\n        lineWidth: 0.5\n      },\n      draggable: true,\n      name: 'divider-shape'\n    });\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.subLabel}`,\n        fill: 'rgba(255, 255, 255, 0.65)',\n        fontSize: 6,\n        x: -6,\n        y: 10,\n      },\n      draggable: true,\n      name: 'sublabel-shape'\n    });\n    return keyShape;\n  }\n});\n\n// level1 node\nG6.registerNode('level1node', {\n  draw: (cfg, group) => {\n    const size = [60, 40]\n    const keyShape = group.addShape('rect', {\n      attrs: {\n        width: size[0],\n        height: size[1],\n        x: -size[0] / 2,\n        y: -size[1] / 2,\n        fill: 'rgb(213, 225, 247)',\n        radius: 5\n      },\n      draggable: true,\n      name: 'level1node-keyshape'\n    });\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.label}`,\n        fill: 'rgba(19, 33, 92, 0.65)',\n        fontSize: 6,\n        x: 0,\n        y: -6,\n        textAlign: 'center'\n      },\n      draggable: true,\n      name: 'label-shape'\n    });\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.subLabel}`,\n        fill: 'rgba(19, 33, 92, 0.65)',\n        fontSize: 8,\n        x: 0,\n        y: 6,\n        fontWeight: 800,\n        textAlign: 'center'\n      },\n      draggable: true,\n      name: 'sublabel-shape'\n    });\n    group.addShape('rect', {\n      attrs: {\n        x: -12,\n        y: 8,\n        width: 25,\n        height: 8,\n        radius: 4,\n        fill: cfg.increase ? 'rgb(127, 193, 193)' : 'rgb(220, 124, 125)'\n      },\n      draggable: true,\n      name: 'ratio-box',\n    })\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.ratio}%`,\n        fill: 'rgba(255, 255, 255, 0.85)',\n        fontSize: 6,\n        x: 0,\n        y: 9,\n        textAlign: 'center',\n        textBaseline: 'top'\n      },\n      draggable: true,\n      name: 'ratio-shape'\n    });\n    // edge end\n    group.addShape('line', {\n      attrs: {\n        x1: -size[0] / 2,\n        x2: -size[0] / 2 + 6,\n        y1: 0,\n        y2: 0,\n        lineWidth: 1,\n        stroke: 'rgb(19, 33, 92)',\n      }\n    });\n    group.addShape('circle', {\n      attrs: {\n        r: 2,\n        x: -size[0] / 2 + 6,\n        y: 0,\n        fill: 'rgb(19, 33, 92)',\n      }\n    })\n    return keyShape;\n  },\n  update: undefined,\n}, 'rect')\n\n// other node\nG6.registerNode('othernode', {\n  draw: (cfg, group) => {\n    const size = [100, 30];\n    const keyShape = group.addShape('rect', {\n      attrs: {\n        width: size[0],\n        height: size[1],\n        x: -size[0] / 2,\n        y: -size[1] / 2,\n        fill: 'rgb(213, 225, 247)',\n        radius: 5\n      },\n      draggable: true,\n      name: 'level1node-keyshape'\n    });\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.label}`,\n        fill: 'rgba(19, 33, 92, 0.65)',\n        fontSize: 6,\n        x: 10 - size[0] / 2,\n        y: -2,\n        textAlign: 'left'\n      },\n      draggable: true,\n      name: 'label-shape'\n    });\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.subLabel}`,\n        fill: 'rgba(19, 33, 92, 0.65)',\n        fontSize: 8,\n        fontWeight: 800,\n        x: 10 - size[0] / 2,\n        y: 8,\n        textAlign: 'left'\n      },\n      draggable: true,\n      name: 'sublabel-shape'\n    });\n    group.addShape('rect', {\n      attrs: {\n        x: 12,\n        y: -4,\n        width: 25,\n        height: 8,\n        radius: 4,\n        fill: cfg.increase ? 'rgb(127, 193, 193)' : 'rgb(220, 124, 125)'\n      },\n      draggable: true,\n      name: 'ratio-box'\n    })\n    group.addShape('text', {\n      attrs: {\n        text: `${cfg.ratio}%`,\n        fill: 'rgba(255, 255, 255, 0.85)',\n        fontSize: 6,\n        x: 18,\n        y: -3,\n        textAlign: 'left',\n        textBaseline: 'top'\n      },\n      draggable: true,\n      name: 'ratio-shape'\n    });\n    if (cfg.operator) {\n      group.addShape('rect', {\n        attrs: {\n          x: -8,\n          y: 27,\n          width: 16,\n          height: 16,\n          lineWidth: 1,\n          stroke: '#aaa',\n          lineDash: [2, 1],\n          opacity: 0\n        },\n        name: 'operator-box'\n      });\n      group.addShape('circle', {\n        attrs: {\n          r: 6,\n          x: 0,\n          y: 35,\n          fill: 'rgba(240, 90, 109, 0.15)'\n        },\n        name: 'operator-circle'\n      });\n      group.addShape('text', {\n        attrs: {\n          text: cfg.operator,\n          x: 0,\n          y: 34,\n          fontSize: 12,\n          fill: 'rgba(240, 90, 109, 0.85)',\n          textAlign: 'center',\n          textBaseline: 'middle'\n        },\n        name: 'operator-symbol'\n      });\n    }\n\n    // edge end\n    group.addShape('line', {\n      attrs: {\n        x1: -size[0] / 2,\n        x2: -size[0] / 2 + 6,\n        y1: 0,\n        y2: 0,\n        lineWidth: 1,\n        stroke: 'rgb(19, 33, 92)',\n      }\n    });\n    group.addShape('circle', {\n      attrs: {\n        r: 2,\n        x: -size[0] / 2 + 6,\n        y: 0,\n        fill: 'rgb(19, 33, 92)',\n      }\n    })\n    return keyShape;\n  },\n  update: undefined\n}, 'rect')\n\n// edge\nG6.registerEdge('round-poly', {\n  getControlPoints: (cfg) => {\n    const { startPoint, endPoint } = cfg;\n    return [\n      startPoint,\n      {\n        x: startPoint.x,\n        y: endPoint.y\n      },\n      endPoint\n    ];\n  }\n}, 'polyline')\n\nconst data = {\n  id: 'root',\n  label: '利息收入',\n  subLabel: '3,283.456',\n  ratio: 3,\n  children: [{\n    id: 'child-a',\n    label: '平均利息',\n    subLabel: '9%',\n    ratio: 1,\n    increase: true,\n  }, {\n    id: 'child-b',\n    label: '贷款余额',\n    subLabel: '1,789,567',\n    ratio: 23,\n    increase: true,\n    children: [{\n      id: 'child-b-a',\n      label: '投放金额',\n      subLabel: '2,385,124',\n      ratio: 17,\n      increase: true,\n      operator: '-',\n    }, {\n      id: 'child-b-b',\n      label: '还款金额',\n      subLabel: '595,557',\n      ratio: 12,\n      increase: true,\n    }\n    ]\n  }, {\n    id: 'child-c',\n    label: '还款期限',\n    subLabel: '7',\n    ratio: 23,\n    increase: false,\n  }\n  ]\n};\n\nG6.Util.traverseTree(data, subtree => {\n  if (subtree.level === undefined) subtree.level = 0;\n  subtree.children?.forEach(child => child.level = subtree.level + 1);\n  switch (subtree.level) {\n    case 0:\n      subtree.type = 'root';\n      break;\n    case 1:\n      subtree.type = 'level1node';\n      break;\n    default:\n      subtree.type = 'othernode';\n  }\n});\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  layout: {\n    type: 'compactBox',\n    direction: 'LR',\n    getHGap: function getVGap() {\n      return 5;\n    },\n  },\n  defaultEdge: {\n    type: 'round-poly',\n    sourceAnchor: 0,\n    targetAnchor: 1,\n    style: {\n      radius: 8,\n      stroke: 'rgb(19, 33, 92)'\n    }\n  },\n  defaultNode: {\n    anchorPoints: [\n      [0.9, 0.5],\n      [0, 0.5]\n    ]\n  },\n  nodeStateStyles: {\n    hover: {\n      fill: '#fff',\n      shadowBlur: 30,\n      shadowColor: '#ddd',\n    },\n    operatorhover: {\n      'operator-box': {\n        opacity: 1\n      }\n    }\n  },\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'collapse-expand']\n  }\n});\n\ngraph.on('node:mouseenter', e => {\n  if (e.target.get('name')?.includes('operator')) {\n    graph.setItemState(e.item, 'operatorhover', true);\n  } else {\n    graph.setItemState(e.item, 'hover', true);\n  }\n})\ngraph.on('node:mouseleave', e => {\n  graph.setItemState(e.item, 'operatorhover', false);\n  graph.setItemState(e.item, 'hover', false);\n});\n\ngraph.data(data);\ngraph.render();\n\n",title:{zh:"决策树2",en:"Decision Tree2"},filename:"decisionTree2.js",isNew:!1}],icon:"",id:"treeDemos",title:{en:"Tree Graph Demos",zh:"树图场景案例"},childrenKey:"demos",order:1},{demos:[{id:"metroLines",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1MS4TbqujQAAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * 该示例演示自定义节点和边实现动态地铁图效果\n * by 十吾\n */\nconst colors = [\n  'rgb(64, 174, 247)',\n  'rgb(108, 207, 169)',\n  'rgb(157, 223, 125)',\n  'rgb(240, 198, 74)',\n  'rgb(221, 158, 97)',\n  'rgb(141, 163, 112)',\n  'rgb(115, 136, 220)',\n  'rgb(133, 88, 219)',\n  'rgb(203, 135, 226)',\n  'rgb(227, 137, 163)',\n];\n// custom the node\nG6.registerNode(\n  'breath-node',\n  {\n    afterDraw(cfg, group) {\n      const r = cfg.size / 2;\n      const back1 = group.addShape('circle', {\n        zIndex: -3,\n        attrs: {\n          x: 0,\n          y: 0,\n          r,\n          fill: cfg.color || (cfg.style && cfg.style.fill),\n          opacity: 0.6,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'back1-shape',\n      });\n      const back2 = group.addShape('circle', {\n        zIndex: -2,\n        attrs: {\n          x: 0,\n          y: 0,\n          r,\n          fill: cfg.color,\n          // 为了显示清晰，随意设置了颜色\n          opacity: 0.6,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'back2-shape',\n      });\n      const back3 = group.addShape('circle', {\n        zIndex: -1,\n        attrs: {\n          x: 0,\n          y: 0,\n          r,\n          fill: cfg.color,\n          opacity: 0.6,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'back3-shape',\n      });\n      group.sort(); // 排序，根据zIndex 排序\n      const delayBase = Math.random() * 2000;\n      back1.animate(\n        {\n          // 逐渐放大，并消失\n          r: r + 10,\n          opacity: 0.0,\n        },\n        {\n          repeat: true, // 循环\n          duration: 3000,\n          easing: 'easeCubic',\n          delay: delayBase, // 无延迟\n        },\n      );\n      back2.animate(\n        {\n          // 逐渐放大，并消失\n          r: r + 10,\n          opacity: 0.0,\n        },\n        {\n          repeat: true, // 循环\n          duration: 3000,\n          easing: 'easeCubic',\n          delay: delayBase + 1000, // 1 秒延迟\n        },\n      );\n      back3.animate(\n        {\n          // 逐渐放大，并消失\n          r: r + 10,\n          opacity: 0.0,\n        },\n        {\n          repeat: true, // 循环\n          duration: 3000,\n          easing: 'easeCubic',\n          delay: delayBase + 2000, // 2 秒延迟\n        },\n      );\n    },\n  },\n  'circle',\n);\n\n// custom the edge\nG6.registerEdge(\n  'running-polyline',\n  {\n    afterDraw(cfg, group) {\n      const shape = group.get('children')[0];\n      const length = shape.getTotalLength();\n      let circleCount = Math.ceil(length / 20);\n      circleCount = circleCount === 0 ? 1 : circleCount;\n\n      const _loop = function _loop(i) {\n        const delay = Math.random() * 1000;\n        const start = shape.getPoint(i / circleCount);\n        const circle = group.addShape('circle', {\n          attrs: {\n            x: start.x,\n            y: start.y,\n            r: 0.8,\n            fill: '#A0F3AF',\n            shadowColor: '#fff',\n            shadowBlur: 30,\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'circle-shape',\n        });\n        circle.animate(\n          (ratio) => {\n            ratio += i / circleCount;\n            if (ratio > 1) {\n              ratio %= 1;\n            }\n            const tmpPoint = shape.getPoint(ratio);\n            return {\n              x: tmpPoint.x,\n              y: tmpPoint.y,\n            };\n          },\n          {\n            repeat: true,\n            duration: 10 * length,\n            easing: 'easeCubic',\n            delay,\n          },\n        );\n      };\n\n      for (let i = 0; i < circleCount; i++) {\n        _loop(i);\n      }\n    },\n  },\n  'polyline',\n);\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width: 500,\n  height: 500,\n  modes: {\n    default: [\n      {\n        type: 'edge-tooltip',\n        formatText: function formatText(model) {\n          const text = model.class;\n          return text;\n        },\n      },\n    ],\n  },\n  defaultNode: {\n    type: 'breath-node',\n    size: 3,\n    style: {\n      lineWidth: 0,\n      fill: 'rgb(240, 223, 83)',\n    },\n  },\n  defaultEdge: {\n    type: 'running-polyline',\n    size: 1,\n    color: 'rgb(14,142,63)',\n    style: {\n      opacity: 0.4,\n      lineAppendWidth: 3,\n    },\n  },\n});\n\nconst graphSize = [500, 500];\nfetch('https://gw.alipayobjects.com/os/basement_prod/8c2353b0-99a9-4a93-a5e1-3e7df1eac64f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const nodes = data.nodes;\n    const edges = data.edges;\n    const classMap = new Map();\n    let classId = 0;\n    nodes.forEach(function (node) {\n      node.y = -node.y;\n    });\n    edges.forEach(function (edge) {\n      edge.id = `edge-${edge.id}`;\n      // edge cluster\n      if (edge.class && classMap.get(edge.class) === undefined) {\n        classMap.set(edge.class, classId);\n        classId++;\n      }\n      const cid = classMap.get(edge.class);\n      edge.color = colors[cid % colors.length];\n      const controlPoints = edge.controlPoints;\n\n      controlPoints.forEach(function (cp) {\n        cp.y = -cp.y;\n      });\n    });\n    scaleNodesPoints(nodes, edges, graphSize);\n    graph.data(data);\n    graph.render();\n  });\n\ngraph.get('container').style.background = '#000';\ngraph.get('container').style.backgroundImage =\n  'url(\"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*G23iRqkiibIAAAAAAAAAAABkARQnAQ\")';\ngraph.get('container').style.backgroundSize = '500px 500px';\ngraph.get('container').style.backgroundRepeat = 'no-repeat';\n\nfunction scaleNodesPoints(nodes, edges, graphSize) {\n  const size = graphSize[0] < graphSize[1] ? graphSize[0] : graphSize[1];\n  let minX = 99999999999999999;\n  let maxX = -99999999999999999;\n  let minY = 99999999999999999;\n  let maxY = -99999999999999999;\n  nodes.forEach(function (node) {\n    if (node.x > maxX) maxX = node.x;\n    if (node.x < minX) minX = node.x;\n    if (node.y > maxY) maxY = node.y;\n    if (node.y < minY) minY = node.y;\n  });\n\n  edges.forEach(function (edge) {\n    const controlPoints = edge.controlPoints;\n    controlPoints.forEach(function (cp) {\n      if (cp.x > maxX) maxX = cp.x;\n      if (cp.x < minX) minX = cp.x;\n      if (cp.y > maxY) maxY = cp.y;\n      if (cp.y < minY) minY = cp.y;\n    });\n  });\n\n  const xScale = maxX - minX;\n  const yScale = maxY - minY;\n  nodes.forEach(function (node) {\n    node.orix = node.x;\n    node.oriy = node.y;\n    node.x = ((node.x - minX) / xScale) * size;\n    node.y = ((node.y - minY) / yScale) * size;\n  });\n  edges.forEach(function (edge) {\n    const controlPoints = edge.controlPoints;\n    controlPoints.forEach(function (cp) {\n      cp.x = ((cp.x - minX) / xScale) * size;\n      cp.y = ((cp.y - minY) / yScale) * size;\n    });\n  });\n}\n",title:{zh:"地铁线路图",en:"Animated Metro Map"},filename:"metroLines.js",isNew:!1}],icon:"",id:"others",title:{en:"Others",zh:"其它"},childrenKey:"demos",order:3}],childrenKey:"examples"},{id:"net",title:{zh:"布局：一般图",en:"Layout：General Graph"},icon:"net",examples:[{demos:[{id:"basicForce2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Ce2WSIlo_fcAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\nconst nodes = data.nodes;\nconst clusterMap = new Map();\nlet clusterId = 0;\nnodes.forEach(function (node) {\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) {\n    node.style = {};\n  }\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force2',\n    animate: true, // 设置为 false 可关闭布局动画\n    maxSpeed: 100,\n    linkDistance: 50,\n    clustering: true,\n    nodeClusterBy: 'cluster',\n    clusterNodeStrength: 300,\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\n/******** 拖拽固定节点的逻辑 *********/\ngraph.on('node:dragstart', function (e) {\n  const forceLayout = graph.get('layoutController').layoutMethods[0];\n  forceLayout.stop()\n});\ngraph.on('node:drag', function (e) {\n  refreshDragedNodePosition(e);\n  graph.layout()\n});\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n  model.x = e.x;\n  model.y = e.y;\n}\n/*********************************/\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };",title:{zh:"Force2 聚类及固定拖拽节点",en:"Basic Force2 Layout with dragging"},filename:"basicForce2.js",isNew:!1},{id:"basicForceDirected",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Ce2WSIlo_fcAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n  },\n  defaultNode: {\n    size: 15,\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data({\n      nodes: data.nodes,\n      edges: data.edges.map(function (edge, i) {\n        edge.id = 'edge' + i;\n        return Object.assign({}, edge);\n      }),\n    });\n    graph.render();\n\n    graph.on('node:dragstart', function (e) {\n      graph.layout();\n      refreshDragedNodePosition(e);\n    });\n    graph.on('node:drag', function (e) {\n      const forceLayout = graph.get('layoutController').layoutMethods[0];\n      forceLayout.execute();\n      refreshDragedNodePosition(e);\n    });\n    graph.on('node:dragend', function (e) {\n      e.item.get('model').fx = null;\n      e.item.get('model').fy = null;\n    });\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n}\n",title:{zh:"基本力导向布局及节点拖拽",en:"Basic Force-directed Layout with dragging"},filename:"basicForceDirected.js",isNew:!1},{id:"basicFA2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MqwAQZLIVPwAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'forceAtlas2',\n    preventOverlap: true,\n    kr: 10,\n    center: [250, 250],\n  },\n  defaultNode: {\n    size: 20,\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    data.nodes.forEach(node => {\n      node.x = Math.random() * 1;\n    });\n    graph.on('afterlayout', e => {\n      graph.fitView()\n    })\n    graph.data(data);\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"基本 Force Atlas 2",en:"Basic Force-Atlas 2 Layout"},filename:"basicFA2.js",isNew:!1},{id:"forceDirectedPreventOverlap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*9VXcQLLyzHgAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n  },\n  modes: {\n    default: ['drag-canvas'],\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const nodes = data.nodes;\n    // randomize the node size\n    nodes.forEach((node) => {\n      node.size = Math.random() * 30 + 5;\n    });\n    graph.data({\n      nodes,\n      edges: data.edges.map(function (edge, i) {\n        edge.id = 'edge' + i;\n        return Object.assign({}, edge);\n      }),\n    });\n    graph.render();\n\n    graph.on('node:dragstart', function (e) {\n      graph.layout();\n      refreshDragedNodePosition(e);\n    });\n    graph.on('node:drag', function (e) {\n      const forceLayout = graph.get('layoutController').layoutMethods[0];\n      forceLayout.execute();\n      refreshDragedNodePosition(e);\n    });\n    graph.on('node:dragend', function (e) {\n      e.item.get('model').fx = null;\n      e.item.get('model').fy = null;\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n}\n",title:{zh:"力导向布局防止节点重叠",en:"Prevent Node Overlappings"},filename:"forceDirectedPreventOverlap.js",isNew:!1},{id:"forceClustering",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*xonLSopPjKUAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n    clustering: true,\n    clusterNodeStrength: -5,\n    clusterEdgeDistance: 200,\n    clusterNodeSize: 20,\n    clusterFociStrength: 1.2,\n    nodeSpacing: 5,\n    preventOverlap: true,\n  },\n  defaultNode: {\n    size: 15,\n  },\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],\n  },\n});\n\nlet colorMap = {\n  2012: '#BDD2FD',\n  2013: '#BDEFDB',\n  2014: '#F6C3B7',\n  2015: '#FFD8B8',\n  2016: '#D3C6EA',\n};\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    data.nodes.forEach((i) => {\n      i.cluster = i.year;\n      i.style = Object.assign(i.style || {}, {\n        fill: colorMap[i.year],\n      });\n    });\n    graph.render();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"力导向布局聚类",en:"Force Layout with Clustering"},filename:"forceClustering.js",isNew:!1},{id:"forceDirectedFunctionalParams",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*SnVUQbXv7JAAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n    linkDistance: (d) => {\n      if (d.source.id === 'node0') {\n        return 100;\n      }\n      return 30;\n    },\n    nodeStrength: (d) => {\n      if (d.isLeaf) {\n        return -50;\n      }\n      return -10;\n    },\n    edgeStrength: (d) => {\n      if (d.source.id === 'node1' || d.source.id === 'node2' || d.source.id === 'node3') {\n        return 0.7;\n      }\n      return 0.1;\n    },\n  },\n  defaultNode: {\n    color: '#5B8FF9',\n  },\n  modes: {\n    default: ['drag-canvas'],\n  },\n});\n\nconst data = {\n  nodes: [\n    { id: 'node0', size: 50 },\n    { id: 'node1', size: 30 },\n    { id: 'node2', size: 30 },\n    { id: 'node3', size: 30 },\n    { id: 'node4', size: 30, isLeaf: true },\n    { id: 'node5', size: 30, isLeaf: true },\n    { id: 'node6', size: 15, isLeaf: true },\n    { id: 'node7', size: 15, isLeaf: true },\n    { id: 'node8', size: 15, isLeaf: true },\n    { id: 'node9', size: 15, isLeaf: true },\n    { id: 'node10', size: 15, isLeaf: true },\n    { id: 'node11', size: 15, isLeaf: true },\n    { id: 'node12', size: 15, isLeaf: true },\n    { id: 'node13', size: 15, isLeaf: true },\n    { id: 'node14', size: 15, isLeaf: true },\n    { id: 'node15', size: 15, isLeaf: true },\n    { id: 'node16', size: 15, isLeaf: true },\n  ],\n  edges: [\n    { source: 'node0', target: 'node1' },\n    { source: 'node0', target: 'node2' },\n    { source: 'node0', target: 'node3' },\n    { source: 'node0', target: 'node4' },\n    { source: 'node0', target: 'node5' },\n    { source: 'node1', target: 'node6' },\n    { source: 'node1', target: 'node7' },\n    { source: 'node2', target: 'node8' },\n    { source: 'node2', target: 'node9' },\n    { source: 'node2', target: 'node10' },\n    { source: 'node2', target: 'node11' },\n    { source: 'node2', target: 'node12' },\n    { source: 'node2', target: 'node13' },\n    { source: 'node3', target: 'node14' },\n    { source: 'node3', target: 'node15' },\n    { source: 'node3', target: 'node16' },\n  ],\n};\nconst nodes = data.nodes;\ngraph.data({\n  nodes,\n  edges: data.edges.map(function (edge, i) {\n    edge.id = 'edge' + i;\n    return Object.assign({}, edge);\n  }),\n});\ngraph.render();\n\ngraph.on('node:dragstart', function (e) {\n  graph.layout();\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:drag', function (e) {\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:dragend', function (e) {\n  e.item.get('model').fx = null;\n  e.item.get('model').fy = null;\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n}\n",title:{zh:"定制不同节点的参数",en:"Different Configurations for Nodes"},filename:"forceDirectedFunctionalParams.js",isNew:!1},{id:"basicForceDirectedDragFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0qLJQaRFg90AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n  ],\n};\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n    nodeSize: 20,\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: 20,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n}\ngraph.on('node:dragstart', (e) => {\n  graph.layout();\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:drag', (e) => {\n  refreshDragedNodePosition(e);\n});\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"固定被拖拽节点",en:"Fix the Dragged Node"},filename:"basicForceDirectedDragFix.js",isNew:!1},{id:"forceDirectedConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IyK7T5MkVqUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Force layout, linkDistance = 50, preventOverlap: false';\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'force',\n    linkDistance: 50,\n    center: [width / 2, height / 2],\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n\nlayoutConfigTranslation();\n\nsetInterval(() => {\n  layoutConfigTranslation();\n}, 5000);\n\nfunction layoutConfigTranslation() {\n  setTimeout(() => {\n    descriptionDiv.innerHTML = 'Force layout, linkDistance = 100, preventOverlap: true';\n    graph.updateLayout({\n      linkDistance: 100,\n      preventOverlap: true,\n      nodeSize: 20,\n    });\n  }, 2500);\n  setTimeout(() => {\n    descriptionDiv.innerHTML = 'Force layout, linkDistance = 50, preventOverlap: false';\n    graph.updateLayout({\n      linkDistance: 50,\n      preventOverlap: false,\n    });\n  }, 5000);\n}\n",title:{zh:"力导向布局参数动态变化",en:"Update Configurations for Force-directed Layout"},filename:"forceDirectedConfigurationTranslate.js",isNew:!1},{id:"forceBubbles",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*prZhSI341hUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value,\n      enumerable: true,\n      configurable: true,\n      writable: true,\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      value: 10,\n      cluster: 'a',\n      description: 'this is node 0, \\nand the value of it is 10',\n    },\n    {\n      id: '1',\n      label: '1',\n      value: 20,\n      cluster: 'b',\n      description: 'this is node 1, \\nand the value of it is 20',\n    },\n    {\n      id: '2',\n      label: '2',\n      value: 5,\n      cluster: 'a',\n      description: 'this is node 2, \\nand the value of it is 5',\n    },\n    {\n      id: '3',\n      label: '3',\n      value: 10,\n      cluster: 'a',\n      description: 'this is node 3, \\nand the value of it is 10',\n    },\n    {\n      id: '4',\n      label: '4',\n      value: 12,\n      cluster: 'c',\n      subCluster: 'sb',\n      description: 'this is node 4, \\nand the value of it is 12',\n    },\n    {\n      id: '5',\n      label: '5',\n      value: 18,\n      cluster: 'c',\n      subCluster: 'sa',\n      description: 'this is node 5, \\nand the value of it is 18',\n    },\n    {\n      id: '6',\n      label: '6',\n      value: 3,\n      cluster: 'c',\n      subCluster: 'sa',\n      description: 'this is node 6, \\nand the value of it is 3',\n    },\n    {\n      id: '7',\n      label: '7',\n      value: 7,\n      cluster: 'b',\n      subCluster: 'sa',\n      description: 'this is node 7, \\nand the value of it is 7',\n    },\n    {\n      id: '8',\n      label: '8',\n      value: 21,\n      cluster: 'd',\n      subCluster: 'sb',\n      description: 'this is node 8, \\nand the value of it is 21',\n    },\n    {\n      id: '9',\n      label: '9',\n      value: 9,\n      cluster: 'd',\n      subCluster: 'sb',\n      description: 'this is node 9, \\nand the value of it is 9',\n    },\n  ],\n  edges: [],\n};\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = 'Try to click or drag a bubble!';\nconst graphDiv = document.getElementById('container');\ngraphDiv.appendChild(tipDiv);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n    nodeStrength: 30,\n    collideStrength: 0.7,\n    alphaDecay: 0.01,\n    preventOverlap: true,\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: [10, 10],\n  },\n});\n\n// mapping\nconst nodes = data.nodes;\nconst nodeMap = new Map();\nconst clusterMap = new Map();\nlet clusterId = 0;\nnodes.forEach((node) => {\n  nodeMap.set(node.id, node);\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) node.style = {};\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n  node.x = width / 2 + 200 * (Math.random() - 0.5);\n  node.y = height / 2 + 200 * (Math.random() - 0.5);\n});\n\n// map the value to node size\nlet maxNodeValue = -9999,\n  minNodeValue = 9999;\nnodes.forEach(function (n) {\n  if (maxNodeValue < n.value) maxNodeValue = n.value;\n  if (minNodeValue > n.value) minNodeValue = n.value;\n});\nconst nodeSizeRange = [10, 30];\nconst nodeSizeDataRange = [minNodeValue, maxNodeValue];\nscaleNodeProp(nodes, 'size', 'value', nodeSizeDataRange, nodeSizeRange);\n\nnodes.forEach(function (node) {\n  node.oriSize = node.size;\n  node.oriLabel = node.label;\n});\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n}\ngraph.on('node:dragstart', function (e) {\n  graph.layout();\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:drag', function (e) {\n  refreshDragedNodePosition(e);\n});\ngraph.on('node:dragend', function (e) {\n  e.item.get('model').fx = null;\n  e.item.get('model').fy = null;\n});\ngraph.on('node:click', function (e) {\n  const node = e.item;\n  const states = node.getStates();\n  let clicked = false;\n  const model = node.getModel();\n  let size = 200;\n  let labelText = 'NODE: ' + model.id + '\\n' + model.description;\n  states.forEach(function (state) {\n    if (state === 'click') {\n      clicked = true;\n      size = model.oriSize;\n      labelText = model.oriLabel;\n    }\n  });\n  graph.setItemState(node, 'click', !clicked);\n  graph.updateItem(node, {\n    size,\n    label: labelText,\n  });\n  graph.layout();\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n\nfunction scaleNodeProp(elements, propName, refPropName, dataRange, outRange) {\n  const outLength = outRange[1] - outRange[0];\n  const dataLength = dataRange[1] - dataRange[0];\n  elements.forEach(function (n) {\n    if (propName.split('.')[0] === 'style') {\n      if (n.style) {\n        n.style[propName.split('.')[1]] =\n          ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];\n      } else {\n        n.style = _defineProperty(\n          {},\n          propName.split('.')[1],\n          ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0],\n        );\n      }\n    } else {\n      n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];\n    }\n  });\n}\n",title:{zh:"力导向气泡图",en:"Force-directed Bubbles"},filename:"forceBubbles.js",isNew:!1},{id:"forceConstrainedInRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*-4H8SaV8QKwAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst graphDiv = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Constrians the nodes to be layed in the gray area with force-directed layout';\ngraphDiv.appendChild(descriptionDiv);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const nodes = data.nodes;\n\n    // 灰色区域\n    const constrainBox = { x: 60, y: 50, width: 500, height: 150 };\n\n    const backrect = document.createElement('div');\n    backrect.style.backgroundColor = '#666';\n    backrect.style.opacity = 0.1;\n    backrect.style.marginLeft = `${constrainBox.x}px`;\n    backrect.style.marginTop = `${constrainBox.y}px`;\n    backrect.style.width = `${constrainBox.width}px`;\n    backrect.style.height = `${constrainBox.height}px`;\n    backrect.style.position = 'absolute';\n    graphDiv.appendChild(backrect);\n\n    const onTick = () => {\n      let minx = 99999999;\n      let maxx = -99999999;\n      let miny = 99999999;\n      let maxy = -99999999;\n      let maxsize = -9999999;\n      nodes.forEach((node) => {\n        if (minx > node.x) {\n          minx = node.x;\n        }\n        if (maxx < node.x) {\n          maxx = node.x;\n        }\n        if (miny > node.y) {\n          miny = node.y;\n        }\n        if (maxy < node.y) {\n          maxy = node.y;\n        }\n        if (maxsize < node.size) {\n          maxsize = node.size;\n        }\n      });\n      const scalex = (constrainBox.width - maxsize) / (maxx - minx);\n      const scaley = (constrainBox.height - maxsize) / (maxy - miny);\n      nodes.forEach((node) => {\n        node.x = (node.x - minx) * scalex + constrainBox.x;\n        node.y = (node.y - miny) * scaley + constrainBox.y;\n      });\n    };\n\n    const graph = new G6.Graph({\n      container: 'container',\n      width,\n      height,\n      layout: {\n        type: 'force',\n        onTick,\n      },\n      defaultNode: {\n        size: 15,\n      },\n    });\n\n    graph.data({\n      nodes: data.nodes,\n      edges: data.edges.map(function (edge, i) {\n        edge.id = 'edge' + i;\n        return Object.assign({}, edge);\n      }),\n    });\n    graph.render();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"约束在范围内布局",en:"Constrain the Nodes in a region"},filename:"forceConstrainedInRect.js",isNew:!1},{id:"gForceFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YMwnTbT9NnQAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'gForce',\n    gravity: 10,\n    edgeStrength: 100,\n    nodeStrength: 100,\n  },\n  defaultNode: {\n    size: 15,\n  },\n  fitView: true,\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas']\n  }\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data({\n      nodes: data.nodes,\n      edges: data.edges.map(function (edge, i) {\n        edge.id = 'edge' + i;\n        return Object.assign({}, edge);\n      }),\n    });\n    graph.render();\n\n    graph.on('node:dragstart', function (e) {\n      const forceLayout = graph.get('layoutController').layoutMethods[0];\n      forceLayout.stop()\n    });\n\n    graph.on('node:drag', function (e) {\n      refreshDragedNodePosition(e);\n      graph.layout()\n    });\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n  model.x = e.x;\n  model.y = e.y;\n}\n",title:{zh:"GForce 固定被拖拽的节点",en:"GForce with Fixing Dragged Nodes"},filename:"gForceFix.js",isNew:!1}],icon:"",id:"forceDirected",title:{en:"Force-directed Layout",zh:"力导向图布局"},childrenKey:"demos",order:0},{demos:[{id:"basicDagre",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*2uMmRo5wYPUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-tooltip {\n    border-radius: 6px;\n    font-size: 12px;\n    color: #fff;\n    background-color: #000;\n    padding: 2px 8px;\n    text-align: center;\n  }\n`);\n\nconst data = {\n  nodes: [\n    {\n      id: '1',\n      dataType: 'alps',\n      name: 'alps_file1',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n    {\n      id: '2',\n      dataType: 'alps',\n      name: 'alps_file2',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n    {\n      id: '3',\n      dataType: 'alps',\n      name: 'alps_file3',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n    {\n      id: '4',\n      dataType: 'sql',\n      name: 'sql_file1',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n    {\n      id: '5',\n      dataType: 'sql',\n      name: 'sql_file2',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n    {\n      id: '6',\n      dataType: 'feature_etl',\n      name: 'feature_etl_1',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n    {\n      id: '7',\n      dataType: 'feature_etl',\n      name: 'feature_etl_1',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n    {\n      id: '8',\n      dataType: 'feature_extractor',\n      name: 'feature_extractor',\n      conf: [\n        {\n          label: 'conf',\n          value: 'pai_graph.conf',\n        },\n        {\n          label: 'dot',\n          value: 'pai_graph.dot',\n        },\n        {\n          label: 'init',\n          value: 'init.rc',\n        },\n      ],\n    },\n  ],\n  edges: [\n    {\n      source: '1',\n      target: '2',\n    },\n    {\n      source: '1',\n      target: '3',\n    },\n    {\n      source: '2',\n      target: '4',\n    },\n    {\n      source: '3',\n      target: '4',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '6',\n      target: '7',\n    },\n    {\n      source: '6',\n      target: '8',\n    },\n  ],\n};\n\nG6.registerNode(\n  'sql',\n  {\n    drawShape(cfg, group) {\n      const rect = group.addShape('rect', {\n        attrs: {\n          x: -75,\n          y: -25,\n          width: 150,\n          height: 50,\n          radius: 10,\n          stroke: '#5B8FF9',\n          fill: '#C6E5FF',\n          lineWidth: 3,\n        },\n        name: 'rect-shape',\n      });\n      if (cfg.name) {\n        group.addShape('text', {\n          attrs: {\n            text: cfg.name,\n            x: 0,\n            y: 0,\n            fill: '#00287E',\n            fontSize: 14,\n            textAlign: 'center',\n            textBaseline: 'middle',\n            fontWeight: 'bold',\n          },\n          name: 'text-shape',\n        });\n      }\n      return rect;\n    },\n  },\n  'single-node',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'dagre',\n    nodesepFunc: (d) => {\n      if (d.id === '3') {\n        return 500;\n      }\n      return 50;\n    },\n    ranksep: 70,\n    controlPoints: true,\n  },\n  defaultNode: {\n    type: 'sql',\n  },\n  defaultEdge: {\n    type: 'polyline',\n    style: {\n      radius: 20,\n      offset: 45,\n      endArrow: true,\n      lineWidth: 2,\n      stroke: '#C2C8D5',\n    },\n  },\n  nodeStateStyles: {\n    selected: {\n      stroke: '#d9d9d9',\n      fill: '#5394ef',\n    },\n  },\n  modes: {\n    default: [\n      'drag-canvas',\n      'zoom-canvas',\n      'click-select',\n      {\n        type: 'tooltip',\n        formatText(model) {\n          const cfg = model.conf;\n          const text = [];\n          cfg.forEach((row) => {\n            text.push(row.label + ':' + row.value + '<br>');\n          });\n          return text.join('\\n');\n        },\n        offset: 30,\n      },\n    ],\n  },\n  fitView: true,\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"Dagre 流程图",en:"Basic Dagre Layout"},filename:"basicDagre.js",isNew:!1},{id:"dagreCombo",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*94EUTJ8l2QAAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n      comboId: 'A',\n    },\n    {\n      id: '5',\n      label: '5',\n      comboId: 'B',\n    },\n    {\n      id: '6',\n      label: '6',\n      comboId: 'A',\n    },\n    {\n      id: '7',\n      label: '7',\n      comboId: 'C',\n    },\n    {\n      id: '8',\n      label: '8',\n      comboId: 'C',\n    },\n    {\n      id: '9',\n      label: '9',\n      comboId: 'A',\n    },\n    {\n      id: '10',\n      label: '10',\n      comboId: 'B',\n    },\n    {\n      id: '11',\n      label: '11',\n      comboId: 'B',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '1',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '3',\n      target: '4',\n    },\n    {\n      source: '2',\n      target: '5',\n    },\n    {\n      source: '1',\n      target: '6',\n    },\n    {\n      source: '1',\n      target: '7',\n    },\n    {\n      source: '3',\n      target: '8',\n    },\n    {\n      source: '3',\n      target: '9',\n    },\n    {\n      source: '5',\n      target: '10',\n    },\n    {\n      source: '5',\n      target: '11',\n    },\n  ],\n  combos: [\n    {\n      id: 'A',\n      label: 'combo A',\n      style: {\n        fill: '#C4E3B2',\n        stroke: '#C4E3B2',\n      },\n    },\n    {\n      id: 'B',\n      label: 'combo B',\n      style: {\n        stroke: '#99C0ED',\n        fill: '#99C0ED',\n      },\n    },\n    {\n      id: 'C',\n      label: 'combo C',\n      style: {\n        stroke: '#eee',\n        fill: '#eee',\n      },\n    },\n  ],\n};\n\ndata.nodes.forEach((node) => {\n  switch (node.ComboId) {\n    case 'A':\n      node.style = {\n        fill: '#C4E3B2',\n        stroke: '#aaa',\n      };\n      break;\n    case 'B':\n      node.style = {\n        fill: '#99C0ED',\n        stroke: '#aaa',\n      };\n      break;\n    case 'C':\n      node.style = {\n        fill: '#eee',\n        stroke: '#aaa',\n      };\n      break;\n    default:\n      node.style = {\n        fill: '#FDE1CE',\n        stroke: '#aaa',\n      };\n      break;\n  }\n});\n\nlet sortByCombo = false;\nconst descriptionDiv = document.createElement('button');\ndescriptionDiv.innerHTML = 'Enable sortByCombo';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\ndescriptionDiv.addEventListener('click', (e) => {\n  sortByCombo = !sortByCombo;\n  descriptionDiv.innerHTML = sortByCombo ? 'Disable sortByCombo' : 'Enable sortByCombo';\n  graph.updateLayout({\n    sortByCombo,\n  });\n});\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height: height - 50,\n  fitView: true,\n  fitViewPadding: 30,\n  animate: true,\n  groupByTypes: false,\n  modes: {\n    default: [\n      'drag-combo',\n      'drag-node',\n      'drag-canvas',\n      {\n        type: 'collapse-expand-combo',\n        relayout: false,\n      },\n    ],\n  },\n  layout: {\n    type: 'dagre',\n    sortByCombo: false,\n    ranksep: 10,\n    nodesep: 10,\n  },\n  defaultNode: {\n    size: [60, 30],\n    type: 'rect',\n    anchorPoints: [[0.5, 0], [0.5, 1]]\n  },\n  defaultEdge: {\n    type: 'line',\n  },\n  defaultCombo: {\n    type: 'rect',\n    style: {\n      fillOpacity: 0.1,\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nconsole.log('comboTrees', graph.get('comboTrees'))\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:{zh:"带有 Combo 的流程图",en:"Dagre with Combos"},filename:"dagreCombo.js",isNew:!1},{id:"lrDagreUL",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*LJpmR4G7J3YAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '1',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '3',\n      target: '4',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '7',\n    },\n    {\n      source: '5',\n      target: '8',\n    },\n    {\n      source: '8',\n      target: '9',\n    },\n    {\n      source: '2',\n      target: '9',\n    },\n    {\n      source: '3',\n      target: '9',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'dagre',\n    rankdir: 'LR',\n    align: 'UL',\n    controlPoints: true,\n    nodesepFunc: () => 1,\n    ranksepFunc: () => 1,\n  },\n  defaultNode: {\n    size: [30, 20],\n    type: 'rect',\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    type: 'polyline',\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n      radius: 20,\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自左向右的 Dagre 上对齐",en:"Dagre from Left to Right"},filename:"lrDagreUL.js",isNew:!1},{id:"lrDagre",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pdaxTpV1R0EAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'dagre',\n    rankdir: 'LR',\n    align: 'DL',\n    nodesepFunc: () => 1,\n    ranksepFunc: () => 1,\n  },\n  defaultNode: {\n    size: [30, 20],\n    type: 'rect',\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自左向右的 Dagre",en:"Dagre from Left to Right"},filename:"lrDagre.js",isNew:!1},{id:"dagreConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*VkwOTL2UyN0AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Dagre layout, rank seperation: 1, node seperation in same level: 1, layout direction: Top->Bottom, alignment of nodes: DL';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  controlPoints: false,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'dagre',\n    nodeSize: [40, 20],\n    nodesep: 1,\n    ranksep: 1,\n  },\n  animate: true,\n  defaultNode: {\n    size: [40, 20],\n    type: 'rect',\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n\nlayoutConfigTranslation();\n\nfunction layoutConfigTranslation() {\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Dagre layout, rank seperation: 10, node seperation in same level: 1, layout direction: Top->Bottom, alignment of nodes: DL';\n    graph.updateLayout({\n      ranksep: 10,\n    });\n  }, 1000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: DL';\n    graph.updateLayout({\n      nodesep: 5,\n    });\n  }, 2500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: UL';\n    graph.updateLayout({\n      align: 'UL',\n    });\n  }, 4000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: UR';\n    graph.updateLayout({\n      align: 'UR',\n    });\n  }, 5500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Dagre layout, rank seperation: 10, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: Down Right, alignment of nodes: DL';\n    graph.updateLayout({\n      rankdir: 'LR',\n      align: 'DL',\n    });\n  }, 7000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Dagre layout, rank seperation: 30, node seperation in same level: 5, layout direction: Left->Right, alignment of nodes: Down Right, alignment of nodes: DL';\n    graph.updateLayout({\n      ranksep: 30,\n    });\n  }, 8500);\n}\n",title:{zh:"Dagre 布局参数动态变化",en:"Update Configurations for Dagre Layout"},filename:"dagreConfigurationTranslate.js",isNew:!1}],icon:"",id:"dagreFlow",title:{en:"Dagre Layout",zh:"Dagre 流程图布局"},childrenKey:"demos",order:1},{demos:[{id:"basicFruchterman",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1KY7SLEXxqMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'fruchterman',\n    gravity: 5,\n    speed: 5,\n    // for rendering after each iteration\n    tick: () => {\n      graph.refreshPositions()\n    }\n  },\n  animate: true,\n  defaultNode: {\n    size: 30,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"基本 Fruchterman 布局",en:"Basic Fruchterman Layout"},filename:"basicFruchterman.js",isNew:!1},{id:"fruchtermanClustering",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WO1OTbNE_ugAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nconst nodes = data.nodes;\nconst clusterMap = new Map();\nlet clusterId = 0;\nnodes.forEach(function (node) {\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) {\n    node.style = {};\n  }\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'fruchterman',\n    gravity: 10,\n    speed: 5,\n    clustering: true,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"Fruchterman 聚类布局",en:"Fruchterman with Clustering"},filename:"fruchtermanClustering.js",isNew:!1},{id:"fruchtermanConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W9MoQoKaQbYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nconst nodes = data.nodes;\nconst clusterMap = new Map();\nlet clusterId = 0;\nnodes.forEach(function (node) {\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) {\n    node.style = {};\n  }\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n});\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Fruchterman layout, gravity = 1';\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'fruchterman',\n    gravity: 1,\n    speed: 5,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    size: 1,\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n\nlayoutConfigTranslation();\n\nfunction layoutConfigTranslation() {\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 5';\n    graph.updateLayout({\n      gravity: 5,\n    });\n  }, 1000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 10, layout by cluster';\n    graph.updateLayout({\n      gravity: 10,\n      clustering: true,\n    });\n  }, 2500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 20, layout by cluster';\n    graph.updateLayout({\n      gravity: 20,\n    });\n  }, 4000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 50, layout by cluster';\n    graph.updateLayout({\n      gravity: 50,\n    });\n  }, 5500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 80, layout by cluster';\n    graph.updateLayout({\n      gravity: 80,\n    });\n  }, 7000);\n}\n",title:{zh:"Fruchterman 布局参数动态变化",en:"Update the Configurations for Fruchterman"},filename:"fruchtermanConfigurationTranslate.js",isNew:!1},{id:"fruchtermanWebWorker",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0sl9RZ7Cp28AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Doing layout... web-worker is enabled in this demo, so the layout will not block the page.';\ncontainer.appendChild(descriptionDiv);\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'fruchterman',\n    maxIteration: 8000,\n    gravity: 1,\n    workerEnabled: true,\n  },\n  animate: true,\n  defaultNode: {\n    size: 10,\n  },\n  defaultEdge: {\n    size: 1,\n  },\n});\n\ngraph.on('afterlayout', () => {\n  descriptionDiv.innerHTML = 'Done!';\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n",title:{zh:"Fruchterman 使用 Web-worker",en:"Fruchterman with Web-worker"},filename:"fruchtermanWebWorker.js",isNew:!1},{id:"fruchtermanFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*fQNPRKHPJRMAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'fruchterman',\n    speed: 10,\n    maxIteration: 500,\n    // for rendering after each iteration\n    tick: () => {\n      graph.refreshPositions()\n    }\n  },\n  defaultNode: {\n    size: 15,\n  },\n  fitView: true\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data({\n      nodes: data.nodes,\n      edges: data.edges.map(function (edge, i) {\n        edge.id = 'edge' + i;\n        return Object.assign({}, edge);\n      }),\n    });\n    graph.render();\n\n    graph.on('node:dragstart', function (e) {\n      const forceLayout = graph.get('layoutController').layoutMethods[0];\n      forceLayout.stop()\n    });\n\n    graph.on('node:drag', function (e) {\n      refreshDragedNodePosition(e);\n      graph.layout()\n    });\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n\nfunction refreshDragedNodePosition(e) {\n  const model = e.item.get('model');\n  model.fx = e.x;\n  model.fy = e.y;\n  model.x = e.x;\n  model.y = e.y;\n}\n",title:{zh:"Fruchterman 固定被拖拽的节点",en:"Fruchterman with Fixing Dragged Nodes"},filename:"fruchtermanFix.js",isNew:!1}],icon:"",id:"furchtermanLayout",title:{en:"Fruchterman Layout",zh:"Fruchterman 图布局"},childrenKey:"demos",order:2},{demos:[{id:"basicRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Ec_WQ5hqVsgAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'radial',\n    unitRadius: 50,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"基本 Radial 辐射布局",en:"Basic Radial Layout"},filename:"basicRadial.js",isNew:!1},{id:"preventOverlapRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*GAFjRJeAoAsAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'radial',\n    unitRadius: 50,\n    preventOverlap: true,\n    maxPreventOverlapIteration: 100,\n  },\n  animate: true,\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\n\nconst nodes = data.nodes;\nnodes.forEach((node) => {\n  node.size = Math.random() * 20 + 10;\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"防止节点重叠的严格辐射布局",en:"Prevent Node Overlappings and Restrict Radial"},filename:"preventOverlapRadial.js",isNew:!1},{id:"preventOverlapUnstrictRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*X8rzTZyWwUcAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'radial',\n    unitRadius: 70,\n    preventOverlap: true,\n    strictRadial: false,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"防止节点重叠的非严格辐射布局",en:"Prevent Node Overlappings and Unrestrict Radial"},filename:"preventOverlapUnstrictRadial.js",isNew:!1},{id:"interactRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*F4OQQKc8l2IAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst data2_m = {\n  nodes: [\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '1001',\n      label: '1001',\n    },\n    {\n      id: '1002',\n      label: '1002',\n    },\n    {\n      id: '1003',\n      label: '1003',\n    },\n    {\n      id: '1004',\n      label: '1004',\n    },\n    {\n      id: '1005',\n      label: '1005',\n    },\n    {\n      id: '1006',\n      label: '1006',\n    },\n    {\n      id: '1007',\n      label: '1007',\n    },\n    {\n      id: '1008',\n      label: '1008',\n    },\n    {\n      id: '1009',\n      label: '1009',\n    },\n    {\n      id: '1010',\n      label: '1010',\n    },\n    {\n      id: '1011',\n      label: '1011',\n    },\n    {\n      id: '1012',\n      label: '1012',\n    },\n    {\n      id: '1013',\n      label: '1013',\n    },\n    {\n      id: '1014',\n      label: '1014',\n    },\n    {\n      id: '1015',\n      label: '1015',\n    },\n    {\n      id: '1016',\n      label: '1016',\n    },\n    {\n      id: '1017',\n      label: '1017',\n    },\n    {\n      id: '1018',\n      label: '1018',\n    },\n    {\n      id: '1019',\n      label: '1019',\n    },\n    {\n      id: '1020',\n      label: '1020',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '41',\n      label: '41',\n    },\n  ],\n  edges: [\n    {\n      source: '2',\n      target: '1001',\n    },\n    {\n      source: '2',\n      target: '1002',\n    },\n    {\n      source: '2',\n      target: '1003',\n    },\n    {\n      source: '2',\n      target: '1004',\n    },\n    {\n      source: '2',\n      target: '1005',\n    },\n    {\n      source: '1001',\n      target: '1006',\n    },\n    {\n      source: '1001',\n      target: '1007',\n    },\n    {\n      source: '1001',\n      target: '1008',\n    },\n    {\n      source: '1001',\n      target: '1009',\n    },\n    {\n      source: '1001',\n      target: '1010',\n    },\n    {\n      source: '1002',\n      target: '1006',\n    },\n    {\n      source: '1002',\n      target: '1007',\n    },\n    {\n      source: '1002',\n      target: '1008',\n    },\n    {\n      source: '1002',\n      target: '1009',\n    },\n    {\n      source: '1002',\n      target: '1010',\n    },\n    {\n      source: '1003',\n      target: '1006',\n    },\n    {\n      source: '1003',\n      target: '1007',\n    },\n    {\n      source: '1003',\n      target: '1008',\n    },\n    {\n      source: '1003',\n      target: '1009',\n    },\n    {\n      source: '1003',\n      target: '1010',\n    },\n    {\n      source: '1010',\n      target: '1011',\n    },\n    {\n      source: '1010',\n      target: '1012',\n    },\n    {\n      source: '1010',\n      target: '1013',\n    },\n    {\n      source: '1010',\n      target: '1014',\n    },\n    {\n      source: '1010',\n      target: '1015',\n    },\n    {\n      source: '1010',\n      target: '1016',\n    },\n    {\n      source: '1010',\n      target: '1017',\n    },\n    {\n      source: '1008',\n      target: '1014',\n    },\n    {\n      source: '1008',\n      target: '1015',\n    },\n    {\n      source: '1008',\n      target: '1016',\n    },\n    {\n      source: '1008',\n      target: '1017',\n    },\n    {\n      source: '1017',\n      target: '1018',\n    },\n    {\n      source: '1017',\n      target: '1019',\n    },\n    {\n      source: '1016',\n      target: '1020',\n    },\n    {\n      source: '1016',\n      target: '1020',\n    },\n    {\n      source: '5',\n      target: '1020',\n    },\n    {\n      source: '41',\n      target: '1020',\n    },\n    {\n      source: '5',\n      target: '1009',\n    },\n    {\n      source: '41',\n      target: '1009',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Try to click node 2!';\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst mainUnitRadius = 80;\nconst focusNode = data.nodes[22];\nfocusNode.style = {\n  stroke: '#00419F',\n  fill: '#729FFC',\n  lineWidth: 2,\n};\ndata.nodes[2].style = {\n  stroke: '#00419F',\n  fill: '#729FFC',\n  lineWidth: 2,\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'radial',\n    maxIteration: 200,\n    focusNode,\n    unitRadius: mainUnitRadius,\n    linkDistance: 100,\n    preventOverlap: true,\n    nodeSize: 20,\n  },\n  animate: true,\n  modes: {\n    default: ['drag-node', 'click-select', 'click-add-node', 'drag-canvas'],\n  },\n  defaultNode: {\n    size: 20,\n  },\n});\n\ngraph.data({\n  nodes: data.nodes,\n  edges: data.edges.map((edge, i) => {\n    edge.id = `edge${i}`;\n    return Object.assign({}, edge);\n  }),\n});\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n\ngraph.on('node:click', (ev) => {\n  const itemModel = ev.item.getModel();\n  const nodes = graph.getNodes();\n  const edges = graph.getEdges();\n  let newData;\n  if (itemModel.id === '2') newData = data2_m;\n  else return;\n  const newNodeModels = newData.nodes;\n  const newEdgeModels = [];\n  // deduplication the items in newEdgeModels\n  newData.edges.forEach(function (e) {\n    let exist = false;\n    newEdgeModels.forEach(function (ne) {\n      if (ne.source === e.source && ne.target === e.target) exist = true;\n    });\n    if (!exist) {\n      newEdgeModels.push(e);\n    }\n  });\n\n  // for graph.changeData()\n  const allNodeModels = [],\n    allEdgeModels = [];\n\n  // add new nodes to graph\n  const nodeMap = new Map();\n  nodes.forEach((n) => {\n    const nModel = n.getModel();\n    nodeMap.set(nModel.id, n);\n  });\n  newNodeModels.forEach((nodeModel) => {\n    if (nodeMap.get(nodeModel.id) === undefined) {\n      // set the initial positions of the new nodes to the focus(clicked) node\n      nodeModel.x = itemModel.x;\n      nodeModel.y = itemModel.y;\n      graph.addItem('node', nodeModel);\n    }\n  });\n\n  // add new edges to graph\n  const edgeMap = new Map();\n  edges.forEach(function (e, i) {\n    const eModel = e.getModel();\n    edgeMap.set(eModel.source + ',' + eModel.target, i);\n  });\n  const oldEdgeNum = edges.length;\n  newEdgeModels.forEach(function (em, i) {\n    const exist = edgeMap.get(em.source + ',' + em.target);\n    if (exist === undefined) {\n      graph.addItem('edge', em);\n      edgeMap.set(em.source + ',' + em.target, oldEdgeNum + i);\n    }\n  });\n\n  edges.forEach((e) => {\n    allEdgeModels.push(e.getModel());\n  });\n  nodes.forEach((n) => {\n    allNodeModels.push(n.getModel());\n  });\n  // the max degree about foces(clicked) node in the newly added data\n  const maxDegree = 4;\n  // the max degree about foces(clicked) node in the original data\n  const oMaxDegree = 3;\n  const unitRadius = 40;\n  // re-place the clicked node far away the exisiting items\n  // along the radius from center node to it\n  const vx = itemModel.x - focusNode.x;\n  const vy = itemModel.y - focusNode.y;\n  const vlength = Math.sqrt(vx * vx + vy * vy);\n  const ideallength = unitRadius * maxDegree + mainUnitRadius * oMaxDegree;\n  itemModel.x = (ideallength * vx) / vlength + focusNode.x;\n  itemModel.y = (ideallength * vy) / vlength + focusNode.y;\n\n  const subRadialLayout = new G6.Layout.radial({\n    center: [itemModel.x, itemModel.y],\n    maxIteration: 200,\n    focusNode: '2',\n    unitRadius,\n    linkDistance: 180,\n    preventOverlap: true,\n  });\n  subRadialLayout.init({\n    nodes: newNodeModels,\n    edges: newEdgeModels,\n  });\n  subRadialLayout.execute();\n  graph.positionsAnimate();\n  graph.data({\n    nodes: allNodeModels,\n    edges: allEdgeModels,\n  });\n});\n",title:{zh:"交互扩展节点的辐射布局",en:"Interactively Expand a Node"},filename:"interactRadial.js",isNew:!1},{id:"radialConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ikctQb9KECAAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Radial layout, focusNode =  = 0, unitRadius = 50, preventOverlap: false';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'radial',\n    unitRadius: 50,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n\nlayoutConfigTranslation();\n\nsetInterval(function () {\n  layoutConfigTranslation();\n}, 7000);\n\nfunction layoutConfigTranslation() {\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Radial layout, focusNode =  = 0, unitRadius = 50, preventOverlap: true';\n    graph.updateLayout({\n      preventOverlap: true,\n      nodeSize: 20,\n    });\n  }, 1000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Radial layout, focusNode =  = 0, unitRadius = 80, preventOverlap: true';\n    graph.updateLayout({\n      unitRadius: 80,\n    });\n  }, 2500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Radial layout, focusNode =  = 10, unitRadius = 80, preventOverlap: true';\n    graph.updateLayout({\n      focusNode: '10',\n    });\n  }, 4000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Radial layout, focusNode =  = 20, unitRadius = 80, preventOverlap: true';\n    graph.updateLayout({\n      focusNode: '20',\n    });\n  }, 5500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Radial layout, focusNode =  = 0, unitRadius = 50, preventOverlap: false';\n    graph.updateLayout({\n      focusNode: '0',\n      preventOverlap: false,\n      unitRadius: 50,\n    });\n  }, 5500);\n}\n",title:{zh:"Radial 布局参数动态变化",en:"Update Configurations for Radial"},filename:"radialConfigurationTranslate.js",isNew:!1},{id:"sortRadial",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*gzfTQKBB62IAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n    {\n      id: '1',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n    {\n      id: '2',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n    {\n      id: '3',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n    {\n      id: '4',\n      sortAttr: 2,\n      sortAttr2: 'c',\n    },\n    {\n      id: '5',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n    {\n      id: '6',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '7',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '8',\n      sortAttr: 2,\n      sortAttr2: 'c',\n    },\n    {\n      id: '9',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '10',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '11',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '12',\n      sortAttr: 2,\n      sortAttr2: 'c',\n    },\n    {\n      id: '13',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '14',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '15',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '16',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '17',\n      sortAttr: 2,\n      sortAttr2: 'c',\n    },\n    {\n      id: '18',\n      sortAttr: 2,\n      sortAttr2: 'c',\n    },\n    {\n      id: '19',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '20',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '21',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '22',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '23',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '24',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n    {\n      id: '25',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n    {\n      id: '26',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '27',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '28',\n      sortAttr: 3,\n      sortAttr2: 'd',\n    },\n    {\n      id: '29',\n      sortAttr: 2,\n      sortAttr2: 'c',\n    },\n    {\n      id: '30',\n      sortAttr: 2,\n      sortAttr2: 'c',\n    },\n    {\n      id: '31',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '32',\n      sortAttr: 1,\n      sortAttr2: 'b',\n    },\n    {\n      id: '33',\n      sortAttr: 0,\n      sortAttr2: 'a',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'radial',\n    unitRadius: 70,\n    maxIteration: 1000,\n    linkDistance: 10,\n    preventOverlap: true,\n    nodeSize: 30,\n    sortBy: 'sortAttr2',\n    sortStrength: 50,\n  },\n  animate: true,\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\n\nconst colors = ['steelblue', 'green', 'pink', 'grey'];\nconst colorsObj = { a: 'steelblue', b: 'green', c: 'pink', d: 'grey' };\ndata.nodes.forEach((node) => {\n  node.size = 20;\n  node.style = {\n    lineWidth: 4,\n    fill: '#fff',\n    stroke: colors[node.sortAttr2] || colorsObj[node.sortAttr2],\n  };\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"同层节点按照指定字段聚类",en:"Order the Level Nodes"},filename:"sortRadial.js",isNew:!1}],icon:"",id:"radialLayout",title:{en:"Radial Layout",zh:"Radial 辐射布局"},childrenKey:"demos",order:3},{demos:[{id:"basicCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZSuXQ4PS2F8AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'circular',\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"基本 Circular 布局",en:"Basic Circular Layout"},filename:"basicCircular.js",isNew:!1},{id:"degreeCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MOEeS6ooB7AAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'circular',\n    ordering: 'degree',\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"按照节点度数排序的 Circular 布局",en:"Degree Ordered Circular"},filename:"degreeCircular.js",isNew:!1},{id:"spiralCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*bY0iSqTc3z4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'circular',\n    startRadius: 10,\n    endRadius: 300,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"螺旋线布局",en:"Spiral Layout"},filename:"spiralCircular.js",isNew:!1},{id:"divisionCircular",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*u30nQahg6q0AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'circular',\n    divisions: 5,\n    radius: 200,\n    startAngle: Math.PI / 4,\n    endAngle: Math.PI,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"分割环形布局",en:"Divided Circular Layout"},filename:"divisionCircular.js",isNew:!1},{id:"circularConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*D85cS7-yqNEAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Circular layout with radius: take full use of the canvas, ordering: topology';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'circular',\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n\nlayoutConfigTranslation();\n\nsetInterval(function () {\n  layoutConfigTranslation();\n}, 11500);\n\nfunction layoutConfigTranslation() {\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Circular layout, radius = 200, divisions = 5, ordering: degree';\n    graph.updateLayout({\n      radius: 200,\n      startAngle: Math.PI / 4,\n      endAngle: Math.PI,\n      divisions: 5,\n      ordering: 'degree',\n    });\n  }, 1000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Circular layout, radius = 200, divisions = 3, ordering: degree';\n    graph.updateLayout({\n      startAngle: Math.PI / 4,\n      endAngle: Math.PI,\n      divisions: 3,\n    });\n  }, 2500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Circular layout, radius = 200, divisions = 8, ordering: degree';\n    graph.updateLayout({\n      radius: 200,\n      startAngle: 0,\n      endAngle: Math.PI / 2,\n      divisions: 8,\n    });\n  }, 4000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Circular layout, radius = 10～300(spiral), endAngle: PI, divisions = 1, ordering: degree';\n    graph.updateLayout({\n      radius: null,\n      startRadius: 10,\n      endRadius: 300,\n      divisions: 1,\n      startAngle: 0,\n      endAngle: Math.PI,\n    });\n  }, 5500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML =\n      'Circular layout, radius = 10～300(spiral),endAngle: 2 * PI, divisions= 1, ordering: degree';\n    graph.updateLayout({\n      endAngle: 2 * Math.PI,\n    });\n  }, 7000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Circular layout, radius = 200, ordering: degree';\n    graph.updateLayout({\n      radius: 200,\n    });\n  }, 8500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Circular layout, radius = 200, ordering: topology';\n    graph.updateLayout({\n      radius: 200,\n      ordering: 'topology',\n    });\n  }, 10000);\n}\n",title:{zh:"Circular 布局参数动态变化",en:"Update Configurations for Circular Layout"},filename:"circularConfigurationTranslate.js",isNew:!1}],icon:"",id:"circular",title:{en:"Circular Layout",zh:"Circular 环形布局"},childrenKey:"demos",order:4},{demos:[{id:"basicGrid",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Oh6mRLVEBBIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'grid',\n    begin: [20, 20],\n    width: width - 20,\n    height: height - 20,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"基本 Grid 网格布局",en:"Basic Grid Layout"},filename:"basicGrid.js",isNew:!1},{id:"clusterGrid",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*_ABKTptHoKoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: '0',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: '0',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: '0',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: '0',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: '3',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: '0',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: '0',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: '0',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: '3',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: '3',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: '2',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: '2',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: '4',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: '2',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: '2',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: '2',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: '1',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: '4',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: '4',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: '4',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: '0',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: '2',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: '2',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: '2',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: '3',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: '4',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: '4',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: '1',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: '1',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: '4',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: '4',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: '1',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: '2',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nconst nodes = data.nodes;\nconst clusterMap = new Map();\nlet clusterId = 0;\nnodes.forEach(function (node) {\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) node.style = {};\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'grid',\n    begin: [20, 20],\n    width: width - 20,\n    height: height - 20,\n    sortBy: 'cluster',\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"指定排序方式的网格布局",en:"Ordered Grid Layout"},filename:"clusterGrid.js",isNew:!1}],icon:"",id:"gridLayout",title:{en:"Grid",zh:"Grid 网格布局"},childrenKey:"demos",order:5},{demos:[{id:"basicConcentric",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*QpyPTbBpO2AAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'concentric',\n    maxLevelDiff: 0.5,\n    sortBy: 'degree',\n  },\n  animate: true,\n  defaultNode: {\n    size: 5,\n  },\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/8dacf27e-e1bc-4522-b6d3-4b6d9b9ed7df.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n",title:{zh:"基本 Concentric 同心圆布局",en:"Basic Concentric Layout"},filename:"basicConcentric.js",isNew:!1}],icon:"",id:"concentricLayout",title:{en:"Concentric Layout",zh:"Concentric 同心圆布局"},childrenKey:"demos",order:6},{demos:[{id:"basicMDS",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*aUS7TJR2NHcAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  layout: {\n    type: 'mds',\n    linkDistance: 100,\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: 20,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"基本 MDS 布局",en:"Basic MDS Layout"},filename:"basicMDS.js",isNew:!1}],icon:"",id:"mdsLayout",title:{en:"MDS Layout",zh:"MDS 布局"},childrenKey:"demos",order:7},{demos:[{id:"basicArcDiagram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*_eivQrJXt8sAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst colors = [\n  'rgb(91, 143, 249)',\n  'rgb(90, 216, 166)',\n  'rgb(93, 112, 146)',\n  'rgb(246, 189, 22)',\n  'rgb(232, 104, 74)',\n  'rgb(109, 200, 236)',\n  'rgb(146, 112, 202)',\n  'rgb(255, 157, 77)',\n  'rgb(38, 154, 153)',\n  'rgb(227, 137, 163)',\n];\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: [\n      {\n        type: 'edge-tooltip',\n        formatText: function formatText(model) {\n          const text = 'source: ' + model.sourceName + '<br/> target: ' + model.targetName;\n          return text;\n        },\n      },\n    ],\n  },\n  defaultNode: {\n    style: {\n      opacity: 0.8,\n      lineWidth: 1,\n      stroke: '#999',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      opacity: 0.6,\n      lineAppendWidth: 3,\n    },\n  },\n});\ngraph.on('edge:mouseenter', function (e) {\n  const edge = e.item;\n  graph.setItemState(edge, 'hover', true);\n});\ngraph.on('edge:mouseleave', function (e) {\n  const edge = e.item;\n  graph.setItemState(edge, 'hover', false);\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/70cde3be-22e8-4291-98f1-4d5a5b75b62f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const edges = data.edges;\n    const nodes = data.nodes;\n    const nodeMap = new Map();\n    const clusterMap = new Map();\n    let clusterId = 0;\n    const n = nodes.length;\n    const horiPadding = 10;\n    const begin = [horiPadding, height * 0.7];\n    const end = [width - horiPadding, height * 0.7];\n    const xLength = end[0] - begin[0];\n    const yLength = end[1] - begin[1];\n    const xSep = xLength / n;\n    const ySep = yLength / n;\n    nodes.forEach(function (node, i) {\n      node.x = begin[0] + i * xSep;\n      node.y = begin[1] + i * ySep;\n      nodeMap.set(node.id, node);\n      // cluster\n      if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n        clusterMap.set(node.cluster, clusterId);\n        clusterId++;\n      }\n      const id = clusterMap.get(node.cluster);\n      if (node.style) {\n        node.style.fill = colors[id % colors.length];\n      } else {\n        node.style = {\n          fill: colors[id % colors.length],\n        };\n      }\n      // label\n      node.label = node.name;\n      node.labelCfg = {\n        position: 'bottom',\n        offset: 5,\n        style: {\n          rotate: Math.PI / 2,\n          textAlign: 'start',\n        },\n      };\n    });\n    edges.forEach((edge) => {\n      edge.type = 'arc';\n      const source = nodeMap.get(edge.source);\n      const target = nodeMap.get(edge.target);\n      const endsSepStep = (target.x - source.x) / xSep;\n      const sign = endsSepStep < 0 ? -1 : 1;\n      const curveOffset = sign * 10 * Math.ceil(Math.abs(endsSepStep));\n      edge.curveOffset = curveOffset;\n      edge.color = source.style.fill;\n      edge.sourceName = source.name;\n      edge.targetName = target.name;\n    });\n\n    // map the value to node size\n    let maxValue = -9999,\n      minValue = 9999;\n    nodes.forEach(function (n) {\n      if (maxValue < n.value) maxValue = n.value;\n      if (minValue > n.value) minValue = n.value;\n    });\n    const sizeRange = [3, 25];\n    const sizeDataRange = [minValue, maxValue];\n    scaleNodeProp(nodes, 'size', 'value', sizeDataRange, sizeRange);\n\n    graph.data(data);\n    graph.render();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n\n    //   const tooltip = document.getElementsByClassName('g6-tooltip')[0];\n    //   if (tooltip) {\n    //     tooltip.style.border = '1px solid #e2e2e2';\n    //     tooltip.style.borderRadius = '4px';\n    //     tooltip.style.fontSize = '12px';\n    //     tooltip.style.color = '#545454';\n    //     tooltip.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';\n    //     tooltip.style.padding = '10px 8px';\n    //     tooltip.style.boxShadow = 'rgb(174, 174, 174) 0px 0px 10px';\n    //   }\n  });\n\nfunction scaleNodeProp(nodes, propName, refPropName, dataRange, outRange) {\n  const outLength = outRange[1] - outRange[0];\n  const dataLength = dataRange[1] - dataRange[0];\n  nodes.forEach(function (n) {\n    n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];\n  });\n}\n",title:{zh:"基本弧线图",en:"Basic Arc Diagram"},filename:"basicArcDiagram.js",isNew:!1},{id:"circularArcDiagram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*o-tESYnAAJYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst colors = [\n  'rgb(91, 143, 249)',\n  'rgb(90, 216, 166)',\n  'rgb(93, 112, 146)',\n  'rgb(246, 189, 22)',\n  'rgb(232, 104, 74)',\n  'rgb(109, 200, 236)',\n  'rgb(146, 112, 202)',\n  'rgb(255, 157, 77)',\n  'rgb(38, 154, 153)',\n  'rgb(227, 137, 163)',\n];\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: [\n      {\n        type: 'edge-tooltip',\n        formatText: function formatText(model) {\n          const text = 'source: ' + model.sourceName + '<br/> target: ' + model.targetName;\n          return text;\n        },\n      },\n    ],\n  },\n  defaultNode: {\n    style: {\n      opacity: 0.8,\n      lineWidth: 1,\n      stroke: '#999',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      opacity: 0.6,\n      lineAppendWidth: 3,\n    },\n  },\n});\ngraph.on('edge:mouseenter', function (e) {\n  const edge = e.item;\n  graph.setItemState(edge, 'hover', true);\n});\ngraph.on('edge:mouseleave', function (e) {\n  const edge = e.item;\n  graph.setItemState(edge, 'hover', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/70cde3be-22e8-4291-98f1-4d5a5b75b62f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const origin = [width / 2, height / 2];\n    const radius = width < height ? width / 3 : height / 3;\n    const edges = data.edges;\n    const nodes = data.nodes;\n    const nodeMap = new Map();\n    const clusterMap = new Map();\n    let clusterId = 0;\n    const n = nodes.length;\n    const angleSep = (Math.PI * 2) / n;\n    nodes.forEach(function (node, i) {\n      const angle = i * angleSep;\n      node.x = radius * Math.cos(angle) + origin[0];\n      node.y = radius * Math.sin(angle) + origin[1];\n      node.angle = angle;\n      nodeMap.set(node.id, node);\n      // cluster\n      if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n        clusterMap.set(node.cluster, clusterId);\n        clusterId++;\n      }\n      const id = clusterMap.get(node.cluster);\n      if (node.style) {\n        node.style.fill = colors[id % colors.length];\n      } else {\n        node.style = {\n          fill: colors[id % colors.length],\n        };\n      }\n      // label\n      node.label = node.name;\n      node.labelCfg = {\n        position: 'center',\n        style: {\n          rotate: angle,\n          rotateCenter: 'lefttop',\n          textAlign: 'start',\n        },\n      };\n    });\n    edges.forEach((edge) => {\n      edge.type = 'quadratic';\n      const source = nodeMap.get(edge.source);\n      const target = nodeMap.get(edge.target);\n      edge.controlPoints = [\n        {\n          x: origin[0],\n          y: origin[1],\n        },\n      ];\n      edge.color = source.style.fill;\n      edge.sourceName = source.name;\n      edge.targetName = target.name;\n    });\n\n    // map the value to node size\n    let maxValue = -9999,\n      minValue = 9999;\n    nodes.forEach(function (n) {\n      if (maxValue < n.value) maxValue = n.value;\n      if (minValue > n.value) minValue = n.value;\n    });\n    const sizeRange = [3, 30];\n    const sizeDataRange = [minValue, maxValue];\n    scaleNodeProp(nodes, 'size', 'value', sizeDataRange, sizeRange);\n\n    graph.data(data);\n    graph.render();\n  });\n\nfunction scaleNodeProp(nodes, propName, refPropName, dataRange, outRange) {\n  const outLength = outRange[1] - outRange[0];\n  const dataLength = dataRange[1] - dataRange[0];\n  nodes.forEach(function (n) {\n    n[propName] = ((n[refPropName] - dataRange[0]) * outLength) / dataLength + outRange[0];\n  });\n}\n",title:{zh:"环形弧线图",en:"Circular Arc Diagram"},filename:"circularArcDiagram.js",isNew:!1}],icon:"",id:"arcDiagram",title:{en:"Arc Diagram",zh:"Arc Diagram 弧线图"},childrenKey:"demos",order:8},{demos:[{id:"comboCombined",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*odTCQLZkqxIAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n// define the CSS with the id of your menu\ninsertCss(`\n  .g6-component-contextmenu {\n    position: absolute;\n    list-style-type: none;\n    padding: 10px 8px;\n    left: -150px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n  }\n  .g6-component-contextmenu span {\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-contextmenu span:hover {\n    color: #5B8FF9;\n  }\n`);\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = `Double click to collapse/expand a combo; Context menu with right click to uncombo/re-combo. 双击 Combo 进行展开/收起；右键菜单选择解散/重组`;\ndocument.getElementById('container').appendChild(tipDiv);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      comboId: 'a',\n    },\n    {\n      id: '1',\n      comboId: 'a',\n    },\n    {\n      id: '2',\n      comboId: 'a',\n    },\n    {\n      id: '3',\n      comboId: 'a',\n    },\n    {\n      id: '4',\n      comboId: 'a',\n    },\n    {\n      id: '5',\n      comboId: 'a',\n    },\n    {\n      id: '6',\n      comboId: 'a',\n    },\n    {\n      id: '7',\n      comboId: 'a',\n    },\n    {\n      id: '8',\n      comboId: 'a',\n    },\n    {\n      id: '9',\n      comboId: 'a',\n    },\n    {\n      id: '10',\n      comboId: 'a',\n    },\n    {\n      id: '11',\n      comboId: 'a',\n    },\n    {\n      id: '12',\n      comboId: 'a',\n    },\n    {\n      id: '13',\n      comboId: 'a',\n    },\n    {\n      id: '14',\n      comboId: 'a',\n    },\n    {\n      id: '15',\n      comboId: 'a',\n    },\n    {\n      id: '16',\n      comboId: 'b',\n    },\n    {\n      id: '17',\n      comboId: 'b',\n    },\n    {\n      id: '18',\n      comboId: 'b',\n    },\n    {\n      id: '19',\n      comboId: 'b',\n    },\n    {\n      id: '20',\n    },\n    {\n      id: '21',\n    },\n    {\n      id: '22',\n    },\n    {\n      id: '23',\n      comboId: 'c',\n    },\n    {\n      id: '24',\n      comboId: 'a',\n    },\n    {\n      id: '25',\n    },\n    {\n      id: '26',\n    },\n    {\n      id: '27',\n      comboId: 'c',\n    },\n    {\n      id: '28',\n      comboId: 'c',\n    },\n    {\n      id: '29',\n      comboId: 'c',\n    },\n    {\n      id: '30',\n      comboId: 'c',\n    },\n    {\n      id: '31',\n      comboId: 'c',\n    },\n    {\n      id: '32',\n      comboId: 'd',\n    },\n    {\n      id: '33',\n      comboId: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: 'a',\n      target: 'b',\n      label: 'Combo A - Combo B',\n      size: 3,\n      labelCfg: {\n        autoRotate: true,\n        style: {\n          stroke: '#fff',\n          lineWidth: 5,\n          fontSize: 20,\n        },\n      },\n      style: {\n        stroke: 'red',\n      },\n    },\n    {\n      source: 'a',\n      target: '33',\n      label: 'Combo-Node',\n      size: 3,\n      labelCfg: {\n        autoRotate: true,\n        style: {\n          stroke: '#fff',\n          lineWidth: 5,\n          fontSize: 20,\n        },\n      },\n      style: {\n        stroke: 'blue',\n      },\n    },\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n  combos: [\n    {\n      id: 'a',\n      label: 'Combo A',\n    },\n    {\n      id: 'b',\n      label: 'Combo B',\n    },\n    {\n      id: 'c',\n      label: 'Combo C',\n    },\n    {\n      id: 'd',\n      label: 'Combo D',\n      parentId: 'b',\n    },\n  ],\n};\n\n// cache the initial combo children infomation\nconst comboChildrenCache = {};\n// cache the initial parent infomation\nconst itemComboMap = {};\n// cache the initial node and combo info\nconst itemMap = {};\n// cache the combo related edges\nconst comboEdges = {};\n(data.nodes.concat(data.combos)).forEach(item => {\n  const { id, comboId, parentId } = item;\n  const parentComboId = comboId || parentId;\n  if (parentComboId) {\n    if (!comboChildrenCache[parentComboId]) comboChildrenCache[parentComboId] = [];\n    comboChildrenCache[parentComboId].push(id);\n    itemComboMap[id] = parentComboId;\n  }\n  itemMap[id] = { ...item };\n});\nconst comboIds = data.combos.map(combo => combo.id);\ndata.edges.forEach(edge => {\n  const { source, target } = edge;\n  [source, target].forEach(endId => {\n    if (comboIds.includes(endId)) {\n      if (!comboEdges[endId]) comboEdges[endId] = [];\n      comboEdges[endId].push(edge);\n    }\n  })\n});\n\n// colorize the nodes and combos\nconst subjectColors = [\n  '#5F95FF', // blue\n  '#61DDAA',\n  '#65789B',\n  '#F6BD16',\n  '#7262FD',\n  '#78D3F8',\n  '#9661BC',\n  '#F6903D',\n  '#008685',\n  '#F08BB4',\n];\nconst backColor = '#fff';\nconst theme = 'default';\nconst disableColor = '#777';\nconst colorSets = G6.Util.getColorSetsBySubjectColors(\n  subjectColors,\n  backColor,\n  theme,\n  disableColor,\n);\ndata.combos.forEach((combo, i) => {\n  const color = colorSets[i % colorSets.length];\n  combo.style = {\n    stroke: color.mainStroke,\n    fill: color.mainFill,\n    opacity: 0.8\n  }\n  itemMap[combo.id].style = { ...combo.style }\n})\ndata.nodes.forEach(node => {\n  const comboId = itemComboMap[node.id];\n  const parentCombo = itemMap[comboId];\n  if (parentCombo) {\n    node.style = {\n      stroke: parentCombo.style.stroke,\n      fill: parentCombo.style.fill\n    }\n  }\n})\n\nconst contextMenu = new G6.Menu({\n  itemTypes: ['combo', 'node'],\n  shouldBegin: (evt) => {\n    // avoid showing up context menu in some situations\n    const type = evt.item.getType();\n    const { id, comboId, collapsed } = evt.item.getModel();\n    if (collapsed) return false;\n\n    const hasOriComboId = Object.values(comboChildrenCache).find(childrenIds => childrenIds.includes(id));\n    if (type === 'node' && (comboId || !hasOriComboId)) return false;\n    return true;\n  },\n  getContent: (evt) => {\n    const type = evt.item.getType();\n    const { id, comboId, parentId, collapsed } = evt.item.getModel();\n    const hasOriComboId = Object.values(comboChildrenCache).find(childrenIds => childrenIds.includes(id));\n\n    if (type === 'combo') {\n      // no context menu for collapsed combo\n      if (collapsed) return ''\n      // does not have parent currently but had parent at initial\n      if (hasOriComboId && !parentId) return `<span id=\"uncombo\">uncombo</span><br/><span id=\"re-combo\">re-combo</span>`;\n      // did not have parent at initail\n      return `<span id=\"uncombo\">uncombo</span>`;\n    }\n\n    // has combo currently\n    if (comboId) return '';\n    // does not have combo but had combo at initial\n    if (hasOriComboId) return `<span id=\"recombo\">re-combo</span>`;\n    return '';\n  },\n  handleMenuClick: (target, item) => {\n    if (target.innerHTML === 'uncombo') {\n      graph.uncombo(item);\n      graph.layout();\n    } else {\n      const id = item.getID();\n      const comboId = itemComboMap[id];\n      if (comboId) {\n        const childrenIds = comboChildrenCache[comboId].filter(cid => !!graph.findById(cid));\n        graph.createCombo({\n          ...itemMap[comboId]\n        }, childrenIds);\n        // add the related edges back\n        comboEdges[comboId]?.forEach(edge => {\n          const { source, target } = edge;\n          const otherEnd = source === comboId ? target : source;\n          // add it back only when the other end of the edge exist currently\n          if (graph.findById(otherEnd)) {\n            graph.addItem('edge', edge);\n          }\n        });\n        graph.layout();\n      }\n    }\n  },\n})\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 160;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  fitViewPadding: 50,\n  animate: true,\n  minZoom: 0.00000001,\n  plugins: [contextMenu],\n  layout: {\n    type: 'comboCombined',\n    spacing: 5,\n    outerLayout: new G6.Layout['forceAtlas2']({\n      kr: 10\n    })\n  },\n  defaultNode: {\n    size: 15,\n    style: {\n      lineWidth: 2,\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 2,\n    color: '#e2e2e2',\n  },\n  defaultCombo: {\n    collapsedSubstituteIcon: {\n      show: true,\n      img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IEQFS5VtXX8AAAAAAAAAAABkARQnAQ',\n      width: 68,\n      height: 68\n    }\n  },\n  modes: {\n    default: ['drag-combo', 'drag-node', 'drag-canvas', 'zoom-canvas', 'collapse-expand-combo'],\n  },\n});\ngraph.data(data);\ngraph.render();\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"ComboCombined 组合布局",en:"Combo Combined Layout"},filename:"comboCombined.js",isNew:!1},{id:"basicComboForce",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*GK34T7F1_CYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      comboId: 'a',\n    },\n    {\n      id: '1',\n      comboId: 'a',\n    },\n    {\n      id: '2',\n      comboId: 'a',\n    },\n    {\n      id: '3',\n      comboId: 'a',\n    },\n    {\n      id: '4',\n      comboId: 'a',\n    },\n    {\n      id: '5',\n      comboId: 'a',\n    },\n    {\n      id: '6',\n      comboId: 'a',\n    },\n    {\n      id: '7',\n      comboId: 'a',\n    },\n    {\n      id: '8',\n      comboId: 'a',\n    },\n    {\n      id: '9',\n      comboId: 'a',\n    },\n    {\n      id: '10',\n      comboId: 'a',\n    },\n    {\n      id: '11',\n      comboId: 'a',\n    },\n    {\n      id: '12',\n      comboId: 'a',\n    },\n    {\n      id: '13',\n      comboId: 'a',\n    },\n    {\n      id: '14',\n      comboId: 'a',\n    },\n    {\n      id: '15',\n      comboId: 'a',\n    },\n    {\n      id: '16',\n      comboId: 'b',\n    },\n    {\n      id: '17',\n      comboId: 'b',\n    },\n    {\n      id: '18',\n      comboId: 'b',\n    },\n    {\n      id: '19',\n      comboId: 'b',\n    },\n    {\n      id: '20',\n    },\n    {\n      id: '21',\n    },\n    {\n      id: '22',\n    },\n    {\n      id: '23',\n      comboId: 'c',\n    },\n    {\n      id: '24',\n      comboId: 'a',\n    },\n    {\n      id: '25',\n    },\n    {\n      id: '26',\n    },\n    {\n      id: '27',\n      comboId: 'c',\n    },\n    {\n      id: '28',\n      comboId: 'c',\n    },\n    {\n      id: '29',\n      comboId: 'c',\n    },\n    {\n      id: '30',\n      comboId: 'c',\n    },\n    {\n      id: '31',\n      comboId: 'c',\n    },\n    {\n      id: '32',\n      comboId: 'd',\n    },\n    {\n      id: '33',\n      comboId: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: 'a',\n      target: 'b',\n      label: 'Combo A - Combo B',\n      size: 3,\n      labelCfg: {\n        autoRotate: true,\n        style: {\n          stroke: '#fff',\n          lineWidth: 5,\n          fontSize: 20,\n        },\n      },\n      style: {\n        stroke: 'red',\n      },\n    },\n    {\n      source: 'a',\n      target: '33',\n      label: 'Combo-Node',\n      size: 3,\n      labelCfg: {\n        autoRotate: true,\n        style: {\n          stroke: '#fff',\n          lineWidth: 5,\n          fontSize: 20,\n        },\n      },\n      style: {\n        stroke: 'blue',\n      },\n    },\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n  combos: [\n    {\n      id: 'a',\n      label: 'Combo A',\n    },\n    {\n      id: 'b',\n      label: 'Combo B',\n    },\n    {\n      id: 'c',\n      label: 'Combo D',\n    },\n    {\n      id: 'd',\n      label: 'Combo D',\n      parentId: 'b',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  fitViewPadding: 50,\n  minZoom: 0.00000001,\n  layout: {\n    type: 'comboForce',\n    nodeSpacing: (d) => 8,\n  },\n  defaultNode: {\n    size: 15,\n    color: '#5B8FF9',\n    style: {\n      lineWidth: 2,\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 2,\n    color: '#e2e2e2',\n  },\n  modes: {\n    default: ['drag-combo', 'drag-node', 'drag-canvas', 'zoom-canvas'],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"基本 Combo 力导向布局",en:"Basic Combo Force Layout"},filename:"basicComboForce.js",isNew:!1}],icon:"",id:"comboLayout",title:{en:"Combo Related Layout",zh:"Combo 相关布局"},childrenKey:"demos",order:10},{demos:[{id:"basicFruchterman",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1KY7SLEXxqMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  animate: true,\n  defaultNode: {\n    size: 30,\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  layout: {\n    type: 'fruchterman',\n    gpuEnabled: true,\n    maxIteration: 300,\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"GPU Fruchterman 小数据",en:"GPU Fruchterman Small Data"},filename:"basicFruchterman.js",isNew:!1},{id:"fruchtermanComplexData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0sl9RZ7Cp28AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  animate: true,\n  defaultNode: {\n    size: 10,\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  layout: {\n    type: 'fruchterman',\n    gpuEnabled: true,\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"GPU Fruchterman 复杂数据",en:"GPU Fruchterman with Complex Data"},filename:"fruchtermanComplexData.js",isNew:!1},{id:"frComplexDataWorker",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0sl9RZ7Cp28AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Doing layout... web-worker is enabled in this demo, so the layout will not block the page.';\ncontainer.appendChild(descriptionDiv);\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  animate: true,\n  defaultNode: {\n    size: 10,\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  layout: {\n    type: 'fruchterman',\n    gpuEnabled: true,\n    workerEnabled: true,\n    maxIteration: 2000,\n  },\n});\n\ngraph.on('afterlayout', () => {\n  descriptionDiv.innerHTML = 'Done!';\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"GPU Fruchterman 复杂数据 + WebWorker",en:"Fruchterman Layout with GPU and WebWorker"},filename:"frComplexDataWorker.js",isNew:!1},{id:"fruchtermanClustering",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WO1OTbNE_ugAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nconst nodes = data.nodes;\nconst clusterMap = new Map();\nlet clusterId = 0;\nnodes.forEach(function (node) {\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) {\n    node.style = {};\n  }\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n});\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n    style: {\n      lineWidth: 2,\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  layout: {\n    type: 'fruchterman',\n    gpuEnabled: true,\n    clustering: true,\n    maxIteration: 300,\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"GPU Fruchterman 聚类布局",en:"GPU Fruchterman with Clustering"},filename:"fruchtermanClustering.js",isNew:!1},{id:"fruchtermanConfigurationTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W9MoQoKaQbYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nconst nodes = data.nodes;\nconst clusterMap = new Map();\nlet clusterId = 0;\nnodes.forEach(function (node) {\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) {\n    node.style = {};\n  }\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n});\nconst graphDiv = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Fruchterman layout, gravity = 1';\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'fruchterman',\n    gravity: 1,\n    speed: 5,\n    enableGPU: true,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n    style: {\n      lineWidth: 2,\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nwindow.onresize = () => {\n  if (!graph || graph.get('destroyed')) return;\n  if (!container || !container.scrollWidth || !container.scrollHeight) return;\n  graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n};\n\nlayoutConfigTranslation();\n\nfunction layoutConfigTranslation() {\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 5';\n    graph.updateLayout({\n      gravity: 5,\n    });\n  }, 1000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 10, layout by cluster';\n    graph.updateLayout({\n      gravity: 10,\n      clustering: true,\n    });\n  }, 2500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 20, layout by cluster';\n    graph.updateLayout({\n      gravity: 20,\n    });\n  }, 4000);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 50, layout by cluster';\n    graph.updateLayout({\n      gravity: 50,\n    });\n  }, 5500);\n\n  setTimeout(function () {\n    descriptionDiv.innerHTML = 'Fructherman layout, gravity = 80, layout by cluster';\n    graph.updateLayout({\n      gravity: 80,\n    });\n  }, 7000);\n}\n",title:{zh:"GPU Fruchterman 布局参数动态变化",en:"GPU Update the Configurations for Fruchterman"},filename:"fruchtermanConfigurationTranslate.js",isNew:!1},{id:"basicGForce",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W9MoQoKaQbYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { x: 72.4593956315343, y: 62.500580986434755, id: '0', label: '0', cluster: 'a' },\n    { x: 175.1600873958553, y: 86.05370537028077, id: '1', label: '1', cluster: 'a' },\n    { x: 344.9769062055303, y: 346.0034481446168, id: '2', label: '2', cluster: 'a' },\n    { x: 81.6566555038367, y: 449.54521190792946, id: '3', label: '3', cluster: 'a' },\n    { x: 216.88282150662286, y: 154.6366915677718, id: '4', label: '4', cluster: 'a' },\n    { x: 607.4192016090308, y: 29.68981871724924, id: '5', label: '5', cluster: 'a' },\n    { x: 608.1952294163268, y: 346.0504788285849, id: '6', label: '6', cluster: 'a' },\n    { x: 452.20735149164864, y: 44.41509530420839, id: '7', label: '7', cluster: 'a' },\n    { x: 385.8029314535722, y: 345.77605366469146, id: '8', label: '8', cluster: 'a' },\n    { x: 221.9577525643851, y: 314.49923076828685, id: '9', label: '9', cluster: 'a' },\n    { x: 476.3993667720199, y: 324.90015915221954, id: '10', label: '10', cluster: 'a' },\n    { x: 285.856260625802, y: 478.7175936401358, id: '11', label: '11', cluster: 'a' },\n    { x: 454.0091937006662, y: 244.40185112543793, id: '12', label: '12', cluster: 'a' },\n    { x: 85.85356888467777, y: 202.4891680926948, id: '13', label: '13', cluster: 'b' },\n    { x: 178.43553862412497, y: 248.0194739727555, id: '14', label: '14', cluster: 'b' },\n    { x: 83.56438018013918, y: 354.8762429461217, id: '15', label: '15', cluster: 'b' },\n    { x: 282.627196085794, y: 455.5720951259284, id: '16', label: '16', cluster: 'b' },\n    { x: 242.3547537166361, y: 98.66129908712844, id: '17', label: '17', cluster: 'b' },\n    { x: 602.1167288184395, y: 269.168861245467, id: '18', label: '18', cluster: 'c' },\n    { x: 483.79272921167114, y: 450.6376205219211, id: '19', label: '19', cluster: 'c' },\n    { x: 297.187609794337, y: 457.588179255913, id: '20', label: '20', cluster: 'c' },\n    { x: 460.9705509891003, y: 40.428685184792954, id: '21', label: '21', cluster: 'c' },\n    { x: 160.6332922414413, y: 120.21023271187795, id: '22', label: '22', cluster: 'c' },\n    { x: 512.008587934917, y: 418.6500912111135, id: '23', label: '23', cluster: 'c' },\n    { x: 520.0165179629071, y: 27.93522012918939, id: '24', label: '24', cluster: 'c' },\n    { x: 86.3930775510143, y: 151.71498826445242, id: '25', label: '25', cluster: 'c' },\n    { x: 69.5835581684608, y: 51.79679194816802, id: '26', label: '26', cluster: 'c' },\n    { x: 290.3934620883672, y: 33.385661601435174, id: '27', label: '27', cluster: 'c' },\n    { x: 162.64554141115855, y: 210.26903302812224, id: '28', label: '28', cluster: 'c' },\n    { x: 360.8317809241701, y: 91.48175269950366, id: '29', label: '29', cluster: 'c' },\n    { x: 47.240097508368194, y: 145.50344892493422, id: '30', label: '30', cluster: 'c' },\n    { x: 327.2099811985623, y: 92.12781674932864, id: '31', label: '31', cluster: 'd' },\n    { x: 241.12704982623336, y: 337.86999370236475, id: '32', label: '32', cluster: 'd' },\n    { x: 205.79508596449074, y: 102.31474420745676, id: '33', label: '33', cluster: 'd' },\n  ],\n  edges: [\n    { source: '0', target: '1' },\n    { source: '0', target: '2' },\n    { source: '0', target: '3' },\n    { source: '0', target: '4' },\n    { source: '0', target: '5' },\n    { source: '0', target: '7' },\n    { source: '0', target: '8' },\n    { source: '0', target: '9' },\n    { source: '0', target: '10' },\n    { source: '0', target: '11' },\n    { source: '0', target: '13' },\n    { source: '0', target: '14' },\n    { source: '0', target: '15' },\n    { source: '0', target: '16' },\n    { source: '2', target: '3' },\n    { source: '4', target: '5' },\n    { source: '4', target: '6' },\n    { source: '5', target: '6' },\n    { source: '7', target: '13' },\n    { source: '8', target: '14' },\n    { source: '9', target: '10' },\n    { source: '10', target: '22' },\n    { source: '10', target: '14' },\n    { source: '10', target: '12' },\n    { source: '10', target: '24' },\n    { source: '10', target: '21' },\n    { source: '10', target: '20' },\n    { source: '11', target: '24' },\n    { source: '11', target: '22' },\n    { source: '11', target: '14' },\n    { source: '12', target: '13' },\n    { source: '16', target: '17' },\n    { source: '16', target: '18' },\n    { source: '16', target: '21' },\n    { source: '16', target: '22' },\n    { source: '17', target: '18' },\n    { source: '17', target: '20' },\n    { source: '18', target: '19' },\n    { source: '19', target: '20' },\n    { source: '19', target: '33' },\n    { source: '19', target: '22' },\n    { source: '19', target: '23' },\n    { source: '20', target: '21' },\n    { source: '21', target: '22' },\n    { source: '22', target: '24' },\n    { source: '22', target: '25' },\n    { source: '22', target: '26' },\n    { source: '22', target: '23' },\n    { source: '22', target: '28' },\n    { source: '22', target: '30' },\n    { source: '22', target: '31' },\n    { source: '22', target: '32' },\n    { source: '22', target: '33' },\n    { source: '23', target: '28' },\n    { source: '23', target: '27' },\n    { source: '23', target: '29' },\n    { source: '23', target: '30' },\n    { source: '23', target: '31' },\n    { source: '23', target: '33' },\n    { source: '32', target: '33' },\n  ],\n};\n\nconst data2 = {\n  nodes: [\n    { x: 72.4593956315343, y: 62.500580986434755, id: '0', label: '0', cluster: 'a' },\n    { x: 175.1600873958553, y: 86.05370537028077, id: '1', label: '1', cluster: 'a' },\n    { x: 344.9769062055303, y: 346.0034481446168, id: '2', label: '2', cluster: 'a' },\n    { x: 81.6566555038367, y: 449.54521190792946, id: '3', label: '3', cluster: 'a' },\n    { x: 216.88282150662286, y: 154.6366915677718, id: '4', label: '4', cluster: 'a' },\n    { x: 607.4192016090308, y: 29.68981871724924, id: '5', label: '5', cluster: 'a' },\n  ],\n  edges: [\n    { source: '0', target: '1' },\n    { source: '0', target: '2' },\n    { source: '0', target: '3' },\n    { source: '4', target: '3' },\n    { source: '4', target: '5' },\n  ],\n};\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],\n  },\n  animate: true,\n  defaultNode: {\n    size: 30,\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  layout: {\n    type: 'gForce',\n    gpuEnabled: true,\n    maxIteration: 500,\n    linkDistance: (e) => {\n      if (e.source === '0') return 100;\n      return 1;\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('canvas:click', (e) => {\n  setTimeout(() => {\n    // graph.updateLayout({\n    //   gravity: 100,\n    //   maxIteration: 1\n    // });\n    graph.changeData(data2);\n  }, 1000);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"GPU gForce 小数据",en:"GPU gForce"},filename:"basicGForce.js",isNew:!1},{id:"gForceComplexData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*2lg0SYvEiusAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  animate: true,\n  defaultNode: {\n    size: 10,\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  layout: {\n    type: 'gForce',\n    gpuEnabled: true,\n    maxIteration: 1000,\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/7bacd7d1-4119-4ac1-8be3-4c4b9bcbc25f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"GPU gForce 复杂数据",en:"GPU gForce with Complex Data"},filename:"gForceComplexData.js",isNew:!1},{id:"gForceCPU",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*lX-qSqDECrIAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'des1' },\n    { id: 'des2' },\n    { id: 'des3' },\n    { id: 'des4' },\n    { x: 72.4593956315343, y: 62.500580986434755, id: '0', label: '0', cluster: 'a' },\n    { x: 175.1600873958553, y: 86.05370537028077, id: '1', label: '1', cluster: 'a' },\n    { x: 344.9769062055303, y: 346.0034481446168, id: '2', label: '2', cluster: 'a' },\n    { x: 81.6566555038367, y: 449.54521190792946, id: '3', label: '3', cluster: 'a' },\n    { x: 216.88282150662286, y: 154.6366915677718, id: '4', label: '4', cluster: 'a' },\n    { x: 607.4192016090308, y: 29.68981871724924, id: '5', label: '5', cluster: 'a' },\n    { x: 608.1952294163268, y: 346.0504788285849, id: '6', label: '6', cluster: 'a' },\n    { x: 452.20735149164864, y: 44.41509530420839, id: '7', label: '7', cluster: 'a' },\n    { x: 385.8029314535722, y: 345.77605366469146, id: '8', label: '8', cluster: 'a' },\n    { x: 221.9577525643851, y: 314.49923076828685, id: '9', label: '9', cluster: 'a' },\n    { x: 476.3993667720199, y: 324.90015915221954, id: '10', label: '10', cluster: 'a' },\n    { x: 285.856260625802, y: 478.7175936401358, id: '11', label: '11', cluster: 'a' },\n    { x: 454.0091937006662, y: 244.40185112543793, id: '12', label: '12', cluster: 'a' },\n    { x: 85.85356888467777, y: 202.4891680926948, id: '13', label: '13', cluster: 'b' },\n    { x: 178.43553862412497, y: 248.0194739727555, id: '14', label: '14', cluster: 'b' },\n    { x: 83.56438018013918, y: 354.8762429461217, id: '15', label: '15', cluster: 'b' },\n    { x: 282.627196085794, y: 455.5720951259284, id: '16', label: '16', cluster: 'b' },\n    { x: 242.3547537166361, y: 98.66129908712844, id: '17', label: '17', cluster: 'b' },\n    { x: 602.1167288184395, y: 269.168861245467, id: '18', label: '18', cluster: 'c' },\n    { x: 483.79272921167114, y: 450.6376205219211, id: '19', label: '19', cluster: 'c' },\n    { x: 297.187609794337, y: 457.588179255913, id: '20', label: '20', cluster: 'c' },\n    { x: 460.9705509891003, y: 40.428685184792954, id: '21', label: '21', cluster: 'c' },\n    { x: 160.6332922414413, y: 120.21023271187795, id: '22', label: '22', cluster: 'c' },\n    { x: 512.008587934917, y: 418.6500912111135, id: '23', label: '23', cluster: 'c' },\n    { x: 520.0165179629071, y: 27.93522012918939, id: '24', label: '24', cluster: 'c' },\n    { x: 86.3930775510143, y: 151.71498826445242, id: '25', label: '25', cluster: 'c' },\n    { x: 69.5835581684608, y: 51.79679194816802, id: '26', label: '26', cluster: 'c' },\n    { x: 290.3934620883672, y: 33.385661601435174, id: '27', label: '27', cluster: 'c' },\n    { x: 162.64554141115855, y: 210.26903302812224, id: '28', label: '28', cluster: 'c' },\n    { x: 360.8317809241701, y: 91.48175269950366, id: '29', label: '29', cluster: 'c' },\n    { x: 47.240097508368194, y: 145.50344892493422, id: '30', label: '30', cluster: 'c' },\n    { x: 327.2099811985623, y: 92.12781674932864, id: '31', label: '31', cluster: 'd' },\n    { x: 241.12704982623336, y: 337.86999370236475, id: '32', label: '32', cluster: 'd' },\n    { x: 205.79508596449074, y: 102.31474420745676, id: '33', label: '33', cluster: 'd' },\n  ],\n  edges: [\n    { source: '0', target: '1' },\n    { source: '0', target: '2' },\n    { source: '0', target: '3' },\n    { source: '0', target: '4' },\n    { source: '0', target: '5' },\n    { source: '0', target: '7' },\n    { source: '0', target: '8' },\n    { source: '0', target: '9' },\n    { source: '0', target: '10' },\n    { source: '0', target: '11' },\n    { source: '0', target: '13' },\n    { source: '0', target: '14' },\n    { source: '0', target: '15' },\n    { source: '0', target: '16' },\n    { source: '2', target: '3' },\n    { source: '4', target: '5' },\n    { source: '4', target: '6' },\n    { source: '5', target: '6' },\n    { source: '7', target: '13' },\n    { source: '8', target: '14' },\n    { source: '9', target: '10' },\n    { source: '10', target: '22' },\n    { source: '10', target: '14' },\n    { source: '10', target: '12' },\n    { source: '10', target: '24' },\n    { source: '10', target: '21' },\n    { source: '10', target: '20' },\n    { source: '11', target: '24' },\n    { source: '11', target: '22' },\n    { source: '11', target: '14' },\n    { source: '12', target: '13' },\n    { source: '16', target: '17' },\n    { source: '16', target: '18' },\n    { source: '16', target: '21' },\n    { source: '16', target: '22' },\n    { source: '17', target: '18' },\n    { source: '17', target: '20' },\n    { source: '18', target: '19' },\n    { source: '19', target: '20' },\n    { source: '19', target: '33' },\n    { source: '19', target: '22' },\n    { source: '19', target: '23' },\n    { source: '20', target: '21' },\n    { source: '21', target: '22' },\n    { source: '22', target: '24' },\n    { source: '22', target: '25' },\n    { source: '22', target: '26' },\n    { source: '22', target: '23' },\n    { source: '22', target: '28' },\n    { source: '22', target: '30' },\n    { source: '22', target: '31' },\n    { source: '22', target: '32' },\n    { source: '22', target: '33' },\n    { source: '23', target: '28' },\n    { source: '23', target: '27' },\n    { source: '23', target: '29' },\n    { source: '23', target: '30' },\n    { source: '23', target: '31' },\n    { source: '23', target: '33' },\n    { source: '32', target: '33' },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],\n  },\n  animate: true,\n  defaultNode: {\n    size: 30,\n    style: {\n      lineWidth: 2,\n      stroke: '#5B8FF9',\n      fill: '#C6E5FF',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  layout: {\n    type: 'gForce',\n    // gravity: 500,\n    //preventOverlap: true,\n    maxIteration: 500,\n    gatherDiscrete: true,\n    //nodeSize: 100,\n    //nodeSpacing: 100,\n    //gatherDiscreteCenter: [500, 100],\n    descreteGravity: 200,\n    linkDistanceFunc: (e) => {\n      if (e.source === '0') return 10;\n      return 1;\n    },\n    getMass: (d) => {\n      if (d.id === '0') return 100;\n      return 1;\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"CPU gForce 小数据",en:"CPU gForce Small Data"},filename:"gForceCPU.js",isNew:!1}],icon:"",id:"gpuLayout",title:{en:"GPU Layout",zh:"GPU 图布局"},childrenKey:"demos",order:12},{demos:[{id:"layoutTranslate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eZRNQ4tpkecAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = 'Random Layout';\nconst container = document.getElementById('container');\ncontainer.appendChild(tipDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'random',\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n  animate: true,\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n    setTimeout(() => {\n      tipDiv.innerHTML = 'Circular Layout';\n      graph.updateLayout({\n        type: 'circular',\n        radius: 200,\n      });\n    }, 3000);\n    setTimeout(() => {\n      tipDiv.innerHTML = 'Grid Layout';\n      graph.updateLayout({\n        type: 'grid',\n      });\n    }, 6000);\n    setTimeout(() => {\n      tipDiv.innerHTML = 'Force Layout';\n      graph.updateLayout({\n        type: 'force',\n        preventOverlap: true,\n        nodeSize: 20,\n      });\n    }, 9000);\n    setTimeout(() => {\n      tipDiv.innerHTML = 'Radial Layout';\n      graph.updateLayout({\n        type: 'radial',\n        preventOverlap: true,\n        nodeSize: 15,\n      });\n    }, 12000);\n    setTimeout(() => {\n      tipDiv.innerHTML = 'Concentric Layout';\n      graph.updateLayout({\n        type: 'concentric',\n        minNodeSpacing: 30,\n      });\n    }, 15000);\n    setTimeout(() => {\n      tipDiv.innerHTML = 'MDS Layout';\n      graph.updateLayout({\n        type: 'mds',\n        linkDistance: 100,\n      });\n    }, 18000);\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:{zh:"布局切换",en:"Layout Translate"},filename:"layoutTranslate.js",isNew:!1},{id:"subgraphLayout",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*dsOISrH6tREAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst nodes = data.nodes;\n\nnodes.forEach(function (node, i) {\n  if (i <= 16 && i !== 12) {\n    if (!node.style) {\n      node.style = {\n        fill: '#F6C3B7',\n        stroke: '#E8684A',\n      };\n    } else {\n      node.style.fill = 'lightsteelblue';\n    }\n  }\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  fitViewPadding: 40,\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: 20,\n    style: {\n      fill: '#C6E5FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n\nsetTimeout(function () {\n  const nodes = data.nodes;\n  const edges = data.edges;\n  const newNodes = [];\n  const newEdges = [];\n  const newNodeMap = new Map();\n  // fix the nodes[0]\n  nodes[0].fx = nodes[0].x;\n  nodes[0].fy = nodes[0].y;\n  // add the nodes which should be re-layout\n  nodes.forEach(function (node, i) {\n    if (i <= 16 && i !== 12) {\n      newNodes.push(node);\n      newNodeMap.set(node.id, i);\n    }\n  });\n  // add related edges\n  edges.forEach(function (edge) {\n    const sourceId = edge.source;\n    const targetId = edge.target;\n    if (newNodeMap.get(sourceId) !== undefined && newNodeMap.get(targetId) !== undefined) {\n      newEdges.push(edge);\n    }\n  });\n\n  const subForceLayout = new G6.Layout.force({\n    center: [nodes[0].x, nodes[0].y],\n    linkDistance: 70,\n    preventOverlap: true,\n    nodeSize: 20,\n    tick: function tick() {\n      // the tick function to show the animation of layout process\n      graph.refreshPositions();\n    },\n  });\n  subForceLayout.init({\n    nodes: newNodes,\n    edges: newEdges,\n  });\n  subForceLayout.execute();\n}, 1000);\n",title:{zh:"子图布局",en:"Subgraph Layout"},filename:"subgraphLayout.js",isNew:!1},{id:"sublayoutPipes",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*SQijSogATDAAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = { nodes: [], edges: [] };\nfor (let i = 0; i < 32; i++) {\n  data.nodes.push({\n    id: `${i}`,\n    label: i < 17 ? `employee-${i}` : `company-${i - 17}`,\n    dataType: i < 17 ? 'employee' : 'company',\n    style: i < 17 ?\n      { stroke: '#5D7092', fill: '#5D7092', fillOpacity: 0.5 } :\n      { stroke: '#5B8FF9', fill: '#5B8FF9', fillOpacity: 0.5 }\n  });\n}\ndata.edges = [\n  { source: '0', target: '1' },\n  { source: '0', target: '2' },\n  { source: '0', target: '3' },\n  { source: '0', target: '4' },\n  { source: '0', target: '5' },\n  { source: '0', target: '6' },\n  { source: '1', target: '2' },\n  { source: '1', target: '3' },\n  { source: '1', target: '4' },\n  { source: '1', target: '5' },\n  { source: '1', target: '6' },\n  { source: '2', target: '3' },\n  { source: '2', target: '4' },\n  { source: '2', target: '5' },\n  { source: '2', target: '6' },\n\n  { source: '7', target: '8' },\n  { source: '8', target: '9' },\n  { source: '9', target: '10' },\n\n  { source: '11', target: '12' },\n  { source: '12', target: '13' },\n  { source: '13', target: '14' },\n  { source: '14', target: '15' },\n  { source: '15', target: '16' },\n  { source: '11', target: '14' },\n\n  { source: '31', target: '11' },\n  { source: '24', target: '4' },\n  { source: '23', target: '7' },\n];\n\nconst legendData = {\n  nodes: [\n    { id: 'employee', label: 'employee', style: { stroke: '#5D7092', fill: '#5D7092' } },\n    { id: 'company', label: 'company', style: { stroke: '#5B8FF9', fill: '#5B8FF9' } },\n  ],\n  edges: []\n}\n\nconst legend = new G6.Legend({\n  data: legendData,\n  align: 'center',\n  layout: 'horizontal', // vertical\n  position: 'bottom-left',\n  vertiSep: 12,\n  horiSep: 24,\n  offsetY: -24,\n  padding: [4, 16, 8, 16],\n  containerStyle: {\n    fill: '#ccc',\n    lineWidth: 1\n  },\n  title: 'Legend',\n  titleConfig: {\n    position: 'left',\n    offsetX: 0,\n    offsetY: 12,\n  },\n  filter: {\n    enable: true,\n    multiple: true,\n    trigger: 'click',\n    graphActiveState: 'activeByLegend',\n    graphInactiveState: 'inactiveByLegend',\n    filterFunctions: {\n      'a': (d) => {\n        if (d.cluster === 'a') return true;\n        return false\n      },\n      'b': (d) => {\n        if (d.cluster === 'b') return true;\n        return false\n      },\n      'c': (d) => {\n        if (d.cluster === 'c') return true;\n        return false\n      },\n      'd': (d) => {\n        if (d.cluster === 'd') return true;\n        return false\n      },\n    }\n  }\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  plugins: [legend],\n  animate: true,\n  nodeStateStyles: {\n    activeByLegend: {\n      lineWidth: 5,\n      strokeOpacity: 0.5,\n      stroke: '#f00'\n    },\n    inactiveByLegend: {\n      opacity: 0.5\n    }\n  },\n  layout: {\n    pipes: [\n      {\n        type: 'circular',\n        nodesFilter: (node) => (+node.id) <= 6,\n        center: [width / 5 * 4 - 30, height / 2],\n        radius: width / 10\n      },\n      {\n        type: 'circular',\n        nodesFilter: (node) => ((+node.id) >= 7 && (+node.id) <= 10),\n        center: [width / 20 + 30, height / 3 * 2],\n        radius: width / 20\n      },\n      {\n        type: 'circular',\n        nodesFilter: (node) => ((+node.id) >= 11 && (+node.id) <= 16),\n        center: [width / 20 + 30, height / 3],\n        radius: width / 20\n      },\n      {\n        type: 'grid',\n        nodesFilter: (node) => (+node.id) > 16,\n        begin: [width / 10 + 50, 20],\n        width: width / 5 * 3 - 100,\n        height: height - 40,\n      }\n    ],\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"流水线子图布局",en:"Sublayout Pipeline"},filename:"sublayoutPipes.js",isNew:!1},{id:"dataChange",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*VIXvQagCETkAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst data2 = {\n  nodes: [\n    {\n      id: 'b0',\n      label: '0',\n    },\n    {\n      id: 'b1',\n      label: '1',\n    },\n    {\n      id: 'b2',\n      label: '2',\n    },\n    {\n      id: 'b3',\n      label: '3',\n    },\n    {\n      id: 'b4',\n      label: '4',\n    },\n    {\n      id: 'b5',\n      label: '5',\n    },\n  ],\n  edges: [\n    {\n      id: 'be1',\n      source: 'b0',\n      target: 'b1',\n    },\n    {\n      id: 'be2',\n      source: 'b0',\n      target: 'b2',\n    },\n    {\n      id: 'be3',\n      source: 'b0',\n      target: 'b3',\n    },\n    {\n      id: 'be4',\n      source: 'b0',\n      target: 'b4',\n    },\n    {\n      id: 'be5',\n      source: 'b0',\n      target: 'b5',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  layout: {\n    type: 'force',\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n\nsetTimeout(() => {\n  graph.changeData(data2);\n}, 2500);\n",title:{zh:"数据动态切换",en:"Change Data"},filename:"dataChange.js",isNew:!1},{id:"customBigraph",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Vod0Q6u5dSoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'A',\n      cluster: 'part1',\n    },\n    {\n      id: '1',\n      label: 'B',\n      cluster: 'part1',\n    },\n    {\n      id: '2',\n      label: 'C',\n      cluster: 'part1',\n    },\n    {\n      id: '3',\n      label: 'D',\n      cluster: 'part1',\n    },\n    {\n      id: '4',\n      label: 'E',\n      cluster: 'part1',\n    },\n    {\n      id: '5',\n      label: 'F',\n      cluster: 'part1',\n    },\n    {\n      id: '6',\n      label: 'a',\n      cluster: 'part2',\n    },\n    {\n      id: '7',\n      label: 'b',\n      cluster: 'part2',\n    },\n    {\n      id: '8',\n      label: 'c',\n      cluster: 'part2',\n    },\n    {\n      id: '9',\n      label: 'd',\n      cluster: 'part2',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '6',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '1',\n      target: '6',\n    },\n    {\n      source: '1',\n      target: '9',\n    },\n    {\n      source: '1',\n      target: '7',\n    },\n    {\n      source: '2',\n      target: '8',\n    },\n    {\n      source: '2',\n      target: '9',\n    },\n    {\n      source: '2',\n      target: '6',\n    },\n    {\n      source: '3',\n      target: '8',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '4',\n      target: '7',\n    },\n    {\n      source: '5',\n      target: '9',\n    },\n  ],\n};\n\nG6.registerLayout('bigraph-layout', {\n  execute() {\n    const self = this;\n    const center = self.center || [0, 0];\n    const biSep = self.biSep || 100;\n    const nodeSep = self.nodeSep || 20;\n    const nodeSize = self.nodeSize || 20;\n    const direction = self.direction || 'horizontal';\n    let part1Pos = 0;\n    let part2Pos = 0;\n    if (direction === 'horizontal') {\n      part1Pos = center[0] - biSep / 2;\n      part2Pos = center[0] + biSep / 2;\n    }\n    const { nodes, edges } = self;\n    const part1Nodes = [];\n    const part2Nodes = [];\n    const part1NodeMap = new Map();\n    const part2NodeMap = new Map();\n    // separate the nodes and init the positions\n    nodes.forEach(function (node, i) {\n      if (node.cluster === 'part1') {\n        part1Nodes.push(node);\n        part1NodeMap.set(node.id, i);\n      } else {\n        part2Nodes.push(node);\n        part2NodeMap.set(node.id, i);\n      }\n    });\n\n    // order the part1 node\n    part1Nodes.forEach(function (p1n) {\n      let index = 0;\n      let adjCount = 0;\n      edges.forEach(function (edge) {\n        const sourceId = edge.source;\n        const targetId = edge.target;\n        if (sourceId === p1n.id) {\n          index += part2NodeMap.get(targetId);\n          adjCount += 1;\n        } else if (targetId === p1n.id) {\n          index += part2NodeMap.get(sourceId);\n          adjCount += 1;\n        }\n      });\n      index /= adjCount;\n      p1n.index = index;\n    });\n    part1Nodes.sort(function (a, b) {\n      return a.index - b.index;\n    });\n    part2Nodes.forEach(function (p2n) {\n      let index = 0;\n      let adjCount = 0;\n      edges.forEach(function (edge) {\n        const sourceId = edge.source;\n        const targetId = edge.target;\n        if (sourceId === p2n.id) {\n          index += part1NodeMap.get(targetId);\n          adjCount += 1;\n        } else if (targetId === p2n.id) {\n          index += part1NodeMap.get(sourceId);\n          adjCount += 1;\n        }\n      });\n      index /= adjCount;\n      p2n.index = index;\n    });\n    part2Nodes.sort(function (a, b) {\n      return a.index - b.index;\n    });\n\n    // place the nodes\n    const hLength = part1Nodes.length > part2Nodes.length ? part1Nodes.length : part2Nodes.length;\n    const height = hLength * (nodeSep + nodeSize);\n    let begin = center[1] - height / 2;\n    if (direction === 'vertical') {\n      begin = center[0] - height / 2;\n    }\n    part1Nodes.forEach(function (p1n, i) {\n      if (direction === 'horizontal') {\n        p1n.x = part1Pos;\n        p1n.y = begin + i * (nodeSep + nodeSize);\n      } else {\n        p1n.x = begin + i * (nodeSep + nodeSize);\n        p1n.y = part1Pos;\n      }\n    });\n    part2Nodes.forEach(function (p2n, i) {\n      if (direction === 'horizontal') {\n        p2n.x = part2Pos;\n        p2n.y = begin + i * (nodeSep + nodeSize);\n      } else {\n        p2n.x = begin + i * (nodeSep + nodeSize);\n        p2n.y = part2Pos;\n      }\n    });\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'bigraph-layout',\n    biSep: 300,\n    nodeSep: 20,\n    nodeSize: 20,\n  },\n  animate: true,\n  defaultNode: {\n    size: 20,\n    style: {\n      fill: '#C6E5FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n  },\n  modes: {\n    default: ['drag-canvas'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义二分图布局",en:"Custom Bigraph Layout"},filename:"customBigraph.js",isNew:!1},{id:"layoutTiming",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tdRuSbgJAZ8AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n  ],\n};\n\nconst tipDiv = document.createElement('div');\nconst container = document.getElementById('container');\ncontainer.appendChild(tipDiv);\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n    nodeSize: 20,\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n});\n\ngraph.on('beforelayout', function () {\n  tipDiv.innerHTML =\n    'Doing force-directed layout... the text will be changed after the layout being done.';\n});\ngraph.on('afterlayout', function () {\n  tipDiv.innerHTML = 'Done!';\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"布局时机监听",en:"Layout Listener"},filename:"layoutTiming.js",isNew:!1}],icon:"",id:"layoutMechanism",title:{en:"Layout Mechanism",zh:"布局机制"},childrenKey:"demos",order:19},{demos:[{id:"layoutPrediction",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eZRNQ4tpkecAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n// import by this way in your project. 在您的项目中请这样引入\n// import { GraphLayoutPredict } from '@antv/vis-predict-engine';\n\nconst { GraphLayoutPredict } = window.GraphLayoutPredict\n\nconst data = {\n  nodes: [\n    {\n      id: 'node-0',\n      label: '0',\n    },\n    {\n      id: 'node-1',\n      label: '1',\n    },\n    {\n      id: 'node-2',\n      label: '2',\n    },\n    {\n      id: 'node-3',\n      label: '3',\n    },\n    {\n      id: 'node-4',\n      label: '4',\n    },\n    {\n      id: 'node-5',\n      label: '5',\n    },\n    {\n      id: 'node-6',\n      label: '6',\n    },\n    {\n      id: 'node-7',\n      label: '7',\n    },\n    {\n      id: 'node-8',\n      label: '8',\n    },\n    {\n      id: 'node-9',\n      label: '9',\n    },\n  ],\n  edges: [\n    {\n      id: 'edge-0',\n      source: 'node-0',\n      target: 'node-1',\n    },\n    {\n      id: 'edge-1',\n      source: 'node-0',\n      target: 'node-2',\n    },\n    {\n      id: 'edge-2',\n      source: 'node-0',\n      target: 'node-3',\n    },\n    {\n      id: 'edge-4',\n      source: 'node-0',\n      target: 'node-4',\n    },\n    {\n      id: 'edge-5',\n      source: 'node-0',\n      target: 'node-5',\n    },\n    {\n      id: 'edge-6',\n      source: 'node-1',\n      target: 'node-6',\n    },\n    {\n      id: 'edge-7',\n      source: 'node-6',\n      target: 'node-7',\n    },\n    {\n      id: 'edge-8',\n      source: 'node-5',\n      target: 'node-7',\n    },\n    {\n      id: 'edge-9',\n      source: 'node-1',\n      target: 'node-4',\n    },\n    {\n      id: 'edge-10',\n      source: 'node-4',\n      target: 'node-5',\n    },\n    {\n      id: 'edge-11',\n      source: 'node-3',\n      target: 'node-7',\n    },\n    {\n      id: 'edge-12',\n      source: 'node-2',\n      target: 'node-5',\n    },\n    {\n      id: 'edge-13',\n      source: 'node-2',\n      target: 'node-1',\n    },\n  ],\n};\n\n\nasync function layoutPredict() {\n  return await GraphLayoutPredict.predict(data);\n}\n\n(async function () {\n  // predictLayout 表示预测的布局\n  // confidence 表示预测的可信度\n  const { predictLayout, confidence } = await layoutPredict();\n  console.log(\"----predictLayout---\", predictLayout);\n  console.log(\"----confidence---\", confidence);\n  const container = document.getElementById(\"container\");\n  const graph = new G6.Graph({\n    container,\n    width: container.scrollWidth,\n    height: container.scrollHeight || 500,\n    layout: {\n      type: predictLayout,\n      nodeSize: 50,\n      preventOverlap: true\n    },\n    modes: {\n      default: [\"drag-canvas\", \"zoom-canvas\", \"drag-node\"]\n    }\n  });\n\n  graph.data(data);\n  graph.render();\n  graph.on(\"afterlayout\", () => {\n    graph.fitView();\n  });\n\n  if (typeof window !== \"undefined\") {\n    window.onresize = () => {\n      if (!graph || graph.get(\"destroyed\")) return;\n      if (!container || !container.scrollWidth || !container.scrollHeight)\n        return;\n      graph.changeSize(container.scrollWidth, container.scrollHeight);\n    };\n  }\n})();\n",title:{zh:"自动布局推荐",en:"Layout Prediction"},filename:"layoutPrediction.js",isNew:!1}],icon:"",id:"aiLayout",title:{en:"AI Layout Prediction",zh:"AI 智能布局推荐"},childrenKey:"demos",order:20}],childrenKey:"examples"},{id:"tree",title:{zh:"布局：树图",en:"Layout：Tree Graph"},icon:"tree",examples:[{demos:[{id:"basicCompactBox",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*XlXOR5pmM3oAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.getModel();\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n      },\n      layout: {\n        type: 'compactBox',\n        direction: 'LR',\n        getId: function getId(d) {\n          return d.id;\n        },\n        getHeight: function getHeight() {\n          return 16;\n        },\n        getWidth: function getWidth() {\n          return 16;\n        },\n        getVGap: function getVGap() {\n          return 10;\n        },\n        getHGap: function getHGap() {\n          return 100;\n        },\n      },\n    });\n\n    graph.node(function (node) {\n      return {\n        label: node.id,\n        labelCfg: {\n          offset: 10,\n          position: node.children && node.children.length > 0 ? 'left' : 'right',\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"紧凑树",en:"CompactBox Layout"},filename:"basicCompactBox.js",isNew:!1},{id:"tbCompactBox",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*KrAqTrFbNjMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      linkCenter: true,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.getModel();\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-vertical',\n      },\n      layout: {\n        type: 'compactBox',\n        direction: 'TB',\n        getId: function getId(d) {\n          return d.id;\n        },\n        getHeight: function getHeight() {\n          return 16;\n        },\n        getWidth: function getWidth() {\n          return 16;\n        },\n        getVGap: function getVGap() {\n          return 80;\n        },\n        getHGap: function getHGap() {\n          return 20;\n        },\n      },\n    });\n\n    graph.node(function (node) {\n      let position = 'right';\n      let rotate = 0;\n      if (!node.children) {\n        position = 'bottom';\n        rotate = Math.PI / 2;\n      }\n      return {\n        label: node.id,\n        labelCfg: {\n          position,\n          offset: 5,\n          style: {\n            rotate,\n            textAlign: 'start',\n          },\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"至上而下的紧凑树",en:"Top to Bottom CompactBox"},filename:"tbCompactBox.js",isNew:!1},{id:"compactBoxLeftAlign",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*b3G-QZZekE8AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst fontSize = 15;\n\nG6.registerNode('crect', {\n  draw: (cfg, group) => {\n    const width = cfg.id.length * 10;\n    const rect = group.addShape('rect', {\n      attrs: {\n        x: 0,\n        y: -10,\n        ...cfg.style,\n        width,\n        height: 20,\n        lineWidth: 0,\n        opacity: 0,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'rect-shape',\n      draggable: true,\n    });\n    const label = group.addShape('text', {\n      attrs: {\n        text: cfg.id,\n        fill: '#ccc',\n        fontSize,\n        x: 0,\n        y: 0,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'label-shape',\n      draggable: true,\n    });\n    const labelBBox = label.getBBox();\n    const icon = group.addShape('circle', {\n      attrs: {\n        x: labelBBox.maxX + 10,\n        y: (labelBBox.minY + labelBBox.maxY) / 2,\n        r: 5,\n        stroke: '#000',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'circle-shape',\n      draggable: true,\n    });\n    const bboxWidth = label.getBBox().width + 20;\n    rect.attr({ width: bboxWidth });\n\n    group.addShape('path', {\n      attrs: {\n        lineWidth: 1,\n        fill: '#ccc',\n        stroke: '#ccc',\n        path: [\n          ['M', 0, 0],\n          ['L', bboxWidth, 0],\n        ],\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'path-shape',\n      draggable: true,\n    });\n\n    return rect;\n  },\n  getAnchorPoints: (type, cfg) => {\n    return [\n      [0, 0.5],\n      [1, 0.5],\n    ];\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const descriptionDiv = document.createElement('div');\n    descriptionDiv.innerHTML = 'The nodes of a subtree is aligned to the left.';\n    container.appendChild(descriptionDiv);\n\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: ['collapse-expand', 'drag-canvas', 'zoom-canvas'],\n      },\n      defaultNode: {\n        type: 'crect',\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n        style: {\n          stroke: '#A3B1BF',\n        },\n      },\n      layout: {\n        type: 'compactBox',\n        direction: 'LR',\n        getId: function getId(d) {\n          return d.id;\n        },\n        getHeight: function getHeight() {\n          return 16;\n        },\n        getVGap: function getVGap() {\n          return 10;\n        },\n        getHGap: function getHGap() {\n          return 100;\n        },\n        getWidth: function getWidth(d) {\n          return G6.Util.getTextSize(d.id, fontSize)[0] + 20;\n        },\n      },\n      fitView: true,\n    });\n    graph.data(data);\n    graph.render();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"节点左对齐的紧凑树",en:"CompactBox with Left Align Nodes"},filename:"compactBoxLeftAlign.js",isNew:!1}],icon:"",id:"compactBox",title:{en:"CompactBox",zh:"紧凑树"},childrenKey:"demos",order:0},{demos:[{id:"basicDendrogram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ffD6S74MXw4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n      },\n      layout: {\n        type: 'dendrogram',\n        direction: 'LR', // H / V / LR / RL / TB / BT\n        nodeSep: 30,\n        rankSep: 100,\n      },\n    });\n\n    graph.node(function (node) {\n      return {\n        label: node.id,\n        labelCfg: {\n          position: node.children && node.children.length > 0 ? 'left' : 'right',\n          offset: 5,\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"生态树",en:"Basic Dendrogram Layout"},filename:"basicDendrogram.js",isNew:!1},{id:"tbDendrogram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*nTKmRKkyUVUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      linkCenter: true,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-vertical',\n      },\n      layout: {\n        type: 'dendrogram',\n        direction: 'TB', // H / V / LR / RL / TB / BT\n        nodeSep: 40,\n        rankSep: 100,\n      },\n    });\n\n    graph.node(function (node) {\n      let position = 'right';\n      let rotate = 0;\n      if (!node.children) {\n        position = 'bottom';\n        rotate = Math.PI / 2;\n      }\n      return {\n        label: node.id,\n        labelCfg: {\n          position,\n          offset: 5,\n          style: {\n            rotate,\n            textAlign: 'start',\n          },\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"至上而下的生态树",en:"Top to Bottom Dendrogram"},filename:"tbDendrogram.js",isNew:!1}],icon:"",id:"dendrogram",title:{en:"Dendrogram",zh:"生态树"},childrenKey:"demos",order:1},{demos:[{id:"hMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wRZjTL3fCbEAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n      },\n      layout: {\n        type: 'mindmap',\n        direction: 'H',\n        getHeight: () => {\n          return 16;\n        },\n        getWidth: () => {\n          return 16;\n        },\n        getVGap: () => {\n          return 10;\n        },\n        getHGap: () => {\n          return 50;\n        },\n      },\n    });\n\n    let centerX = 0;\n    graph.node(function (node) {\n      if (node.id === 'Modeling Methods') {\n        centerX = node.x;\n      }\n\n      return {\n        label: node.id,\n        labelCfg: {\n          position:\n            node.children && node.children.length > 0\n              ? 'left'\n              : node.x > centerX\n              ? 'right'\n              : 'left',\n          offset: 5,\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"脑图树-子节点自动两侧分布",en:"Two Side Mindmap Layout"},filename:"hMindmap.js",isNew:!1},{id:"hRightMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W6OGRLg2UJcAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n      },\n      layout: {\n        type: 'mindmap',\n        direction: 'H',\n        getHeight: () => {\n          return 16;\n        },\n        getWidth: () => {\n          return 16;\n        },\n        getVGap: () => {\n          return 10;\n        },\n        getHGap: () => {\n          return 100;\n        },\n        getSide: () => {\n          return 'right';\n        },\n      },\n    });\n\n    let centerX = 0;\n    graph.node(function (node) {\n      if (node.id === 'Modeling Methods') {\n        centerX = node.x;\n      }\n\n      return {\n        label: node.id,\n        labelCfg: {\n          position:\n            node.children && node.children.length > 0\n              ? 'right'\n              : node.x > centerX\n              ? 'right'\n              : 'left',\n          offset: 5,\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"脑图树-子节点右侧分布",en:"Right Side Mindmap Layout"},filename:"hRightMindmap.js",isNew:!1},{id:"hLeftMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NNUaTaN9yIgAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n      },\n      layout: {\n        type: 'mindmap',\n        direction: 'H',\n        getHeight: () => {\n          return 16;\n        },\n        getWidth: () => {\n          return 16;\n        },\n        getVGap: () => {\n          return 10;\n        },\n        getHGap: () => {\n          return 100;\n        },\n        getSide: () => {\n          return 'left';\n        },\n      },\n    });\n\n    let centerX = 0;\n    graph.node(function (node) {\n      if (node.id === 'Modeling Methods') {\n        centerX = node.x;\n      }\n\n      return {\n        label: node.id,\n        labelCfg: {\n          position:\n            node.children && node.children.length > 0\n              ? 'right'\n              : node.x > centerX\n              ? 'right'\n              : 'left',\n          offset: 5,\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"脑图树-子节点左侧分布",en:"Left Side Mindmap Layout"},filename:"hLeftMindmap.js",isNew:!1},{id:"hCustomSideMindmap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Su39QqQr9PYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n      },\n      layout: {\n        type: 'mindmap',\n        direction: 'H',\n        getHeight: () => {\n          return 16;\n        },\n        getWidth: () => {\n          return 16;\n        },\n        getVGap: () => {\n          return 10;\n        },\n        getHGap: () => {\n          return 50;\n        },\n        getSide: (d) => {\n          if (d.id === 'Classification') {\n            return 'left';\n          }\n          return 'right';\n        },\n      },\n    });\n\n    let centerX = 0;\n    graph.node(function (node) {\n      if (node.id === 'Modeling Methods') {\n        centerX = node.x;\n      }\n\n      return {\n        label: node.id,\n        labelCfg: {\n          position:\n            node.children && node.children.length > 0\n              ? 'left'\n              : node.x > centerX\n              ? 'right'\n              : 'left',\n          offset: 5,\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"脑图树-自定义子节点分布",en:"Custom Mindmap Layout"},filename:"hCustomSideMindmap.js",isNew:!1}],icon:"",id:"mindmap",title:{en:"Mindmap",zh:"脑图树"},childrenKey:"demos",order:2},{demos:[{id:"filesystem",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*PJnfTKFRaCAAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nG6.registerNode('file-node', {\n  draw: function draw(cfg, group) {\n    const keyShape = group.addShape('rect', {\n      attrs: {\n        x: 10,\n        y: -12,\n        fill: '#fff',\n        stroke: null,\n      },\n    });\n    let isLeaf = false;\n    if (cfg.collapsed) {\n      group.addShape('marker', {\n        attrs: {\n          symbol: 'triangle',\n          x: 4,\n          y: -2,\n          r: 4,\n          fill: '#666',\n        },\n        name: 'marker-shape',\n      });\n    } else if (cfg.children && cfg.children.length > 0) {\n      group.addShape('marker', {\n        attrs: {\n          symbol: 'triangle-down',\n          x: 4,\n          y: -2,\n          r: 4,\n          fill: '#666',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'marker-shape',\n      });\n    } else {\n      isLeaf = true;\n    }\n    const shape = group.addShape('text', {\n      attrs: {\n        x: 15,\n        y: 4,\n        text: cfg.name,\n        fill: '#666',\n        fontSize: 16,\n        textAlign: 'left',\n        fontFamily:\n          typeof window !== 'undefined'\n            ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') ||\n              'Arial, sans-serif'\n            : 'Arial, sans-serif',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'text-shape',\n    });\n    const bbox = shape.getBBox();\n    let backRectW = bbox.width;\n    let backRectX = keyShape.attr('x');\n    if (!isLeaf) {\n      backRectW += 8;\n      backRectX -= 15;\n    }\n    keyShape.attr({\n      width: backRectW,\n      height: bbox.height + 4,\n      x: backRectX,\n    });\n    return keyShape;\n  },\n});\nG6.registerEdge(\n  'step-line',\n  {\n    getControlPoints: function getControlPoints(cfg) {\n      const startPoint = cfg.startPoint;\n      const endPoint = cfg.endPoint;\n      return [\n        startPoint,\n        {\n          x: startPoint.x,\n          y: endPoint.y,\n        },\n        endPoint,\n      ];\n    },\n  },\n  'polyline',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: [\n      {\n        type: 'collapse-expand',\n        animate: false,\n        onChange: function onChange(item, collapsed) {\n          const data = item.get('model');\n          data.collapsed = collapsed;\n          return true;\n        },\n      },\n      'drag-canvas',\n      'zoom-canvas',\n    ],\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#A3B1BF',\n    },\n  },\n  layout: {\n    type: 'indented',\n    isHorizontal: true,\n    direction: 'LR',\n    indent: 30,\n    getHeight: function getHeight() {\n      return 16;\n    },\n    getWidth: function getWidth() {\n      return 16;\n    },\n  },\n});\nconst data = {\n  id: '1',\n  name: 'src',\n  children: [\n    {\n      id: '1-1',\n      name: 'behavior',\n      children: [],\n    },\n    {\n      id: '1-3',\n      name: 'graph',\n      children: [\n        {\n          id: '1-3-1',\n          name: 'controller',\n          children: [],\n        },\n      ],\n    },\n    {\n      id: '1-5',\n      name: 'item',\n      children: [],\n    },\n    {\n      id: '1-6',\n      name: 'shape',\n      children: [\n        {\n          id: '1-6-2',\n          name: 'extend',\n          children: [],\n        },\n      ],\n    },\n    {\n      id: '1-7',\n      name: 'util',\n      children: [],\n    },\n  ],\n};\n\ngraph.node((node) => {\n  return {\n    type: 'file-node',\n    label: node.name,\n  };\n});\ngraph.edge(() => {\n  return {\n    type: 'step-line',\n  };\n});\n\ngraph.data(data);\ngraph.render();\ngraph.fitView();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"缩进树-文件系统",en:"FileSystem-Indented Layout"},filename:"filesystem.js",isNew:!1},{id:"intendAlignTop",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kbzRRZk2t2cAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nG6.registerNode('card-node', {\n  draw: function drawShape(cfg, group) {\n    const r = 2;\n    const color = '#5B8FF9';\n    const w = cfg.size[0];\n    const h = cfg.size[1];\n    const shape = group.addShape('rect', {\n      attrs: {\n        x: -w / 2,\n        y: -h / 2,\n        width: w, //200,\n        height: h, // 60\n        stroke: color,\n        radius: r,\n        fill: '#fff',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'main-box',\n      draggable: true,\n    });\n\n    group.addShape('rect', {\n      attrs: {\n        x: -w / 2,\n        y: -h / 2,\n        width: w, //200,\n        height: h / 2, // 60\n        fill: color,\n        radius: [r, r, 0, 0],\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'title-box',\n      draggable: true,\n    });\n\n    // title text\n    group.addShape('text', {\n      attrs: {\n        textBaseline: 'top',\n        x: -w / 2 + 8,\n        y: -h / 2 + 2,\n        lineHeight: 20,\n        text: cfg.id,\n        fill: '#fff',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'title',\n    });\n    cfg.children &&\n      group.addShape('marker', {\n        attrs: {\n          x: w / 2,\n          y: 0,\n          r: 6,\n          cursor: 'pointer',\n          symbol: cfg.collapsed ? G6.Marker.expand : G6.Marker.collapse,\n          stroke: '#666',\n          lineWidth: 1,\n          fill: '#fff',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'collapse-icon',\n      });\n    group.addShape('text', {\n      attrs: {\n        textBaseline: 'top',\n        x: -w / 2 + 8,\n        y: -h / 2 + 24,\n        lineHeight: 20,\n        text: 'description',\n        fill: 'rgba(0,0,0, 1)',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: `description`,\n    });\n    return shape;\n  },\n  setState(name, value, item) {\n    if (name === 'collapsed') {\n      const marker = item.get('group').find((ele) => ele.get('name') === 'collapse-icon');\n      const icon = value ? G6.Marker.expand : G6.Marker.collapse;\n      marker.attr('symbol', icon);\n    }\n  },\n});\n\nconst data = {\n  id: 'A',\n  children: [\n    {\n      id: 'A1',\n      children: [{ id: 'A11' }, { id: 'A12' }, { id: 'A13' }, { id: 'A14' }],\n    },\n    {\n      id: 'A2',\n      children: [\n        {\n          id: 'A21',\n          children: [{ id: 'A211' }, { id: 'A212' }],\n        },\n        {\n          id: 'A22',\n        },\n      ],\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas'],\n  },\n  defaultNode: {\n    type: 'card-node',\n    size: [100, 40],\n  },\n  defaultEdge: {\n    type: 'cubic-horizontal',\n    style: {\n      endArrow: true,\n    },\n  },\n  layout: {\n    type: 'indented',\n    direction: 'LR',\n    dropCap: false,\n    indent: 200,\n    getHeight: () => {\n      return 60;\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\ngraph.fitView();\ngraph.on('node:click', (e) => {\n  if (e.target.get('name') === 'collapse-icon') {\n    e.item.getModel().collapsed = !e.item.getModel().collapsed;\n    graph.setItemState(e.item, 'collapsed', e.item.getModel().collapsed);\n    graph.layout();\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"缩进树-顶部对齐",en:"FileSystem-Align Top"},filename:"intendAlignTop.js",isNew:!1},{id:"hIntended",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*42EXSYyBcTYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: ['drag-canvas'],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n      },\n      layout: {\n        type: 'indented',\n        direction: 'H',\n        indent: 80,\n        getHeight: () => {\n          return 10;\n        },\n        getWidth: () => {\n          return 10;\n        },\n        getSide: (d) => {\n          if (d.id === 'Regression' || d.id === 'Classification') return 'left';\n          return 'right';\n        },\n      },\n    });\n\n    let centerX = 0;\n    graph.node(function (node) {\n      if (node.id === 'Modeling Methods') {\n        centerX = node.x;\n      }\n      return {\n        label: node.id,\n        labelCfg: {\n          position:\n            node.children && node.children.length > 0\n              ? 'left'\n              : node.x > centerX\n              ? 'right'\n              : 'left',\n          offset: 5,\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"缩进树-子节点两侧分布",en:"Two Side Indented Layout"},filename:"hIntended.js",isNew:!1}],icon:"",id:"indented",title:{en:"Indented",zh:"缩进树"},childrenKey:"demos",order:3},{demos:[{id:"radialDendrogram",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mS3_Rb4VuPoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      linkCenter: true,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n      },\n      layout: {\n        type: 'dendrogram',\n        direction: 'LR',\n        nodeSep: 20,\n        rankSep: 100,\n        radial: true,\n      },\n    });\n\n    graph.node(function (node) {\n      return {\n        label: node.id,\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"生态辐射树",en:"Radial Dendrograme Layout"},filename:"radialDendrogram.js",isNew:!1},{id:"radialCompactBox",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*xENwSLuyTZ4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      linkCenter: true,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              const data = item.get('model');\n              data.collapsed = collapsed;\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n      },\n      layout: {\n        type: 'compactBox',\n        direction: 'RL',\n        getId: function getId(d) {\n          return d.id;\n        },\n        getHeight: () => {\n          return 26;\n        },\n        getWidth: () => {\n          return 26;\n        },\n        getVGap: () => {\n          return 20;\n        },\n        getHGap: () => {\n          return 30;\n        },\n        radial: true,\n      },\n    });\n\n    graph.node(function (node) {\n      return {\n        label: node.id,\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n",title:{zh:"紧凑辐射树",en:"Radial CompactBox Layout"},filename:"radialCompactBox.js",isNew:!1}],icon:"",id:"radialtree",title:{en:"Radial Tree",zh:"辐射树"},childrenKey:"demos",order:4},{demos:[{id:"customEdgeTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*AncCQ5e7XncAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst COLLAPSE_ICON = function COLLAPSE_ICON(x, y, r) {\n  return [\n    ['M', x - r, y - r],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x + 2 - r, y - r],\n    ['L', x + r - 2, y - r],\n  ];\n};\nconst EXPAND_ICON = function EXPAND_ICON(x, y, r) {\n  return [\n    ['M', x - r, y - r],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x + 2 - r, y - r],\n    ['L', x + r - 2, y - r],\n    ['M', x, y - 2 * r + 2],\n    ['L', x, y - 2],\n  ];\n};\n\nconst data = {\n  id: 'root',\n  label: 'root',\n  children: [\n    {\n      id: 'c1',\n      label: 'c1',\n      children: [\n        {\n          id: 'c1-1',\n          label: 'c1-1',\n        },\n        {\n          id: 'c1-2',\n          label: 'c1-2',\n          children: [\n            {\n              id: 'c1-2-1',\n              label: 'c1-2-1',\n            },\n            {\n              id: 'c1-2-2',\n              label: 'c1-2-2',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      id: 'c2',\n      label: 'c2',\n    },\n    {\n      id: 'c3',\n      label: 'c3',\n      children: [\n        {\n          id: 'c3-1',\n          label: 'c3-1',\n        },\n        {\n          id: 'c3-2',\n          label: 'c3-2',\n          children: [\n            {\n              id: 'c3-2-1',\n              label: 'c3-2-1',\n            },\n            {\n              id: 'c3-2-2',\n              label: 'c3-2-2',\n            },\n            {\n              id: 'c3-2-3',\n              label: 'c3-2-3',\n            },\n          ],\n        },\n        {\n          id: 'c3-3',\n          label: 'c3-3',\n        },\n      ],\n    },\n  ],\n};\n\nG6.Util.traverseTree(data, (d) => {\n  d.leftIcon = {\n    style: {\n      fill: '#e6fffb',\n      stroke: '#e6fffb',\n    },\n    img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ',\n  };\n  return true;\n});\n\nG6.registerNode(\n  'icon-node',\n  {\n    options: {\n      size: [60, 20],\n      stroke: '#91d5ff',\n      fill: '#91d5ff',\n    },\n    draw(cfg, group) {\n      const styles = this.getShapeStyle(cfg);\n      const { labelCfg = {} } = cfg;\n\n      const w = styles.width;\n      const h = styles.height;\n\n      const keyShape = group.addShape('rect', {\n        attrs: {\n          ...styles,\n          x: -w / 2,\n          y: -h / 2,\n        },\n      });\n\n      /**\n       * leftIcon 格式如下：\n       *  {\n       *    style: ShapeStyle;\n       *    img: ''\n       *  }\n       */\n      console.log('cfg.leftIcon', cfg.leftIcon);\n      if (cfg.leftIcon) {\n        const { style, img } = cfg.leftIcon;\n        group.addShape('rect', {\n          attrs: {\n            x: 1 - w / 2,\n            y: 1 - h / 2,\n            width: 38,\n            height: styles.height - 2,\n            fill: '#8c8c8c',\n            ...style,\n          },\n        });\n\n        group.addShape('image', {\n          attrs: {\n            x: 8 - w / 2,\n            y: 8 - h / 2,\n            width: 24,\n            height: 24,\n            img:\n              img ||\n              'https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'image-shape',\n        });\n      }\n\n      // 如果不需要动态增加或删除元素，则不需要 add 这两个 marker\n      group.addShape('marker', {\n        attrs: {\n          x: 40 - w / 2,\n          y: 52 - h / 2,\n          r: 6,\n          stroke: '#73d13d',\n          cursor: 'pointer',\n          symbol: EXPAND_ICON,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'add-item',\n      });\n\n      group.addShape('marker', {\n        attrs: {\n          x: 80 - w / 2,\n          y: 52 - h / 2,\n          r: 6,\n          stroke: '#ff4d4f',\n          cursor: 'pointer',\n          symbol: COLLAPSE_ICON,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'remove-item',\n      });\n\n      if (cfg.label) {\n        group.addShape('text', {\n          attrs: {\n            ...labelCfg.style,\n            text: cfg.label,\n            x: 50 - w / 2,\n            y: 25 - h / 2,\n          },\n        });\n      }\n\n      return keyShape;\n    },\n    update: undefined,\n  },\n  'rect',\n);\n\nG6.registerEdge('flow-line', {\n  draw(cfg, group) {\n    const startPoint = cfg.startPoint;\n    const endPoint = cfg.endPoint;\n\n    const { style } = cfg;\n    const shape = group.addShape('path', {\n      attrs: {\n        stroke: style.stroke,\n        endArrow: style.endArrow,\n        path: [\n          ['M', startPoint.x, startPoint.y],\n          ['L', startPoint.x, (startPoint.y + endPoint.y) / 2],\n          ['L', endPoint.x, (startPoint.y + endPoint.y) / 2],\n          ['L', endPoint.x, endPoint.y],\n        ],\n      },\n    });\n\n    return shape;\n  },\n});\n\nconst defaultStateStyles = {\n  hover: {\n    stroke: '#1890ff',\n    lineWidth: 2,\n  },\n};\n\nconst defaultNodeStyle = {\n  fill: '#91d5ff',\n  stroke: '#40a9ff',\n  radius: 5,\n};\n\nconst defaultEdgeStyle = {\n  stroke: '#91d5ff',\n  endArrow: {\n    path: 'M 0,0 L 12, 6 L 9,0 L 12, -6 Z',\n    fill: '#91d5ff',\n    d: -20,\n  },\n};\n\nconst defaultLayout = {\n  type: 'compactBox',\n  direction: 'TB',\n  getId: function getId(d) {\n    return d.id;\n  },\n  getHeight: function getHeight() {\n    return 16;\n  },\n  getWidth: function getWidth() {\n    return 16;\n  },\n  getVGap: function getVGap() {\n    return 40;\n  },\n  getHGap: function getHGap() {\n    return 70;\n  },\n};\n\nconst defaultLabelCfg = {\n  style: {\n    fill: '#000',\n    fontSize: 12,\n  },\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst minimap = new G6.Minimap({\n  size: [150, 100],\n});\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [minimap],\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas'],\n  },\n  defaultNode: {\n    type: 'icon-node',\n    size: [120, 40],\n    style: defaultNodeStyle,\n    labelCfg: defaultLabelCfg,\n  },\n  defaultEdge: {\n    type: 'flow-line',\n    style: defaultEdgeStyle,\n  },\n  nodeStateStyles: defaultStateStyles,\n  edgeStateStyles: defaultStateStyles,\n  layout: defaultLayout,\n});\n\ngraph.data(data);\ngraph.render();\ngraph.fitView();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'hover', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'hover', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item, target } = evt;\n  const targetType = target.get('type');\n  const name = target.get('name');\n\n  // 增加元素\n  if (targetType === 'marker') {\n    const model = item.getModel();\n    if (name === 'add-item') {\n      if (!model.children) {\n        model.children = [];\n      }\n      const id = `n-${Math.random()}`;\n      model.children.push({\n        id,\n        label: id.substr(0, 8),\n        leftIcon: {\n          style: {\n            fill: '#e6fffb',\n            stroke: '#e6fffb',\n          },\n          img:\n            'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ',\n        },\n      });\n      graph.updateChild(model, model.id);\n    } else if (name === 'remove-item') {\n      graph.removeChild(model.id);\n    }\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义树图中的边",en:"Edges on Tree"},filename:"customEdgeTree.js",isNew:!1},{id:"treeEdgeLabel",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*LtTbS4D59H4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  isRoot: true,\n  id: 'Root',\n  style: {\n    fill: 'red',\n  },\n  children: [\n    {\n      id: 'SubTreeNode1',\n      raw: {},\n      children: [\n        {\n          id: 'SubTreeNode1.1',\n        },\n        {\n          id: 'SubTreeNode1.2',\n          children: [\n            {\n              id: 'SubTreeNode1.2.1',\n            },\n            {\n              id: 'SubTreeNode1.2.2',\n            },\n            {\n              id: 'SubTreeNode1.2.3',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode2',\n      children: [\n        {\n          id: 'SubTreeNode2.1',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode3',\n      children: [\n        {\n          id: 'SubTreeNode3.1',\n        },\n        {\n          id: 'SubTreeNode3.2',\n        },\n        {\n          id: 'SubTreeNode3.3',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode4',\n    },\n    {\n      id: 'SubTreeNode5',\n    },\n    {\n      id: 'SubTreeNode6',\n    },\n    {\n      id: 'SubTreeNode7',\n    },\n    {\n      id: 'SubTreeNode8',\n    },\n    {\n      id: 'SubTreeNode9',\n    },\n    {\n      id: 'SubTreeNode10',\n    },\n    {\n      id: 'SubTreeNode11',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: [\n      {\n        type: 'collapse-expand',\n        onChange: function onChange(item, collapsed) {\n          const data = item.get('model');\n          data.collapsed = collapsed;\n          return true;\n        },\n      },\n      'drag-canvas',\n      'zoom-canvas',\n    ],\n  },\n  defaultNode: {\n    size: 30,\n  },\n  layout: {\n    type: 'compactBox',\n    direction: 'LR',\n    getId: function getId(d) {\n      return d.id;\n    },\n    getHeight: function getHeight() {\n      return 16;\n    },\n    getWidth: function getWidth() {\n      return 16;\n    },\n    getVGap: function getVGap() {\n      return 10;\n    },\n    getHGap: function getHGap() {\n      return 100;\n    },\n  },\n});\n\ngraph.node(function (node) {\n  return {\n    size: 16,\n    anchorPoints: [\n      [0, 0.5],\n      [1, 0.5],\n    ],\n    style: {\n      fill: '#C6E5FF',\n      stroke: '#5B8FF9',\n    },\n    label: node.id,\n    labelCfg: {\n      position: node.children && node.children.length > 0 ? 'left' : 'right',\n      offset: 5,\n    },\n  };\n});\nlet i = 0;\ngraph.edge(function () {\n  i++;\n  return {\n    type: 'cubic-horizontal',\n    color: '#A3B1BF',\n    label: i,\n  };\n});\n\ngraph.data(data);\ngraph.render();\ngraph.fitView();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"树图边上的标签",en:"Labels on Tree Edge"},filename:"treeEdgeLabel.js",isNew:!1},{id:"customTree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*D8kzQYHaUiIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nG6.registerNode(\n  'tree-node',\n  {\n    drawShape: function drawShape(cfg, group) {\n      const rect = group.addShape('rect', {\n        attrs: {\n          fill: '#fff',\n          stroke: '#666',\n          x: 0,\n          y: 0,\n          width:1,\n          height: 1\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-shape',\n      });\n      const content = cfg.name.replace(/(.{19})/g, '$1\\n');\n      const text = group.addShape('text', {\n        attrs: {\n          text: content,\n          x: 0,\n          y: 0,\n          textAlign: 'left',\n          textBaseline: 'middle',\n          fill: '#666',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'text-shape',\n      });\n      const bbox = text.getBBox();\n      const hasChildren = cfg.children && cfg.children.length > 0;\n      rect.attr({\n        x: -bbox.width / 2 - 4,\n        y: -bbox.height / 2 - 6,\n        width: bbox.width + (hasChildren ? 26 : 12),\n        height: bbox.height + 12,\n      });\n      text.attr({\n        x: -bbox.width / 2,\n        y: 0\n      })\n      if (hasChildren) {\n        group.addShape('marker', {\n          attrs: {\n            x: bbox.width / 2 + 12,\n            y: 0,\n            r: 6,\n            symbol: cfg.collapsed ? G6.Marker.expand : G6.Marker.collapse,\n            stroke: '#666',\n            lineWidth: 2,\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'collapse-icon',\n        });\n      }\n      return rect;\n    },\n    update: (cfg, item) => {\n      const group = item.getContainer();\n      const icon = group.find((e) => e.get('name') === 'collapse-icon');\n      icon.attr('symbol', cfg.collapsed ? G6.Marker.expand : G6.Marker.collapse);\n    },\n  },\n  'single-node',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: [\n      {\n        type: 'collapse-expand',\n        onChange: function onChange(item, collapsed) {\n          const data = item.get('model');\n          graph.updateItem(item, {\n            collapsed,\n          });\n          data.collapsed = collapsed;\n          return true;\n        },\n      },\n      'drag-canvas',\n      'zoom-canvas',\n    ],\n  },\n  defaultNode: {\n    type: 'tree-node',\n    anchorPoints: [\n      [0, 0.5],\n      [1, 0.5],\n    ],\n  },\n  defaultEdge: {\n    type: 'cubic-horizontal',\n    style: {\n      stroke: '#A3B1BF',\n    },\n  },\n  layout: {\n    type: 'compactBox',\n    direction: 'LR',\n    getId: function getId(d) {\n      return d.id;\n    },\n    getHeight: function getHeight() {\n      return 16;\n    },\n    getWidth: function getWidth() {\n      return 16;\n    },\n    getVGap: function getVGap() {\n      return 20;\n    },\n    getHGap: function getHGap() {\n      return 80;\n    },\n  },\n});\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/modeling-methods.json')\n  .then((res) => res.json())\n  .then((data) => {\n    G6.Util.traverseTree(data, function (item) {\n      item.id = item.name;\n    });\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义复杂树图样式",en:"Custom Tree Node 1"},filename:"customTree.js",isNew:!1}],icon:"",id:"customItemTree",title:{en:"Custom Tree Items",zh:"定制树图元素样式"},childrenKey:"demos",order:5},{demos:[{id:"customTreeLayout",screenshot:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*w1TnRbLkYVIAAAAAAAAAAAAADmJ7AQ/original",source:'import G6 from \'@antv/g6\';\nimport HierarchyLayout from \'@antv/hierarchy\';\n\nconst Hierarchy = HierarchyLayout || window.Hierarchy;\n\n\nfetch(\n  "https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json"\n)\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById("container");\n    const width = container.scrollWidth;\n    const height = container.scrollHeight || 500;\n    const graph = new G6.TreeGraph({\n      container: "container",\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: "collapse-expand",\n            onChange: function onChange(item, collapsed) {\n              const data = item.getModel();\n              data.collapsed = collapsed;\n              return true;\n            }\n          },\n          "drag-canvas",\n          "zoom-canvas"\n        ]\n      },\n      defaultNode: {\n        type: "rect",\n        size: [50, 20],\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5]\n        ]\n      },\n      defaultEdge: {\n        type: "polyline"\n      },\n      layout: (data) => {\n        let subtree;\n        G6.Util.traverseTree(data, (sub) => {\n          if (sub.id === "Consensus") subtree = sub;\n        });\n        const indentedConfig = {\n          direction: "LR",\n          indent: 80,\n          getHeight: () => {\n            return 10;\n          }\n        };\n        const subtreeLayoutData = Hierarchy["indented"](\n          subtree,\n          indentedConfig\n        );\n        let minY = Infinity;\n        let maxY = -Infinity;\n        G6.Util.traverseTree(subtreeLayoutData, (child) => {\n          if (child.y < minY) minY = child.y;\n          if (child.y > maxY) maxY = child.y;\n        });\n        const height = maxY - minY;\n\n        const config = {\n          direction: "LR",\n          getId: function getId(d) {\n            return d.id;\n          },\n          getHeight: function getHeight(d) {\n            if (d.id === "Consensus") return height + 10;\n            return 16;\n          },\n          getWidth: function getWidth() {\n            return 16;\n          },\n          getVGap: function getVGap(d) {\n            return 10;\n          },\n          getHGap: function getHGap() {\n            return 100;\n          }\n        };\n        const treeLayoutData = Hierarchy["mindmap"](data, config);\n        let x, y;\n        G6.Util.traverseTree(treeLayoutData, (sub) => {\n          if (sub.id === "Consensus") {\n            x = sub.x;\n            y = sub.y;\n          }\n        });\n        G6.Util.traverseTree(subtreeLayoutData, (sub) => {\n          sub.x += x;\n          sub.y += y;\n        });\n        G6.Util.traverseTree(treeLayoutData, (sub) => {\n          sub.children?.forEach((child, i) => {\n            if (child.id === "Consensus") {\n              sub.children.splice(i, 1, subtreeLayoutData);\n              console.log("cild", sub.children);\n            }\n          });\n        });\n\n        return treeLayoutData;\n      }\n    });\n\n    graph.node(function (node) {\n      return {\n        label: node.id,\n        labelCfg: {\n          offset: 10,\n          position: node.children && node.children.length > 0 ? "left" : "right"\n        }\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    if (typeof window !== "undefined")\n      window.onresize = () => {\n        if (!graph || graph.get("destroyed")) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight)\n          return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight);\n      };\n  });\n',title:{zh:"自定义树图布局",en:"Custom Tree Layout"},filename:"customTreeLayout.js",isNew:!1}],icon:"",id:"customLayout",title:{en:"Custom Tree Layout",zh:"自定义树图布局"},childrenKey:"demos",order:6}],childrenKey:"examples"},{id:"item",title:{zh:"元素",en:"Item"},icon:"shape",examples:[{demos:[{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*8QIsS5rud6oAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'circle',\n      label: 'Circle',\n      x: 250,\n      y: 150,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    /* node type */\n    type: 'circle',\n    /* node size */\n    size: [60],\n    /* style for the keyShape */\n    // style: {\n    //   fill: '#9EC9FF',\n    //   stroke: '#5B8FF9',\n    //   lineWidth: 3,\n    // },\n    labelCfg: {\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'bottom',\n      /* label's offset to the keyShape, 4 by default */\n      //   offset: 12,\n      /* label's style */\n      //   style: {\n      //     fontSize: 20,\n      //     fill: '#ccc',\n      //     fontWeight: 500\n      //   }\n    },\n    /* configurations for four linkpoints */\n    linkPoints: {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true,\n      /* linkPoints' size, 8 by default */\n      //   size: 5,\n      /* linkPoints' style */\n      //   fill: '#ccc',\n      //   stroke: '#333',\n      //   lineWidth: 2,\n    },\n    /* icon configuration */\n    icon: {\n      /* whether show the icon, false by default */\n      show: true,\n      /* icon's img address, string type */\n      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',\n      /* icon's size, 20 * 20 by default: */\n      //   width: 40,\n      //   height: 40\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // nodeStateStyles: {\n  //   // node style of active state\n  //   active: {\n  //     fillOpacity: 0.8,\n  //   },\n  //   // node style of selected state\n  //   selected: {\n  //     lineWidth: 5,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"圆形",en:"Circle"},filename:"circle.js",isNew:!1},{id:"donut",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NRJ7RpkMPNsAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'donut',\n      label: 'Donut',\n      x: 250,\n      y: 150,\n      // the attributes for drawing donut\n      donutAttrs: {\n        prop1: 10,\n        prop2: 20,\n        prop3: 25\n      },\n      // the color map for drawing donut\n      donutColorMap: {\n        prop1: '#8eaade',\n        prop2: '#5c7cb8',\n        prop3: '#1e3f7d'\n      },\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    /* node type, the priority is lower than the type in the node data */\n    type: 'donut',\n    /* node size */\n    size: 60,\n    /* style for the keyShape */\n    // style: {\n    //   fill: '#9EC9FF',\n    //   stroke: '#5B8FF9',\n    //   lineWidth: 3,\n    // },\n    labelCfg: {\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'bottom',\n      /* label's offset to the keyShape, 4 by default */\n      //   offset: 12,\n      /* label's style */\n      //   style: {\n      //     fontSize: 20,\n      //     fill: '#ccc',\n      //     fontWeight: 500\n      //   }\n    },\n    /* configurations for four linkpoints */\n    // linkPoints: {\n    //   top: true,\n    //   right: true,\n    //   bottom: true,\n    //   left: true,\n    //   /* linkPoints' size, 8 by default */\n    //   //   size: 5,\n    //   /* linkPoints' style */\n    //   //   fill: '#ccc',\n    //   //   stroke: '#333',\n    //   //   lineWidth: 2,\n    // },\n    /* icon configuration */\n    icon: {\n      /* whether show the icon, false by default */\n      show: true,\n      /* icon's img address, string type */\n      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',\n      /* icon's size, 20 * 20 by default: */\n      //   width: 40,\n      //   height: 40\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // nodeStateStyles: {\n  //   // node style of active state\n  //   active: {\n  //     fillOpacity: 0.8,\n  //   },\n  //   // node style of selected state\n  //   selected: {\n  //     lineWidth: 5,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"甜甜圈",en:"Donut"},filename:"donut.js",isNew:!1},{id:"ellipse",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tWyKToNjzWMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'ellipse',\n      label: 'Ellipse',\n      x: 250,\n      y: 150,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'ellipse',\n    size: [80, 50],\n    /* style for the keyShape */\n    // style: {\n    //   fill: '#9EC9FF',\n    //   stroke: '#5B8FF9',\n    //   lineWidth: 3,\n    // },\n    labelCfg: {\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'bottom',\n      /* label's offset to the keyShape, 4 by default */\n      //   offset: 12,\n      /* label's style */\n      //   style: {\n      //     fontSize: 20,\n      //     fill: '#ccc',\n      //     fontWeight: 500\n      //   }\n    },\n    /* configurations for four linkpoints */\n    linkPoints: {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true,\n      /* linkPoints' size, 8 by default */\n      //   size: 5,\n      /* linkPoints' style */\n      //   fill: '#ccc',\n      //   stroke: '#333',\n      //   lineWidth: 2,\n    },\n    /* icon configuration */\n    icon: {\n      /* whether show the icon, false by default */\n      show: true,\n      /* icon's img address, string type */\n      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',\n      /* icon's size, 20 * 20 by default: */\n      //   width: 40,\n      //   height: 40\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // nodeStateStyles: {\n  //   // node style of active state\n  //   active: {\n  //     fillOpacity: 0.8,\n  //   },\n  //   // node style of selected state\n  //   selected: {\n  //     lineWidth: 5,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\n\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"椭圆",en:"Ellipse"},filename:"ellipse.js",isNew:!1},{id:"rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pnaTQYJ3kaQAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'rect',\n      label: 'rect',\n      x: 250,\n      y: 150,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    /* node type */\n    type: 'rect',\n    /* node size */\n    size: [80, 40],\n    /* style for the keyShape */\n    // style: {\n    //   fill: '#9EC9FF',\n    //   stroke: '#5B8FF9',\n    //   lineWidth: 3,\n    //   radius: 10\n    // },\n    labelCfg: {\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'center',\n      /* label's offset to the keyShape, 4 by default */\n      //   offset: 12,\n      /* label's style */\n      //   style: {\n      //     fontSize: 20,\n      //     fill: '#ccc',\n      //     fontWeight: 500\n      //   }\n    },\n    /* configurations for four linkpoints */\n    linkPoints: {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true,\n      /* linkPoints' size, 8 by default */\n      //   size: 5,\n      /* linkPoints' style */\n      //   fill: '#ccc',\n      //   stroke: '#333',\n      //   lineWidth: 2,\n    },\n    /* icon configuration */\n    icon: {\n      /* whether show the icon, false by default */\n      show: true,\n      /* icon's img address, string type */\n      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',\n      /* icon's size, 20 * 20 by default: */\n      //   width: 40,\n      //   height: 40\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // nodeStateStyles: {\n  //   // node style of active state\n  //   active: {\n  //     fillOpacity: 0.8,\n  //   },\n  //   // node style of selected state\n  //   selected: {\n  //     lineWidth: 5,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\n\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"矩形",en:"Rect"},filename:"rect.js",isNew:!1},{id:"modelRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*w4kQSYQ9djQAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'rect1',\n      label: 'rect1',\n      description: 'description, hidden when undefined',\n      x: 250,\n      y: 150,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    type: 'modelRect',\n    size: [270, 80],\n    style: {\n      radius: 5,\n      stroke: '#69c0ff',\n      fill: '#ffffff',\n      lineWidth: 1,\n      fillOpacity: 1,\n    },\n    // label configurations\n    labelCfg: {\n      style: {\n        fill: '#595959',\n        fontSize: 14,\n      },\n      offset: 30,\n    },\n    // left rect\n    preRect: {\n      show: true,\n      width: 4,\n      fill: '#40a9ff',\n      radius: 2,\n    },\n    // configurations for the four linkpoints\n    linkPoints: {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false,\n      // the size of the linkpoints' circle\n      size: 10,\n      lineWidth: 1,\n      fill: '#72CC4A',\n      stroke: '#72CC4A',\n    },\n    // configurations for the icon\n    logoIcon: {\n      // whether to show the icon\n      show: true,\n      x: 0,\n      y: 0,\n      // the image url for the icon, string type\n      img:\n        'https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg',\n      width: 16,\n      height: 16,\n      // adjust the offset along x-axis for the icon\n      offset: 0,\n    },\n    // configurations for state icon\n    stateIcon: {\n      // whether to show the icon\n      show: true,\n      x: 0,\n      y: 0,\n      // the image url for the icon, string type\n      img:\n        'https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg',\n      width: 16,\n      height: 16,\n      // adjust hte offset along x-axis for the icon\n      offset: -5,\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  nodeStateStyles: {\n    hover: {\n      lineWidth: 2,\n      stroke: '#1890ff',\n      fill: '#e6f7ff',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'hover', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'hover', false);\n});\n",title:{zh:"模态矩形",en:"ModelRect"},filename:"modelRect.js",isNew:!1},{id:"diamond",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*6XXCTZxhib0AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'diamond',\n      label: 'Diamond',\n      x: 250,\n      y: 150,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'diamond',\n    /* node size */\n    size: [80, 60],\n    /* style for the keyShape */\n    // style: {\n    //   fill: '#9EC9FF',\n    //   stroke: '#5B8FF9',\n    //   lineWidth: 3,\n    // },\n    labelCfg: {\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'bottom',\n      /* label's offset to the keyShape, 4 by default */\n      //   offset: 12,\n      /* label's style */\n      //   style: {\n      //     fontSize: 20,\n      //     fill: '#ccc',\n      //     fontWeight: 500\n      //   }\n    },\n    /* configurations for four linkpoints */\n    linkPoints: {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true,\n      /* linkPoints' size, 8 by default */\n      //   size: 5,\n      /* linkPoints' style */\n      //   fill: '#ccc',\n      //   stroke: '#333',\n      //   lineWidth: 2,\n    },\n    /* icon configuration */\n    icon: {\n      /* whether show the icon, false by default */\n      show: true,\n      /* icon's img address, string type */\n      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',\n      /* icon's size, 20 * 20 by default: */\n      //   width: 40,\n      //   height: 40\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // nodeStateStyles: {\n  //   // node style of active state\n  //   active: {\n  //     fillOpacity: 0.8,\n  //   },\n  //   // node style of selected state\n  //   selected: {\n  //     lineWidth: 5,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\n\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"模态菱形矩形",en:"Diamond"},filename:"diamond.js",isNew:!1},{id:"star",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*-unkSZtlDeAAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'star',\n      label: 'Star',\n      x: 250,\n      y: 200,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    /* node type */\n    type: 'star',\n    /* node size */\n    size: [60, 30],\n    /* style for the keyShape */\n    // style: {\n    //   fill: '#9EC9FF',\n    //   stroke: '#5B8FF9',\n    //   lineWidth: 3,\n    // },\n    labelCfg: {\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'bottom',\n      /* label's offset to the keyShape, 4 by default */\n      offset: 20,\n      /* label's style */\n      //   style: {\n      //     fontSize: 20,\n      //     fill: '#ccc',\n      //     fontWeight: 500\n      //   }\n    },\n    /* configurations for four linkpoints */\n    linkPoints: {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true,\n      /* linkPoints' size, 8 by default */\n      //   size: 5,\n      /* linkPoints' style */\n      //   fill: '#ccc',\n      //   stroke: '#333',\n      //   lineWidth: 2,\n    },\n    /* icon configuration */\n    icon: {\n      /* whether show the icon, false by default */\n      show: true,\n      /* icon's img address, string type */\n      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',\n      /* icon's size, 20 * 20 by default: */\n      //   width: 40,\n      //   height: 40\n    },\n    /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n    // nodeStateStyles: {\n    //   // node style of active state\n    //   active: {\n    //     fillOpacity: 0.8,\n    //   },\n    //   // node style of selected state\n    //   selected: {\n    //     lineWidth: 5,\n    //   },\n    // },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"五角星",en:"Star"},filename:"star.js",isNew:!1},{id:"triangle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*i2tETYnJ0dIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'circle',\n      label: 'Triangle',\n      x: 250,\n      y: 200,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'triangle',\n    size: [40],\n    // options: down, up\n    direction: 'up',\n    /* style for the keyShape */\n    // style: {\n    //   fill: '#9EC9FF',\n    //   stroke: '#5B8FF9',\n    //   lineWidth: 3,\n    // },\n    labelCfg: {\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'bottom',\n      /* label's offset to the keyShape, 4 by default */\n      offset: 20,\n      /* label's style */\n      //   style: {\n      //     fontSize: 20,\n      //     fill: '#ccc',\n      //     fontWeight: 500\n      //   }\n    },\n    /* configurations for four linkpoints */\n    linkPoints: {\n      top: true,\n      right: true,\n      bottom: true,\n      left: true,\n      /* linkPoints' size, 8 by default */\n      //   size: 5,\n      /* linkPoints' style */\n      //   fill: '#ccc',\n      //   stroke: '#333',\n      //   lineWidth: 2,\n    },\n    /* icon configuration */\n    icon: {\n      /* whether show the icon, false by default */\n      show: true,\n      /* icon's img address, string type */\n      // img: 'https://gw.alipayobjects.com/zos/basement_prod/012bcf4f-423b-4922-8c24-32a89f8c41ce.svg',\n      /* icon's size, 20 * 20 by default: */\n      //   width: 40,\n      //   height: 40\n    },\n    /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n    // nodeStateStyles: {\n    //   // node style of active state\n    //   active: {\n    //     fillOpacity: 0.8,\n    //   },\n    //   // node style of selected state\n    //   selected: {\n    //     lineWidth: 5,\n    //   },\n    // },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('node:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getNodes().forEach((node) => {\n    graph.clearItemStates(node);\n  });\n});\n",title:{zh:"三角形",en:"Triangle"},filename:"triangle.js",isNew:!1},{id:"image",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*o-MuTpQaj7EAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'image',\n      img: 'https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg',\n      x: 250,\n      y: 150,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    type: 'image',\n    size: [260, 80],\n    clipCfg: {\n      show: false,\n      // Clip type options: circle, ellipse, rect, path\n      type: 'circle',\n      // circle\n      r: 30,\n      // clip style\n      style: {\n        lineWidth: 1,\n      },\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n",title:{zh:"图片",en:"Image"},filename:"image.js",isNew:!1}],icon:"",id:"defaultNodes",title:{en:"Built-in Nodes",zh:"内置节点"},childrenKey:"demos",order:0},{demos:[{id:"polyline1",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tGX6S5r94wkAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The usage of built-in polyline\n * by Shiwu\n */\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      x: 150,\n      y: 100,\n    },\n    {\n      id: '1',\n      x: 350,\n      y: 300,\n    },\n  ],\n  edges: [\n    // Built-in polyline\n    {\n      source: '0',\n      target: '1',\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  // make the edge link to the centers of the end nodes\n  linkCenter: true,\n  modes: {\n    // behavior\n    default: ['drag-node'],\n  },\n  defaultEdge: {\n    type: 'polyline',\n    /* you can configure the global edge style as following lines */\n    // style: {\n    //   stroke: '#F6BD16',\n    // },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // edgeStateStyles: {\n  //   // edge style of active state\n  //   active: {\n  //     opacity: 0.5,\n  //     stroke: '#f00'\n  //   },\n  //   // edge style of selected state\n  //   selected: {\n  //     stroke: '#ff0'\n  //     lineWidth: 3,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('edge:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('edge:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('edge:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getEdges().forEach((edge) => {\n    graph.clearItemStates(edge);\n  });\n});\n",title:{zh:"折线 1",en:"Polyline 1"},filename:"polyline1.js",isNew:!1},{id:"polyline2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*CA7oQJIkIl8AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Built-in polyline edge with configurations\n * by 十吾\n */\n\nconst data = {\n  nodes: [\n    {\n      id: '2',\n      x: 150,\n      y: 150,\n    },\n    {\n      id: '3',\n      x: 350,\n      y: 250,\n    },\n  ],\n  edges: [\n    {\n      source: '2',\n      target: '3',\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  /* translate the graph to align the canvas's center, support by v3.5.1 */\n  fitCenter: true,\n  modes: {\n    /* behavior */\n    default: ['drag-node'],\n  },\n  defaultEdge: {\n    type: 'polyline',\n    /* configure the bending radius and min distance to the end nodes */\n    style: {\n      radius: 10,\n      offset: 30,\n      endArrow: true,\n      /* and other styles */\n      // stroke: '#F6BD16',\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // edgeStateStyles: {\n  //   // edge style of active state\n  //   active: {\n  //     opacity: 0.5,\n  //     stroke: '#f00'\n  //   },\n  //   // edge style of selected state\n  //   selected: {\n  //     stroke: '#ff0'\n  //     lineWidth: 3,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('edge:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('edge:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('edge:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getEdges().forEach((edge) => {\n    graph.clearItemStates(edge);\n  });\n});\n",title:{zh:"折线 2",en:"Polyline 2"},filename:"polyline2.js",isNew:!1},{id:"polyline3",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*E-MJQqf9mSUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Usage of built-in polyline edge with controlPoints\n * by 十吾\n */\n\nconst data = {\n  nodes: [\n    {\n      id: '4',\n      x: 150,\n      y: 100,\n    },\n    {\n      id: '5',\n      x: 350,\n      y: 250,\n    },\n  ],\n  edges: [\n    {\n      source: '4',\n      target: '5',\n      // assign the control points to control the bending positions\n      controlPoints: [\n        {\n          x: 260,\n          y: 80,\n        },\n        {\n          x: 320,\n          y: 50,\n        },\n        {\n          x: 390,\n          y: 110,\n        },\n        {\n          x: 420,\n          y: 110,\n        },\n        {\n          x: 420,\n          y: 140,\n        },\n      ],\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  // make the edge link to the centers of the end nodes\n  linkCenter: true,\n  modes: {\n    // behavior\n    default: ['drag-node'],\n  },\n  defaultEdge: {\n    type: 'polyline',\n    /* you can configure the global edge style as following lines */\n    // style: {\n    //   stroke: '#F6BD16',\n    // },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // edgeStateStyles: {\n  //   // edge style of active state\n  //   active: {\n  //     opacity: 0.5,\n  //     stroke: '#f00'\n  //   },\n  //   // edge style of selected state\n  //   selected: {\n  //     stroke: '#ff0'\n  //     lineWidth: 3,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('edge:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('edge:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('edge:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getEdges().forEach((edge) => {\n    graph.clearItemStates(edge);\n  });\n});\n",title:{zh:"折线 3",en:"Polyline 3"},filename:"polyline3.js",isNew:!1},{id:"cubic1",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*UO_sQp0XftMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The usage of cubic edge\n *  **/\n\nG6.registerNode(\n  'my-rect',\n  {\n    getAnchorPoints: function getAnchorPoints() {\n      return [\n        [0.5, 0],\n        [0.5, 1],\n      ];\n    },\n  },\n  'rect',\n);\n\nconst data = {\n  nodes: [\n    {\n      id: 'node0',\n      x: 200,\n      y: 10,\n      size: 20,\n    },\n    {\n      id: 'node1',\n      x: 200,\n      y: 50,\n      label: '1222',\n      type: 'my-rect',\n    },\n    {\n      id: 'node2',\n      x: 150,\n      y: 150,\n      type: 'my-rect',\n    },\n    {\n      id: 'node3',\n      x: 250,\n      y: 150,\n      type: 'my-rect',\n    },\n    {\n      id: 'node4',\n      x: 200,\n      y: 250,\n      type: 'my-rect',\n    },\n  ],\n  edges: [\n    {\n      source: 'node0',\n      target: 'node1',\n    },\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n    {\n      source: 'node1',\n      target: 'node3',\n    },\n    {\n      source: 'node2',\n      target: 'node4',\n    },\n    {\n      source: 'node3',\n      target: 'node4',\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas'],\n  },\n  defaultEdge: {\n    type: 'cubic-vertical',\n    /* you can configure the global edge style as following lines */\n    // style: {\n    //   stroke: '#F6BD16',\n    // },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // edgeStateStyles: {\n  //   // edge style of active state\n  //   active: {\n  //     opacity: 0.5,\n  //     stroke: '#f00'\n  //   },\n  //   // edge style of selected state\n  //   selected: {\n  //     stroke: '#ff0'\n  //     lineWidth: 3,\n  //   },\n  // },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('edge:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('edge:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('edge:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getEdges().forEach((edge) => {\n    graph.clearItemStates(edge);\n  });\n});\n",title:{zh:"三次贝塞尔曲线-垂直",en:"Vertical Cubic"},filename:"cubic1.js",isNew:!1},{id:"cubic2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*LxFySJ-uvhMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The usage of cubic edge\n *\n *  **/\nconst data = {\n  nodes: [\n    {\n      id: 'node5',\n      x: 150,\n      y: 200,\n      label: '5',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n    },\n    {\n      id: 'node6',\n      x: 300,\n      y: 150,\n      label: '6',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n    },\n    {\n      id: 'node7',\n      x: 300,\n      y: 250,\n      label: '7',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n    },\n  ],\n  edges: [\n    {\n      source: 'node5',\n      target: 'node6',\n      type: 'cubic-horizontal',\n    },\n    {\n      source: 'node5',\n      target: 'node7',\n      type: 'cubic-horizontal',\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas'],\n  },\n  defaultEdge: {\n    type: 'cubic-horizontal',\n    /* you can configure the global edge style as following lines */\n    // style: {\n    //   stroke: '#F6BD16',\n    // },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // edgeStateStyles: {\n  //   // edge style of active state\n  //   active: {\n  //     opacity: 0.5,\n  //     stroke: '#f00'\n  //   },\n  //   // edge style of selected state\n  //   selected: {\n  //     stroke: '#ff0'\n  //     lineWidth: 3,\n  //   },\n  // },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('edge:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('edge:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('edge:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getEdges().forEach((edge) => {\n    graph.clearItemStates(edge);\n  });\n});\n",title:{zh:"三次贝塞尔曲线-水平",en:"Horizontal Cubic"},filename:"cubic2.js",isNew:!1},{id:"arc",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*xkK6QoNUszgAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The usage of arc edge\n * by Shiwu\n */\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      x: 150,\n      y: 50,\n    },\n    {\n      id: '1',\n      x: 350,\n      y: 250,\n    },\n  ],\n  edges: [\n    // Built-in arc edges\n    {\n      id: 'edge0',\n      source: '0',\n      target: '1',\n      label: 'curveOffset = 20',\n      curveOffset: 20,\n    },\n    {\n      id: 'edge1',\n      source: '0',\n      target: '1',\n      label: 'curveOffset = 50', // the bending degree\n      curveOffset: 50,\n    },\n    {\n      id: 'edge2',\n      source: '0',\n      target: '1',\n      label: 'curveOffset = -50', // the bending degree\n      curveOffset: -50,\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    // 支持的 behavior\n    default: ['drag-node'],\n  },\n  defaultEdge: {\n    type: 'arc',\n    /* you can configure the global edge style as following lines */\n    // style: {\n    //   stroke: '#F6BD16',\n    // },\n    labelCfg: {\n      autoRotate: true,\n      refY: -10,\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // edgeStateStyles: {\n  //   // edge style of active state\n  //   active: {\n  //     opacity: 0.5,\n  //     stroke: '#f00'\n  //   },\n  //   // edge style of selected state\n  //   selected: {\n  //     stroke: '#ff0'\n  //     lineWidth: 3,\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('edge:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('edge:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('edge:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getEdges().forEach((edge) => {\n    graph.clearItemStates(edge);\n  });\n});\n",title:{zh:"弧线",en:"Arc"},filename:"arc.js",isNew:!1},{id:"loop",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W8wxRJk_q8wAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      x: 150,\n      y: 150,\n    },\n    {\n      id: '1',\n      x: 350,\n      y: 150,\n    },\n  ],\n  edges: [\n    // 内置 loop\n    {\n      source: '0',\n      target: '0',\n    },\n    {\n      source: '1',\n      target: '1',\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center\n  fitCenter: true,\n  modes: {\n    // 支持的 behavior\n    default: ['drag-node'],\n  },\n  defaultEdge: {\n    type: 'loop',\n    /* you can configure the global edge style as following lines */\n    style: {\n      // stroke: '#F6BD16',\n      endArrow: {\n        path: 'M 0,0 L 20,10 L 20,-10 Z',\n        fill: '#eee',\n      },\n    },\n    // 更多关于 loop 的配置请参考http://antv.alipay.com/zh/docs/manual/middle/elements/edges/loop/#%E8%87%AA%E7%8E%AF%E7%89%B9%E6%AE%8A%E9%85%8D%E7%BD%AE-loopcfg\n    loopCfg: {\n      position: 'top',\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // edgeStateStyles: {\n  //   // edge style of active state\n  //   active: {\n  //     opacity: 0.5,\n  //     stroke: '#f00'\n  //   },\n  //   // edge style of selected state\n  //   selected: {\n  //     stroke: '#ff0'\n  //     lineWidth: 3,\n  //   },\n  // },\n});\n\n// 需要等 G 4.0 局部渲染完善后，就不用临时关闭了\nconst canvas = graph.get('canvas');\ncanvas.set('localRefresh', false);\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('edge:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('edge:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\ngraph.on('edge:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getEdges().forEach((edge) => {\n    graph.clearItemStates(edge);\n  });\n});\n",title:{zh:"自环边",en:"Loop"},filename:"loop.js",isNew:!1}],icon:"",id:"defaultEdges",title:{en:"Built-in Edges",zh:"内置边"},childrenKey:"demos",order:1},{demos:[{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Rvx9SYSHGsIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 250,\n      y: 150,\n      comboId: 'combo',\n    },\n    {\n      id: 'node2',\n      x: 350,\n      y: 150,\n      comboId: 'combo',\n    },\n    {\n      id: 'node3',\n      x: 250,\n      y: 300,\n      comboId: 'combo2',\n    },\n    {\n      id: 'node4',\n      x: 450,\n      y: 300,\n      comboId: 'combo2',\n    },\n  ],\n  combos: [\n    {\n      id: 'combo',\n      label: 'Combo',\n    },\n    {\n      id: 'combo2',\n      label: 'with substitute icon while collapsed',\n      collapsed: true,\n      collapsedSubstituteIcon: {\n        show: true,\n        img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IEQFS5VtXX8AAAAAAAAAAABkARQnAQ',\n        width: 72,\n        height: 72\n      }\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo'],\n  },\n  defaultCombo: {\n    type: 'circle',\n    /* style for the keyShape */\n    // style: {\n    //   lineWidth: 1,\n    // },\n    labelCfg: {\n      /* label's offset to the keyShape */\n      // refY: 10,\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'top',\n      /* label's style */\n      // style: {\n      //   fontSize: 18,\n      // },\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  /* you can extend it or override it as you want */\n  // comboStateStyles: {\n  //   active: {\n  //     fill: '#f00',\n  //     opacity: 0.5\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('combo:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('combo:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\ngraph.on('combo:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getCombos().forEach((combo) => {\n    graph.clearItemStates(combo);\n  });\n});\n",title:"圆形",filename:"circle.js",isNew:!1},{id:"rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*qvmVTZc-iNcAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 250,\n      y: 150,\n      comboId: 'combo',\n    },\n    {\n      id: 'node2',\n      x: 350,\n      y: 150,\n      comboId: 'combo',\n    },\n    {\n      id: 'node3',\n      x: 250,\n      y: 300,\n      comboId: 'combo2',\n    },\n    {\n      id: 'node4',\n      x: 450,\n      y: 300,\n      comboId: 'combo2',\n    },\n  ],\n  combos: [\n    {\n      id: 'combo',\n      label: 'Combo',\n    },\n    {\n      id: 'combo2',\n      label: 'with substitute icon while collapsed',\n      collapsed: true,\n      collapsedSubstituteIcon: {\n        show: true,\n        img: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*IEQFS5VtXX8AAAAAAAAAAABkARQnAQ',\n        width: 72,\n        height: 72\n      }\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo'],\n  },\n  defaultCombo: {\n    type: 'rect',\n    /* The minimum size of the combo. combo 最小大小 */\n    size: [50, 50],\n    /* style for the keyShape */\n    // style: {\n    //   lineWidth: 1,\n    // },\n    labelCfg: {\n      /* label's offset to the keyShape */\n      // refY: 10,\n      /* label's position, options: center, top, bottom, left, right */\n      position: 'top',\n      /* label's style */\n      // style: {\n      //   fontSize: 18,\n      // },\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  /* you can extend it or override it as you want */\n  // comboStateStyles: {\n  //   active: {\n  //     fill: '#f00',\n  //     opacity: 0.5\n  //   },\n  // },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('combo:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('combo:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\ngraph.on('combo:click', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'selected', true);\n});\ngraph.on('canvas:click', (evt) => {\n  graph.getCombos().forEach((combo) => {\n    graph.clearItemStates(combo);\n  });\n});\n",title:"矩形",filename:"rect.js",isNew:!1}],icon:"",id:"defaultCombos",title:{en:"Built-in Combos",zh:"内置 Combo"},childrenKey:"demos",order:2},{demos:[{id:"built-in-arrows",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mGusTo9FcCYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The usage of arrows\n * by Shiwu\n */\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      x: 150,\n      y: 50,\n    },\n    {\n      id: '1',\n      x: 350,\n      y: 50,\n    },\n    {\n      id: '2',\n      x: 150,\n      y: 100,\n    },\n    {\n      id: '3',\n      x: 350,\n      y: 100,\n    },\n    {\n      id: '4',\n      x: 150,\n      y: 150,\n    },\n    {\n      id: '5',\n      x: 350,\n      y: 150,\n    },\n    {\n      id: '6',\n      x: 150,\n      y: 200,\n    },\n    {\n      id: '7',\n      x: 350,\n      y: 200,\n    },\n    {\n      id: '8',\n      x: 150,\n      y: 250,\n    },\n    {\n      id: '9',\n      x: 350,\n      y: 250,\n    },\n    {\n      id: '10',\n      x: 150,\n      y: 300,\n    },\n    {\n      id: '11',\n      x: 350,\n      y: 300,\n    },\n    {\n      id: '12',\n      x: 150,\n      y: 350,\n    },\n    {\n      id: '13',\n      x: 350,\n      y: 350,\n    },\n    {\n      id: '14',\n      x: 150,\n      y: 400,\n    },\n    {\n      id: '15',\n      x: 350,\n      y: 400,\n    },\n  ],\n  edges: [\n    {\n      id: 'edge0',\n      source: '0',\n      target: '1',\n      label: 'default arrow',\n      style: {\n        endArrow: true,\n      },\n    },\n    {\n      id: 'edge1',\n      source: '2',\n      target: '3',\n      label: 'triangle arrow',\n      style: {\n        endArrow: {\n          path: G6.Arrow.triangle(),\n        },\n      },\n    },\n    {\n      id: 'edge2',\n      source: '4',\n      target: '5',\n      label: 'vee arrow',\n      style: {\n        endArrow: {\n          path: G6.Arrow.vee(),\n        },\n      },\n    },\n    {\n      id: 'edge3',\n      source: '6',\n      target: '7',\n      label: 'circle arrow',\n      style: {\n        endArrow: {\n          path: G6.Arrow.circle(5, 3),\n          d: 3,\n        },\n      },\n    },\n    {\n      id: 'edge4',\n      source: '8',\n      target: '9',\n      label: 'diamond arrow',\n      style: {\n        endArrow: {\n          path: G6.Arrow.diamond(10, 10, 3),\n          d: 3,\n        },\n      },\n    },\n    {\n      id: 'edge5',\n      source: '10',\n      target: '11',\n      label: 'rect arrow',\n      style: {\n        endArrow: {\n          path: G6.Arrow.rect(10, 10, 3),\n          d: 3,\n        },\n      },\n    },\n    {\n      id: 'edge6',\n      source: '12',\n      target: '13',\n      label: 'rect arrow 2',\n      style: {\n        endArrow: {\n          path: G6.Arrow.rect(10, 2, 5),\n          d: 5,\n        },\n      },\n    },\n    {\n      id: 'edge7',\n      source: '14',\n      target: '15',\n      label: 'triangleRect arrow',\n      style: {\n        endArrow: {\n          path: G6.Arrow.triangleRect(10, 10, 10, 2, 4),\n        },\n      },\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\ndata.edges.forEach((edge) => {\n  edge.style.stroke = '#F6BD16';\n  console.log(edge.style.endArrow);\n  if (edge.id !== 'edge0') edge.style.endArrow.fill = '#F6BD16';\n});\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    size: 15,\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  modes: {\n    // behaviors\n    default: ['drag-node'],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"默认和内置箭头",en:"Default and Built-in Arrows"},filename:"built-in-arrows.js",isNew:!1},{id:"custom-arrows",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*C2ODRb7E9mwAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The usage of arrows\n * by Shiwu\n */\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      x: 150,\n      y: 50,\n    },\n    {\n      id: '1',\n      x: 350,\n      y: 50,\n    },\n    {\n      id: '2',\n      x: 150,\n      y: 100,\n    },\n    {\n      id: '3',\n      x: 350,\n      y: 100,\n    },\n  ],\n  edges: [\n    {\n      id: 'edge0',\n      source: '0',\n      target: '1',\n      label: 'custom arrow 1',\n      style: {\n        endArrow: {\n          path: 'M 3,-5 L 3,5 L 15,10 L 15,-10 Z',\n        },\n      },\n    },\n    {\n      id: 'edge1',\n      source: '2',\n      target: '3',\n      label: 'custom arrow 2',\n      style: {\n        endArrow: {\n          path: 'M0,0 L10,4 L14,14 L18,4 L28,0 L18,-4 L14,-14 L10,-4 Z',\n        },\n      },\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\ndata.edges.forEach((edge) => {\n  edge.style.stroke = '#F6BD16';\n  console.log(edge.style.endArrow);\n  edge.style.endArrow.fill = '#F6BD16';\n});\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    size: 15,\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  modes: {\n    // behaviors\n    default: ['drag-node'],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义箭头",en:"Custom Arrows"},filename:"custom-arrows.js",isNew:!1}],icon:"",id:"arrows",title:{en:"Arrow of Edge",zh:"边的箭头"},childrenKey:"demos",order:3},{demos:[{id:"card",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*3cRGRb5nB_UAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nlet graph;\n\nconst ERROR_COLOR = '#F5222D';\nconst getNodeConfig = (node) => {\n  if (node.nodeError) {\n    return {\n      basicColor: ERROR_COLOR,\n      fontColor: '#FFF',\n      borderColor: ERROR_COLOR,\n      bgColor: '#E66A6C',\n    };\n  }\n  let config = {\n    basicColor: '#5B8FF9',\n    fontColor: '#5B8FF9',\n    borderColor: '#5B8FF9',\n    bgColor: '#C6E5FF',\n  };\n  switch (node.type) {\n    case 'root': {\n      config = {\n        basicColor: '#E3E6E8',\n        fontColor: 'rgba(0,0,0,0.85)',\n        borderColor: '#E3E6E8',\n        bgColor: '#5b8ff9',\n      };\n      break;\n    }\n    default:\n      break;\n  }\n  return config;\n};\n\nconst COLLAPSE_ICON = function COLLAPSE_ICON(x, y, r) {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n  ];\n};\nconst EXPAND_ICON = function EXPAND_ICON(x, y, r) {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n    ['M', x - r + r, y - r + 4],\n    ['L', x, y + r - 4],\n  ];\n};\nconst nodeBasicMethod = {\n  createNodeBox: (group, config, w, h, isRoot) => {\n    /* 最外面的大矩形 */\n    const container = group.addShape('rect', {\n      attrs: {\n        x: 0,\n        y: 0,\n        width: w,\n        height: h,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'big-rect-shape',\n    });\n    if (!isRoot) {\n      /* 左边的小圆点 */\n      group.addShape('circle', {\n        attrs: {\n          x: 3,\n          y: h / 2,\n          r: 6,\n          fill: config.basicColor,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'left-dot-shape',\n      });\n    }\n    /* 矩形 */\n    group.addShape('rect', {\n      attrs: {\n        x: 3,\n        y: 0,\n        width: w - 19,\n        height: h,\n        fill: config.bgColor,\n        stroke: config.borderColor,\n        radius: 2,\n        cursor: 'pointer',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'rect-shape',\n    });\n\n    /* 左边的粗线 */\n    group.addShape('rect', {\n      attrs: {\n        x: 3,\n        y: 0,\n        width: 3,\n        height: h,\n        fill: config.basicColor,\n        radius: 1.5,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'left-border-shape',\n    });\n    return container;\n  },\n  /* 生成树上的 marker */\n  createNodeMarker: (group, collapsed, x, y) => {\n    group.addShape('circle', {\n      attrs: {\n        x,\n        y,\n        r: 13,\n        fill: 'rgba(47, 84, 235, 0.05)',\n        opacity: 0,\n        zIndex: -2,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'collapse-icon-bg',\n    });\n    group.addShape('marker', {\n      attrs: {\n        x,\n        y,\n        r: 7,\n        symbol: collapsed ? EXPAND_ICON : COLLAPSE_ICON,\n        stroke: 'rgba(0,0,0,0.25)',\n        fill: 'rgba(0,0,0,0)',\n        lineWidth: 1,\n        cursor: 'pointer',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'collapse-icon',\n    });\n  },\n  afterDraw: (cfg, group) => {\n    /* 操作 marker 的背景色显示隐藏 */\n    const icon = group.find((element) => element.get('name') === 'collapse-icon');\n    if (icon) {\n      const bg = group.find((element) => element.get('name') === 'collapse-icon-bg');\n      icon.on('mouseenter', () => {\n        bg.attr('opacity', 1);\n        graph.get('canvas').draw();\n      });\n      icon.on('mouseleave', () => {\n        bg.attr('opacity', 0);\n        graph.get('canvas').draw();\n      });\n    }\n    /* ip 显示 */\n    const ipBox = group.find((element) => element.get('name') === 'ip-box');\n    if (ipBox) {\n      /* ip 复制的几个元素 */\n      const ipLine = group.find((element) => element.get('name') === 'ip-cp-line');\n      const ipBG = group.find((element) => element.get('name') === 'ip-cp-bg');\n      const ipIcon = group.find((element) => element.get('name') === 'ip-cp-icon');\n      const ipCPBox = group.find((element) => element.get('name') === 'ip-cp-box');\n\n      const onMouseEnter = () => {\n        ipLine.attr('opacity', 1);\n        ipBG.attr('opacity', 1);\n        ipIcon.attr('opacity', 1);\n        graph.get('canvas').draw();\n      };\n      const onMouseLeave = () => {\n        ipLine.attr('opacity', 0);\n        ipBG.attr('opacity', 0);\n        ipIcon.attr('opacity', 0);\n        graph.get('canvas').draw();\n      };\n      ipBox.on('mouseenter', () => {\n        onMouseEnter();\n      });\n      ipBox.on('mouseleave', () => {\n        onMouseLeave();\n      });\n      ipCPBox.on('mouseenter', () => {\n        onMouseEnter();\n      });\n      ipCPBox.on('mouseleave', () => {\n        onMouseLeave();\n      });\n      ipCPBox.on('click', () => { });\n    }\n  },\n  setState: (name, value, item) => {\n    const hasOpacityClass = [\n      'ip-cp-line',\n      'ip-cp-bg',\n      'ip-cp-icon',\n      'ip-cp-box',\n      'ip-box',\n      'collapse-icon-bg',\n    ];\n    const group = item.getContainer();\n    const childrens = group.get('children');\n    graph.setAutoPaint(false);\n    if (name === 'emptiness') {\n      if (value) {\n        childrens.forEach((shape) => {\n          if (hasOpacityClass.indexOf(shape.get('name')) > -1) {\n            return;\n          }\n          shape.attr('opacity', 0.4);\n        });\n      } else {\n        childrens.forEach((shape) => {\n          if (hasOpacityClass.indexOf(shape.get('name')) > -1) {\n            return;\n          }\n          shape.attr('opacity', 1);\n        });\n      }\n    }\n    graph.setAutoPaint(true);\n  },\n};\n\nG6.registerNode('card-node', {\n  draw: (cfg, group) => {\n    const config = getNodeConfig(cfg);\n    const isRoot = cfg.dataType === 'root';\n    const nodeError = cfg.nodeError;\n    /* the biggest rect */\n    const container = nodeBasicMethod.createNodeBox(group, config, 243, 64, isRoot);\n\n    if (cfg.dataType !== 'root') {\n      /* the type text */\n      group.addShape('text', {\n        attrs: {\n          text: cfg.dataType,\n          x: 3,\n          y: -10,\n          fontSize: 12,\n          textAlign: 'left',\n          textBaseline: 'middle',\n          fill: 'rgba(0,0,0,0.65)',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'type-text-shape',\n      });\n    }\n\n    if (cfg.ip) {\n      /* ip start */\n      /* ipBox */\n      const ipRect = group.addShape('rect', {\n        attrs: {\n          fill: nodeError ? null : '#FFF',\n          stroke: nodeError ? 'rgba(255,255,255,0.65)' : null,\n          radius: 2,\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'ip-container-shape',\n      });\n\n      /* ip */\n      const ipText = group.addShape('text', {\n        attrs: {\n          text: cfg.ip,\n          x: 0,\n          y: 19,\n          fontSize: 12,\n          textAlign: 'left',\n          textBaseline: 'middle',\n          fill: nodeError ? 'rgba(255,255,255,0.85)' : 'rgba(0,0,0,0.65)',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'ip-text-shape',\n      });\n\n      const ipBBox = ipText.getBBox();\n      /* the distance from the IP to the right is 12px */\n      ipText.attr({\n        x: 224 - 12 - ipBBox.width,\n      });\n      /* ipBox */\n      ipRect.attr({\n        x: 224 - 12 - ipBBox.width - 4,\n        y: ipBBox.minY - 5,\n        width: ipBBox.width + 8,\n        height: ipBBox.height + 10,\n      });\n\n      /* a transparent shape on the IP for click listener */\n      group.addShape('rect', {\n        attrs: {\n          stroke: '',\n          cursor: 'pointer',\n          x: 224 - 12 - ipBBox.width - 4,\n          y: ipBBox.minY - 5,\n          width: ipBBox.width + 8,\n          height: ipBBox.height + 10,\n          fill: '#fff',\n          opacity: 0,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'ip-box',\n      });\n\n      /* copyIpLine */\n      group.addShape('rect', {\n        attrs: {\n          x: 194,\n          y: 7,\n          width: 1,\n          height: 24,\n          fill: '#E3E6E8',\n          opacity: 0,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'ip-cp-line',\n      });\n      /* copyIpBG */\n      group.addShape('rect', {\n        attrs: {\n          x: 195,\n          y: 8,\n          width: 22,\n          height: 22,\n          fill: '#FFF',\n          cursor: 'pointer',\n          opacity: 0,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'ip-cp-bg',\n      });\n      /* copyIpIcon */\n      group.addShape('image', {\n        attrs: {\n          x: 200,\n          y: 13,\n          height: 12,\n          width: 10,\n          img: 'https://os.alipayobjects.com/rmsportal/DFhnQEhHyPjSGYW.png',\n          cursor: 'pointer',\n          opacity: 0,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'ip-cp-icon',\n      });\n      /* a transparent rect on the icon area for click listener */\n      group.addShape('rect', {\n        attrs: {\n          x: 195,\n          y: 8,\n          width: 22,\n          height: 22,\n          fill: '#FFF',\n          cursor: 'pointer',\n          opacity: 0,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'ip-cp-box',\n        tooltip: 'Copy the IP',\n      });\n\n      /* ip end */\n    }\n\n    /* name */\n    group.addShape('text', {\n      attrs: {\n        text: cfg.name,\n        x: 19,\n        y: 19,\n        fontSize: 14,\n        fontWeight: 700,\n        textAlign: 'left',\n        textBaseline: 'middle',\n        fill: config.fontColor,\n        cursor: 'pointer',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'name-text-shape',\n    });\n\n    /* the description text */\n    group.addShape('text', {\n      attrs: {\n        text: cfg.keyInfo,\n        x: 19,\n        y: 45,\n        fontSize: 14,\n        textAlign: 'left',\n        textBaseline: 'middle',\n        fill: config.fontColor,\n        cursor: 'pointer',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'bottom-text-shape',\n    });\n\n    if (nodeError) {\n      group.addShape('text', {\n        attrs: {\n          x: 191,\n          y: 62,\n          text: '⚠️',\n          fill: '#000',\n          fontSize: 18,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'error-text-shape',\n      });\n    }\n\n    const hasChildren = cfg.children && cfg.children.length > 0;\n    if (hasChildren) {\n      nodeBasicMethod.createNodeMarker(group, cfg.collapsed, 236, 32);\n    }\n    return container;\n  },\n  afterDraw: nodeBasicMethod.afterDraw,\n  setState: nodeBasicMethod.setState,\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\ngraph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    type: 'card-node',\n  },\n});\n\nconst data = {\n  nodes: [\n    {\n      name: 'cardNodeApp',\n      ip: '127.0.0.1',\n      nodeError: true,\n      dataType: 'root',\n      keyInfo: 'this is a card node info',\n      x: 100,\n      y: 50,\n    },\n    {\n      name: 'cardNodeApp',\n      ip: '127.0.0.1',\n      nodeError: false,\n      dataType: 'subRoot',\n      keyInfo: 'this is sub root',\n      x: 100,\n      y: 150,\n    },\n    {\n      name: 'cardNodeApp',\n      ip: '127.0.0.1',\n      nodeError: false,\n      dataType: 'subRoot',\n      keyInfo: 'this is sub root',\n      x: 100,\n      y: 250,\n      children: [\n        {\n          name: 'sub',\n        },\n      ],\n    },\n  ],\n  edges: [],\n};\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"卡片",en:"Card"},filename:"card.js",isNew:!1},{id:"cardNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*b-g0RoOpI3sAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst ICON_MAP = {\n  a: 'https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*0HC-SawWYUoAAAAAAAAAAABkARQnAQ',\n  b: 'https://gw.alipayobjects.com/mdn/rms_8fd2eb/afts/img/A*sxK0RJ1UhNkAAAAAAAAAAABkARQnAQ',\n};\n\nG6.registerNode(\n  'card-node',\n  {\n    drawShape: function drawShape(cfg, group) {\n      const color = cfg.error ? '#F4664A' : '#30BF78';\n      const r = 2;\n      const shape = group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 200,\n          height: 60,\n          stroke: color,\n          radius: r,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'main-box',\n        draggable: true,\n      });\n\n      group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 200,\n          height: 20,\n          fill: color,\n          radius: [r, r, 0, 0],\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'title-box',\n        draggable: true,\n      });\n\n      // left icon\n      group.addShape('image', {\n        attrs: {\n          x: 4,\n          y: 2,\n          height: 16,\n          width: 16,\n          cursor: 'pointer',\n          img: ICON_MAP[cfg.nodeType || 'app'],\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'node-icon',\n      });\n\n      // title text\n      group.addShape('text', {\n        attrs: {\n          textBaseline: 'top',\n          y: 2,\n          x: 24,\n          lineHeight: 20,\n          text: cfg.title,\n          fill: '#fff',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'title',\n      });\n\n      if (cfg.nodeLevel > 0) {\n        group.addShape('marker', {\n          attrs: {\n            x: 184,\n            y: 30,\n            r: 6,\n            cursor: 'pointer',\n            symbol: cfg.collapse ? G6.Marker.expand : G6.Marker.collapse,\n            stroke: '#666',\n            lineWidth: 1,\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'collapse-icon',\n        });\n      }\n\n      // The content list\n      cfg.panels.forEach((item, index) => {\n        // name text\n        group.addShape('text', {\n          attrs: {\n            textBaseline: 'top',\n            y: 25,\n            x: 24 + index * 60,\n            lineHeight: 20,\n            text: item.title,\n            fill: 'rgba(0,0,0, 0.4)',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: `index-title-${index}`,\n        });\n\n        // value text\n        group.addShape('text', {\n          attrs: {\n            textBaseline: 'top',\n            y: 42,\n            x: 24 + index * 60,\n            lineHeight: 20,\n            text: item.value,\n            fill: '#595959',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: `index-value-${index}`,\n        });\n      });\n      return shape;\n    },\n  },\n  'single-node',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'card-node',\n  },\n  fitView: true,\n});\n\nconst data = {\n  nodes: [\n    {\n      title: 'node1',\n      error: true,\n      nodeType: 'a',\n      id: 'node1',\n      nodeLevel: 2,\n      panels: [\n        { title: '成功率', value: '11%' },\n        { title: '耗时', value: '111' },\n        { title: '错误数', value: '111' },\n      ],\n      x: 100,\n      y: 100,\n    },\n    {\n      title: 'node2',\n      error: false,\n      nodeType: 'b',\n      id: 'node2',\n      nodeLevel: 0,\n      panels: [\n        { title: '成功率', value: '11%' },\n        { title: '耗时', value: '111' },\n        { title: '错误数', value: '111' },\n      ],\n      x: 100,\n      y: 200,\n    },\n    {\n      title: 'node3',\n      error: false,\n      nodeType: 'a',\n      id: 'node3',\n      nodeLevel: 3,\n      panels: [\n        { title: '成功率', value: '11%' },\n        { title: '耗时', value: '111' },\n        { title: '错误数', value: '111' },\n      ],\n      collapse: true,\n      x: 100,\n      y: 300,\n    },\n  ],\n};\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"卡片 2",en:"Card 2"},filename:"cardNode.js",isNew:!1},{id:"jsxNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NcHWTKo3sEoAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n *  Custom a JSX node\n *  by Dominic Ming\n *\n */\n\nG6.registerNode(\n  'rect-jsx',\n  (cfg) => `\n    <group>\n      <rect>\n        <rect style={{\n          width: 150,\n          height: 20,\n          fill: ${cfg.color},\n          radius: [6, 6, 0, 0],\n          cursor: 'move'，\n          stroke: ${cfg.color}\n        }} draggable=\"true\">\n          <text style={{\n            marginTop: 2,\n            marginLeft: 75,\n            textAlign: 'center',\n            fontWeight: 'bold',\n            fill: '#fff' }}>{{label}}</text>\n        </rect>\n        <rect style={{\n          width: 150,\n          height: 55,\n          stroke: ${cfg.color},\n          fill: #ffffff,\n          radius: [0, 0, 6, 6],\n        }}>\n          <text style={{ marginTop: 5, marginLeft: 3, fill: '#333', marginLeft: 4 }}>描述: {{description}}</text>\n          <text style={{ marginTop: 10, marginLeft: 3, fill: '#333', marginLeft: 4 }}>创建者: {{meta.creatorName}}</text>\n        </rect>\n      </rect>\n      <circle style={{\n        stroke: ${cfg.color},\n        r: 10,\n        fill: '#fff',\n        marginLeft: 75,\n        cursor: 'pointer'\n      }} name=\"circle\">\n        <image style={{ img: 'https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png', width: 12, height: 12,  marginLeft: 70,  marginTop: -5 }} />\n      </circle>\n    </group>`,\n);\n\nconst data = {\n  nodes: [\n    {\n      x: 150,\n      y: 150,\n      description: 'ant_type_name_...',\n      label: 'Type / ReferType',\n      color: '#2196f3',\n      meta: {\n        creatorName: 'a_creator',\n      },\n      id: 'node1',\n      type: 'rect-jsx',\n    },\n    {\n      x: 350,\n      y: 150,\n      description: 'node2_name...',\n      label: 'JSX Node',\n      color: '#2196f3',\n      meta: {\n        creatorName: 'a_creator',\n      },\n      id: 'node2',\n      type: 'rect-jsx',\n    },\n  ],\n  edges: [{ source: 'node1', target: 'node2' }],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-node', 'zoom-canvas'],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 JSX 自定义节点",en:"Custom Node with JSX"},filename:"jsxNode.js",isNew:!1},{id:"jsxNodeWithAnimate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*XfMbSZSrlREAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n *  Custom a xml node\n *  by Dominic Ming\n *\n */\n\nG6.registerNode('rect-xml', {\n  jsx: (cfg) => `\n    <group>\n      <rect style={{\n        width: 200,\n        height: 75,\n      }}>\n        <rect style={{\n          width: 150,\n          height: 20,\n          fill: ${cfg.color},\n          radius: [6, 6, 0, 0],\n          cursor: 'move'，\n          stroke: ${cfg.color}\n        }} draggable=\"true\">\n          <text style={{\n            marginTop: 2,\n            marginLeft: 75,\n            textAlign: 'center',\n            fontWeight: 'bold',\n            fill: '#fff' }}>{{label}}</text>\n        </rect>\n        <rect style={{\n          width: 150,\n          height: 55,\n          stroke: ${cfg.color},\n          fill: #ffffff,\n          radius: [0, 0, 6, 6],\n        }}>\n          <text style={{ marginTop: 5, marginLeft: 3, fill: '#333', marginLeft: 4 }}>描述: {{description}}</text>\n          <text style={{ marginTop: 10, marginLeft: 3, fill: '#333', marginLeft: 4 }}>创建者: {{meta.creatorName}}</text>\n        </rect>\n      </rect>\n      <circle style={{\n        stroke: ${cfg.color},\n        r: 10,\n        fill: '#fff',\n        marginLeft: 75,\n        cursor: 'pointer'\n      }} name=\"circle\">\n        <image name=\"img\" style={{ img: 'https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png', width: 12, height: 12,  marginLeft: 69,  marginTop: -5 }} />\n      </circle>\n    </group>\n  `,\n  afterDraw: (cfg, group) => {\n    console.log(group);\n    const img = group.findAllByName('img');\n    if (img[0]) {\n      img[0].animate(\n        (ratio) => {\n          return {\n            opacity: Math.abs(0.5 - ratio),\n          };\n        },\n        {\n          duration: 3000,\n          repeat: true,\n        },\n      );\n    }\n  },\n});\n\nconst data = {\n  nodes: [\n    {\n      x: 150,\n      y: 150,\n      description: 'ant_type_name_...',\n      label: 'Type / ReferType',\n      color: '#2196f3',\n      meta: {\n        creatorName: 'a_creator',\n      },\n      id: 'test',\n      type: 'rect-xml',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 JSX 自定义节点(带动画)",en:"Custom Node with JSX and animation"},filename:"jsxNodeWithAnimate.js",isNew:!1},{id:"lineChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZmavSL0dRJIAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\nimport Chart from '@antv/chart-node-g6';\n\nG6.registerNode(\n  'node-with-line',\n  {\n    draw(cfg, group) {\n      const keyShape = group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 400,\n          height: 200,\n          fill: cfg.style.fill,\n        },\n      });\n\n      group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 400,\n          height: 40,\n          fill: '#69c0ff',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '浏览申请完成率',\n          x: 10,\n          y: 25,\n          fontSize: 14,\n          fill: '#fff',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '2020-06-07 ~ 2020-06-14 | 均值',\n          x: 20,\n          y: 70,\n          fontSize: 13,\n          fill: '#8c8c8c',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '8.8%',\n          x: 20,\n          y: 110,\n          fontSize: 30,\n          fill: '#000',\n        },\n      });\n\n      // 实际开发中把 (Chart || window.Chart) 换成 Chart\n      // Replace (Chart || window.Chart) by Chart in your project\n      const view = new (Chart || window.Chart)({\n        group,\n        padding: 5,\n        width: 360,\n        height: 70,\n        x: 20,\n        y: 100,\n      });\n\n      view.data(cfg.trendData);\n\n      view.line().position('genre*sold').color('#9AD681').shape('dash');\n\n      view.legend('genre', false);\n\n      view.axis('sold', false);\n\n      view.render();\n\n      return keyShape;\n    },\n    update: null,\n  },\n  'single-node',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst trendData = [\n  { genre: 'Sports', sold: 275 },\n  { genre: 'Strategy', sold: 115 },\n  { genre: 'Action', sold: 120 },\n  { genre: 'Shooter', sold: 350 },\n  { genre: 'Other', sold: 150 },\n];\n\nconst data = {\n  nodes: [\n    {\n      id: 'node0',\n      trendData,\n      x: 10,\n      y: 100,\n    },\n    {\n      id: 'node1',\n      trendData,\n      x: 550,\n      y: 100,\n    },\n  ],\n  edges: [{ source: 'node0', target: 'node1' }],\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  linkCenter: true,\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'node-with-line',\n    style: {\n      fill: '#e6f7ff',\n    },\n  },\n  nodeStateStyles: {\n    hover: {\n      stroke: '#b37feb',\n    },\n  },\n  defaultEdge: {\n    style: {\n      lineWidth: 5,\n      stroke: '#666',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  graph.setItemState(evt.item, 'hover', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  graph.setItemState(evt.item, 'hover', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"节点中嵌入 G2 的折线图",en:"G2 Line Node"},filename:"lineChartNode.js",isNew:!1},{id:"intervalChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*D00uR5wb__kAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport Chart from '@antv/chart-node-g6';\n\nG6.registerNode(\n  'node-with-interval',\n  {\n    draw(cfg, group) {\n      const keyShape = group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 400,\n          height: 200,\n          fill: cfg.style.fill,\n        },\n      });\n\n      group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 400,\n          height: 40,\n          fill: '#69c0ff',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '浏览申请完成率',\n          x: 10,\n          y: 25,\n          fontSize: 14,\n          fill: '#fff',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '2020-06-07 ~ 2020-06-14 | 均值',\n          x: 20,\n          y: 70,\n          fontSize: 13,\n          fill: '#8c8c8c',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '8.8%',\n          x: 20,\n          y: 110,\n          fontSize: 30,\n          fill: '#000',\n        },\n      });\n\n      // 实际开发中把 (Chart || window.Chart) 换成 Chart\n      // Replace (Chart || window.Chart) by Chart in your project\n      const view = new (Chart || window.Chart)({\n        group,\n        padding: 1,\n        width: 360,\n        height: 70,\n        x: 20,\n        y: 100,\n      });\n\n      view.data(cfg.trendData);\n\n      view.interval().position('genre*sold').color('genre');\n\n      view.legend('genre', false);\n\n      view.scale({\n        genre: {\n          alias: '游戏种类', // 列定义，定义该属性显示的别名\n        },\n        sold: {\n          alias: '销售量',\n        },\n      });\n\n      view.axis('sold', false);\n\n      // 极坐标下的柱状图\n      // view.coordinate('polar');\n\n      view.render();\n\n      keyShape.set('intervalView', view);\n\n      return keyShape;\n    },\n    update(cfg, item) {\n      const keyShape = item.getKeyShape();\n      const view = keyShape.get('intervalView');\n      view.changeData(cfg.trendData);\n    },\n  },\n  'single-node',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst trendData = [\n  { genre: 'Sports', sold: 275 },\n  { genre: 'Strategy', sold: 115 },\n  { genre: 'Action', sold: 120 },\n  { genre: 'Shooter', sold: 350 },\n  { genre: 'Other', sold: 150 },\n];\n\nconst data = {\n  nodes: [\n    {\n      id: 'node0',\n      trendData,\n      x: 10,\n      y: 100,\n    },\n    {\n      id: 'node1',\n      trendData,\n      x: 550,\n      y: 100,\n    },\n  ],\n  edges: [{ source: 'node0', target: 'node1' }],\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  linkCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'node-with-interval',\n    style: {\n      fill: '#e6f7ff',\n    },\n  },\n  nodeStateStyles: {\n    hover: {\n      stroke: '#b37feb',\n    },\n  },\n  defaultEdge: {\n    style: {\n      lineWidth: 5,\n      stroke: '#666',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\n// 点击节点，更新柱状图数据\ngraph.on('node:click', (evt) => {\n  const newTrendData = [\n    { genre: 'Sports', sold: 75 },\n    { genre: 'Strategy', sold: 115 },\n    { genre: 'Action', sold: 320 },\n    { genre: 'Shooter', sold: 150 },\n    { genre: 'Other', sold: 250 },\n  ];\n\n  graph.updateItem(evt.item, {\n    trendData: newTrendData,\n  });\n});\n\ngraph.on('node:mouseenter', (evt) => {\n  graph.setItemState(evt.item, 'hover', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  graph.setItemState(evt.item, 'hover', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"节点中嵌入 G2 的柱状图，点击节点可切换数据",en:"G2 Interval Node"},filename:"intervalChartNode.js",isNew:!1},{id:"pointChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*K7r7S7x-YhcAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\nimport Chart from '@antv/chart-node-g6';\n\nG6.registerNode(\n  'node-with-point',\n  {\n    draw(cfg, group) {\n      const keyShape = group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 400,\n          height: 200,\n          fill: cfg.style.fill,\n        },\n      });\n\n      group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 400,\n          height: 40,\n          fill: '#69c0ff',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '浏览申请完成率',\n          x: 10,\n          y: 25,\n          fontSize: 14,\n          fill: '#fff',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '2020-06-07 ~ 2020-06-14 | 均值',\n          x: 20,\n          y: 70,\n          fontSize: 13,\n          fill: '#8c8c8c',\n        },\n      });\n\n      group.addShape('text', {\n        attrs: {\n          text: '8.8%',\n          x: 20,\n          y: 110,\n          fontSize: 30,\n          fill: '#000',\n        },\n      });\n\n      const colorMap = {\n        Asia: '#1890FF',\n        Americas: '#2FC25B',\n        Europe: '#FACC14',\n        Oceania: '#223273',\n      };\n\n      // 实际开发中把 (Chart || window.Chart) 换成 Chart\n      // Replace (Chart || window.Chart) by Chart in your project\n      const chart = new (Chart || window.Chart)({\n        group,\n        width: 360,\n        height: 70,\n        x: 20,\n        y: 100,\n      });\n\n      chart.data(cfg.trendData);\n\n      chart\n        .point()\n        .position('GDP*LifeExpectancy')\n        .size('Population', [1, 15])\n        .color('continent', (val) => {\n          return colorMap[val];\n        })\n        .shape('circle')\n        .tooltip('Country*Population*GDP*LifeExpectancy')\n        .style('continent', (val) => {\n          return {\n            lineWidth: 1,\n            strokeOpacity: 1,\n            fillOpacity: 0.3,\n            opacity: 0.65,\n            stroke: colorMap[val],\n          };\n        });\n\n      chart.legend('Population', false);\n      chart.axis(false);\n\n      chart.render();\n\n      return keyShape;\n    },\n    update: null,\n  },\n  'single-node',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst trendData = [\n  {\n    continent: 'Americas',\n    Country: 'Argentina',\n    LifeExpectancy: 75.32,\n    GDP: 12779.37964,\n    Population: 40301927,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Brazil',\n    LifeExpectancy: 72.39,\n    GDP: 9065.800825,\n    Population: 190010647,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Canada',\n    LifeExpectancy: 80.653,\n    GDP: 36319.23501,\n    Population: 33390141,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Chile',\n    LifeExpectancy: 78.553,\n    GDP: 13171.63885,\n    Population: 16284741,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Colombia',\n    LifeExpectancy: 72.889,\n    GDP: 7006.580419,\n    Population: 44227550,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Costa Rica',\n    LifeExpectancy: 78.782,\n    GDP: 9645.06142,\n    Population: 4133884,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Cuba',\n    LifeExpectancy: 78.273,\n    GDP: 8948.102923,\n    Population: 11416987,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Dominican Republic',\n    LifeExpectancy: 72.235,\n    GDP: 6025.374752,\n    Population: 9319622,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Ecuador',\n    LifeExpectancy: 74.994,\n    GDP: 6873.262326,\n    Population: 13755680,\n  },\n  {\n    continent: 'Americas',\n    Country: 'El Salvador',\n    LifeExpectancy: 71.878,\n    GDP: 5728.353514,\n    Population: 6939688,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Guatemala',\n    LifeExpectancy: 70.259,\n    GDP: 5186.050003,\n    Population: 12572928,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Honduras',\n    LifeExpectancy: 70.198,\n    GDP: 3548.330846,\n    Population: 7483763,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Jamaica',\n    LifeExpectancy: 72.567,\n    GDP: 7320.880262,\n    Population: 2780132,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Mexico',\n    LifeExpectancy: 76.195,\n    GDP: 11977.57496,\n    Population: 108700891,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Nicaragua',\n    LifeExpectancy: 72.899,\n    GDP: 2749.320965,\n    Population: 5675356,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Panama',\n    LifeExpectancy: 75.537,\n    GDP: 9809.185636,\n    Population: 3242173,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Paraguay',\n    LifeExpectancy: 71.752,\n    GDP: 4172.838464,\n    Population: 6667147,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Peru',\n    LifeExpectancy: 71.421,\n    GDP: 7408.905561,\n    Population: 28674757,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Puerto Rico',\n    LifeExpectancy: 78.746,\n    GDP: 19328.70901,\n    Population: 3942491,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Trinidad and Tobago',\n    LifeExpectancy: 69.819,\n    GDP: 18008.50924,\n    Population: 1056608,\n  },\n  {\n    continent: 'Americas',\n    Country: 'United States',\n    LifeExpectancy: 78.242,\n    GDP: 42951.65309,\n    Population: 301139947,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Uruguay',\n    LifeExpectancy: 76.384,\n    GDP: 10611.46299,\n    Population: 3447496,\n  },\n  {\n    continent: 'Americas',\n    Country: 'Venezuela',\n    LifeExpectancy: 73.747,\n    GDP: 11415.80569,\n    Population: 26084662,\n  },\n  {\n    continent: 'Asia',\n    Country: 'China',\n    LifeExpectancy: 72.961,\n    GDP: 4959.114854,\n    Population: 1318683096,\n  },\n  {\n    continent: 'Asia',\n    Country: 'Hong Kong, China',\n    LifeExpectancy: 82.208,\n    GDP: 39724.97867,\n    Population: 6980412,\n  },\n  {\n    continent: 'Asia',\n    Country: 'Japan',\n    LifeExpectancy: 82.603,\n    GDP: 31656.06806,\n    Population: 127467972,\n  },\n  {\n    continent: 'Asia',\n    Country: 'Korea, Dem. Rep.',\n    LifeExpectancy: 67.297,\n    GDP: 1593.06548,\n    Population: 23301725,\n  },\n  {\n    continent: 'Asia',\n    Country: 'Korea, Rep.',\n    LifeExpectancy: 78.623,\n    GDP: 23348.13973,\n    Population: 49044790,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Albania',\n    LifeExpectancy: 76.423,\n    GDP: 5937.029526,\n    Population: 3600523,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Austria',\n    LifeExpectancy: 79.829,\n    GDP: 36126.4927,\n    Population: 8199783,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Belgium',\n    LifeExpectancy: 79.441,\n    GDP: 33692.60508,\n    Population: 10392226,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Bosnia and Herzegovina',\n    LifeExpectancy: 74.852,\n    GDP: 7446.298803,\n    Population: 4552198,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Bulgaria',\n    LifeExpectancy: 73.005,\n    GDP: 10680.79282,\n    Population: 7322858,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Croatia',\n    LifeExpectancy: 75.748,\n    GDP: 14619.22272,\n    Population: 4493312,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Czech Republic',\n    LifeExpectancy: 76.486,\n    GDP: 22833.30851,\n    Population: 10228744,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Denmark',\n    LifeExpectancy: 78.332,\n    GDP: 35278.41874,\n    Population: 5468120,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Finland',\n    LifeExpectancy: 79.313,\n    GDP: 33207.0844,\n    Population: 5238460,\n  },\n  {\n    continent: 'Europe',\n    Country: 'France',\n    LifeExpectancy: 80.657,\n    GDP: 30470.0167,\n    Population: 61083916,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Germany',\n    LifeExpectancy: 79.406,\n    GDP: 32170.37442,\n    Population: 82400996,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Greece',\n    LifeExpectancy: 79.483,\n    GDP: 27538.41188,\n    Population: 10706290,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Hungary',\n    LifeExpectancy: 73.338,\n    GDP: 18008.94444,\n    Population: 9956108,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Iceland',\n    LifeExpectancy: 81.757,\n    GDP: 36180.78919,\n    Population: 301931,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Ireland',\n    LifeExpectancy: 78.885,\n    GDP: 40675.99635,\n    Population: 4109086,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Italy',\n    LifeExpectancy: 80.546,\n    GDP: 28569.7197,\n    Population: 58147733,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Montenegro',\n    LifeExpectancy: 74.543,\n    GDP: 9253.896111,\n    Population: 684736,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Netherlands',\n    LifeExpectancy: 79.762,\n    GDP: 36797.93332,\n    Population: 16570613,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Norway',\n    LifeExpectancy: 80.196,\n    GDP: 49357.19017,\n    Population: 4627926,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Poland',\n    LifeExpectancy: 75.563,\n    GDP: 15389.92468,\n    Population: 38518241,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Portugal',\n    LifeExpectancy: 78.098,\n    GDP: 20509.64777,\n    Population: 10642836,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Romania',\n    LifeExpectancy: 72.476,\n    GDP: 10808.47561,\n    Population: 22276056,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Serbia',\n    LifeExpectancy: 74.002,\n    GDP: 9786.534714,\n    Population: 10150265,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Slovak Republic',\n    LifeExpectancy: 74.663,\n    GDP: 18678.31435,\n    Population: 5447502,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Slovenia',\n    LifeExpectancy: 77.926,\n    GDP: 25768.25759,\n    Population: 2009245,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Spain',\n    LifeExpectancy: 80.941,\n    GDP: 28821.0637,\n    Population: 40448191,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Sweden',\n    LifeExpectancy: 80.884,\n    GDP: 33859.74835,\n    Population: 9031088,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Switzerland',\n    LifeExpectancy: 81.701,\n    GDP: 37506.41907,\n    Population: 7554661,\n  },\n  {\n    continent: 'Europe',\n    Country: 'Turkey',\n    LifeExpectancy: 71.777,\n    GDP: 8458.276384,\n    Population: 71158647,\n  },\n  {\n    continent: 'Europe',\n    Country: 'United Kingdom',\n    LifeExpectancy: 79.425,\n    GDP: 33203.26128,\n    Population: 60776238,\n  },\n  {\n    continent: 'Oceania',\n    Country: 'Australia',\n    LifeExpectancy: 81.235,\n    GDP: 34435.36744,\n    Population: 20434176,\n  },\n  {\n    continent: 'Oceania',\n    Country: 'New Zealand',\n    LifeExpectancy: 80.204,\n    GDP: 25185.00911,\n    Population: 4115771,\n  },\n];\n\nconst data = {\n  nodes: [\n    {\n      id: 'node0',\n      trendData,\n      x: 10,\n      y: 100,\n    },\n    {\n      id: 'node1',\n      trendData,\n      x: 550,\n      y: 100,\n    },\n  ],\n  edges: [{ source: 'node0', target: 'node1' }],\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  linkCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'node-with-point',\n    style: {\n      fill: '#e6f7ff',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#666',\n      lineWidth: 5,\n    },\n  },\n  defaultEdge: {\n    style: {\n      lineWidth: 5,\n      stroke: '#666',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"节点中嵌入 G2 的散点图",en:"G2 Point Node"},filename:"pointChartNode.js",isNew:!1},{id:"pieChartNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wCxXSK4eWPoAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\nimport Chart from '@antv/chart-node-g6';\n\nG6.registerNode(\n  'node-with-pie',\n  {\n    draw(cfg, group) {\n      const keyShape = group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: 100,\n          fill: cfg.style.fill,\n          stroke: cfg.style.stroke,\n          fillOpacity: 0,\n        },\n      });\n\n      // 实际开发中把 (Chart || window.Chart) 换成 Chart\n      // Replace (Chart || window.Chart) by Chart in your project\n      const view = new (Chart || window.Chart)({\n        group,\n        width: 400,\n        height: 200,\n        x: -200,\n        y: -100,\n      });\n\n      view.data(cfg.trendData);\n\n      view\n        .interval()\n        .position('year*population')\n        .label('year', {\n          offset: -15,\n        })\n        .color('year')\n        .style({\n          lineWidth: 1,\n          stroke: '#95de64',\n          fontSize: 8,\n        });\n\n      view.axis(false);\n\n      view.legend(false);\n\n      // 极坐标下的柱状图\n      view.coordinate('polar');\n\n      view.render();\n\n      keyShape.set('intervalView', view);\n\n      return keyShape;\n    },\n    update(cfg, item) {\n      const keyShape = item.getKeyShape();\n      const view = keyShape.get('intervalView');\n      view.changeData(cfg.trendData);\n    },\n  },\n  'single-node',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst trendData1 = [\n  { year: '2001', population: 41.8 },\n  { year: '2002', population: 38 },\n  { year: '2003', population: 33.7 },\n  { year: '2004', population: 30.7 },\n  { year: '2005', population: 25.8 },\n  { year: '2006', population: 31.7 },\n  { year: '2007', population: 33 },\n  { year: '2008', population: 46 },\n  { year: '2009', population: 38.3 },\n  { year: '2010', population: 28 },\n  { year: '2011', population: 42.5 },\n  { year: '2012', population: 30.3 },\n];\n\nconst trendData2 = [\n  { year: '2001', population: 11.8 },\n  { year: '2002', population: 28 },\n  { year: '2003', population: 43.7 },\n  { year: '2004', population: 50.7 },\n  { year: '2005', population: 15.8 },\n  { year: '2006', population: 21.7 },\n  { year: '2007', population: 13 },\n  { year: '2008', population: 26 },\n  { year: '2009', population: 18.3 },\n  { year: '2010', population: 58 },\n  { year: '2011', population: 62.5 },\n  { year: '2012', population: 10.3 },\n];\n\nconst data = {\n  nodes: [\n    {\n      id: 'node0',\n      trendData: trendData1,\n      x: 10,\n      y: 100,\n    },\n    {\n      id: 'node1',\n      trendData: trendData2,\n      x: 550,\n      y: 100,\n    },\n  ],\n  edges: [{ source: 'node0', target: 'node1' }],\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: true,\n  linkCenter: true,\n  modes: {\n    default: ['zoom-canvas', 'drag-canvas', 'drag-node'],\n  },\n  defaultNode: {\n    type: 'node-with-pie',\n    style: {\n      fill: '#e6f7ff',\n    },\n  },\n  nodeStateStyles: {\n    hover: {\n      stroke: '#b37feb',\n    },\n  },\n  defaultEdge: {\n    style: {\n      lineWidth: 5,\n      stroke: '#666',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (evt) => {\n  graph.setItemState(evt.item, 'hover', true);\n});\n\ngraph.on('node:mouseleave', (evt) => {\n  graph.setItemState(evt.item, 'hover', false);\n});\n\nwindow.onresize = () => {\n  if (!graph || graph.get('destroyed')) return;\n  if (!container || !container.scrollWidth || !container.scrollHeight) return;\n  graph.changeSize(container.scrollWidth, container.scrollHeight);\n};\n",title:{zh:"节点中嵌入 G2 的饼图",en:"G2 Pie Node"},filename:"pieChartNode.js",isNew:!1},{id:"svgDom",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*VgQlQK1MdbIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n *  This demo shows how to register a custom node with SVG DOM shape\n *  by Shiwu\n *\n */\n\n/**\n * Register a node type with DOM\n */\nG6.registerNode('dom-node', {\n  draw: (cfg, group) => {\n    const stroke = cfg.style ? cfg.style.stroke || '#5B8FF9' : '#5B8FF9';\n    const shape = group.addShape('dom', {\n      attrs: {\n        width: cfg.size[0],\n        height: cfg.size[1],\n        html: `\n        <div id=${\n          cfg.id\n        } class='dom-node' style=\"background-color: #fff; border: 2px solid ${stroke}; border-radius: 5px; width: ${\n          cfg.size[0] - 5\n        }px; height: ${cfg.size[1] - 5}px; display: flex;\">\n          <div style=\"height: 100%; width: 33%; background-color: #CDDDFD\">\n            <img alt=\"\" style=\"line-height: 100%; margin-left: 7px;\" src=\"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q_FQT6nwEC8AAAAAAAAAAABkARQnAQ\" width=\"20\" height=\"20\" />\n          </div>\n          <span style=\"margin:auto; padding:auto; color: #5B8FF9\">${cfg.label}</span>\n        </div>\n          `,\n      },\n      draggable: true,\n    });\n    return shape;\n  },\n});\n\n/** 数据 */\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 10,\n      y: 100,\n      label: 'Homepage',\n    },\n    {\n      id: 'node2',\n      x: 200,\n      y: 100,\n      label: 'Subpage',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 100;\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = `由于打包问题，本 demo 的 112-114 行被暂时注释。需要您在代码栏中打开 112-114 行的注释以得到自定义 DOM 节点正确的交互。<br /> Due to the packing problem of the site, we have to note the line 112-114 of this demo temporary. Unnote them to see the result of custom DOM node with interactions please.`;\ncontainer.appendChild(descriptionDiv);\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  renderer: 'svg',\n  linkCenter: true,\n  defaultNode: {\n    type: 'dom-node',\n    size: [120, 40],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\n// click listener for dom nodes to response the click by changing stroke color\nconst listener = (dom) => {\n  const nodeId = dom.id;\n  if (!nodeId) return;\n  const node = graph.findById(nodeId);\n  let stroke = '';\n  if (!node.hasState('selected')) {\n    stroke = '#f00';\n    graph.setItemState(node, 'selected', true);\n  } else {\n    stroke = '#5B8FF9';\n    graph.setItemState(node, 'selected', false);\n  }\n  graph.updateItem(nodeId, {\n    style: {\n      stroke,\n    },\n  });\n};\n\nconst bindClickListener = () => {\n  const domNodes = document.getElementsByClassName('dom-node');\n  for (let i = 0; i < domNodes.length; i++) {\n    const dom = domNodes[i];\n    // open the following lines pls!\n    // dom.addEventListener('click', (e) => {\n    //   listener(dom);\n    // });\n  }\n};\n\nbindClickListener();\n\n// after update the item, all the DOMs will be re-rendered\n// so the listeners should be rebinded to the new DOMs\ngraph.on('afterupdateitem', (e) => {\n  bindClickListener();\n});\ngraph.on('afterrender', (e) => {\n  bindClickListener();\n});\n// if it is TreeGraph and with default animate:true, you should bind the litsener after animation\n// graph.on('afteranimate', (e) => {\n//   bindClickListener();\n// });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);\n  };\n",title:{zh:"DOM 节点",en:"Dom Node"},filename:"svgDom.js",isNew:!1},{id:"areaChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YWuhR5ZjZfkAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n *  Custom a area chart node\n *  by Jingxi\n *\n */\n\n/**\n * Register a area chart node\n */\nG6.registerNode('area', {\n  draw(cfg, group) {\n    const baseR = 30;\n\n    // Ref line\n    let refR = baseR;\n    const refInc = 10;\n    for (let i = 0; i < 6; i++) {\n      group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: (refR += refInc),\n          stroke: '#bae7ff',\n          lineDash: [4, 4],\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape',\n      });\n    }\n    const everyIncAngle = (2 * Math.PI * (360 / 5)) / 360;\n    const tempIncValues = [baseR, baseR, baseR, baseR, baseR];\n    const allRs = [];\n    cfg.details.forEach((cat) => {\n      const oneRs = [];\n      cat.values.forEach((v, i) => {\n        const R = tempIncValues[i] + v * 0.4;\n        oneRs.push(R);\n        tempIncValues[i] = R;\n      });\n      allRs.push(oneRs);\n    });\n    const strokeColors = [\n      'rgba(91, 143, 249,1)',\n      'rgba(90, 216, 166,1)',\n      'rgba(246, 189, 22,1)',\n      'rgba(232, 104, 74,1)',\n      'rgba(255, 157, 77,1)',\n    ];\n    const fillColors = [\n      'rgba(91, 143, 249,0.5)',\n      'rgba(90, 216, 166,0.5)',\n      'rgba(246, 189, 22,0.5)',\n      'rgba(232, 104, 74,0.5)',\n      'rgba(255, 157, 77,0.5)',\n    ];\n\n    allRs.reverse().forEach((Rs, index) => {\n      let curAngle = 0;\n      const poss = [];\n      Rs.forEach((r) => {\n        const xPos = r * Math.cos(curAngle);\n        const yPos = r * Math.sin(curAngle);\n        curAngle += everyIncAngle;\n        poss.push([xPos, yPos]);\n      });\n      const Ls = poss.map((p, i) => {\n        if (i === 0) {\n          return ['M', ...p];\n        }\n        return ['L', ...p];\n      });\n\n      group.addShape('path', {\n        attrs: {\n          path: [\n            ...Ls,\n            ['Z'], // close the path\n          ],\n          stroke: strokeColors[index],\n          fill: fillColors[index],\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape1',\n      });\n    });\n    let nowAngle2 = 0;\n    const everyIncAngleCat = (2 * Math.PI * (360 / 5)) / 360;\n    for (let i = 0; i < 5; i++) {\n      const r = 30 + 60;\n      const xPos = r * Math.cos(nowAngle2);\n      const yPos = r * Math.sin(nowAngle2);\n\n      group.addShape('path', {\n        attrs: {\n          path: [\n            ['M', 0, 0],\n            ['L', xPos, yPos],\n          ],\n          lineDash: [4, 4],\n          stroke: 'darkgray',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape2',\n      });\n      nowAngle2 += everyIncAngleCat;\n    }\n\n    // add a circle with the same filling color with background\n    group.addShape('circle', {\n      // attrs: style\n      attrs: {\n        x: 0, // 居中\n        y: 0,\n        r: baseR,\n        fill: cfg.centerColor,\n        stroke: 'darkgray',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'circle-shape',\n    });\n\n    if (cfg.label) {\n      group.addShape('text', {\n        // attrs: style\n        attrs: {\n          x: 0,\n          y: 0,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          text: cfg.label,\n          fill: 'white',\n          fontStyle: 'bold',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'text-shape',\n      });\n    }\n    return group;\n  },\n});\n\n/** data */\nconst data = {\n  nodes: [\n    {\n      id: 'nodeD',\n      x: 150,\n      y: 150,\n      label: 'Area1',\n      type: 'area',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5ad8a6' },\n        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#ff99c3' },\n        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#6dc8ec' },\n        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#269a99' },\n        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#9270CA' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n    {\n      id: 'nodeD2',\n      x: 500,\n      y: 150,\n      label: 'Area2',\n      type: 'area',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [10, 10, 80, 20, 10], color: '#5ad8a6' },\n        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },\n        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },\n        { cat: 'sal', values: [70, 30, 20, 20, 20], color: '#269a99' },\n        { cat: 'cal', values: [50, 10, 20, 70, 30], color: '#9270CA' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n  ],\n  edges: [\n    {\n      source: 'nodeD',\n      target: 'nodeD2',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 G 自定义的面积图节点",en:"Area Chart Node"},filename:"areaChart.js",isNew:!1},{id:"stackChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*giZSRafSctgAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Custom stacked bar chart node\n * by Jingxi\n *\n */\n\nconst getPath = (cx, cy, rs, re, startAngle, endAngle, clockwise) => {\n  const flag1 = clockwise ? 1 : 0;\n  const flag2 = clockwise ? 0 : 1;\n  return [\n    ['M', Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],\n    ['L', Math.cos(startAngle) * re + cx, Math.sin(startAngle) * re + cy],\n    ['A', re, re, 0, 0, flag1, Math.cos(endAngle) * re + cx, Math.sin(endAngle) * re + cy],\n    ['L', Math.cos(endAngle) * rs + cx, Math.sin(endAngle) * rs + cy],\n    ['A', rs, rs, 0, 0, flag2, Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],\n    ['Z'],\n  ];\n};\n\n// Custom stacked bar chart node\nG6.registerNode('stacked-bar-node', {\n  draw(cfg, group) {\n    /*\n      G:\n      Fan\n      x: the circle center of the fan\n      y: the circle center of the fan\n      rs: inner radius\n      re: outer radius\n      startAngle: start angle\n      endAngle: end angle\n      clockwise: render clockwisely if it is true\n    */\n    const baseR = 30;\n    let nowAngle = 0;\n    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;\n    cfg.details.forEach((cat) => {\n      cat.values.forEach((item) => {\n        const baseNbr = Math.ceil(item / 10);\n        const baseIncR = 7;\n        let nowStartR = baseR;\n        const last = item % 10;\n        const endAngle = nowAngle + everyIncAngle;\n        for (let i = 0; i < baseNbr; i++) {\n          const path0 = getPath(0, 0, nowStartR, nowStartR + baseIncR, nowAngle, endAngle, false);\n          group.addShape('path', {\n            attrs: {\n              path: path0,\n              stroke: 'darkgray',\n              fill: cat.color,\n            },\n            // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n            name: 'path-shape1',\n          });\n          nowStartR = nowStartR + baseIncR + 2;\n          if (i === baseNbr - 1 && last !== 0) {\n            const path1 = getPath(\n              0,\n              0,\n              nowStartR,\n              nowStartR + (baseIncR * last) / 10,\n              nowAngle,\n              endAngle,\n              false,\n            );\n            group.addShape('path', {\n              attrs: {\n                path: path1,\n                stroke: 'darkgray',\n                fill: cat.color,\n              },\n              // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n              name: 'path-shape2',\n            });\n          }\n        }\n        nowAngle = endAngle;\n      });\n    });\n\n    group.addShape('circle', {\n      attrs: {\n        x: 0,\n        y: 0,\n        r: baseR,\n        fill: cfg.centerColor,\n        stroke: 'darkgray',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'circle-shape',\n    });\n    if (cfg.label) {\n      group.addShape('text', {\n        attrs: {\n          x: 0,\n          y: 0,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          text: cfg.label,\n          fill: 'white',\n          fontStyle: 'bold',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'text-shape',\n      });\n    }\n    return group;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'nodeF',\n      x: 150,\n      y: 150,\n      label: 'StackedBar1',\n      type: 'stacked-bar-node',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },\n        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },\n        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },\n        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },\n        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n    {\n      id: 'nodeF2',\n      x: 500,\n      y: 150,\n      label: 'StackedBar2',\n      type: 'stacked-bar-node',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [10, 10, 80, 20, 10], color: '#5ad8a6' },\n        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },\n        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },\n        { cat: 'sal', values: [70, 30, 20, 20, 20], color: '#269a99' },\n        { cat: 'cal', values: [50, 10, 20, 70, 30], color: '#9270CA' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n  ],\n  edges: [\n    {\n      source: 'nodeF',\n      target: 'nodeF2',\n    },\n  ],\n};\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 G 自定义的堆叠图节点",en:"Stacked Chart Node"},filename:"stackChart.js",isNew:!1},{id:"lineChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mKmaTIBtVAUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Custom a line chart node\n * by Jingxi\n *\n */\n\n// Custom a line chart node\nG6.registerNode('circleLine', {\n  draw(cfg, group) {\n    const baseR = 30;\n    let nowAngle = 0;\n\n    // Ref line\n    let refR = baseR;\n    const refInc = 10;\n    for (let i = 0; i < 5; i++) {\n      group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: (refR += refInc),\n          stroke: '#bae7ff',\n          lineDash: [4, 4],\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape',\n      });\n    }\n\n    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;\n    cfg.details.forEach((cat) => {\n      // 计算一系列点的位置\n      const postions = [];\n      cat.values.forEach((item, index) => {\n        const r = baseR + item;\n        const xPos = r * Math.cos(nowAngle);\n        const yPos = r * Math.sin(nowAngle);\n        nowAngle += everyIncAngle;\n        postions.push([xPos, yPos]);\n        if (index === 4) {\n          const r = baseR + item;\n          const xPos = r * Math.cos(nowAngle);\n          const yPos = r * Math.sin(nowAngle);\n          postions.push([xPos, yPos]);\n        }\n      });\n      const pathArrayL = postions.map((item) => ['L', ...item]);\n      // add the connecting line\n      group.addShape('path', {\n        attrs: {\n          path: [\n            ['M', 0, 0], // the top vertex\n            ...pathArrayL,\n            ['Z'], // close the path\n          ],\n          stroke: cat.color,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape',\n      });\n\n      postions.forEach((pos, index) => {\n        if (index !== 5) {\n          const littleCircle = group.addShape('circle', {\n            // attrs: style\n            attrs: {\n              x: pos[0],\n              y: pos[1],\n              r: 2,\n              fill: 'black',\n              stroke: cat.color,\n              cursor: 'pointer',\n            },\n            // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n            name: 'circle-shape',\n          });\n          // 加上交互动画\n          littleCircle.on('mouseenter', function () {\n            littleCircle.animate(\n              {\n                r: 5,\n              },\n              {\n                repeat: false,\n                duration: 200,\n              },\n            );\n          });\n          littleCircle.on('mouseleave', function () {\n            littleCircle.animate(\n              {\n                r: 2,\n              },\n              {\n                repeat: false,\n                duration: 200,\n              },\n            );\n          });\n          // set the name\n          littleCircle.set('name', 'littleCircle');\n        }\n      });\n    });\n\n    // add a circle with the same color with the background color\n    group.addShape('circle', {\n      attrs: {\n        x: 0,\n        y: 0,\n        r: baseR,\n        fill: cfg.centerColor,\n        stroke: 'darkgray',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'circle-shape',\n    });\n    if (cfg.label) {\n      group.addShape('text', {\n        attrs: {\n          x: 0, // 居中\n          y: 0,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          text: cfg.label,\n          fill: 'white',\n          fontStyle: 'bold',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'text-shape',\n      });\n    }\n    return group;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'nodeB',\n      x: 150,\n      y: 150,\n      label: 'Line1',\n      type: 'circleLine',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },\n        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },\n        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },\n        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },\n        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n    {\n      id: 'nodeB2',\n      x: 500,\n      y: 150,\n      label: 'Line2',\n      type: 'circleLine',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [10, 10, 50, 20, 10], color: '#5ad8a6' },\n        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },\n        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },\n        { cat: 'sal', values: [50, 30, 20, 20, 20], color: '#269a99' },\n        { cat: 'cal', values: [50, 10, 20, 50, 30], color: '#9270CA' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n  ],\n  edges: [\n    {\n      source: 'nodeB',\n      target: 'nodeB2',\n    },\n  ],\n};\n\n// graph.get('container').style.background = '#5d7092';\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 G 自定义的折线图节点",en:"Line Chart Node"},filename:"lineChart.js",isNew:!1},{id:"barChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*lX3gRZWvbp4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Custom a Nightingale char node\n * by Jingxi\n */\n\n/**\n * Custom a Nightingale char node\n */\n\nconst getPath = (cx, cy, rs, re, startAngle, endAngle, clockwise) => {\n  const flag1 = clockwise ? 1 : 0;\n  const flag2 = clockwise ? 0 : 1;\n  return [\n    ['M', Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],\n    ['L', Math.cos(startAngle) * re + cx, Math.sin(startAngle) * re + cy],\n    ['A', re, re, 0, 0, flag1, Math.cos(endAngle) * re + cx, Math.sin(endAngle) * re + cy],\n    ['L', Math.cos(endAngle) * rs + cx, Math.sin(endAngle) * rs + cy],\n    ['A', rs, rs, 0, 0, flag2, Math.cos(startAngle) * rs + cx, Math.sin(startAngle) * rs + cy],\n    ['Z'],\n  ];\n};\nG6.registerNode('circleBar', {\n  draw(cfg, group) {\n    /*\n      G:\n      Fan\n      x: the circle center of the fan\n      y: the circle center of the fan\n      rs: inner radius\n      re: outer radius\n      startAngle: start angle\n      endAngle: end angle\n      clockwise: render clockwisely if it is true\n    */\n    const baseR = 30;\n    let nowAngle = 0;\n    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;\n    cfg.details.forEach((cat) => {\n      cat.values.forEach((item) => {\n        const re = item + baseR;\n        const path0 = getPath(\n          0,\n          0,\n          baseR,\n          item + baseR,\n          nowAngle,\n          (nowAngle += everyIncAngle),\n          false,\n        );\n        const fan = group.addShape('path', {\n          attrs: {\n            path: path0,\n            stroke: 'darkgray',\n            fill: cat.color,\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'path-shape',\n        });\n        // behavior animation\n        fan.on('mouseenter', () => {\n          fan.animate(\n            {\n              re: re + 8,\n            },\n            {\n              repeat: false,\n              duration: 300,\n            },\n          );\n        });\n        fan.on('mouseleave', () => {\n          fan.animate(\n            {\n              re,\n            },\n            {\n              repeat: false,\n              duration: 300,\n            },\n          );\n        });\n        // set the name\n        fan.set('name', 'littleCircle');\n      });\n    });\n    group.addShape('circle', {\n      attrs: {\n        x: 0,\n        y: 0,\n        r: baseR,\n        fill: cfg.centerColor,\n        stroke: 'darkgray',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'circle-shape',\n    });\n    if (cfg.label) {\n      group.addShape('text', {\n        attrs: {\n          x: 0,\n          y: 0,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          text: cfg.label,\n          fill: 'white',\n          fontStyle: 'bold',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'text-shape',\n      });\n    }\n    return group;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'nodeA',\n      x: 150,\n      y: 150,\n      label: 'Bar1',\n      type: 'circleBar',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },\n        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },\n        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },\n        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },\n        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n    {\n      id: 'nodeA2',\n      x: 500,\n      y: 150,\n      label: 'Bar2',\n      type: 'circleBar',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [10, 10, 80, 20, 10], color: '#5ad8a6' },\n        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },\n        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },\n        { cat: 'sal', values: [70, 30, 20, 20, 20], color: '#269a99' },\n        { cat: 'cal', values: [50, 10, 20, 70, 30], color: '#9270CA' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n  ],\n  edges: [\n    {\n      source: 'nodeA',\n      target: 'nodeA2',\n    },\n  ],\n};\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 G 自定义的南丁格尔图节点",en:"Nightingale Node"},filename:"barChart.js",isNew:!1},{id:"pointChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*M0ycSarMV2sAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n// Custom a mark node\nG6.registerNode('justPoints', {\n  draw(cfg, group) {\n    const baseR = 30;\n    let nowAngle = 0;\n\n    // Ref line\n    let refR = baseR;\n    const refInc = 10;\n    for (let i = 0; i < 5; i++) {\n      group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: (refR += refInc),\n          stroke: '#5ad8a6',\n          lineDash: [4, 4],\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape',\n      });\n    }\n    const everyIncAngle = (2 * Math.PI * (360 / 5 / 5)) / 360;\n    nowAngle = nowAngle + everyIncAngle / 2;\n    cfg.details.forEach((cat) => {\n      // Calculate the positions for vertexes\n      const postions = [];\n      cat.values.forEach((item, index) => {\n        const r = baseR + item;\n        const xPos = r * Math.cos(nowAngle);\n        const yPos = r * Math.sin(nowAngle);\n        nowAngle += everyIncAngle;\n        postions.push([xPos, yPos]);\n        if (index === 4) {\n          const r = baseR + item;\n          const xPos = r * Math.cos(nowAngle);\n          const yPos = r * Math.sin(nowAngle);\n          postions.push([xPos, yPos]);\n        }\n      });\n\n      // add marks\n      postions.forEach((pos, index) => {\n        if (index !== 5) {\n          group.addShape('circle', {\n            attrs: {\n              x: pos[0],\n              y: pos[1],\n              r: 3,\n              lineWidth: 2,\n              stroke: cat.color,\n            },\n            name: 'circle-marker-shape',\n          });\n        }\n      });\n    });\n\n    let nowAngle2 = 0;\n    const everyIncAngleCat = (2 * Math.PI * (360 / 5)) / 360;\n    for (let i = 0; i < 5; i++) {\n      const r = 30 + 50;\n      const xPos = r * Math.cos(nowAngle2);\n      const yPos = r * Math.sin(nowAngle2);\n\n      group.addShape('path', {\n        attrs: {\n          path: [\n            ['M', 0, 0],\n            ['L', xPos, yPos],\n          ],\n          lineDash: [4, 4],\n          stroke: '#5ad8a6',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'path-shape',\n      });\n      nowAngle2 += everyIncAngleCat;\n    }\n    // add a circle with the same color with the background color\n    group.addShape('circle', {\n      attrs: {\n        x: 0,\n        y: 0,\n        r: baseR,\n        fill: cfg.centerColor,\n        stroke: 'darkgray',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'circle-shape',\n    });\n\n    if (cfg.label) {\n      group.addShape('text', {\n        attrs: {\n          x: 0,\n          y: 0,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          text: cfg.label,\n          fill: '#fff',\n          fontStyle: 'bold',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'text-shape',\n      });\n    }\n    return group;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'nodeC',\n      x: 150,\n      y: 150,\n      label: 'Point2',\n      type: 'justPoints',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [20, 30, 40, 30, 30], color: '#5B8FF9' },\n        { cat: 'dal', values: [40, 30, 20, 30, 50], color: '#5AD8A6' },\n        { cat: 'uv', values: [40, 30, 30, 40, 40], color: '#5D7092' },\n        { cat: 'sal', values: [20, 30, 50, 20, 20], color: '#F6BD16' },\n        { cat: 'cal', values: [10, 10, 20, 20, 20], color: '#E8684A' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n    {\n      id: 'nodeC2',\n      x: 500,\n      y: 150,\n      label: 'Point2',\n      type: 'justPoints',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n      details: [\n        { cat: 'pv', values: [10, 10, 50, 20, 10], color: '#5ad8a6' },\n        { cat: 'dal', values: [20, 30, 10, 50, 40], color: '#ff99c3' },\n        { cat: 'uv', values: [10, 50, 30, 20, 30], color: '#6dc8ec' },\n        { cat: 'sal', values: [50, 30, 20, 20, 20], color: '#269a99' },\n        { cat: 'cal', values: [50, 10, 20, 50, 30], color: '#9270CA' },\n      ],\n      centerColor: '#5b8ff9',\n    },\n  ],\n  edges: [\n    {\n      source: 'nodeC',\n      target: 'nodeC2',\n    },\n  ],\n};\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 G 自定义的点线图节点",en:"Point Chart Node"},filename:"pointChart.js",isNew:!1},{id:"pieChart",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*idENQpnwA1sAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Custom a pie chart node\n * by Shiwu\n *\n */\nconst lightBlue = '#5b8ff9';\nconst lightOrange = '#5ad8a6';\n\n// register a pie chart node\nG6.registerNode('pie-node', {\n  draw: (cfg, group) => {\n    const radius = cfg.size / 2; // node radius\n    const inPercentage = cfg.inDegree / cfg.degree; // the ratio of indegree to outdegree\n    const inAngle = inPercentage * Math.PI * 2; // the anble for the indegree fan\n    const inArcEnd = [radius * Math.cos(inAngle), -radius * Math.sin(inAngle)]; // the end position for the in-degree fan\n    let isInBigArc = 0,\n      isOutBigArc = 1;\n    if (inAngle > Math.PI) {\n      isInBigArc = 1;\n      isOutBigArc = 0;\n    }\n    // fan shape for the in degree\n    const fanIn = group.addShape('path', {\n      attrs: {\n        path: [\n          ['M', radius, 0],\n          ['A', radius, radius, 0, isInBigArc, 0, inArcEnd[0], inArcEnd[1]],\n          ['L', 0, 0],\n          ['Z'],\n        ],\n        lineWidth: 0,\n        fill: lightOrange,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'in-fan-shape',\n    });\n    // draw the fan shape\n    group.addShape('path', {\n      attrs: {\n        path: [\n          ['M', inArcEnd[0], inArcEnd[1]],\n          ['A', radius, radius, 0, isOutBigArc, 0, radius, 0],\n          ['L', 0, 0],\n          ['Z'],\n        ],\n        lineWidth: 0,\n        fill: lightBlue,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'out-fan-shape',\n    });\n    // 返回 keyshape\n    return fanIn;\n  },\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'pie1',\n      size: 80,\n      inDegree: 80,\n      degree: 360,\n      x: 150,\n      y: 150,\n    },\n    {\n      id: 'pie2',\n      size: 80,\n      inDegree: 280,\n      degree: 360,\n      x: 350,\n      y: 150,\n    },\n  ],\n  edges: [\n    {\n      source: 'pie1',\n      target: 'pie2',\n    },\n  ],\n};\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  linkCenter: true,\n  defaultNode: {\n    type: 'pie-node',\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 G 自定义的饼图节点",en:"Pie Chart Node"},filename:"pieChart.js",isNew:!1},{id:"list",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pxKjQ5dZx80AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * 该案例演示以下功能：\n * 1、使用G6如何自定义列表节点；\n * 2、列表节点中如何包括详情信息；\n * 3、点击节点，可展开详情列表信息。\n *\n */\nG6.registerNode('expandNode', {\n  draw: function draw(cfg, group) {\n    const mainGroup = group.addGroup({\n      id: 'main-group',\n    });\n    const keyShape = mainGroup.addShape('rect', {\n      attrs: {\n        x: 0,\n        y: 0,\n        width: 100 + 60 * cfg.values.length,\n        height: 50,\n        fill: '#C6E5FF',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'key-rect-shape',\n    });\n\n    // name text\n    mainGroup.addShape('text', {\n      attrs: {\n        text: cfg.name,\n        fill: '#000',\n        width: 130,\n        x: 10,\n        y: 32,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'name-text-shape',\n    });\n\n    const subGroup = group.addGroup({\n      id: 'sub-group',\n    });\n    cfg.values.forEach(function (data, index) {\n      subGroup.addShape('rect', {\n        attrs: {\n          x: 110 + index * 60,\n          y: 0,\n          width: 50,\n          height: 50,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-shape',\n      });\n\n      subGroup.addShape('text', {\n        attrs: {\n          text: data.key,\n          fill: '#000',\n          x: 130 + index * 60,\n          y: 20,\n          fontSize: 10,\n          textBaseline: 'middle',\n          className: 'sub-group-text',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'sub-text-shape1',\n      });\n\n      subGroup.addShape('text', {\n        attrs: {\n          text: data.value,\n          fill: '#000',\n          x: 130 + index * 60,\n          y: 30,\n          fontSize: 10,\n          textBaseline: 'middle',\n          textAlign: 'left',\n          className: 'sub-group-text',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'name-text-shape2',\n      });\n    });\n\n    const listGroup = group.addGroup({\n      id: 'detail-list-group',\n    });\n\n    listGroup.addShape('rect', {\n      attrs: {\n        width: 100 + 60 * cfg.values.length - 70,\n        height: 30 * cfg.properties.length + 20,\n        fill: '#fff',\n        x: 70,\n        y: 30,\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'list-rect-shape1',\n    });\n\n    const rectWidth = 100 + 60 * cfg.values.length - 80;\n    cfg.properties.forEach(function (property, index) {\n      listGroup.addShape('rect', {\n        attrs: {\n          width: rectWidth,\n          height: 30,\n          fill: '#9EC9FF',\n          x: 80,\n          y: 40 * index + 40,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'list-rect-shape2',\n      });\n      let count = 0;\n      for (const p in property) {\n        // 每个rect中添加5个文本\n        listGroup.addShape('text', {\n          attrs: {\n            text: property[p],\n            fill: '#000',\n            x: 85 + count * (rectWidth / cfg.values.length) - count * 10,\n            y: 40 * index + 40 + 15,\n            fontSize: 10,\n            textBaseline: 'middle',\n            textAlign: 'left',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'text-shape',\n        });\n        count++;\n      }\n    });\n    listGroup.hide();\n    return keyShape;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas'],\n  },\n  fitView: true,\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'shape2',\n      x: 0,\n      y: 0,\n      type: 'expandNode',\n      name: '网站引流',\n      values: [\n        {\n          key: '曝光率',\n          value: '19.09',\n        },\n        {\n          key: '流入UV',\n          value: '910',\n        },\n        {\n          key: '点击率',\n          value: '90',\n        },\n        {\n          key: '占比',\n          value: '90',\n        },\n      ],\n      properties: [\n        {\n          name: '搜索',\n          value1: '102',\n          value2: '102',\n          value3: '102',\n          value4: '102',\n        },\n        {\n          name: '扫一扫',\n          value1: '102',\n          value2: '102',\n          value3: '102',\n          value4: '102',\n        },\n      ],\n    },\n  ],\n};\ngraph.data(data);\ngraph.render();\n\n// 点击node，展开详情\ngraph.on('node:click', function (evt) {\n  const target = evt.target;\n\n  const parentGroup = target.get('parent').get('parent');\n  const detailGroup = parentGroup.findById('detail-list-group');\n  // 将sub-group中的内容网上移动一段距离\n  const subGroup = parentGroup.findById('sub-group');\n  const keyTexts = subGroup.findAll(function (item) {\n    return item.attr('className') === 'sub-group-text';\n  });\n  const isVisible = detailGroup.get('visible');\n  if (isVisible) {\n    detailGroup.hide();\n    keyTexts.forEach(function (text) {\n      const top = text.attr('y');\n      text.attr('y', top + 10);\n    });\n  } else {\n    keyTexts.forEach(function (text) {\n      const top = text.attr('y');\n      text.attr('y', top - 10);\n    });\n    detailGroup.show();\n  }\n  graph.paint();\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"列表",en:"List"},filename:"list.js",isNew:!1},{id:"scrollNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*n-ipTrTaPD4AAAAAAAAAAAAAARQnAQ",source:'import G6 from \'@antv/g6\';\n\nconst {\n  Util,\n  registerBehavior,\n  registerEdge,\n  registerNode\n} = G6;\n\nconst rawData = [{\n    "id": "info",\n    "label": "Employee",\n    "attrs": [{\n        "key": "id",\n        "type": "number(6)"\n      },\n      {\n        "key": "key",\n        "type": "varchar(255)"\n      },\n      {\n        "key": "gender",\n        "type": "enum(M, F)"\n      },\n      {\n        "key": "birthday",\n        "type": "date"\n      },\n      {\n        "key": "hometown",\n        "type": "varchar(255)"\n      },\n      {\n        "key": "country",\n        "type": "varchar(255)"\n      },\n      {\n        "key": "nation",\n        "type": "varchar(255)"\n      },\n      {\n        "key": "jobId",\n        "type": "number(3)",\n        "relation": [{\n          "key": "id",\n          "nodeId": "job"\n        }]\n      },\n      {\n        "key": "phone",\n        "type": "varchar(255)"\n      },\n      {\n        "key": "deptId",\n        "type": "number(6)",\n        "relation": [{\n          "key": "id",\n          "nodeId": "dept"\n        }]\n      },\n      {\n        "key": "startTime",\n        "type": "date"\n      },\n      {\n        "key": "leaveTime",\n        "type": "date"\n      }\n    ]\n  },\n  {\n    "id": "dept",\n    "label": "Department",\n    "attrs": [{\n        "key": "id",\n        "type": "number(6)"\n      },\n      {\n        "key": "title",\n        "type": "varchar(255)"\n      },\n      {\n        "key": "desc",\n        "type": "text"\n      },\n      {\n        "key": "parent",\n        "type": "number(6)",\n        "relation": [{\n          "key": "id",\n          "nodeId": "dept"\n        }]\n      },\n      {\n        "key": "manager",\n        "type": "number(6)"\n      }\n    ]\n  }\n]\n\nconst isInBBox = (point, bbox) => {\n  const {\n    x,\n    y\n  } = point;\n  const {\n    minX,\n    minY,\n    maxX,\n    maxY\n  } = bbox;\n\n  return x < maxX && x > minX && y > minY && y < maxY;\n};\n\nconst itemHeight = 20;\nregisterBehavior("dice-er-scroll", {\n  getDefaultCfg() {\n    return {\n      multiple: true,\n    };\n  },\n  getEvents() {\n    return {\n      itemHeight,\n      wheel: "scorll",\n      click: "click",\n      "node:mousemove": "move",\n      "node:mousedown": "mousedown",\n      "node:mouseup": "mouseup"\n    };\n  },\n  scorll(e) {\n    e.preventDefault();\n    const {\n      graph\n    } = this;\n    const nodes = graph.getNodes().filter((n) => {\n      const bbox = n.getBBox();\n\n      return isInBBox(graph.getPointByClient(e.clientX, e.clientY), bbox);\n    });\n\n    const x = e.deltaX || e.movementX;\n    let y = e.deltaY || e.movementY;\n    if (!y && navigator.userAgent.indexOf(\'Firefox\') > -1) y = (-e.wheelDelta * 125) / 3\n\n    if (nodes) {\n      const edgesToUpdate = new Set();\n      nodes.forEach((node) => {\n        const model = node.getModel();\n        if (model.attrs.length < 2) {\n          return;\n        }\n        const idx = model.startIndex || 0;\n        let startX = model.startX || 0.5;\n        let startIndex = idx + y * 0.02;\n        startX -= x;\n        if (startIndex < 0) {\n          startIndex = 0;\n        }\n        if (startX > 0) {\n          startX = 0;\n        }\n        if (startIndex > model.attrs.length - 1) {\n          startIndex = model.attrs.length - 1;\n        }\n        graph.updateItem(node, {\n          startIndex,\n          startX,\n        });\n        node.getEdges().forEach(edge => edgesToUpdate.add(edge))\n      });\n      // G6 update the related edges when graph.updateItem with a node according to the new properties\n      // here you need to update the related edges manualy since the new properties { startIndex, startX } for the nodes are custom, and cannot be recognized by G6\n      edgesToUpdate.forEach(edge => edge.refresh())\n    }\n\n\n  },\n  click(e) {\n    const {\n      graph\n    } = this;\n    const item = e.item;\n    const shape = e.shape;\n    if (!item) {\n      return;\n    }\n\n    if (shape.get("name") === "collapse") {\n      graph.updateItem(item, {\n        collapsed: true,\n        size: [300, 50],\n      });\n      setTimeout(() => graph.layout(), 100);\n    } else if (shape.get("name") === "expand") {\n      graph.updateItem(item, {\n        collapsed: false,\n        size: [300, 80],\n      });\n      setTimeout(() => graph.layout(), 100);\n    }\n  },\n  mousedown(e) {\n    this.isMousedown = true;\n  },\n  mouseup(e) {\n    this.isMousedown = false;\n  },\n  move(e) {\n    if (this.isMousedown) return;\n    const name = e.shape.get("name");\n    const item = e.item;\n\n    if (name && name.startsWith("item")) {\n      this.graph.updateItem(item, {\n        selectedIndex: Number(name.split("-")[1]),\n      });\n    } else {\n      this.graph.updateItem(item, {\n        selectedIndex: NaN,\n      });\n    }\n  },\n});\n\nregisterEdge("dice-er-edge", {\n  draw(cfg, group) {\n    const edge = group.cfg.item;\n    const sourceNode = edge.getSource().getModel();\n    const targetNode = edge.getTarget().getModel();\n\n    const sourceIndex = sourceNode.attrs.findIndex(\n      (e) => e.key === cfg.sourceKey\n    );\n\n    const sourceStartIndex = sourceNode.startIndex || 0;\n\n    let sourceY = 15;\n\n    if (!sourceNode.collapsed && sourceIndex > sourceStartIndex - 1) {\n      sourceY = 30 + (sourceIndex - sourceStartIndex + 0.5) * itemHeight;\n      sourceY = Math.min(sourceY, 80);\n    }\n\n    const targetIndex = targetNode.attrs.findIndex(\n      (e) => e.key === cfg.targetKey\n    );\n\n    const targetStartIndex = targetNode.startIndex || 0;\n\n    let targetY = 15;\n\n    if (!targetNode.collapsed && targetIndex > targetStartIndex - 1) {\n      targetY = (targetIndex - targetStartIndex + 0.5) * itemHeight + 30;\n      targetY = Math.min(targetY, 80);\n    }\n\n    const startPoint = {\n      ...cfg.startPoint\n    };\n    const endPoint = {\n      ...cfg.endPoint\n    };\n\n    startPoint.y = startPoint.y + sourceY;\n    endPoint.y = endPoint.y + targetY;\n\n    let shape;\n    if (sourceNode.id !== targetNode.id) {\n      shape = group.addShape("path", {\n        attrs: {\n          stroke: "#5B8FF9",\n          path: [\n            ["M", startPoint.x, startPoint.y],\n            [\n              "C",\n              endPoint.x / 3 + (2 / 3) * startPoint.x,\n              startPoint.y,\n              endPoint.x / 3 + (2 / 3) * startPoint.x,\n              endPoint.y,\n              endPoint.x,\n              endPoint.y,\n            ],\n          ],\n          endArrow: true,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "path-shape",\n      });\n    } else if (!sourceNode.collapsed) {\n      let gap = Math.abs((startPoint.y - endPoint.y) / 3);\n      if (startPoint["index"] === 1) {\n        gap = -gap;\n      }\n      shape = group.addShape("path", {\n        attrs: {\n          stroke: "#5B8FF9",\n          path: [\n            ["M", startPoint.x, startPoint.y],\n            [\n              "C",\n              startPoint.x - gap,\n              startPoint.y,\n              startPoint.x - gap,\n              endPoint.y,\n              startPoint.x,\n              endPoint.y,\n            ],\n          ],\n          endArrow: true,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "path-shape",\n      });\n    }\n\n    return shape;\n  },\n  afterDraw(cfg, group) {\n    const labelCfg = cfg.labelCfg || {};\n    const edge = group.cfg.item;\n    const sourceNode = edge.getSource().getModel();\n    const targetNode = edge.getTarget().getModel();\n    if (sourceNode.collapsed && targetNode.collapsed) {\n      return;\n    }\n    const path = group.find(\n      (element) => element.get("name") === "path-shape"\n    );\n\n    const labelStyle = Util.getLabelPosition(path, 0.5, 0, 0, true);\n    const label = group.addShape("text", {\n      attrs: {\n        ...labelStyle,\n        text: cfg.label || \'\',\n        fill: "#000",\n        textAlign: "center",\n        stroke: "#fff",\n        lineWidth: 1,\n      },\n    });\n    label.rotateAtStart(labelStyle.rotate);\n  },\n});\n\nregisterNode("dice-er-box", {\n  draw(cfg, group) {\n    const width = 250;\n    const height = 96;\n    const itemCount = 10;\n    const boxStyle = {\n      stroke: "#096DD9",\n      radius: 4,\n    };\n\n    const {\n      attrs = [],\n        startIndex = 0,\n        selectedIndex,\n        collapsed,\n        icon,\n    } = cfg;\n    const list = attrs;\n    const afterList = list.slice(\n      Math.floor(startIndex),\n      Math.floor(startIndex + itemCount - 1)\n    );\n    const offsetY = (0.5 - (startIndex % 1)) * itemHeight + 30;\n\n    group.addShape("rect", {\n      attrs: {\n        fill: boxStyle.stroke,\n        height: 30,\n        width,\n        radius: [boxStyle.radius, boxStyle.radius, 0, 0],\n      },\n      draggable: true,\n    });\n\n    let fontLeft = 12;\n\n    if (icon && icon.show !== false) {\n      group.addShape("image", {\n        attrs: {\n          x: 8,\n          y: 8,\n          height: 16,\n          width: 16,\n          ...icon,\n        },\n      });\n      fontLeft += 18;\n    }\n\n    group.addShape("text", {\n      attrs: {\n        y: 22,\n        x: fontLeft,\n        fill: "#fff",\n        text: cfg.label,\n        fontSize: 12,\n        fontWeight: 500,\n      },\n    });\n\n    group.addShape("rect", {\n      attrs: {\n        x: 0,\n        y: collapsed ? 30 : 80,\n        height: 15,\n        width,\n        fill: "#eee",\n        radius: [0, 0, boxStyle.radius, boxStyle.radius],\n        cursor: "pointer",\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: collapsed ? "expand" : "collapse",\n    });\n\n    group.addShape("text", {\n      attrs: {\n        x: width / 2 - 6,\n        y: (collapsed ? 30 : 80) + 12,\n        text: collapsed ? "+" : "-",\n        width,\n        fill: "#000",\n        radius: [0, 0, boxStyle.radius, boxStyle.radius],\n        cursor: "pointer",\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: collapsed ? "expand" : "collapse",\n    });\n\n    const keyshape = group.addShape("rect", {\n      attrs: {\n        x: 0,\n        y: 0,\n        width,\n        height: collapsed ? 45 : height,\n        ...boxStyle,\n      },\n      draggable: true,\n    });\n\n    if (collapsed) {\n      return keyshape;\n    }\n\n    const listContainer = group.addGroup({});\n    listContainer.setClip({\n      type: "rect",\n      attrs: {\n        x: -8,\n        y: 30,\n        width: width + 16,\n        height: 80 - 30,\n      },\n    });\n    listContainer.addShape({\n      type: "rect",\n      attrs: {\n        x: 1,\n        y: 30,\n        width: width - 2,\n        height: 80 - 30,\n        fill: "#fff",\n      },\n      draggable: true,\n    });\n\n    if (list.length > itemCount) {\n      const barStyle = {\n        width: 4,\n        padding: 0,\n        boxStyle: {\n          stroke: "#00000022",\n        },\n        innerStyle: {\n          fill: "#00000022",\n        },\n      };\n\n      listContainer.addShape("rect", {\n        attrs: {\n          y: 30,\n          x: width - barStyle.padding - barStyle.width,\n          width: barStyle.width,\n          height: height - 30,\n          ...barStyle.boxStyle,\n        },\n      });\n\n      const indexHeight =\n        afterList.length > itemCount ?\n        (afterList.length / list.length) * height :\n        10;\n\n      listContainer.addShape("rect", {\n        attrs: {\n          y: 30 +\n            barStyle.padding +\n            (startIndex / list.length) * (height - 30),\n          x: width - barStyle.padding - barStyle.width,\n          width: barStyle.width,\n          height: Math.min(height, indexHeight),\n          ...barStyle.innerStyle,\n        },\n      });\n    }\n    if (afterList) {\n      afterList.forEach((e, i) => {\n        const isSelected =\n          Math.floor(startIndex) + i === Number(selectedIndex);\n        let {\n          key = "", type\n        } = e;\n        if (type) {\n          key += " - " + type;\n        }\n        const label = key.length > 26 ? key.slice(0, 24) + "..." : key;\n\n        listContainer.addShape("rect", {\n          attrs: {\n            x: 1,\n            y: i * itemHeight - itemHeight / 2 + offsetY,\n            width: width - 4,\n            height: itemHeight,\n            radius: 2,\n            lineWidth: 1,\n            cursor: "pointer",\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: `item-${Math.floor(startIndex) + i}-content`,\n          draggable: true,\n        });\n\n        if (!cfg.hideDot) {\n          listContainer.addShape("circle", {\n            attrs: {\n              x: 0,\n              y: i * itemHeight + offsetY,\n              r: 3,\n              stroke: boxStyle.stroke,\n              fill: "white",\n              radius: 2,\n              lineWidth: 1,\n              cursor: "pointer",\n            },\n          });\n          listContainer.addShape("circle", {\n            attrs: {\n              x: width,\n              y: i * itemHeight + offsetY,\n              r: 3,\n              stroke: boxStyle.stroke,\n              fill: "white",\n              radius: 2,\n              lineWidth: 1,\n              cursor: "pointer",\n            },\n          });\n        }\n\n        listContainer.addShape("text", {\n          attrs: {\n            x: 12,\n            y: i * itemHeight + offsetY + 6,\n            text: label,\n            fontSize: 12,\n            fill: "#000",\n            fontFamily: "Avenir,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol",\n            full: e,\n            fontWeight: isSelected ? 500 : 100,\n            cursor: "pointer",\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: `item-${Math.floor(startIndex) + i}`,\n        });\n      });\n    }\n\n\n\n    return keyshape;\n  },\n  getAnchorPoints() {\n    return [\n      [0, 0],\n      [1, 0],\n    ];\n  },\n});\n\nconst dataTransform = (data) => {\n  const nodes = [];\n  const edges = [];\n\n  data.map((node) => {\n    nodes.push({\n      ...node\n    });\n    if (node.attrs) {\n      node.attrs.forEach((attr) => {\n        if (attr.relation) {\n          attr.relation.forEach((relation) => {\n            edges.push({\n              source: node.id,\n              target: relation.nodeId,\n              sourceKey: attr.key,\n              targetKey: relation.key,\n              label: relation.label,\n            });\n          });\n        }\n\n      });\n    }\n  });\n\n  return {\n    nodes,\n    edges,\n  };\n}\n\nconst container = document.getElementById(\'container\');\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: \'container\',\n  width,\n  height,\n  defaultNode: {\n    size: [300, 200],\n    type: \'dice-er-box\',\n    color: \'#5B8FF9\',\n    style: {\n      fill: \'#9EC9FF\',\n      lineWidth: 3,\n    },\n    labelCfg: {\n      style: {\n        fill: \'black\',\n        fontSize: 20,\n      },\n    },\n  },\n  defaultEdge: {\n    type: \'dice-er-edge\',\n    style: {\n      stroke: \'#e2e2e2\',\n      lineWidth: 4,\n      endArrow: true,\n    },\n  },\n  modes: {\n    default: [\'dice-er-scroll\', \'drag-node\', \'drag-canvas\'],\n  },\n  layout: {\n    type: \'dagre\',\n    rankdir: \'LR\',\n    align: \'UL\',\n    controlPoints: true,\n    nodesepFunc: () => 0.2,\n    ranksepFunc: () => 0.5,\n  },\n  animate: true,\n  fitView: true\n})\n\ngraph.data(dataTransform(rawData));\n\ngraph.render();\n',title:{zh:"节点内容可滚动",en:"Scrollable Node"},filename:"scrollNode.js",isNew:!1}],icon:"",id:"customNode",title:{en:"Custom Node",zh:"自定义节点"},childrenKey:"demos",order:4},{demos:[{id:"extraShape",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*L4rZQbqwaRYAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Custom the edge with extra shapes\n * by Shiwu\n */\n\n// custom the edge with an extra rect\nG6.registerEdge(\n  'extra-shape-edge',\n  {\n    afterDraw(cfg, group) {\n      // get the first shape in the graphics group of this edge, it is the path of the edge here\n      // 获取图形组中的第一个图形，在这里就是边的路径图形\n      const shape = group.get('children')[0];\n      // get the coordinate of the mid point on the path\n      // 获取路径图形的中点坐标\n      const midPoint = shape.getPoint(0.5);\n      const rectColor = cfg.midPointColor || '#333';\n      // add a rect on the mid point of the path. note that the origin of a rect shape is on its lefttop\n      // 在中点增加一个矩形，注意矩形的原点在其左上角\n      group.addShape('rect', {\n        attrs: {\n          width: 10,\n          height: 10,\n          fill: rectColor || '#333',\n          // x and y should be minus width / 2 and height / 2 respectively to translate the center of the rect to the midPoint\n          // x 和 y 分别减去 width / 2 与 height / 2，使矩形中心在 midPoint 上\n          x: midPoint.x - 5,\n          y: midPoint.y - 5,\n        },\n      });\n\n      // get the coordinate of the quatile on the path\n      // 获取路径上的四分位点坐标\n      const quatile = shape.getPoint(0.25);\n      const quatileColor = cfg.quatileColor || '#333';\n      // add a circle on the quatile of the path\n      // 在四分位点上放置一个圆形\n      group.addShape('circle', {\n        attrs: {\n          r: 5,\n          fill: quatileColor || '#333',\n          x: quatile.x,\n          y: quatile.y,\n        },\n      });\n    },\n    update: undefined,\n  },\n  'cubic',\n);\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 100,\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 100,\n    },\n    {\n      id: 'node3',\n      x: 300,\n      y: 200,\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      midPointColor: '#f00',\n      quatileColor: '#f00',\n    },\n    {\n      source: 'node1',\n      target: 'node3',\n      midPointColor: '#0f0',\n      quatileColor: '#0f0',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: ['drag-node', 'drag-canvas'],\n  },\n  defaultEdge: {\n    type: 'extra-shape-edge',\n    style: {\n      stroke: '#F6BD16',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"添加额外图形",en:"Custom Edge with Extra Shapes"},filename:"extraShape.js",isNew:!1},{id:"customPolyline",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FuS3Qq_lDiIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Extend the built-in line edge and override getPath and getShapeStyle to custom a polyline edge\n * by siogo's issue（https://github.com/antvis/g6/issues/814）\n *\n * If you want to fit the dragging, you need to adjust the controlpoints while dragging\n *\n */\n\nG6.registerEdge(\n  'line-arrow',\n  {\n    getPath(points) {\n      const startPoint = points[0];\n      const endPoint = points[1];\n      return [\n        ['M', startPoint.x, startPoint.y],\n        ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, startPoint.y],\n        ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, endPoint.y],\n        ['L', endPoint.x, endPoint.y],\n      ];\n    },\n    getShapeStyle(cfg) {\n      const startPoint = cfg.startPoint;\n      const endPoint = cfg.endPoint;\n      const controlPoints = this.getControlPoints(cfg);\n      let points = [startPoint]; // the start point\n      // the control points\n      if (controlPoints) {\n        points = points.concat(controlPoints);\n      }\n      // the end point\n      points.push(endPoint);\n      const path = this.getPath(points);\n      const style = Object.assign(\n        {},\n        G6.Global.defaultEdge.style,\n        {\n          stroke: '#BBB',\n          lineWidth: 1,\n          path,\n        },\n        cfg.style,\n      );\n      return style;\n    },\n  },\n  'line',\n);\n\nconst data = {\n  nodes: [\n    {\n      id: '7',\n      x: 150,\n      y: 100,\n      size: 40,\n      anchorPoints: [\n        [1, 0.5],\n        [1, 0],\n      ],\n    },\n    {\n      id: '8',\n      x: 300,\n      y: 200,\n      size: 40,\n      anchorPoints: [\n        [0, 0.5],\n        [0, 1],\n      ],\n    },\n  ],\n  edges: [\n    {\n      source: '7',\n      target: '8',\n      sourceAnchor: 0,\n      targetAnchor: 0,\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    // behavior\n    default: ['drag-node', 'drag-canvas'],\n  },\n  defaultNode: {\n    type: 'circle',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n    linkPoints: {\n      left: true,\n      right: true,\n      fill: '#fff',\n      stroke: '#1890FF',\n      size: 3,\n    },\n  },\n  defaultEdge: {\n    type: 'line-arrow',\n    style: {\n      stroke: '#F6BD16',\n      startArrow: {\n        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',\n        fill: '#F6BD16',\n      },\n      endArrow: {\n        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',\n        fill: '#F6BD16',\n      },\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义折线",en:"Custom Polyline"},filename:"customPolyline.js",isNew:!1},{id:"customPolyline2",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ACNnQLPy20EAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Custom a new polyline\n * by siogo's issue（https://github.com/antvis/g6/issues/814）\n *\n * If you want to fit the dragging, you need to adjust the controlpoints while dragging\n */\nG6.registerEdge('line-arrow', {\n  options: {\n    style: {\n      stroke: '#ccc',\n    },\n  },\n  draw: function draw(cfg, group) {\n    const startPoint = cfg.startPoint;\n    const endPoint = cfg.endPoint;\n\n    const stroke = (cfg.style && cfg.style.stroke) || this.options.style.stroke;\n    const startArrow = (cfg.style && cfg.style.startArrow) || undefined;\n    const endArrow = (cfg.style && cfg.style.endArrow) || undefined;\n\n    const keyShape = group.addShape('path', {\n      attrs: {\n        path: [\n          ['M', startPoint.x, startPoint.y],\n          ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, startPoint.y],\n          ['L', endPoint.x / 3 + (2 / 3) * startPoint.x, endPoint.y],\n          ['L', endPoint.x, endPoint.y],\n        ],\n        stroke,\n        lineWidth: 1,\n        startArrow,\n        endArrow,\n      },\n      className: 'edge-shape',\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'edge-shape',\n    });\n    return keyShape;\n  },\n});\n\nconst data = {\n  nodes: [\n    {\n      id: '7',\n      x: 150,\n      y: 100,\n      size: 40,\n      anchorPoints: [\n        [1, 0.5],\n        [1, 0],\n      ],\n    },\n    {\n      id: '8',\n      x: 300,\n      y: 200,\n      size: 40,\n      anchorPoints: [\n        [0, 0.5],\n        [0, 1],\n      ],\n    },\n  ],\n  edges: [\n    {\n      source: '7',\n      target: '8',\n      sourceAnchor: 0,\n      targetAnchor: 0,\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    // behavior\n    default: ['drag-node', 'drag-canvas'],\n  },\n  defaultNode: {\n    type: 'circle',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n    linkPoints: {\n      left: true,\n      right: true,\n      fill: '#fff',\n      stroke: '#1890FF',\n      size: 3,\n    },\n  },\n  defaultEdge: {\n    type: 'line-arrow',\n    style: {\n      stroke: '#F6BD16',\n      startArrow: {\n        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',\n        fill: '#F6BD16',\n      },\n      endArrow: {\n        path: 'M 0,0 L 12,6 L 9,0 L 12,-6 Z',\n        fill: '#F6BD16',\n      },\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义折线 2",en:"Custom Polyline 2"},filename:"customPolyline2.js",isNew:!1},{id:"edgeMulLabel",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*01YORI5jRp8AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * Custom the edge with multiple labels\n * by Changzhe\n */\n\n// custom the edge with multiple labels\nG6.registerEdge('multipleLabelsEdge', {\n  options: {\n    style: {\n      stroke: '#000',\n    },\n  },\n  labelAutoRotate: true,\n  draw(cfg, group) {\n    const startPoint = cfg.startPoint;\n    const endPoint = cfg.endPoint;\n    const stroke = (cfg.style && cfg.style.stroke) || this.options.style.stroke;\n\n    const shape = group.addShape('path', {\n      attrs: {\n        stroke,\n        path: [\n          ['M', startPoint.x, startPoint.y],\n          ['L', endPoint.x, endPoint.y],\n        ],\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: 'path-shape',\n    });\n    if (cfg.label && cfg.label.length) {\n      // the left label\n      group.addShape('text', {\n        attrs: {\n          text: cfg.label[0],\n          fill: '#595959',\n          textAlign: 'start',\n          textBaseline: 'middle',\n          x: startPoint.x,\n          y: startPoint.y - 10,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'left-text-shape',\n      });\n      if (cfg.label.length > 1) {\n        // the right label\n        group.addShape('text', {\n          attrs: {\n            text: cfg.label[1],\n            fill: '#595959',\n            textAlign: 'end',\n            textBaseline: 'middle',\n            x: endPoint.x,\n            y: endPoint.y - 10,\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: 'right-text-shape',\n        });\n      }\n    }\n    // return the keyShape\n    return shape;\n  },\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 100,\n      label: 'node1',\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 100,\n      label: 'node2',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      // The left and right labels\n      label: ['hello', 'world'],\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  modes: {\n    default: [\n      {\n        type: 'drag-node',\n        delegate: false,\n      },\n      'drag-canvas',\n      {\n        type: 'zoom-canvas',\n        sensitivity: 0.5,\n      },\n    ],\n  },\n  defaultNode: {\n    type: 'circle',\n    size: [50],\n    linkPoints: {\n      left: true,\n      right: true,\n    },\n  },\n  defaultEdge: {\n    type: 'multipleLabelsEdge',\n    style: {\n      stroke: '#F6BD16',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"多标签边",en:"Multiple Labels"},filename:"edgeMulLabel.js",isNew:!1}],icon:"",id:"customEdge",title:{en:"Custom Edge",zh:"自定义边"},childrenKey:"demos",order:5},{demos:[{id:"cCircle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1LelSq5TP9EAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The demo shows customing a combo type by extending the built-in circle combo\n * by Shiwu\n *\n */\n\n// The symbols for the marker inside the combo\nconst collapseIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n  ];\n};\nconst expandIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n    ['M', x - r + r, y - r + 4],\n    ['L', x, y + r - 4],\n  ];\n};\n\nG6.registerCombo(\n  'cCircle',\n  {\n    drawShape: function draw(cfg, group) {\n      const self = this;\n      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo\n      const style = self.getShapeStyle(cfg);\n      // Add a circle shape as keyShape which is the same as the extended 'circle' type Combo\n      const circle = group.addShape('circle', {\n        attrs: {\n          ...style,\n          x: 0,\n          y: 0,\n          r: style.r,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-keyShape',\n      });\n      // Add the marker on the bottom\n      const marker = group.addShape('marker', {\n        attrs: {\n          ...style,\n          fill: '#fff',\n          opacity: 1,\n          x: 0,\n          y: style.r,\n          r: 10,\n          symbol: collapseIcon,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-marker-shape',\n      });\n\n      return circle;\n    },\n    // Define the updating logic for the marker\n    afterUpdate: function afterUpdate(cfg, combo) {\n      const self = this;\n      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo\n      const style = self.getShapeStyle(cfg);\n      const group = combo.get('group');\n      // Find the marker shape in the graphics group of the Combo\n      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');\n      // Update the marker shape\n      marker.attr({\n        x: 0,\n        y: style.r,\n        // The property 'collapsed' in the combo data represents the collapsing state of the Combo\n        // Update the symbol according to 'collapsed'\n        symbol: cfg.collapsed ? expandIcon : collapseIcon,\n      });\n    },\n  },\n  'circle',\n);\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },\n    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },\n    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },\n  ],\n  combos: [\n    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },\n    { id: 'combo2', label: 'Combo 2' },\n    { id: 'combo3', label: 'Combo 3', collapsed: true },\n  ],\n};\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Click the bottom marker to collapse/expand the combo.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  // Configure the combos globally\n  defaultCombo: {\n    // The type of the combos. You can also assign type in the data of combos\n    type: 'cCircle',\n    labelCfg: {\n      refY: 2,\n    },\n    // ... Other global configurations for combos\n  },\n  modes: {\n    default: ['drag-combo', 'drag-node', 'drag-canvas'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\n// collapse/expand when click the marker\ngraph.on('combo:click', (e) => {\n  if (e.target.get('name') === 'combo-marker-shape') {\n    // graph.collapseExpandCombo(e.item.getModel().id);\n    graph.collapseExpandCombo(e.item);\n    if (graph.get('layout')) graph.layout();\n    else graph.refreshPositions();\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"带有 Marker 的 Circle",filename:"cCircle.js",isNew:!1},{id:"cRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*rQGaT4kiaYoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The demo shows customing a combo type by extending the built-in circle combo\n * by Shiwu\n *\n */\n\n// The symbols for the marker inside the combo\nconst collapseIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n  ];\n};\nconst expandIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n    ['M', x - r + r, y - r + 4],\n    ['L', x, y + r - 4],\n  ];\n};\n\nG6.registerCombo(\n  'cRect',\n  {\n    drawShape: function drawShape(cfg, group) {\n      const self = this;\n      // Get the padding from the configuration\n      cfg.padding = cfg.padding || [50, 20, 20, 20];\n      // Get the shape's style, where the style.width and style.height correspond to the width and height in the figure of Illustration of Built-in Rect Combo\n      const style = self.getShapeStyle(cfg);\n      // Add a rect shape as the keyShape which is the same as the extended rect Combo\n      const rect = group.addShape('rect', {\n        attrs: {\n          ...style,\n          x: -style.width / 2 - padding[3],\n          y: -style.height / 2 - padding[0],\n          width: style.width,\n          height: style.height,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-keyShape',\n      });\n      // Add the circle on the right\n      group.addShape('marker', {\n        attrs: {\n          ...style,\n          fill: '#fff',\n          opacity: 1,\n          // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo\n          x: cfg.style.width / 2 + cfg.padding[1],\n          y: (cfg.padding[2] - cfg.padding[0]) / 2,\n          r: 10,\n          symbol: collapseIcon,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-marker-shape',\n      });\n      return rect;\n    },\n    // Define the updating logic of the right circle\n    afterUpdate: function afterUpdate(cfg, combo) {\n      const group = combo.get('group');\n      // Find the circle shape in the graphics group of the Combo by name\n      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');\n      // Update the position of the right circle\n      marker.attr({\n        // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo\n        x: cfg.style.width / 2 + cfg.padding[1],\n        y: (cfg.padding[2] - cfg.padding[0]) / 2,\n        // The property 'collapsed' in the combo data represents the collapsing state of the Combo\n        // Update the symbol according to 'collapsed'\n        symbol: cfg.collapsed ? expandIcon : collapseIcon,\n      });\n    },\n  },\n  'rect',\n);\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },\n    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },\n    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },\n  ],\n  combos: [\n    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },\n    { id: 'combo2', label: 'Combo 2' },\n    { id: 'combo3', label: 'Combo 3', collapsed: true },\n  ],\n};\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Click the right marker to collapse/expand the combo.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  // Configure the combos globally\n  defaultCombo: {\n    // The type of the combos. You can also assign type in the data of combos\n    type: 'cRect',\n    // ... Other global configurations for combos\n  },\n  modes: {\n    default: ['drag-combo', 'drag-node', 'drag-canvas'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\n// collapse/expand when click the marker\ngraph.on('combo:click', (e) => {\n  if (e.target.get('name') === 'combo-marker-shape') {\n    // graph.collapseExpandCombo(e.item.getModel().id);\n    graph.collapseExpandCombo(e.item);\n    if (graph.get('layout')) graph.layout();\n    else graph.refreshPositions();\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"带有 Marker 的 Rect",filename:"cRect.js",isNew:!1}],icon:"",id:"customCombo",title:{en:"Custom Combo",zh:"自定义 Combo"},childrenKey:"demos",order:6},{demos:[{id:"copyLabel",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*O5DCQ4ziMisAAAAAAAAAAAAAARQnAQ",source:'import G6 from "@antv/g6";\n\n/**\n * Process the long label, hover to show the complete label, click the icon to copy the label\n * provided by GitHub user @WontonCat\n * Thanks for contributing!\n */\n\n const tipDiv = document.createElement(\'div\');\n tipDiv.innerHTML = `Hover to show the complete label, click the icon to copy the content. Hover 显示完整 label，点击左侧 icon 复制 label 内容`;\n document.getElementById(\'container\').appendChild(tipDiv);\n\n\n/**\n * format the string\n * @param {string} str The origin string\n * @param {number} maxWidth max width\n * @param {number} fontSize font size\n * @return {string} the processed result\n */\nconst fittingString = (str, maxWidth, fontSize) => {\n  const ellipsis = "...";\n  const ellipsisLength = G6.Util.getTextSize(ellipsis, fontSize)[0];\n  let currentWidth = 0;\n  let res = str;\n  const pattern = new RegExp("[\\u4E00-\\u9FA5]+"); // distinguish the Chinese charactors and letters\n  str.split("").forEach((letter, i) => {\n    if (currentWidth > maxWidth - ellipsisLength) return;\n    if (pattern.test(letter)) {\n      // Chinese charactors\n      currentWidth += fontSize;\n    } else {\n      // get the width of single letter according to the fontSize\n      currentWidth += G6.Util.getLetterWidth(letter, fontSize);\n    }\n    if (currentWidth > maxWidth - ellipsisLength) {\n      res = `${str.substr(0, i)}${ellipsis}`;\n    }\n  });\n  return res;\n};\n\nconst copyStr = (str) => {\n  const input = document.createElement("textarea");\n  input.value = str;\n  document.body.appendChild(input);\n  input.select();\n  document.execCommand("Copy");\n  document.body.removeChild(input);\n  alert("Copy Success!");\n};\n\nconst data = {\n  nodes: [\n    {\n      x: 100,\n      y: 0,\n      id: "node1",\n      topText: "This label is too long to be displayed",\n      bottomText: "This label is too long to be displayed"\n    },\n    {\n      x: 100,\n      y: 100,\n      id: "node2",\n      topText: "Short Label",\n      bottomText: "Click the Logo to Copy!"\n    }\n  ]\n};\n\nconst width = document.getElementById("container").scrollWidth;\nconst height = document.getElementById("container").scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: "container",\n  width,\n  height: height - 50,\n  // translate the graph to align the canvas\'s center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    type: "copy-node"\n  },\n  defaultEdge: {\n    color: "#F6BD16"\n  }\n});\n\nconst nodeHeight = 80;\nconst nodeWidth = 200;\nconst fillColor = "#f6e9d7";\nconst fontColor = "#ff7900";\nconst padding = 7;\n\nG6.registerNode(\n  "copy-node",\n  {\n    drawShape: function drawShape(cfg, group) {\n      const rect = group.addShape("rect", {\n        attrs: {\n          x: 0,\n          y: 0,\n          height: nodeHeight,\n          width: nodeWidth,\n          fill: fillColor,\n          stroke: fontColor,\n          lineWidth: 2,\n          radius: 5\n        }\n      });\n\n      // 上部文字区域\n      const topGroup = group.addGroup({\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "top-group"\n      });\n\n      topGroup.addShape("rect", {\n        attrs: {\n          fill: "#fff",\n          stroke: "#c7d0d1",\n          x: padding,\n          y: padding,\n          width: nodeWidth - padding * 2,\n          height: 0.5 * nodeHeight - padding,\n          lineWidth: 1.5,\n          radius: 4\n        }\n      });\n\n      topGroup.addShape("text", {\n        attrs: {\n          text: fittingString(cfg.topText, nodeWidth - padding * 2 - 10, 14),\n          x: 0.5 * nodeWidth,\n          y: (0.5 * nodeHeight + padding) * 0.5,\n          fontSize: 14,\n          textAlign: "center",\n          textBaseline: "middle",\n          shadowColor: fontColor,\n          fill: fontColor\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "top-text"\n      });\n\n      topGroup.addShape("image", {\n        attrs: {\n          x: padding + 5,\n          y: padding + (0.5 * nodeHeight - padding) * 0.5 - 10,\n          height: 20,\n          width: 20,\n          img: "https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png",\n          opacity: 0,\n          cursor: "pointer"\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "top-copy-img"\n      });\n\n      // 下部文字区域\n      const bottomGroup = group.addGroup({\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "bottom-group"\n      });\n\n      bottomGroup.addShape("text", {\n        attrs: {\n          text: fittingString(cfg.bottomText, nodeWidth - 10, 14),\n          x: 0.5 * nodeWidth,\n          y: nodeHeight - (0.5 * nodeHeight + padding) * 0.5,\n          fontSize: 14,\n          textAlign: "center",\n          textBaseline: "middle",\n          shadowColor: fontColor,\n          fill: fontColor\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "bottom-text"\n      });\n\n      bottomGroup.addShape("image", {\n        attrs: {\n          x: 5,\n          y: 0.5 * nodeHeight + 8,\n          height: 20,\n          width: 20,\n          img: "https://gw.alipayobjects.com/zos/antfincdn/FLrTNDvlna/antv.png",\n          opacity: 0,\n          cursor: "pointer"\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: "bottom-copy-img"\n      });\n\n      return rect;\n    },\n    setState(name, value, item) {\n      const group = item.get("group");\n      const model = item.get("model");\n      const { topText, bottomText } = model;\n\n      if (name === "top-group-active") {\n        const img = group.find((e) => e.get("name") === "top-copy-img");\n        img.attr({\n          opacity: value ? 1 : 0\n        });\n\n        const text = group.find((e) => e.get("name") === "top-text");\n        // 区域是否够长 ? 居中， 展示内容不变 : 左对其， 展示完整\n        const cutStr = fittingString(topText, nodeWidth - padding * 2 - 10, 14);\n        if (cutStr === topText) {\n          text.attr({\n            fontWeight: value ? 800 : 700,\n            shadowBlur: value ? 12.2 : 0,\n            text: value\n              ? topText\n              : fittingString(topText, nodeWidth - padding * 2 - 10, 14)\n          });\n        } else {\n          text.attr({\n            fontWeight: value ? 800 : 700,\n            x: value ? padding + 30 : 0.5 * nodeWidth,\n            shadowBlur: value ? 12.2 : 0,\n            textAlign: value ? "left" : "center",\n            text: value\n              ? topText\n              : fittingString(topText, nodeWidth - padding * 2 - 10, 14)\n          });\n        }\n      }\n\n      if (name === "bottom-group-active") {\n        const img = group.find((e) => e.get("name") === "bottom-copy-img");\n        img.attr({\n          opacity: value ? 1 : 0\n        });\n\n        const text = group.find((e) => e.get("name") === "bottom-text");\n        const cutStr = fittingString(bottomText, nodeWidth - 10, 14);\n\n        if (cutStr === bottomText) {\n          text.attr({\n            fontWeight: value ? 800 : 700,\n            shadowBlur: value ? 12.2 : 0,\n            text: value\n              ? bottomText\n              : fittingString(bottomText, nodeWidth - 10, 14)\n          });\n        } else {\n          text.attr({\n            fontWeight: value ? 800 : 700,\n            x: value ? 30 : 0.5 * nodeWidth,\n            shadowBlur: value ? 12.2 : 0,\n            textAlign: value ? "left" : "center",\n            text: value\n              ? bottomText\n              : fittingString(bottomText, nodeWidth - 10, 14)\n          });\n        }\n      }\n    }\n  },\n  "single-node"\n);\n\ngraph.on("top-group:mouseenter", (e) => {\n  graph.setItemState(e.item, "top-group-active", true);\n});\ngraph.on("top-group:mouseleave", (e) => {\n  graph.setItemState(e.item, "top-group-active", false);\n});\ngraph.on("bottom-group:mouseenter", (e) => {\n  graph.setItemState(e.item, "bottom-group-active", true);\n});\ngraph.on("bottom-group:mouseleave", (e) => {\n  graph.setItemState(e.item, "bottom-group-active", false);\n});\n\ngraph.on("node:click", (e) => {\n  const name = e.target.get("name");\n  const model = e.item.get("model");\n  if (name === "top-copy-img") {\n    const text = model.topText;\n    copyStr(text);\n  } else if (name === "bottom-copy-img") {\n    const text = model.bottomText;\n    copyStr(text);\n  }\n});\ngraph.data(data);\ngraph.render();\n',title:{zh:"文本超长交互与复制",en:"Long Label Show and Copy"},filename:"copyLabel.js",isNew:!1},{id:"labelLen",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FNzAQKvcW1kAAAAAAAAAAABkARQnAQ",source:"/**\n * When the label is too long to be displayed, hide the overflow characters and show a ellipsis instead\n * There are two ways to process the long labels\n * 1. Process in the data;\n * 2. Process when custom the edge or node like this:\n *  group.addShape('text', {\n *     attrs: {\n *       text: fittingString(cfg.label, 50, 12),\n *       ...\n *     },\n *     // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n *     name: 'text-shape'\n *  })\n *\n */\nimport G6 from '@antv/g6';\n\n/**\n * format the string\n * @param {string} str The origin string\n * @param {number} maxWidth max width\n * @param {number} fontSize font size\n * @return {string} the processed result\n */\nconst fittingString = (str, maxWidth, fontSize) => {\n  const ellipsis = '...';\n  const ellipsisLength = G6.Util.getTextSize(ellipsis, fontSize)[0];\n  let currentWidth = 0;\n  let res = str;\n  const pattern = new RegExp('[\\u4E00-\\u9FA5]+'); // distinguish the Chinese charactors and letters\n  str.split('').forEach((letter, i) => {\n    if (currentWidth > maxWidth - ellipsisLength) return;\n    if (pattern.test(letter)) {\n      // Chinese charactors\n      currentWidth += fontSize;\n    } else {\n      // get the width of single letter according to the fontSize\n      currentWidth += G6.Util.getLetterWidth(letter, fontSize);\n    }\n    if (currentWidth > maxWidth - ellipsisLength) {\n      res = `${str.substr(0, i)}${ellipsis}`;\n    }\n  });\n  return res;\n};\n\nconst globalFontSize = 12;\n\nconst data = {\n  nodes: [\n    {\n      x: 100,\n      y: 100,\n      size: 40,\n      label: 'This label is too long to be displayed',\n      id: 'node1',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n    },\n    {\n      x: 300,\n      y: 100,\n      size: 80,\n      label: 'This label is also too long to be displayed',\n      id: 'node2',\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      label: 'This label is too long to be displayed',\n      labelCfg: {\n        refY: 20,\n        style: {\n          fontSize: globalFontSize,\n        },\n      },\n      style: {\n        endArrow: true,\n      },\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n    labelCfg: {\n      style: {\n        fontSize: globalFontSize,\n      },\n    },\n  },\n  defaultEdge: {\n    color: '#F6BD16',\n  },\n});\n\n// Modify the label in the data\ndata.nodes.forEach(function (node) {\n  node.label = fittingString(node.label, node.size, globalFontSize);\n});\ndata.edges.forEach(function (edge) {\n  edge.label = fittingString(edge.label, 120, globalFontSize);\n});\n\ngraph.data(data);\ngraph.render();\n",title:{zh:"文本超长",en:"Long Label"},filename:"labelLen.js",isNew:!1},{id:"labelLen1",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*EC0-R7tAn0MAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * Process the long label by breaking the text\n * by Jingxi\n *\n */\n\n/**\n * format the string\n * @param {string} str The origin string\n * @param {number} maxWidth max width\n * @param {number} fontSize font size\n * @return {string} the processed result\n */\nconst fittingString = (str, maxWidth, fontSize) => {\n  let currentWidth = 0;\n  let res = str;\n  const pattern = new RegExp('[\\u4E00-\\u9FA5]+'); // distinguish the Chinese charactors and letters\n  str.split('').forEach((letter, i) => {\n    if (currentWidth > maxWidth) return;\n    if (pattern.test(letter)) {\n      // Chinese charactors\n      currentWidth += fontSize;\n    } else {\n      // get the width of single letter according to the fontSize\n      currentWidth += G6.Util.getLetterWidth(letter, fontSize);\n    }\n    if (currentWidth > maxWidth) {\n      res = `${str.substr(0, i)}\\n${str.substr(i)}`;\n    }\n  });\n  return res;\n};\n\nconst globalFontSize = 12;\nconst data = {\n  nodes: [\n    {\n      x: 100,\n      y: 100,\n      label: fittingString('Break the line if it is too long', 80, globalFontSize),\n      id: 'node1',\n      labelCfg: {\n        position: 'bottom',\n      },\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n    },\n    {\n      x: 300,\n      y: 100,\n      label: fittingString('Break the line if it is too long', 80, globalFontSize),\n      id: 'node2',\n      labelCfg: {\n        position: 'bottom',\n      },\n      anchorPoints: [\n        [0, 0.5],\n        [1, 0.5],\n      ],\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      label: fittingString('Break the line if it is too long', 100, globalFontSize),\n      labelCfg: {\n        refY: 20,\n      },\n      style: {\n        endArrow: true,\n      },\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    type: 'rect',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    color: '#F6BD16',\n  },\n});\ngraph.data(data);\ngraph.render();\n",title:{zh:"使用换行符处理文本超长",en:"Break Line for Long Label"},filename:"labelLen1.js",isNew:!1}],icon:"",id:"label",title:{en:"Long Label",zh:"超长文本"},childrenKey:"demos",order:7},{demos:[{id:"nodeBg",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*m5ABT5ra4w4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 150,\n      y: 50,\n      label: 'node1',\n    },\n    {\n      id: 'node2',\n      x: 250,\n      y: 200,\n      label: 'node2',\n    },\n    {\n      id: 'node3',\n      x: 100,\n      y: 350,\n      label: 'node3',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      label: 'edge 1',\n    },\n    {\n      source: 'node2',\n      target: 'node3',\n      label: 'edge 2',\n    },\n    {\n      source: 'node3',\n      target: 'node1',\n      label: 'edge 3',\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    type: 'circle',\n    labelCfg: {\n      style: {\n        fill: '#1890ff',\n        fontSize: 14,\n        background: {\n          fill: '#ffffff',\n          stroke: '#9EC9FF',\n          padding: [2, 2, 2, 2],\n          radius: 2,\n        },\n      },\n      position: 'bottom',\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  nodeStateStyles: {\n    // style configurations for hover state\n    hover: {\n      fillOpacity: 0.8,\n    },\n    // style configurations for selected state\n    selected: {\n      lineWidth: 5,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n",title:{zh:"设置节点文本背景",en:"Set Node Label Background"},filename:"nodeBg.js",isNew:!1},{id:"edgeBg",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*w_bNSZTlPXUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 150,\n      y: 50,\n      label: 'node1',\n    },\n    {\n      id: 'node2',\n      x: 250,\n      y: 200,\n      label: 'node2',\n    },\n    {\n      id: 'node3',\n      x: 100,\n      y: 350,\n      label: 'node3',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      label: 'edge 1',\n    },\n    {\n      source: 'node2',\n      target: 'node3',\n      label: 'edge 2',\n    },\n    {\n      source: 'node3',\n      target: 'node1',\n      label: 'edge 3',\n    },\n  ],\n};\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  defaultNode: {\n    type: 'circle',\n    labelCfg: {\n      position: 'bottom',\n    },\n  },\n  defaultEdge: {\n    labelCfg: {\n      autoRotate: true,\n      style: {\n        fill: '#1890ff',\n        fontSize: 14,\n        background: {\n          fill: '#ffffff',\n          stroke: '#9EC9FF',\n          padding: [2, 2, 2, 2],\n          radius: 2,\n        },\n      },\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  nodeStateStyles: {\n    // style configurations for hover state\n    hover: {\n      fillOpacity: 0.8,\n    },\n    // style configurations for selected state\n    selected: {\n      lineWidth: 5,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n",title:{zh:"设置边上文本背景",en:"Set Edge label Background"},filename:"edgeBg.js",isNew:!1}],icon:"",id:"labelBg",title:{en:"Label Background",zh:"设置文本背景"},childrenKey:"demos",order:8},{demos:[{id:"multiEdges",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*g2p_Qa_wZcIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 50,\n      y: 350,\n      label: 'A',\n    },\n    {\n      id: 'node2',\n      x: 250,\n      y: 150,\n      label: 'B',\n    },\n    {\n      id: 'node3',\n      x: 450,\n      y: 350,\n      label: 'C',\n    },\n  ],\n  edges: [],\n};\n\nfor (let i = 0; i < 10; i++) {\n  data.edges.push({\n    source: 'node1',\n    target: 'node2',\n    label: `${i}th edge of A-B`,\n  });\n}\nfor (let i = 0; i < 5; i++) {\n  data.edges.push({\n    source: 'node2',\n    target: 'node3',\n    label: `${i}th edge of B-C`,\n  });\n}\n\nG6.Util.processParallelEdges(data.edges);\n\nconst width = document.getElementById('container').scrollWidth;\nconst height = document.getElementById('container').scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // translate the graph to align the canvas's center, support by v3.5.1\n  fitCenter: true,\n  // the edges are linked to the center of source and target ndoes\n  linkCenter: true,\n  defaultNode: {\n    type: 'circle',\n    size: [40],\n    color: '#5B8FF9',\n    style: {\n      fill: '#9EC9FF',\n      lineWidth: 3,\n    },\n    labelCfg: {\n      style: {\n        fill: '#000',\n        fontSize: 14,\n      },\n    },\n  },\n  defaultEdge: {\n    type: 'quadratic',\n    labelCfg: {\n      autoRotate: true,\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  nodeStateStyles: {\n    // style configurations for hover state\n    hover: {\n      fillOpacity: 0.8,\n    },\n    // style configurations for selected state\n    selected: {\n      lineWidth: 5,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n",title:{zh:"两节点间存在多条边",en:"Multiple Edges Between 2 Nodes"},filename:"multiEdges.js",isNew:!1}],icon:"",id:"multiEdge",title:{en:"Multiple Edges Between 2 Nodes",zh:"两节点间存在多条边"},childrenKey:"demos",order:9}],childrenKey:"examples"},{id:"interaction",title:{zh:"交互",en:"Interaction"},icon:"interaction",examples:[{demos:[{id:"activateRelations",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*A3iMQo8L_McAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #000;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nconst tooltip = new G6.Tooltip({\n  offsetX: 10,\n  offsetY: 10,\n  fixToNode: [1, 0.5],\n  // the types of items that allow the tooltip show up\n  // 允许出现 tooltip 的 item 类型\n  itemTypes: ['node', 'edge'],\n  // custom the tooltip's content\n  // 自定义 tooltip 内容\n  getContent: (e) => {\n    const outDiv = document.createElement('div');\n    outDiv.style.width = 'fit-content';\n    outDiv.style.height = 'fit-content';\n    const model = e.item.getModel();\n    if (e.item.getType() === 'node') {\n      outDiv.innerHTML = `${model.name}`;\n    } else {\n      const source = e.item.getSource();\n      const target = e.item.getTarget();\n      outDiv.innerHTML = `来源：${source.getModel().name}<br/>去向：${target.getModel().name}`;\n    }\n    return outDiv;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  layout: {\n    type: 'force',\n    edgeStrength: 0.7,\n  },\n  plugins: [tooltip],\n  modes: {\n    default: ['drag-canvas', 'activate-relations'],\n  },\n  defaultNode: {\n    size: [10, 10],\n    /* style for the keyShape */\n    // style: {\n    //   lineWidth: 2,\n    //   fill: '#DEE9FF',\n    //   stroke: '#5B8FF9',\n    // },\n  },\n  defaultEdge: {\n    /* style for the keyShape */\n    style: {\n      stroke: '#aaa',\n      lineAppendWidth: 2,\n      opacity: 0.3,\n    },\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable */\n  // nodeStateStyles: {\n  //   active: {\n  //     opacity: 1,\n  //   },\n  //   inactive: {\n  //     opacity: 0.2,\n  //   },\n  // },\n  // edgeStateStyles: {\n  //   active: {\n  //     stroke: '#999',\n  //   },\n  // },\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/xiaomi.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"内置的高亮节点",en:"Activate Relations"},filename:"activateRelations.js",isNew:!1},{id:"highlightDark",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*A3iMQo8L_McAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #000;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nconst tooltip = new G6.Tooltip({\n  offsetX: 10,\n  offsetY: 10,\n  fixToNode: [1, 0.5],\n  // the types of items that allow the tooltip show up\n  // 允许出现 tooltip 的 item 类型\n  itemTypes: ['node', 'edge'],\n  // custom the tooltip's content\n  // 自定义 tooltip 内容\n  getContent: (e) => {\n    const outDiv = document.createElement('div');\n    outDiv.style.width = 'fit-content';\n    outDiv.style.height = 'fit-content';\n    const model = e.item.getModel();\n    if (e.item.getType() === 'node') {\n      outDiv.innerHTML = `${model.name}`;\n    } else {\n      const source = e.item.getSource();\n      const target = e.item.getTarget();\n      outDiv.innerHTML = `来源：${source.getModel().name}<br/>去向：${target.getModel().name}`;\n    }\n    return outDiv;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  plugins: [tooltip],\n  layout: {\n    type: 'force',\n    edgeStrength: 0.7,\n  },\n  modes: {\n    default: ['drag-canvas'],\n  },\n  defaultNode: {\n    size: [10, 10],\n    style: {\n      lineWidth: 2,\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    style: {\n      stroke: '#e2e2e2',\n      lineAppendWidth: 2,\n    },\n  },\n  nodeStateStyles: {\n    highlight: {\n      opacity: 1,\n    },\n    dark: {\n      opacity: 0.2,\n    },\n  },\n  edgeStateStyles: {\n    highlight: {\n      stroke: '#999',\n    },\n  },\n});\n\nfunction clearAllStats() {\n  graph.setAutoPaint(false);\n  graph.getNodes().forEach(function (node) {\n    graph.clearItemStates(node);\n  });\n  graph.getEdges().forEach(function (edge) {\n    graph.clearItemStates(edge);\n  });\n  graph.paint();\n  graph.setAutoPaint(true);\n}\n\ngraph.on('node:mouseenter', function (e) {\n  const item = e.item;\n  graph.setAutoPaint(false);\n  graph.getNodes().forEach(function (node) {\n    graph.clearItemStates(node);\n    graph.setItemState(node, 'dark', true);\n  });\n  graph.setItemState(item, 'dark', false);\n  graph.setItemState(item, 'highlight', true);\n  graph.getEdges().forEach(function (edge) {\n    if (edge.getSource() === item) {\n      graph.setItemState(edge.getTarget(), 'dark', false);\n      graph.setItemState(edge.getTarget(), 'highlight', true);\n      graph.setItemState(edge, 'highlight', true);\n      edge.toFront();\n    } else if (edge.getTarget() === item) {\n      graph.setItemState(edge.getSource(), 'dark', false);\n      graph.setItemState(edge.getSource(), 'highlight', true);\n      graph.setItemState(edge, 'highlight', true);\n      edge.toFront();\n    } else {\n      graph.setItemState(edge, 'highlight', false);\n    }\n  });\n  graph.paint();\n  graph.setAutoPaint(true);\n});\ngraph.on('node:mouseleave', clearAllStats);\ngraph.on('canvas:click', clearAllStats);\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/xiaomi.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data({\n      nodes: data.nodes,\n      edges: data.edges.map(function (edge, i) {\n        edge.id = 'edge' + i;\n        return Object.assign({}, edge);\n      }),\n    });\n\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义高亮",en:"Custom Highlight"},filename:"highlightDark.js",isNew:!1}],icon:"",id:"highlight",title:{en:"Highlight Nodes",zh:"高亮相邻节点"},childrenKey:"demos",order:0},{demos:[{id:"dragSubtree",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*EU_yRa8hMJUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Move a subtree to a new parent by dragging the root node of the subtree.';\ncontainer.appendChild(descriptionDiv);\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const container = document.getElementById('container');\n    const width = container.scrollWidth;\n    const height = (container.scrollHeight || 500) - 20;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          'drag-canvas',\n          'zoom-canvas',\n          {\n            type: 'drag-node',\n            enableDelegate: true,\n          },\n        ],\n      },\n      defaultNode: {\n        size: [26, 26],\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n        style: {\n          fill: '#C6E5FF',\n          stroke: '#5B8FF9',\n        },\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n        style: {\n          stroke: '#A3B1BF',\n        },\n      },\n      nodeStateStyles: {\n        closest: {\n          fill: '#f00',\n        },\n      },\n      layout: {\n        type: 'compactBox',\n        direction: 'LR',\n        getId: function getId(d) {\n          return d.id;\n        },\n        getHeight: function getHeight() {\n          return 16;\n        },\n        getWidth: function getWidth() {\n          return 16;\n        },\n        getVGap: function getVGap() {\n          return 10;\n        },\n        getHGap: function getHGap() {\n          return 100;\n        },\n      },\n    });\n\n    graph.node(function (node) {\n      return {\n        label: node.id,\n        labelCfg: {\n          offset: 10,\n          position: node.children && node.children.length > 0 ? 'left' : 'right',\n        },\n      };\n    });\n\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n\n    let minDisNode;\n    graph.on('node:dragstart', (e) => {\n      minDisNode = undefined;\n    });\n    graph.on('node:drag', (e) => {\n      minDisNode = undefined;\n      const item = e.item;\n      const model = item.getModel();\n      const nodes = graph.getNodes();\n      let minDis = Infinity;\n      nodes.forEach((inode) => {\n        graph.setItemState(inode, 'closest', false);\n        const node = inode.getModel();\n        if (node.id === model.id) return;\n        const dis = (node.x - e.x) * (node.x - e.x) + (node.y - e.y) * (node.y - e.y);\n        if (dis < minDis) {\n          minDis = dis;\n          minDisNode = inode;\n        }\n      });\n      console.log('minDis', minDis, minDisNode);\n      if (minDis < 2000) graph.setItemState(minDisNode, 'closest', true);\n      else minDisNode = undefined;\n    });\n\n    graph.on('node:dragend', (e) => {\n      if (!minDisNode) {\n        descriptionDiv.innerHTML = 'Failed. No node close to the dragged node.';\n        return;\n      }\n      const item = e.item;\n      const id = item.getID();\n      const data = graph.findDataById(id);\n      // if the minDisNode is a descent of the dragged node, return\n      let isDescent = false;\n      const minDisNodeId = minDisNode.getID();\n      console.log('dragend', minDisNodeId, isDescent, data, id);\n\n      G6.Util.traverseTree(data, (d) => {\n        if (d.id === minDisNodeId) isDescent = true;\n      });\n      if (isDescent) {\n        descriptionDiv.innerHTML = 'Failed. The target node is a descendant of the dragged node.';\n        return;\n      }\n      graph.removeChild(id);\n\n      setTimeout(() => {\n        const newParentData = graph.findDataById(minDisNodeId);\n        let newChildren = newParentData.children;\n        if (newChildren) newChildren.push(data);\n        else newChildren = [data];\n        graph.updateChildren(newChildren, minDisNodeId);\n        descriptionDiv.innerHTML = 'Success.';\n      }, 600);\n    });\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n      };\n  });\n",title:{zh:"拖拽子树改变结构",en:"Move Subtree to New Parent"},filename:"dragSubtree.js",isNew:!1},{id:"collapseSlibing",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ugs9Qad-bQMAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * 该案例演示，点击一个节点，同层的同类节点合并为一个聚合节点。再次点击则展开。\n * 来示例启发自 GitHub 用户 @c1105590204 \n * by 十吾\n * \n * Click a node to collapse the siblings with same type, and click again to expand\n * This demo is inspired by the GitHub User @c1105590204 \n * by Yanyan-Wang\n */\n\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Click a node to collapse the siblings with same cluster, and click again to expand';\ncontainer.appendChild(descriptionDiv);\n\n// custom the collapse-sibling behavior\nG6.registerBehavior('collapse-slibing', {\n  getEvents() {\n    return {\n      'node:click': 'onClick',\n    };\n  },\n  onClick(evt) {\n    const { item } = evt;\n    const model = item.getModel();\n    const cluster = model.cluster;\n    const parentData = item.get('parent').getModel();\n\n    if (model.collapsedSiblings) {\n      graph.removeChild(model.id);\n      setTimeout(() => {\n        const children = parentData.children;\n        for (let i = model.collapsedSiblings.length - 1; i >= 0; i --) {\n          const add = model.collapsedSiblings[i];\n          children.splice(add.idx, 0, add);\n        }\n        delete model.collapsedSiblings;\n        this.graph.updateChildren(children, parentData.id)\n      }, 550);\n      return;\n    }\n    const siblingData = parentData.children;\n    if (siblingData.length <= 1) return;\n    let count = 0;\n    const aggregateNode = {\n      id: `aggregate-node-${model.id}`,\n      children: [],\n      cluster,\n      collapsedSiblings: []\n    }\n    let modelIdx = siblingData.length - 1;\n    for (let i = siblingData.length - 1; i >= 0; i --) {\n      const sibling = siblingData[i]\n      if (sibling.id === model.id) {\n\n        const remove = siblingData[i]\n        remove.idx = i;\n        aggregateNode.collapsedSiblings.push(remove);\n        modelIdx = Math.min(i, modelIdx);\n\n        aggregateNode.children = (siblingData[i].children || []).concat(aggregateNode.children);\n      }\n      else if (sibling.cluster === cluster && sibling.id !== model.id) {\n        count ++;\n        aggregateNode.children = (siblingData[i].children || []).concat(aggregateNode.children);\n        const remove = siblingData.splice(i, 1)[0]\n        remove.idx = i;\n        aggregateNode.collapsedSiblings.push(remove);\n        modelIdx = Math.min(i, modelIdx);\n      }\n    }\n    if (!count) return;\n    aggregateNode.label = count + 1;\n    aggregateNode.size = 16 + (count + 1) * 4;\n\n    graph.removeChild(model.id);\n    siblingData.splice(modelIdx, 0, aggregateNode);\n    \n    setTimeout(() => {\n      this.graph.updateChildren(siblingData, parentData.id)\n    }, 550);\n\n    return;\n  },\n});\n\n// givin subject colors, getColorSetsBySubjectColors returns colorsets\nconst colors = [ '#5F95FF', '#61DDAA', '#65789B' ];\nconst colorSets = G6.Util.getColorSetsBySubjectColors(colors, '#fff', 'default', '#777');\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 50;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['collapse-slibing', 'drag-canvas'],\n  },\n  fitView: true,\n  layout: {\n    type: 'compactBox',\n    direction: 'LR',\n    defalutPosition: [],\n    getId: function getId(d) {\n      return d.id;\n    },\n    getHeight: function getHeight() {\n      return 16;\n    },\n    getWidth: function getWidth() {\n      return 16;\n    },\n    getVGap: function getVGap(d) {\n      return 10;\n    },\n    getHGap: function getHGap(d) {\n      return 50;\n    },\n  },\n  defaultEdge: {\n    type: 'cubic-horizontal',\n    color: '#A3B1BF',\n  }\n});\ngraph.node(function (node) {\n  const colorSet = colorSets[(+node.cluster.replace('c', ''))]\n  return {\n    size: node.size || 16,\n    style: {\n      fill: colorSet?.mainFill || '#DEE9FF',\n      stroke: colorSet?.mainStroke || '#5B8FF9',\n    },\n  };\n});\n\n// data with cluster info\nconst data = {\n  isRoot: true,\n  id: 'Root',\n  cluster: 'c0',\n  children: [\n    {\n      id: 'SubTreeNode1',\n      cluster: 'c0',\n      raw: {},\n      children: [\n        {\n          id: 'SubTreeNode1.1',\n          cluster: 'c1',\n        },\n        {\n          id: 'SubTreeNode1.2',\n          cluster: 'c1',\n          children: [\n            {\n              id: 'SubTreeNode1.2.1',\n              cluster: 'c0',\n            },\n            {\n              id: 'SubTreeNode1.2.2',\n              cluster: 'c0',\n            },\n            {\n              id: 'SubTreeNode1.2.3',\n              cluster: 'c1',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode2',\n      cluster: 'c0',\n      children: [\n        {\n          id: 'SubTreeNode2.1',\n          cluster: 'c2',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode3',\n      cluster: 'c0',\n      children: [\n        {\n          id: 'SubTreeNode3.1',\n          cluster: 'c2',\n        },\n        {\n          id: 'SubTreeNode3.2',\n          cluster: 'c2',\n        },\n        {\n          id: 'SubTreeNode3.3',\n          cluster: 'c2',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode4',\n      cluster: 'c1',\n    },\n    {\n      id: 'SubTreeNode5',\n      cluster: 'c1',\n    },\n    {\n      id: 'SubTreeNode6',\n      cluster: 'c1',\n    },\n  ],\n};\ngraph.data(data);\ngraph.render();\n\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"合并同类兄弟节点",en:"Collapse the Sibling Nodes"},filename:"collapseSlibing.js",isNew:!1},{id:"changeData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wc1-QaqOPsgAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * 该案例演示，当点击叶子节点时，如何动态向树图中添加多条数据。\n * 主要演示changeData的用法。\n */\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['collapse-expand', 'drag-canvas'],\n  },\n  fitView: true,\n  layout: {\n    type: 'compactBox',\n    direction: 'LR',\n    defalutPosition: [],\n    getId: function getId(d) {\n      return d.id;\n    },\n    getHeight: function getHeight() {\n      return 16;\n    },\n    getWidth: function getWidth() {\n      return 16;\n    },\n    getVGap: function getVGap() {\n      return 50;\n    },\n    getHGap: function getHGap() {\n      return 100;\n    },\n  },\n});\ngraph.node(function (node) {\n  return {\n    size: 16,\n    anchorPoints: [\n      [0, 0.5],\n      [1, 0.5],\n    ],\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n    label: node.id,\n    labelCfg: {\n      position: node.children && node.children.length > 0 ? 'left' : 'right',\n    },\n    // 避免点击节点时，同时增加子树和收起节点，看起来行为奇怪\n    collapsed: node.children?.length ? false : true\n  };\n});\nlet i = 0;\ngraph.edge(function () {\n  i++;\n  return {\n    type: 'cubic-horizontal',\n    color: '#A3B1BF',\n    label: i,\n  };\n});\n\nconst data = {\n  isRoot: true,\n  id: 'Root',\n  children: [\n    {\n      id: 'SubTreeNode1',\n      raw: {},\n      children: [\n        {\n          id: 'SubTreeNode1.1',\n        },\n        {\n          id: 'SubTreeNode1.2',\n          children: [\n            {\n              id: 'SubTreeNode1.2.1',\n            },\n            {\n              id: 'SubTreeNode1.2.2',\n            },\n            {\n              id: 'SubTreeNode1.2.3',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode2',\n      children: [\n        {\n          id: 'SubTreeNode2.1',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode3',\n      children: [\n        {\n          id: 'SubTreeNode3.1',\n        },\n        {\n          id: 'SubTreeNode3.2',\n        },\n        {\n          id: 'SubTreeNode3.3',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode4',\n    },\n    {\n      id: 'SubTreeNode5',\n    },\n    {\n      id: 'SubTreeNode6',\n    },\n  ],\n};\ngraph.data(data);\ngraph.render();\n\nlet count = 0;\n\ngraph.on('node:click', function (evt) {\n  const item = evt.item;\n\n  const nodeId = item.get('id');\n  const model = item.getModel();\n  const children = model.children;\n  if (!children || children.length === 0) {\n    const childData = [\n      {\n        id: 'child-data-' + count,\n        type: 'rect',\n        children: [\n          {\n            id: 'x-' + count,\n          },\n          {\n            id: 'y-' + count,\n          },\n        ],\n      },\n      {\n        id: 'child-data1-' + count,\n        children: [\n          {\n            id: 'x1-' + count,\n          },\n          {\n            id: 'y1-' + count,\n          },\n        ],\n      },\n    ];\n\n    const parentData = graph.findDataById(nodeId);\n    if (!parentData.children) {\n      parentData.children = [];\n    }\n    // 如果childData是一个数组，则直接赋值给parentData.children\n    // 如果是一个对象，则使用parentData.children.push(obj)\n    parentData.children = childData;\n    graph.changeData();\n    count++;\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 changeData",en:"Using changeData"},filename:"changeData.js",isNew:!1},{id:"loadTreeData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wc1-QaqOPsgAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * 该案例演示，当点击叶子节点时，如何向树图中动态添加数据。\n * 主要演示 addChild 和 layout 的用法。\n */\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['collapse-expand', 'drag-canvas'],\n  },\n  fitView: true,\n  layout: {\n    type: 'compactBox',\n    direction: 'LR',\n    defalutPosition: [],\n    getId: function getId(d) {\n      return d.id;\n    },\n    getHeight: function getHeight() {\n      return 16;\n    },\n    getWidth: function getWidth() {\n      return 16;\n    },\n    getVGap: function getVGap() {\n      return 50;\n    },\n    getHGap: function getHGap() {\n      return 100;\n    },\n  },\n});\ngraph.node(function (node) {\n  return {\n    size: 16,\n    anchorPoints: [\n      [0, 0.5],\n      [1, 0.5],\n    ],\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n    label: node.id,\n    labelCfg: {\n      position: node.children && node.children.length > 0 ? 'left' : 'right',\n    },\n  };\n});\n\ngraph.edge(function () {\n  return {\n    type: 'cubic-horizontal',\n    color: '#A3B1BF',\n  };\n});\n\nconst data = {\n  isRoot: true,\n  id: 'Root',\n  style: {\n    fill: 'red',\n  },\n  children: [\n    {\n      id: 'SubTreeNode1',\n      raw: {},\n      children: [\n        {\n          id: 'SubTreeNode1.1',\n        },\n        {\n          id: 'SubTreeNode1.2',\n          children: [\n            {\n              id: 'SubTreeNode1.2.1',\n            },\n            {\n              id: 'SubTreeNode1.2.2',\n            },\n            {\n              id: 'SubTreeNode1.2.3',\n            },\n          ],\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode2',\n      children: [\n        {\n          id: 'SubTreeNode2.1',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode3',\n      children: [\n        {\n          id: 'SubTreeNode3.1',\n        },\n        {\n          id: 'SubTreeNode3.2',\n        },\n        {\n          id: 'SubTreeNode3.3',\n        },\n      ],\n    },\n    {\n      id: 'SubTreeNode4',\n    },\n    {\n      id: 'SubTreeNode5',\n    },\n    {\n      id: 'SubTreeNode6',\n    },\n  ],\n};\ngraph.data(data);\ngraph.render();\n\nlet count = 0;\n\ngraph.on('node:click', function (evt) {\n  const item = evt.item;\n\n  const nodeId = item.get('id');\n  const model = item.getModel();\n  const children = model.children;\n  if (!children || children.length === 0) {\n    const childData = {\n      id: 'child-data-' + count,\n      type: 'rect',\n      children: [\n        {\n          id: 'x-' + count,\n        },\n        {\n          id: 'y-' + count,\n        },\n      ],\n    };\n    graph.updateItem(nodeId, { collapsed: true })\n    graph.addChild(childData, nodeId);\n    count++;\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"使用 addChild",en:"Using addChild"},filename:"loadTreeData.js",isNew:!1}],icon:"",id:"treeBehavior",title:{en:"Custom Tree Graph Behavior",zh:"自定义树图交互"},childrenKey:"demos",order:1},{demos:[{id:"update",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NJm8S4sfgp4AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * 本示例演示以下功能：\n * 鼠标 hover 节点更新节点样式及其标签文本\n * 鼠标 hover 边更新边样式及其标签文本\n * by 十吾\n */\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 100,\n      label: 'label before\\nbeen hovered',\n    },\n    {\n      id: 'node2',\n      x: 400,\n      y: 100,\n      label: 'label before\\nbeen hovered',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      label: 'label before\\nbeen hovered',\n      labelCfg: {\n        refY: 10,\n      },\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultEdge: {\n    color: '#e2e2e2',\n    lineAppendWidth: 3,\n  },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', function (evt) {\n  const node = evt.item;\n  const model = node.getModel();\n  model.oriLabel = model.label;\n  graph.updateItem(node, {\n    label: `after been hovered ${model.id}`,\n    labelCfg: {\n      style: {\n        fill: '#003a8c',\n      },\n    },\n  });\n});\n\ngraph.on('node:mouseleave', function (evt) {\n  const node = evt.item;\n  const model = node.getModel();\n  graph.updateItem(node, {\n    label: model.oriLabel,\n    labelCfg: {\n      style: {\n        fill: '#555',\n      },\n    },\n  });\n});\n\ngraph.on('edge:mouseenter', function (evt) {\n  const edge = evt.item;\n  const model = edge.getModel();\n  model.oriLabel = model.label;\n  graph.updateItem(edge, {\n    label: 'after been hovered',\n    labelCfg: {\n      style: {\n        fill: '#003a8c',\n      },\n    },\n  });\n});\n\ngraph.on('edge:mouseleave', function (evt) {\n  const edge = evt.item;\n  graph.setItemState(edge, 'hover', false);\n  graph.updateItem(edge, {\n    label: 'label before \\n been hovered',\n    labelCfg: {\n      style: {\n        fill: '#555',\n      },\n    },\n  });\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"更新节点或边上的标签",en:"Update the Label"},filename:"update.js",isNew:!1},{id:"changeImg",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kwp1S6PJIVUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * 本示例演示以下功能：\n * 1、如何使用图片作为节点背景；\n * 2、点击切换节点背景图片。\n *\n */\n\nconst img = new Image();\nimg.src = 'https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg';\n\n// 点击图片节点，切换背景图片\nconst img2 = new Image();\nimg2.src = 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*wAmHQJbNVdwAAAAAAAAAAABkARQnAQ';\nconst data = {\n  nodes: [\n    {\n      x: 150,\n      y: 100,\n      type: 'circleNode',\n      label: 'circle',\n      id: 'node1',\n      labelCfg: {\n        position: 'center',\n      },\n    },\n    {\n      x: 350,\n      y: 100,\n      type: 'image',\n      id: 'node2',\n      img: img.src,\n      size: [120, 60],\n      label: 'avatar',\n      style: {\n        cursor: 'pointer',\n      },\n      labelCfg: {\n        position: 'bottom',\n      },\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      label: 'line',\n      labelCfg: {\n        refY: 10,\n      },\n    },\n  ],\n};\n// 避免拖动过程中闪烁：使用加载已经LOAD好的图片\nimg.onload = function () {\n  const container = document.getElementById('container');\n  const width = container.scrollWidth;\n  const height = container.scrollHeight || 500;\n  const graph = new G6.Graph({\n    container: 'container',\n    width,\n    height,\n    defaultNode: {\n      style: {\n        fill: '#DEE9FF',\n        stroke: '#5B8FF9',\n      },\n    },\n    defaultEdge: {\n      color: '#e2e2e2',\n    },\n    modes: {\n      default: [\n        'drag-node',\n        {\n          type: 'drag-node',\n        },\n      ],\n    },\n  });\n  graph.data(data);\n  graph.render();\n\n  graph.on('node:click', function (evt) {\n    const target = evt.target;\n\n    const type = target.get('type');\n    const hasChangeBg = target.get('hasChangeBg');\n    if (type === 'image') {\n      if (!hasChangeBg) {\n        // 点击图片节点时，切换背景图片\n        target.attr('img', img2);\n        target.attr('imgSrc', 'http://seopic.699pic.com/photo/50055/5642.jpg_wh1200.jpg');\n        target.set('hasChangeBg', true);\n      } else {\n        target.attr('img', img);\n        target.attr(\n          'imgSrc',\n          'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1566553535233&di=b0b17eeea7bd7356a6f42ebfd48e9441&imgtype=0&src=http%3A%2F%2Fa2.att.hudong.com%2F64%2F29%2F01300543361379145388299988437_s.jpg',\n        );\n        target.set('hasChangeBg', false);\n      }\n      graph.paint();\n    }\n  });\n\n  if (typeof window !== 'undefined')\n    window.onresize = () => {\n      if (!graph || graph.get('destroyed')) return;\n      if (!container || !container.scrollWidth || !container.scrollHeight) return;\n      graph.changeSize(container.scrollWidth, container.scrollHeight);\n    };\n};\n",title:{zh:"切换节点背景图片",en:"Change the Image"},filename:"changeImg.js",isNew:!1}],icon:"",id:"label",title:{en:"Label and Background Updating",zh:"改变标签或背景"},childrenKey:"demos",order:3},{demos:[{id:"circle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Rvx9SYSHGsIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 350, y: 200, comboId: 'combo1' },\n    { id: 'node2', x: 350, y: 250, comboId: 'combo1' },\n    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },\n  ],\n  edges: [\n    { source: 'node1', target: 'node2' },\n    { source: 'node1', target: 'node3' },\n    { source: 'combo1', target: 'node3' },\n  ],\n  combos: [\n    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },\n    { id: 'combo2', label: 'Combo 2' },\n    { id: 'combo3', label: 'Combo 3', collapsed: true },\n  ],\n};\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Double click the combo to collapse/expand it. Drag the node or combo to change the hierarchy.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  defaultCombo: {\n    type: 'circle',\n    style: {\n      lineWidth: 1,\n    },\n    labelCfg: {\n      refY: 15,\n      position: 'bottom',\n    },\n  },\n  comboStateStyles: {\n    dragenter: {\n      lineWidth: 4,\n      stroke: '#FE9797',\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo', 'click-select'],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('combo:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\ngraph.on('node:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\ngraph.on('combo:dragenter', (e) => {\n  graph.setItemState(e.item, 'dragenter', true);\n});\ngraph.on('combo:dragleave', (e) => {\n  graph.setItemState(e.item, 'dragenter', false);\n});\n\ngraph.on('combo:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('combo:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"圆形 Combo",filename:"circle.js",isNew:!1},{id:"rect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*qvmVTZc-iNcAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 350, y: 200, comboId: 'combo1' },\n    { id: 'node2', x: 350, y: 250, comboId: 'combo1' },\n    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },\n  ],\n  edges: [\n    { source: 'node1', target: 'node2' },\n    { source: 'node1', target: 'node3' },\n    { source: 'combo1', target: 'node3' },\n  ],\n  combos: [\n    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },\n    { id: 'combo2', label: 'Combo 2' },\n    { id: 'combo3', label: 'Combo 3' },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Double click the combo to collapse/expand it. Drag the node or combo to change the hierarchy.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  defaultCombo: {\n    type: 'rect',\n    size: [40, 10], // The minimum size of the Combo\n    padding: [30, 20, 10, 20],\n    style: {\n      lineWidth: 1,\n    },\n    labelCfg: {\n      refY: 10,\n      refX: 20,\n      position: 'top',\n    },\n  },\n  comboStateStyles: {\n    dragenter: {\n      lineWidth: 4,\n      stroke: '#FE9797',\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'drag-combo', 'collapse-expand-combo', 'click-select'],\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('combo:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\ngraph.on('node:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\n\ngraph.on('combo:dragenter', (e) => {\n  graph.setItemState(e.item, 'dragenter', true);\n});\ngraph.on('combo:dragleave', (e) => {\n  graph.setItemState(e.item, 'dragenter', false);\n});\n\ngraph.on('combo:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('combo:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"矩形 Combo",filename:"rect.js",isNew:!1},{id:"cCircle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*1LelSq5TP9EAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The demo shows customing a combo type by extending the built-in circle combo\n * by Shiwu\n *\n */\n\n// The symbols for the marker inside the combo\nconst collapseIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n  ];\n};\nconst expandIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n    ['M', x - r + r, y - r + 4],\n    ['L', x, y + r - 4],\n  ];\n};\n\nG6.registerCombo(\n  'cCircle',\n  {\n    drawShape: function draw(cfg, group) {\n      const self = this;\n      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo\n      const style = self.getShapeStyle(cfg);\n      // Add a circle shape as keyShape which is the same as the extended 'circle' type Combo\n      const circle = group.addShape('circle', {\n        attrs: {\n          ...style,\n          x: 0,\n          y: 0,\n          r: style.r,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-keyShape',\n      });\n      // Add the marker on the bottom\n      const marker = group.addShape('marker', {\n        attrs: {\n          ...style,\n          fill: '#fff',\n          opacity: 1,\n          x: 0,\n          y: style.r,\n          r: 10,\n          symbol: collapseIcon,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-marker-shape',\n      });\n\n      return circle;\n    },\n    // Define the updating logic for the marker\n    afterUpdate: function afterUpdate(cfg, combo) {\n      const self = this;\n      // Get the shape style, where the style.r corresponds to the R in the Illustration of Built-in Rect Combo\n      const style = self.getShapeStyle(cfg);\n      const group = combo.get('group');\n      // Find the marker shape in the graphics group of the Combo\n      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');\n      // Update the marker shape\n      marker.attr({\n        x: 0,\n        y: style.r,\n        // The property 'collapsed' in the combo data represents the collapsing state of the Combo\n        // Update the symbol according to 'collapsed'\n        symbol: cfg.collapsed ? expandIcon : collapseIcon,\n      });\n    },\n  },\n  'circle',\n);\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },\n    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },\n    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },\n  ],\n  combos: [\n    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },\n    { id: 'combo2', label: 'Combo 2' },\n    { id: 'combo3', label: 'Combo 3', collapsed: true },\n  ],\n};\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Click the bottom marker to collapse/expand the combo.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  // Configure the combos globally\n  defaultCombo: {\n    // The type of the combos. You can also assign type in the data of combos\n    type: 'cCircle',\n    labelCfg: {\n      refY: 2,\n    },\n    // ... Other global configurations for combos\n  },\n  comboStateStyles: {\n    dragenter: {\n      lineWidth: 4,\n      stroke: '#FE9797',\n    },\n  },\n  modes: {\n    default: ['drag-combo', 'drag-node', 'drag-canvas', 'click-select'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\n// collapse/expand when click the marker\ngraph.on('combo:click', (e) => {\n  if (e.target.get('name') === 'combo-marker-shape') {\n    // graph.collapseExpandCombo(e.item.getModel().id);\n    graph.collapseExpandCombo(e.item);\n    if (graph.get('layout')) graph.layout();\n    else graph.refreshPositions();\n  }\n});\n\ngraph.on('combo:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\ngraph.on('node:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\n\ngraph.on('combo:dragenter', (e) => {\n  graph.setItemState(e.item, 'dragenter', true);\n});\ngraph.on('combo:dragleave', (e) => {\n  graph.setItemState(e.item, 'dragenter', false);\n});\n\ngraph.on('combo:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('combo:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"扩展圆形 Combo",filename:"cCircle.js",isNew:!1},{id:"cRect",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*rQGaT4kiaYoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * The demo shows customing a combo type by extending the built-in circle combo\n * by Shiwu\n *\n */\n\n// The symbols for the marker inside the combo\nconst collapseIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n  ];\n};\nconst expandIcon = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['a', r, r, 0, 1, 0, r * 2, 0],\n    ['a', r, r, 0, 1, 0, -r * 2, 0],\n    ['M', x - r + 4, y],\n    ['L', x - r + 2 * r - 4, y],\n    ['M', x - r + r, y - r + 4],\n    ['L', x, y + r - 4],\n  ];\n};\n\nG6.registerCombo(\n  'cRect',\n  {\n    drawShape: function drawShape(cfg, group) {\n      const self = this;\n      // Get the padding from the configuration\n      cfg.padding = cfg.padding || [50, 20, 20, 20];\n      // Get the shape's style, where the style.width and style.height correspond to the width and height in the figure of Illustration of Built-in Rect Combo\n      const style = self.getShapeStyle(cfg);\n      // Add a rect shape as the keyShape which is the same as the extended rect Combo\n      const rect = group.addShape('rect', {\n        attrs: {\n          ...style,\n          x: -style.width / 2 - padding[3],\n          y: -style.height / 2 - padding[0],\n          width: style.width,\n          height: style.height,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-keyShape',\n      });\n      // Add the circle on the right\n      group.addShape('marker', {\n        attrs: {\n          ...style,\n          fill: '#fff',\n          opacity: 1,\n          // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo\n          x: cfg.style.width / 2 + cfg.padding[1],\n          y: (cfg.padding[2] - cfg.padding[0]) / 2,\n          r: 10,\n          symbol: collapseIcon,\n        },\n        draggable: true,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'combo-marker-shape',\n      });\n      return rect;\n    },\n    // Define the updating logic of the right circle\n    afterUpdate: function afterUpdate(cfg, combo) {\n      const group = combo.get('group');\n      // Find the circle shape in the graphics group of the Combo by name\n      const marker = group.find((ele) => ele.get('name') === 'combo-marker-shape');\n      // Update the position of the right circle\n      marker.attr({\n        // cfg.style.width and cfg.style.heigth correspond to the innerWidth and innerHeight in the figure of Illustration of Built-in Rect Combo\n        x: cfg.style.width / 2 + cfg.padding[1],\n        y: (cfg.padding[2] - cfg.padding[0]) / 2,\n        // The property 'collapsed' in the combo data represents the collapsing state of the Combo\n        // Update the symbol according to 'collapsed'\n        symbol: cfg.collapsed ? expandIcon : collapseIcon,\n      });\n    },\n  },\n  'rect',\n);\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 250, y: 200, comboId: 'combo1' },\n    { id: 'node2', x: 300, y: 200, comboId: 'combo1' },\n    { id: 'node3', x: 100, y: 200, comboId: 'combo3' },\n  ],\n  combos: [\n    { id: 'combo1', label: 'Combo 1', parentId: 'combo2' },\n    { id: 'combo2', label: 'Combo 2' },\n    { id: 'combo3', label: 'Combo 3', collapsed: true },\n  ],\n};\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Click the right marker to collapse/expand the combo.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // Set groupByTypes to false to get rendering result with reasonable visual zIndex for combos\n  groupByTypes: false,\n  // Configure the combos globally\n  defaultCombo: {\n    // The type of the combos. You can also assign type in the data of combos\n    type: 'cRect',\n    // ... Other global configurations for combos\n  },\n  comboStateStyles: {\n    dragenter: {\n      lineWidth: 4,\n      stroke: '#FE9797',\n    },\n  },\n  modes: {\n    default: ['drag-combo', 'drag-node', 'drag-canvas', 'click-select'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\n// collapse/expand when click the marker\ngraph.on('combo:click', (e) => {\n  if (e.target.get('name') === 'combo-marker-shape') {\n    // graph.collapseExpandCombo(e.item.getModel().id);\n    graph.collapseExpandCombo(e.item);\n    if (graph.get('layout')) graph.layout();\n    else graph.refreshPositions();\n  }\n});\n\ngraph.on('combo:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\ngraph.on('node:dragend', (e) => {\n  graph.getCombos().forEach((combo) => {\n    graph.setItemState(combo, 'dragenter', false);\n  });\n});\n\ngraph.on('combo:dragenter', (e) => {\n  graph.setItemState(e.item, 'dragenter', true);\n});\ngraph.on('combo:dragleave', (e) => {\n  graph.setItemState(e.item, 'dragenter', false);\n});\n\ngraph.on('combo:mouseenter', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', true);\n});\n\ngraph.on('combo:mouseleave', (evt) => {\n  const { item } = evt;\n  graph.setItemState(item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"扩展矩形 Combo",filename:"cRect.js",isNew:!1}],icon:"",id:"combo",title:{en:"Node Combo",zh:"节点分组 Combo"},childrenKey:"demos",order:4},{demos:[{id:"hull",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*krsJQb6tH-oAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node0', size: 50 },\n    { id: 'node1', size: 30 },\n    { id: 'node2', size: 30 },\n    { id: 'node3', size: 30 },\n    { id: 'node4', size: 30, isLeaf: true },\n    { id: 'node5', size: 30, isLeaf: true },\n    { id: 'node6', size: 15, isLeaf: true },\n    { id: 'node7', size: 15, isLeaf: true },\n    { id: 'node8', size: 15, isLeaf: true },\n    { id: 'node9', size: 15, isLeaf: true },\n    { id: 'node10', size: 15, isLeaf: true },\n    { id: 'node11', size: 15, isLeaf: true },\n    { id: 'node12', size: 15, isLeaf: true },\n    { id: 'node13', size: 15, isLeaf: true },\n    { id: 'node14', size: 15, isLeaf: true },\n    { id: 'node15', size: 15, isLeaf: true },\n    { id: 'node16', size: 15, isLeaf: true },\n  ],\n  edges: [\n    { source: 'node0', target: 'node1' },\n    { source: 'node0', target: 'node2' },\n    { source: 'node0', target: 'node3' },\n    { source: 'node0', target: 'node4' },\n    { source: 'node0', target: 'node5' },\n    { source: 'node1', target: 'node6' },\n    { source: 'node1', target: 'node7' },\n    { source: 'node2', target: 'node8' },\n    { source: 'node2', target: 'node9' },\n    { source: 'node2', target: 'node10' },\n    { source: 'node2', target: 'node11' },\n    { source: 'node2', target: 'node12' },\n    { source: 'node2', target: 'node13' },\n    { source: 'node3', target: 'node14' },\n    { source: 'node3', target: 'node15' },\n    { source: 'node3', target: 'node16' },\n  ],\n};\nconst nodes = data.nodes;\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Wait for the layout to complete...';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas', 'drag-node', 'lasso-select'],\n  },\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n    linkDistance: (d) => {\n      if (d.source.id === 'node0') {\n        return 300;\n      }\n      return 60;\n    },\n    nodeStrength: (d) => {\n      if (d.isLeaf) {\n        return -50;\n      }\n      return -10;\n    },\n    edgeStrength: (d) => {\n      if (d.source.id === 'node1' || d.source.id === 'node2' || d.source.id === 'node3') {\n        return 0.7;\n      }\n      return 0.1;\n    },\n  },\n});\ngraph.data({\n  nodes,\n  edges: data.edges.map(function (edge, i) {\n    edge['id'] = 'edge' + i;\n    return Object.assign({}, edge);\n  }),\n});\ngraph.render();\n\nlet centerNodes = graph.getNodes().filter((node) => !node.getModel().isLeaf);\n\ngraph.on('afterlayout', () => {\n  descriptionDiv.innerHTML = '';\n  const hull1 = graph.createHull({\n    id: 'centerNode-hull',\n    type: 'bubble',\n    members: centerNodes,\n    padding: 10,\n  });\n\n  const hull2 = graph.createHull({\n    id: 'leafNode-hull1',\n    members: ['node6', 'node7'],\n    padding: 10,\n    style: {\n      fill: 'lightgreen',\n      stroke: 'green',\n    },\n  });\n\n  const hull3 = graph.createHull({\n    id: 'leafNode-hull2',\n    members: ['node8', 'node9', 'node10', 'node11', 'node12', 'node13'],\n    padding: 10,\n    style: {\n      fill: 'lightgreen',\n      stroke: 'green',\n    },\n  });\n\n  graph.on('afterupdateitem', (e) => {\n    hull1.updateData(hull1.members);\n    hull2.updateData(hull2.members);\n    hull3.updateData(hull3.members);\n  });\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:{zh:"用轮廓包裹节点集合",en:"Use hulls to wrap the node sets."},filename:"hull.js",isNew:!1},{id:"changeMembers",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*TNxDRL0t0GsAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '1',\n      label: '公司1',\n      group: 1,\n    },\n    {\n      id: '2',\n      label: '公司2',\n      group: 1,\n    },\n    {\n      id: '3',\n      label: '公司3',\n      group: 1,\n    },\n    {\n      id: '4',\n      label: '公司4',\n      group: 1,\n    },\n    {\n      id: '5',\n      label: '公司5',\n      group: 2,\n    },\n    {\n      id: '6',\n      label: '公司6',\n      group: 2,\n    },\n    {\n      id: '7',\n      label: '公司7',\n      group: 2,\n    },\n    {\n      id: '8',\n      label: '公司8',\n      group: 2,\n    },\n    {\n      id: '9',\n      label: '公司9',\n      group: 2,\n    },\n  ],\n  edges: [\n    {\n      source: '1',\n      target: '1',\n      type: 'loop',\n    },\n    {\n      source: '2',\n      target: '2',\n      type: 'loop',\n    },\n    {\n      source: '1',\n      target: '2',\n      data: {\n        type: 'A',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '1',\n      target: '3',\n      data: {\n        type: 'B',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '2',\n      target: '5',\n      data: {\n        type: 'C',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '5',\n      target: '6',\n      data: {\n        type: 'B',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '3',\n      target: '4',\n      data: {\n        type: 'C',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '4',\n      target: '7',\n      data: {\n        type: 'B',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '1',\n      target: '8',\n      data: {\n        type: 'B',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n    {\n      source: '1',\n      target: '9',\n      data: {\n        type: 'C',\n        amount: '100,000 元',\n        date: '2019-08-03',\n      },\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas', 'drag-node'],\n  },\n  fitView: true,\n  layout: {\n    type: 'grid',\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nconst hull1 = graph.createHull({\n  id: 'hull1',\n  type: 'smooth-convex',\n  padding: 15,\n  members: graph.getNodes().filter((node) => node.getModel().group === 1),\n});\nconst hull2 = graph.createHull({\n  id: 'hull2',\n  members: graph.getNodes().filter((node) => node.getModel().group === 2),\n  padding: 15,\n  type: 'bubble',\n  style: {\n    fill: 'pink',\n    stroke: 'red',\n  },\n  update: 'drag',\n});\n\ngraph.on('canvas:contextmenu', (ev) => {\n  ev.preventDefault();\n  ev.stopPropagation();\n  const item = graph.addItem('node', {\n    x: ev.x,\n    y: ev.y,\n    id: Math.random(),\n    group: 2,\n  });\n  hull2.addMember(item);\n});\n\ngraph.on('afterupdateitem', (e) => {\n  if (hull1.members.indexOf(e.item) > -1 || hull1.nonMembers.indexOf(e.item) > -1) {\n    hull1.updateData(hull1.members);\n  }\n});\n\ngraph.on('node:dragend', (e) => {\n  const item = e.item;\n  const memberIdx = hull2.members.indexOf(item);\n  if (memberIdx > -1) {\n    // 如果移出原hull范围，则去掉\n    if (!hull2.contain(item)) {\n      hull2.removeMember(item);\n    } else {\n      hull2.updateData(hull2.members);\n    }\n  } else {\n    if (hull2.contain(item)) hull2.addMember(item);\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"修改包裹内部成员",en:"Interactively change the members in the hull."},filename:"changeMembers.js",isNew:!1}],icon:"",id:"hull",title:{en:"Hull",zh:"节点集轮廓包裹"},childrenKey:"demos",order:5},{demos:[{id:"moveAnimate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yPb-SKNZ5YYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * Focus a node with Animation\n * by Changzhe\n */\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 150,\n      y: 50,\n      label: 'node1',\n    },\n    {\n      id: 'node2',\n      x: 200,\n      y: 150,\n      label: 'node2',\n    },\n    {\n      id: 'node3',\n      x: 100,\n      y: 150,\n      label: 'node3',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n    {\n      source: 'node2',\n      target: 'node3',\n    },\n    {\n      source: 'node3',\n      target: 'node1',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: false,\n  defaultNode: {\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n    },\n  },\n  // The global configuration for graph animation also takes effect on the focusItem\n  // animate: true,\n  // animateCfg: {\n  //   easing: 'easeCubic',\n  //   duration: 500\n  // }\n});\ngraph.data(data);\ngraph.render();\n\nfunction handleNodeClick(event) {\n  const item = event.item;\n  // animately move the graph to focus on the item.\n  // the second parameter controlls whether move with animation, the third parameter is the animate configuration\n  graph.focusItem(item, true, {\n    easing: 'easeCubic',\n    duration: 500,\n  });\n}\n\n// listen to the node click event\ngraph.on('node:click', handleNodeClick);\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"点击节点带有动画地移动到画布中心",en:"Click to Animately Focus a Node"},filename:"moveAnimate.js",isNew:!1},{id:"move",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*yPb-SKNZ5YYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * Focus a node\n * by Changzhe\n */\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 150,\n      y: 50,\n      label: 'node1',\n    },\n    {\n      id: 'node2',\n      x: 200,\n      y: 150,\n      label: 'node2',\n    },\n    {\n      id: 'node3',\n      x: 100,\n      y: 150,\n      label: 'node3',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n    {\n      source: 'node2',\n      target: 'node3',\n    },\n    {\n      source: 'node3',\n      target: 'node1',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitView: false,\n  defaultNode: {\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nfunction handleNodeClick(event) {\n  const item = event.item;\n  // animately move the graph to focus on the item.\n  graph.focusItem(item);\n}\n\n// listen to the node click event\ngraph.on('node:click', handleNodeClick);\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"点击节点移动到画布中心",en:"Click to Focus a Node"},filename:"move.js",isNew:!1}],icon:"",id:"position",title:{en:"Click to Focus a Node",zh:"聚焦一个节点"},childrenKey:"demos",order:6},{demos:[{id:"partialNode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*rszjRrAopBkAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n/**\n * 演示如何响应节点某一区域上的点击事件\n * by 长哲\n */\n\nconst GRAPH_CONTAINER = 'container';\n\n// 注册自定义节点\nG6.registerNode(\n  'customNode',\n  {\n    // 绘制节点\n    drawShape: function drawShape(cfg, group) {\n      const shapeType = this.shapeType;\n      const style = Object.assign({}, this.getShapeStyle(cfg), {\n        x: 0,\n        y: 0,\n        r: 50,\n      });\n      const shape = group.addShape(shapeType, {\n        attrs: style,\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'key-shape',\n      });\n      // 绘制节点里面的小圆。点击这个小圆会显示tooltip\n      group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: -30,\n          r: 10,\n          fill: '#096dd9',\n          cursor: 'pointer',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape',\n      });\n      return shape;\n    },\n  },\n  'circle',\n);\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 150,\n      label: 'node1',\n      size: 100,\n      type: 'customNode',\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 150,\n      label: 'node2',\n      size: 100,\n      type: 'customNode',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: GRAPH_CONTAINER,\n  width,\n  height,\n  modes: {\n    default: [\n      {\n        type: 'drag-node',\n        delegate: false,\n      },\n    ],\n  },\n  defaultNode: {\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n    labelCfg: {\n      style: {\n        fontSize: 12,\n      },\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#e2e2e2',\n    },\n  },\n  nodeStateStyles: {\n    selected: {\n      stroke: 'red',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\n// 节点上的点击事件\ngraph.on('node:click', function (event) {\n  const { item } = event;\n  graph.setItemState(item, 'selected', true);\n});\n\ngraph.on('circle-shape:click', (evt) => {\n  const { item } = evt;\n  graph.updateItem(item, {\n    label: '点击了局部',\n    labelCfg: {\n      style: {\n        fill: '#003a8c',\n        fontSize: 16,\n      },\n    },\n  });\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"响应节点中部分区域",en:"Region Response"},filename:"partialNode.js",isNew:!1}],icon:"",id:"partialResponse",title:{en:"Region Response",zh:"响应区域事件"},childrenKey:"demos",order:7},{demos:[{id:"setMode",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*y1qkTKqhQXkAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * 该案例演示切换交互模式，在不同模式下实现拖动节点、增加节点、增加边的交互行为。\n */\nlet addedCount = 0;\n// Register a custom behavior: add a node when user click the blank part of canvas\nG6.registerBehavior('click-add-node', {\n  // Set the events and the corresponding responsing function for this behavior\n  getEvents() {\n    // The event is canvas:click, the responsing function is onClick\n    return {\n      'canvas:click': 'onClick',\n    };\n  },\n  // Click event\n  onClick(ev) {\n    const self = this;\n    const graph = self.graph;\n    // Add a new node\n    graph.addItem('node', {\n      x: ev.canvasX,\n      y: ev.canvasY,\n      id: `node-${addedCount}`, // Generate the unique id\n    });\n    addedCount++;\n  },\n});\n// Register a custom behavior: click two end nodes to add an edge\nG6.registerBehavior('click-add-edge', {\n  // Set the events and the corresponding responsing function for this behavior\n  getEvents() {\n    return {\n      'node:click': 'onClick', // The event is canvas:click, the responsing function is onClick\n      mousemove: 'onMousemove', // The event is mousemove, the responsing function is onMousemove\n      'edge:click': 'onEdgeClick', // The event is edge:click, the responsing function is onEdgeClick\n    };\n  },\n  // The responsing function for node:click defined in getEvents\n  onClick(ev) {\n    const self = this;\n    const node = ev.item;\n    const graph = self.graph;\n    // The position where the mouse clicks\n    const point = { x: ev.x, y: ev.y };\n    const model = node.getModel();\n    if (self.addingEdge && self.edge) {\n      graph.updateItem(self.edge, {\n        target: model.id,\n      });\n\n      self.edge = null;\n      self.addingEdge = false;\n    } else {\n      // Add anew edge, the end node is the current node user clicks\n      self.edge = graph.addItem('edge', {\n        source: model.id,\n        target: model.id,\n      });\n      self.addingEdge = true;\n    }\n  },\n  // The responsing function for mousemove defined in getEvents\n  onMousemove(ev) {\n    const self = this;\n    // The current position the mouse clicks\n    const point = { x: ev.x, y: ev.y };\n    if (self.addingEdge && self.edge) {\n      // Update the end node to the current node the mouse clicks\n      self.graph.updateItem(self.edge, {\n        target: point,\n      });\n    }\n  },\n  // The responsing function for edge:click defined in getEvents\n  onEdgeClick(ev) {\n    const self = this;\n    const currentEdge = ev.item;\n    if (self.addingEdge && self.edge === currentEdge) {\n      self.graph.removeItem(self.edge);\n      self.edge = null;\n      self.addingEdge = false;\n    }\n  },\n});\n// Initial data\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 200,\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 200,\n    },\n    {\n      id: 'node3',\n      x: 300,\n      y: 300,\n    },\n  ],\n  edges: [\n    {\n      id: 'edge1',\n      target: 'node2',\n      source: 'node1',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\n\n// Add a selector to DOM\nconst selector = document.createElement('select');\nselector.id = 'selector';\nconst selection1 = document.createElement('option');\nselection1.value = 'default';\nselection1.innerHTML = 'Default Mode';\nconst selection2 = document.createElement('option');\nselection2.value = 'addNode';\nselection2.innerHTML = 'Add Node (By clicking canvas)';\nconst selection3 = document.createElement('option');\nselection3.value = 'addEdge';\nselection3.innerHTML = 'Add Edge (By clicking two end nodes)';\nselector.appendChild(selection1);\nselector.appendChild(selection2);\nselector.appendChild(selection3);\ncontainer.appendChild(selector);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  // The sets of behavior modes\n  modes: {\n    // Defualt mode\n    default: ['drag-node', 'click-select'],\n    // Adding node mode\n    addNode: ['click-add-node', 'click-select'],\n    // Adding edge mode\n    addEdge: ['click-add-edge', 'click-select'],\n  },\n  // The node styles in different states\n  nodeStateStyles: {\n    // The node styles in selected state\n    selected: {\n      stroke: '#666',\n      lineWidth: 2,\n      fill: 'steelblue',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\n// Listen to the selector, change the mode when the selector is changed\nselector.addEventListener('change', (e) => {\n  const value = e.target.value;\n  // change the behavior mode\n  graph.setMode(value);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:{zh:"设置交互模式",en:"Set Mode"},filename:"setMode.js",isNew:!1}],icon:"",id:"setMode",title:{en:"Change Mode to Add items",zh:"切换模式增加点和边"},childrenKey:"demos",order:8},{demos:[{id:"dragCanvasTwoFingers",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eePLR7boe38AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\n/**\n * This demo shows how to custom a behavior to allow drag and zoom canvas with two fingers on touchpad and wheel\n * By Shiwu\n */\nG6.registerBehavior('double-finger-drag-canvas', {\n  getEvents: function getEvents() {\n    return {\n      wheel: 'onWheel',\n    };\n  },\n\n  onWheel: function onWheel(ev) {\n    if (ev.ctrlKey) {\n      const canvas = graph.get('canvas');\n      const point = canvas.getPointByClient(ev.clientX, ev.clientY);\n      let ratio = graph.getZoom();\n      if (ev.wheelDelta > 0) {\n        ratio = ratio + ratio * 0.05;\n      } else {\n        ratio = ratio - ratio * 0.05;\n      }\n      graph.zoomTo(ratio, {\n        x: point.x,\n        y: point.y,\n      });\n    } else {\n      const x = ev.deltaX || ev.movementX;\n      let y = ev.deltaY || ev.movementY;\n      if (!y && navigator.userAgent.indexOf('Firefox') > -1) y = (-ev.wheelDelta * 125) / 3\n      graph.translate(-x, -y);\n    }\n    ev.preventDefault();\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['double-finger-drag-canvas'],\n  },\n  layout: {\n    type: 'force',\n  },\n});\n\ngraph.get('canvas').set('localRefresh', false);\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"两指平移画布",en:"Drag Canvas by Two fingers"},filename:"dragCanvasTwoFingers.js",isNew:!1}],icon:"",id:"customBehavior",title:{en:"Custom Behavior",zh:"自定义交互"},childrenKey:"demos",order:10},{demos:[{id:"fixItem",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*nmaeRqYi9CMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node0', size: 50, label: '0', x: 326, y: 268 },\n    { id: 'node1', size: 30, label: '1', x: 280, y: 384 },\n    { id: 'node2', size: 30, label: '2', x: 234, y: 167 },\n    { id: 'node3', size: 30, label: '3', x: 391, y: 368 },\n    { id: 'node4', size: 30, label: '4', x: 444, y: 209 },\n    { id: 'node5', size: 30, label: '5', x: 378, y: 157 },\n    { id: 'node6', size: 15, label: '6', x: 229, y: 400 },\n    { id: 'node7', size: 15, label: '7', x: 281, y: 440 },\n    { id: 'node8', size: 15, label: '8', x: 188, y: 119 },\n    { id: 'node9', size: 15, label: '9', x: 287, y: 157 },\n    { id: 'node10', size: 15, label: '10', x: 185, y: 200 },\n    { id: 'node11', size: 15, label: '11', x: 238, y: 110 },\n    { id: 'node12', size: 15, label: '12', x: 239, y: 221 },\n    { id: 'node13', size: 15, label: '13', x: 176, y: 160 },\n    { id: 'node14', size: 15, label: '14', x: 389, y: 423 },\n    { id: 'node15', size: 15, label: '15', x: 441, y: 341 },\n    { id: 'node16', size: 15, label: '16', x: 442, y: 398 },\n  ],\n  edges: [\n    { source: 'node0', target: 'node1', label: '0-1' },\n    { source: 'node0', target: 'node2', label: '0-2' },\n    { source: 'node0', target: 'node3', label: '0-3' },\n    { source: 'node0', target: 'node4', label: '0-4' },\n    { source: 'node0', target: 'node5', label: '0-5' },\n    { source: 'node1', target: 'node6', label: '1-6' },\n    { source: 'node1', target: 'node7', label: '1-7' },\n    { source: 'node2', target: 'node8', label: '2-8' },\n    { source: 'node2', target: 'node9', label: '2-9' },\n    { source: 'node2', target: 'node10', label: '2-10' },\n    { source: 'node2', target: 'node11', label: '2-11' },\n    { source: 'node2', target: 'node12', label: '2-12' },\n    { source: 'node2', target: 'node13', label: '2-13' },\n    { source: 'node3', target: 'node14', label: '3-14' },\n    { source: 'node3', target: 'node15', label: '3-15' },\n    { source: 'node3', target: 'node16', label: '3-16' },\n  ],\n};\n\nconst container = document.getElementById('container');\n\n// Add a selector to DOM\nconst selector = document.createElement('select');\nselector.id = 'selector';\nconst selection1 = document.createElement('option');\nselection1.value = 'fixAll';\nselection1.innerHTML = 'Fix all';\nconst selection2 = document.createElement('option');\nselection2.value = 'fixLabel';\nselection2.innerHTML = 'Fix fontSize of label';\nconst selection3 = document.createElement('option');\nselection3.value = 'fixLineWidth';\nselection3.innerHTML = 'Fix lineWidth of keyShape';\nselector.appendChild(selection1);\nselector.appendChild(selection2);\nselector.appendChild(selection3);\ncontainer.appendChild(selector);\n\nlet fixSelectedItems = {\n  fixAll: true,\n  fixState: 'yourStateName', // 'selected' by default\n};\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: [\n      'drag-canvas',\n      'drag-node',\n      {\n        type: 'zoom-canvas',\n        fixSelectedItems,\n      },\n    ],\n  },\n  defaultNode: {\n    size: [10, 10],\n    style: {\n      lineWidth: 2,\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    style: {\n      stroke: '#e2e2e2',\n      lineAppendWidth: 2,\n    },\n  },\n  nodeStateStyles: {\n    yourStateName: {\n      stroke: '#f00',\n      lineWidth: 3,\n    },\n  },\n  edgeStateStyles: {\n    yourStateName: {\n      stroke: '#f00',\n      lineWidth: 3,\n    },\n  },\n});\n\ngraph.on('node:click', (e) => {\n  graph.setItemState(e.item, 'yourStateName', true);\n});\ngraph.on('edge:click', (e) => {\n  graph.setItemState(e.item, 'yourStateName', true);\n});\n\ngraph.on('canvas:click', (e) => {\n  graph.findAllByState('node', 'yourStateName').forEach((node) => {\n    graph.setItemState(node, 'yourStateName', false);\n  });\n  graph.findAllByState('edge', 'yourStateName').forEach((edge) => {\n    graph.setItemState(edge, 'yourStateName', false);\n  });\n});\n\ngraph.data(data);\ngraph.render();\n\n// Listen to the selector, change the mode when the selector is changed\nselector.addEventListener('change', (e) => {\n  const value = e.target.value;\n  Object.keys(fixSelectedItems).forEach((key) => {\n    if (key !== 'fixState') fixSelectedItems[key] = false;\n  });\n  fixSelectedItems[value] = true;\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:{zh:"缩放画布时固定元素",en:"Fix Items while Zooming"},filename:"fixItem.js",isNew:!1}],icon:"",id:"zoomCanvasFixItem",title:{en:"Fix Items while Zooming",zh:"缩放画布时固定选中元素"},childrenKey:"demos",order:12},{demos:[{id:"click",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*B9dxR4x8UmUAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 350, y: 200 },\n    { id: 'node2', x: 350, y: 250 },\n    { id: 'node3', x: 100, y: 200 },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Click the source and target node to create a new edge.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: ['create-edge'],\n  },\n  defaultEdge: {\n    type: 'quadratic',\n    style: {\n      stroke: '#F6BD16',\n      lineWidth: 2,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('aftercreateedge', (e) => {\n  const edges = graph.save().edges;\n  G6.Util.processParallelEdges(edges);\n  graph.getEdges().forEach((edge, i) => {\n    graph.updateItem(edge, {\n      curveOffset: edges[i].curveOffset,\n      curvePosition: edges[i].curvePosition,\n    });\n  });\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"点击端点",filename:"click.js",isNew:!1},{id:"drag",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*B9dxR4x8UmUAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 350, y: 200 },\n    { id: 'node2', x: 350, y: 250 },\n    { id: 'node3', x: 100, y: 200 },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  \"Drag from a source node to a target node to create a new edge. Note that in trigger: 'drag' mode cannot create a self-loop edge\";\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: [\n      {\n        type: 'create-edge',\n        trigger: 'drag', // 'click' by default. options: 'drag', 'click'\n      },\n    ],\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#F6BD16',\n      lineWidth: 2,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('aftercreateedge', (e) => {\n  const edges = graph.save().edges;\n  G6.Util.processParallelEdges(edges);\n  graph.getEdges().forEach((edge, i) => {\n    graph.updateItem(edge, {\n      curveOffset: edges[i].curveOffset,\n      curvePosition: edges[i].curvePosition,\n    });\n  });\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"从一个节点拖拽到另一个节点",filename:"drag.js",isNew:!1},{id:"click-and-key",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*B9dxR4x8UmUAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 350, y: 200 },\n    { id: 'node2', x: 350, y: 250 },\n    { id: 'node3', x: 100, y: 200 },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML =\n  'Press the shift key and click the source and target node to create a new edge.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: [\n      {\n        type: 'create-edge',\n        key: 'shift', // undefined by default, options: 'shift', 'control', 'ctrl', 'meta', 'alt'\n      },\n    ],\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#F6BD16',\n      lineWidth: 2,\n    },\n  },\n  linkCenter: true,\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('aftercreateedge', (e) => {\n  const edges = graph.save().edges;\n  G6.Util.processParallelEdges(edges);\n  graph.getEdges().forEach((edge, i) => {\n    graph.updateItem(edge, {\n      curveOffset: edges[i].curveOffset,\n      curvePosition: edges[i].curvePosition,\n    });\n  });\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"按住 shift 并点击端点",filename:"click-and-key.js",isNew:!1},{id:"click-link-point",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WAQ6T4pqCd8AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n// G6.Util.processParallelEdges processes the edges with same source node and target node,\n// on this basis, processParallelEdgesOnAnchorPoint consider the end nodes and anchor points in the same time.\nconst processParallelEdgesOnAnchorPoint = (\n  edges,\n  offsetDiff = 15,\n  multiEdgeType = 'quadratic',\n  singleEdgeType = undefined,\n  loopEdgeType = undefined\n) => {\n  const len = edges.length;\n  const cod = offsetDiff * 2;\n  const loopPosition = [\n    'top',\n    'top-right',\n    'right',\n    'bottom-right',\n    'bottom',\n    'bottom-left',\n    'left',\n    'top-left',\n  ];\n  const edgeMap = {};\n  const tags = [];\n  const reverses = {};\n  for (let i = 0; i < len; i++) {\n    const edge = edges[i];\n    const { source, target, sourceAnchor, targetAnchor } = edge;\n    const sourceTarget = `${source}|${sourceAnchor}-${target}|${targetAnchor}`;\n\n    if (tags[i]) continue;\n    if (!edgeMap[sourceTarget]) {\n      edgeMap[sourceTarget] = [];\n    }\n    tags[i] = true;\n    edgeMap[sourceTarget].push(edge);\n    for (let j = 0; j < len; j++) {\n      if (i === j) continue;\n      const sedge = edges[j];\n      const { source: src, target: dst, sourceAnchor: srcAnchor, targetAnchor: dstAnchor } = sedge;\n\n      // 两个节点之间共同的边\n      // 第一条的source = 第二条的target\n      // 第一条的target = 第二条的source\n      if (!tags[j]) {\n        if (source === dst && sourceAnchor === dstAnchor\n            && target === src && targetAnchor === srcAnchor) {\n          edgeMap[sourceTarget].push(sedge);\n          tags[j] = true;\n          reverses[`${src}|${srcAnchor}|${dst}|${dstAnchor}|${edgeMap[sourceTarget].length - 1}`] = true;\n        } else if (source === src && sourceAnchor === srcAnchor\n           && target === dst  && targetAnchor === dstAnchor) {\n          edgeMap[sourceTarget].push(sedge);\n          tags[j] = true;\n        }\n      }\n    }\n  }\n\n  for (const key in edgeMap) {\n    const arcEdges = edgeMap[key];\n    const { length } = arcEdges;\n    for (let k = 0; k < length; k++) {\n      const current = arcEdges[k];\n      if (current.source === current.target) {\n        if (loopEdgeType) current.type = loopEdgeType;\n        // 超过8条自环边，则需要重新处理\n        current.loopCfg = {\n          position: loopPosition[k % 8],\n          dist: Math.floor(k / 8) * 20 + 50,\n        };\n        continue;\n      }\n      if (length === 1 && singleEdgeType && (current.source !== current.target || current.sourceAnchor !== current.targetAnchor)) {\n        current.type = singleEdgeType;\n        continue;\n      }\n      current.type = multiEdgeType;\n      const sign =\n        (k % 2 === 0 ? 1 : -1) * (reverses[`${current.source}|${current.sourceAnchor}|${current.target}|${current.targetAnchor}|${k}`] ? -1 : 1);\n      if (length % 2 === 1) {\n        current.curveOffset = sign * Math.ceil(k / 2) * cod;\n      } else {\n        current.curveOffset = sign * (Math.floor(k / 2) * cod + offsetDiff);\n      }\n    }\n  }\n  return edges;\n};\n\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 350, y: 100 },\n    { id: 'node2', x: 350, y: 250 },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Hover the node and the anchor points will show up, click anchor points to create edges.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\n// custom a node with anchor-point shapes\nG6.registerNode('rect-node', {\n  // draw anchor-point circles according to the anchorPoints in afterDraw\n  afterDraw(cfg, group) {\n    const bbox = group.getBBox();\n    const anchorPoints = this.getAnchorPoints(cfg)\n    anchorPoints.forEach((anchorPos, i) => {\n      group.addShape('circle', {\n        attrs: {\n          r: 5,\n          x: bbox.x + bbox.width * anchorPos[0],\n          y: bbox.y + bbox.height * anchorPos[1],\n          fill: '#fff',\n          stroke: '#5F95FF'\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: `anchor-point`, // the name, for searching by group.find(ele => ele.get('name') === 'anchor-point')\n        anchorPointIdx: i, // flag the idx of the anchor-point circle\n        links: 0, // cache the number of edges connected to this shape\n        visible: false, // invisible by default, shows up when links > 1 or the node is in showAnchors state\n      })\n    })\n  },\n  getAnchorPoints(cfg) {\n    return cfg.anchorPoints || [[0, 0.5], [0.33, 0], [0.66, 0], [1, 0.5], [0.33, 1], [0.66, 1]];\n  },\n  // response the state changes and show/hide the link-point circles\n  setState(name, value, item) {\n    if (name === 'showAnchors') {\n      const anchorPoints = item.getContainer().findAll(ele => ele.get('name') === 'anchor-point');\n      anchorPoints.forEach(point => {\n        if (value || point.get('links') > 0) point.show()\n        else point.hide()\n      })\n    }\n  }\n}, 'rect')\n\nlet sourceAnchorIdx, targetAnchorIdx;\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: [\n      'drag-node',\n      // config the shouldBegin and shouldEnd to make sure the create-edge is began and ended at anchor-point circles\n      {\n      type: 'create-edge',\n      shouldBegin: e => {\n        // avoid beginning at other shapes on the node\n        if (e.target && e.target.get('name') !== 'anchor-point') return false;\n        sourceAnchorIdx = e.target.get('anchorPointIdx');\n        e.target.set('links', e.target.get('links') + 1); // cache the number of edge connected to this anchor-point circle\n        return true;\n      },\n      shouldEnd: e => {\n        // avoid ending at other shapes on the node\n        if (e.target && e.target.get('name') !== 'anchor-point') return false;\n        if (e.target) {\n          targetAnchorIdx = e.target.get('anchorPointIdx');\n          e.target.set('links', e.target.get('links') + 1);  // cache the number of edge connected to this anchor-point circle\n          return true;\n        }\n        targetAnchorIdx = undefined;\n        return true;\n      },\n      // update the sourceAnchor\n      // getEdgeConfig: () => {\n      //   return {\n      //     sourceAnchor: sourceAnchorIdx\n      //   }\n      // }\n    }],\n  },\n  defaultNode: {\n    type: 'rect-node',\n    style: {\n      fill: '#eee',\n      stroke: '#ccc',\n    }\n  },\n  defaultEdge: {\n    type: 'quadratic',\n    style: {\n      stroke: '#F6BD16',\n      lineWidth: 2,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('aftercreateedge', (e) => {\n  // update the sourceAnchor and targetAnchor for the newly added edge\n  graph.updateItem(e.edge, {\n    sourceAnchor: sourceAnchorIdx,\n    targetAnchor: targetAnchorIdx\n  })\n\n  // update the curveOffset for parallel edges\n  const edges = graph.save().edges;\n  processParallelEdgesOnAnchorPoint(edges);\n  graph.getEdges().forEach((edge, i) => {\n    graph.updateItem(edge, {\n      curveOffset: edges[i].curveOffset,\n      curvePosition: edges[i].curvePosition,\n    });\n  });\n});\n\n// if create-edge is canceled before ending, update the 'links' on the anchor-point circles\ngraph.on('afterremoveitem', e => {\n  if (e.item && e.item.source && e.item.target) {\n    const sourceNode = graph.findById(e.item.source);\n    const targetNode = graph.findById(e.item.target);\n    const { sourceAnchor, targetAnchor } = e.item;\n    if (sourceNode && !isNaN(sourceAnchor)) {\n      const sourceAnchorShape = sourceNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === sourceAnchor));\n      sourceAnchorShape.set('links', sourceAnchorShape.get('links') - 1);\n    }\n    if (targetNode && !isNaN(targetAnchor)) {\n      const targetAnchorShape = targetNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === targetAnchor));\n      targetAnchorShape.set('links', targetAnchorShape.get('links') - 1);\n    }\n  }\n})\n\n// after clicking on the first node, the edge is created, update the sourceAnchor\ngraph.on('afteradditem', e => {\n  if (e.item && e.item.getType() === 'edge') {\n    graph.updateItem(e.item, {\n      sourceAnchor: sourceAnchorIdx\n    });\n  }\n})\n\n\n// some listeners to control the state of nodes to show and hide anchor-point circles\ngraph.on('node:mouseenter', e => {\n  graph.setItemState(e.item, 'showAnchors', true);\n})\ngraph.on('node:mouseleave', e => {\n  graph.setItemState(e.item, 'showAnchors', false);\n})\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"点击端点上的子图形",filename:"click-link-point.js",isNew:!1},{id:"drag-link-point",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WAQ6T4pqCd8AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n// G6.Util.processParallelEdges processes the edges with same source node and target node,\n// on this basis, processParallelEdgesOnAnchorPoint consider the end nodes and anchor points in the same time.\nconst processParallelEdgesOnAnchorPoint = (\n  edges,\n  offsetDiff = 15,\n  multiEdgeType = 'quadratic',\n  singleEdgeType = undefined,\n  loopEdgeType = undefined\n) => {\n  const len = edges.length;\n  const cod = offsetDiff * 2;\n  const loopPosition = [\n    'top',\n    'top-right',\n    'right',\n    'bottom-right',\n    'bottom',\n    'bottom-left',\n    'left',\n    'top-left',\n  ];\n  const edgeMap = {};\n  const tags = [];\n  const reverses = {};\n  for (let i = 0; i < len; i++) {\n    const edge = edges[i];\n    const { source, target, sourceAnchor, targetAnchor } = edge;\n    const sourceTarget = `${source}|${sourceAnchor}-${target}|${targetAnchor}`;\n\n    if (tags[i]) continue;\n    if (!edgeMap[sourceTarget]) {\n      edgeMap[sourceTarget] = [];\n    }\n    tags[i] = true;\n    edgeMap[sourceTarget].push(edge);\n    for (let j = 0; j < len; j++) {\n      if (i === j) continue;\n      const sedge = edges[j];\n      const { source: src, target: dst, sourceAnchor: srcAnchor, targetAnchor: dstAnchor } = sedge;\n\n      // 两个节点之间共同的边\n      // 第一条的source = 第二条的target\n      // 第一条的target = 第二条的source\n      if (!tags[j]) {\n        if (source === dst && sourceAnchor === dstAnchor\n            && target === src && targetAnchor === srcAnchor) {\n          edgeMap[sourceTarget].push(sedge);\n          tags[j] = true;\n          reverses[`${src}|${srcAnchor}|${dst}|${dstAnchor}|${edgeMap[sourceTarget].length - 1}`] = true;\n        } else if (source === src && sourceAnchor === srcAnchor\n           && target === dst  && targetAnchor === dstAnchor) {\n          edgeMap[sourceTarget].push(sedge);\n          tags[j] = true;\n        }\n      }\n    }\n  }\n\n  for (const key in edgeMap) {\n    const arcEdges = edgeMap[key];\n    const { length } = arcEdges;\n    for (let k = 0; k < length; k++) {\n      const current = arcEdges[k];\n      if (current.source === current.target) {\n        if (loopEdgeType) current.type = loopEdgeType;\n        // 超过8条自环边，则需要重新处理\n        current.loopCfg = {\n          position: loopPosition[k % 8],\n          dist: Math.floor(k / 8) * 20 + 50,\n        };\n        continue;\n      }\n      if (length === 1 && singleEdgeType && (current.source !== current.target || current.sourceAnchor !== current.targetAnchor)) {\n        current.type = singleEdgeType;\n        continue;\n      }\n      current.type = multiEdgeType;\n      const sign =\n        (k % 2 === 0 ? 1 : -1) * (reverses[`${current.source}|${current.sourceAnchor}|${current.target}|${current.targetAnchor}|${k}`] ? -1 : 1);\n      if (length % 2 === 1) {\n        current.curveOffset = sign * Math.ceil(k / 2) * cod;\n      } else {\n        current.curveOffset = sign * (Math.floor(k / 2) * cod + offsetDiff);\n      }\n    }\n  }\n  return edges;\n};\n\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 350, y: 100 },\n    { id: 'node2', x: 350, y: 250 },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Hover the node and the anchor points will show up, drag from and drop on the anchor points to create edges.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\n// custom a node with anchor-point shapes\nG6.registerNode('rect-node', {\n  // draw anchor-point circles according to the anchorPoints in afterDraw\n  afterDraw(cfg, group) {\n    const bbox = group.getBBox();\n    const anchorPoints = this.getAnchorPoints(cfg)\n    anchorPoints.forEach((anchorPos, i) => {\n      group.addShape('circle', {\n        attrs: {\n          r: 5,\n          x: bbox.x + bbox.width * anchorPos[0],\n          y: bbox.y + bbox.height * anchorPos[1],\n          fill: '#fff',\n          stroke: '#5F95FF'\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: `anchor-point`, // the name, for searching by group.find(ele => ele.get('name') === 'anchor-point')\n        anchorPointIdx: i, // flag the idx of the anchor-point circle\n        links: 0, // cache the number of edges connected to this shape\n        visible: false, // invisible by default, shows up when links > 1 or the node is in showAnchors state\n        draggable: true // allow to catch the drag events on this shape\n      })\n    })\n  },\n  getAnchorPoints(cfg) {\n    return cfg.anchorPoints || [[0, 0.5], [0.33, 0], [0.66, 0], [1, 0.5], [0.33, 1], [0.66, 1]];\n  },\n  // response the state changes and show/hide the link-point circles\n  setState(name, value, item) {\n    if (name === 'showAnchors') {\n      const anchorPoints = item.getContainer().findAll(ele => ele.get('name') === 'anchor-point');\n      anchorPoints.forEach(point => {\n        if (value || point.get('links') > 0) point.show()\n        else point.hide()\n      })\n    }\n  }\n}, 'rect')\n\nlet sourceAnchorIdx, targetAnchorIdx;\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: [\n      // config the shouldBegin for drag-node to avoid node moving while dragging on the anchor-point circles\n      {\n        type: 'drag-node',\n        shouldBegin: e => {\n          if (e.target.get('name') === 'anchor-point') return false;\n          return true;\n        }\n      },\n      // config the shouldBegin and shouldEnd to make sure the create-edge is began and ended at anchor-point circles\n      {\n      type: 'create-edge',\n      trigger: 'drag', // set the trigger to be drag to make the create-edge triggered by drag\n      shouldBegin: e => {\n        // avoid beginning at other shapes on the node\n        if (e.target && e.target.get('name') !== 'anchor-point') return false;\n        sourceAnchorIdx = e.target.get('anchorPointIdx');\n        e.target.set('links', e.target.get('links') + 1); // cache the number of edge connected to this anchor-point circle\n        return true;\n      },\n      shouldEnd: e => {\n        // avoid ending at other shapes on the node\n        if (e.target && e.target.get('name') !== 'anchor-point') return false;\n        if (e.target) {\n          targetAnchorIdx = e.target.get('anchorPointIdx');\n          e.target.set('links', e.target.get('links') + 1);  // cache the number of edge connected to this anchor-point circle\n          return true;\n        }\n        targetAnchorIdx = undefined;\n        return true;\n      },\n    }],\n  },\n  defaultNode: {\n    type: 'rect-node',\n    style: {\n      fill: '#eee',\n      stroke: '#ccc',\n    }\n  },\n  defaultEdge: {\n    type: 'quadratic',\n    style: {\n      stroke: '#F6BD16',\n      lineWidth: 2,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('aftercreateedge', (e) => {\n  // update the sourceAnchor and targetAnchor for the newly added edge\n  graph.updateItem(e.edge, {\n    sourceAnchor: sourceAnchorIdx,\n    targetAnchor: targetAnchorIdx\n  })\n\n  // update the curveOffset for parallel edges\n  const edges = graph.save().edges;\n  processParallelEdgesOnAnchorPoint(edges);\n  graph.getEdges().forEach((edge, i) => {\n    graph.updateItem(edge, {\n      curveOffset: edges[i].curveOffset,\n      curvePosition: edges[i].curvePosition,\n    });\n  });\n});\n\n// after drag from the first node, the edge is created, update the sourceAnchor\ngraph.on('afteradditem', e => {\n  if (e.item && e.item.getType() === 'edge') {\n    graph.updateItem(e.item, {\n      sourceAnchor: sourceAnchorIdx\n    });\n  }\n})\n\n// if create-edge is canceled before ending, update the 'links' on the anchor-point circles\ngraph.on('afterremoveitem', e => {\n  if (e.item && e.item.source && e.item.target) {\n    const sourceNode = graph.findById(e.item.source);\n    const targetNode = graph.findById(e.item.target);\n    const { sourceAnchor, targetAnchor } = e.item;\n    if (sourceNode && !isNaN(sourceAnchor)) {\n      const sourceAnchorShape = sourceNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === sourceAnchor));\n      sourceAnchorShape.set('links', sourceAnchorShape.get('links') - 1);\n    }\n    if (targetNode && !isNaN(targetAnchor)) {\n      const targetAnchorShape = targetNode.getContainer().find(ele => (ele.get('name') === 'anchor-point' && ele.get('anchorPointIdx') === targetAnchor));\n      targetAnchorShape.set('links', targetAnchorShape.get('links') - 1);\n    }\n  }\n})\n\n// some listeners to control the state of nodes to show and hide anchor-point circles\ngraph.on('node:mouseenter', e => {\n  graph.setItemState(e.item, 'showAnchors', true);\n})\ngraph.on('node:mouseleave', e => {\n  graph.setItemState(e.item, 'showAnchors', false);\n})\ngraph.on('node:dragenter', e => {\n  graph.setItemState(e.item, 'showAnchors', true);\n})\ngraph.on('node:dragleave', e => {\n  graph.setItemState(e.item, 'showAnchors', false);\n})\ngraph.on('node:dragstart', e => {\n  graph.setItemState(e.item, 'showAnchors', true);\n})\ngraph.on('node:dragout', e => {\n  graph.setItemState(e.item, 'showAnchors', false);\n})\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:"从端点上的子图形拖拽",filename:"drag-link-point.js",isNew:!1}],icon:"",id:"createEdge",title:{en:"Create Edge",zh:"创建边"},childrenKey:"demos",order:13},{demos:[{id:"hideItem",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hld6SrA4qacAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node0', size: 50, label: '0', x: 326, y: 268 },\n    { id: 'node1', size: 30, label: '1', x: 280, y: 384 },\n    { id: 'node2', size: 30, label: '2', x: 234, y: 167 },\n    { id: 'node3', size: 30, label: '3', x: 391, y: 368 },\n    { id: 'node4', size: 30, label: '4', x: 444, y: 209 },\n    { id: 'node5', size: 30, label: '5', x: 378, y: 157 },\n    { id: 'node6', size: 15, label: '6', x: 229, y: 400 },\n    { id: 'node7', size: 15, label: '7', x: 281, y: 440 },\n    { id: 'node8', size: 15, label: '8', x: 188, y: 119 },\n    { id: 'node9', size: 15, label: '9', x: 287, y: 157 },\n    { id: 'node10', size: 15, label: '10', x: 185, y: 200 },\n    { id: 'node11', size: 15, label: '11', x: 238, y: 110 },\n    { id: 'node12', size: 15, label: '12', x: 239, y: 221 },\n    { id: 'node13', size: 15, label: '13', x: 176, y: 160 },\n    { id: 'node14', size: 15, label: '14', x: 389, y: 423 },\n    { id: 'node15', size: 15, label: '15', x: 441, y: 341 },\n    { id: 'node16', size: 15, label: '16', x: 442, y: 398 },\n  ],\n  edges: [\n    { source: 'node0', target: 'node1', label: '0-1' },\n    { source: 'node0', target: 'node2', label: '0-2' },\n    { source: 'node0', target: 'node3', label: '0-3' },\n    { source: 'node0', target: 'node4', label: '0-4' },\n    { source: 'node0', target: 'node5', label: '0-5' },\n    { source: 'node1', target: 'node6', label: '1-6' },\n    { source: 'node1', target: 'node7', label: '1-7' },\n    { source: 'node2', target: 'node8', label: '2-8' },\n    { source: 'node2', target: 'node9', label: '2-9' },\n    { source: 'node2', target: 'node10', label: '2-10' },\n    { source: 'node2', target: 'node11', label: '2-11' },\n    { source: 'node2', target: 'node12', label: '2-12' },\n    { source: 'node2', target: 'node13', label: '2-13' },\n    { source: 'node3', target: 'node14', label: '3-14' },\n    { source: 'node3', target: 'node15', label: '3-15' },\n    { source: 'node3', target: 'node16', label: '3-16' },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: [\n      'drag-node',\n      {\n        type: 'drag-canvas',\n        enableOptimize: true, // enable the optimize to hide the shapes beside nodes' keyShape\n      },\n      {\n        type: 'zoom-canvas',\n        enableOptimize: true, // enable the optimize to hide the shapes beside nodes' keyShape\n      },\n    ],\n  },\n  defaultNode: {\n    size: [10, 10],\n    style: {\n      lineWidth: 2,\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    style: {\n      stroke: '#e2e2e2',\n      lineAppendWidth: 2,\n    },\n  },\n  nodeStateStyles: {\n    yourStateName: {\n      stroke: '#f00',\n      lineWidth: 3,\n    },\n  },\n  edgeStateStyles: {\n    yourStateName: {\n      stroke: '#f00',\n      lineWidth: 3,\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"拖拽画布时隐藏节点 keyShape 外所有图形",en:"Hide the Shapes beside keyShape of Nodes while Dragging"},filename:"hideItem.js",isNew:!1}],icon:"",id:"dragCanvasHideItem",title:{en:"Hide Items while Dragging and Zooming",zh:"拖拽缩放画布时隐藏元素"},childrenKey:"demos",order:13},{demos:[{id:"click",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*F0RGQ67xbGYAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 150, y: 250 },\n    { id: 'node2', x: 350, y: 250 },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nlet shift = true;\n\nconst graphDiv = document.getElementById('container');\n\nconst switchDiv = document.createElement('div');\nswitchDiv.innerHTML = `Press \\'shift\\' to select multiple nodes. Click Here to switch trigger to key \\'alt\\'\n  <br /> 按住 'shift' 可多选节点。点击「这里」将 trigger 切换为 'alt'`;\ngraphDiv.appendChild(switchDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitCenter: true,\n  modes: {\n    default: ['click-select', 'drag-node'],\n    altSelect: [\n      {\n        type: 'click-select',\n        trigger: 'alt',\n      },\n      'drag-node',\n    ],\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable. you can extend or custom it by the following lines */\n  /* 不同状态下节点和边的样式，G6 提供以下状态名的默认样式：active, inactive, selected, highlight, disable。可以通过如下方式修改或者扩展全局状态样式*/\n  // nodeStateStyles: {\n  //   selected: {\n  //     stroke: '#f00',\n  //     lineWidth: 3\n  //   }\n  // },\n  // edgeStateStyles: {\n  //   selected: {\n  //     lineWidth: 3,\n  //     stroke: '#f00'\n  //   }\n  // }\n});\n\ngraph.on('node:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\ngraph.on('nodeselectchange', (e) => {\n  console.log(e.selectedItems, e.select);\n});\n\nswitchDiv.addEventListener('click', (e) => {\n  shift = !shift;\n  if (shift) {\n    graph.setMode('default');\n    switchDiv.innerHTML = `Press \\'shift\\' to select multiple nodes. Click Here to switch trigger to key \\'alt\\'\n      <br /> 按住 'shift' 可多选节点。点击「这里」将 trigger 切换为 'alt'`;\n  } else {\n    graph.setMode('altSelect');\n    switchDiv.innerHTML = `Press \\'alt\\' to select multiple nodes. Click Here to switch trigger to key \\'shift\\'\n      <br /> 按住 'alt' 可多选节点。点击「这里」将 trigger 切换为 'shift'`;\n  }\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:"点击单选或多选",filename:"click.js",isNew:!1},{id:"brush",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZDEiRIQRByEAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 150, y: 250 },\n    { id: 'node2', x: 350, y: 250 },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nlet shift = true;\n\nconst container = document.getElementById('container');\n\nconst switchDiv = document.createElement('div');\nswitchDiv.innerHTML = `Press 'shift' and drag begin on empty space to brush select. Click 「HERE」 to switch trigger to \\'drag\\', and disable drag-canvas\n  <br /> 按住 'shift' 并从画布空白处开始拖拽即可开始框选。点击「这里」将 trigger 切换为 'drag'，同时关闭画布拖拽`;\ncontainer.appendChild(switchDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitCenter: true,\n  modes: {\n    default: ['brush-select', 'drag-node', 'drag-canvas'],\n    altSelect: [\n      {\n        type: 'brush-select',\n        trigger: 'drag',\n      },\n      'drag-node',\n    ],\n  },\n  /* styles for different states, there are built-in styles for states: active, inactive, selected, highlight, disable. you can extend or custom it by the following lines */\n  /* 不同状态下节点和边的样式，G6 提供以下状态名的默认样式：active, inactive, selected, highlight, disable。可以通过如下方式修改或者扩展全局状态样式*/\n  // nodeStateStyles: {\n  //   selected: {\n  //     stroke: '#f00',\n  //     lineWidth: 3\n  //   }\n  // },\n  // edgeStateStyles: {\n  //   selected: {\n  //     lineWidth: 3,\n  //     stroke: '#f00'\n  //   }\n  // }\n});\n\ngraph.on('node:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\ngraph.on('nodeselectchange', (e) => {\n  console.log(e.selectedItems, e.select);\n});\n\nswitchDiv.addEventListener('click', (e) => {\n  shift = !shift;\n  if (shift) {\n    graph.setMode('default');\n    switchDiv.innerHTML = `Press \\'shift\\' and drag begin on empty space to brush select. Click Here to switch trigger to \\'drag\\', and disable drag-canvas\n      <br /> 按住 'shift' 并从画布空白处开始拖拽即可开始框选。点击「这里」将 trigger 切换为 'drag'，同时关闭画布拖拽`;\n  } else {\n    graph.setMode('altSelect');\n    switchDiv.innerHTML = `Press \\'alt\\' and drag begin on empty space to brush select. Click Here to switch trigger to key \\'shift\\', and enable drag-canvas\n      <br /> 按住 'alt' 并从画布空白处开始拖拽即可开始框选。点击「这里」将 trigger 切换为 'shift'，同时开启画布拖拽`;\n  }\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:"框选",filename:"brush.js",isNew:!1},{id:"lasso",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*8WwrRplTPG8AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    { id: 'node1', x: 150, y: 250 },\n    { id: 'node2', x: 350, y: 250 },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nlet shift = true;\n\nconst switchDiv = document.createElement('div');\nswitchDiv.innerHTML = `Press down the 'shift' on keyboard and drag to begin select.  Click「HERE」to switch trigger to \\'drag\\', and custom lasso style, and disable drag-canvas\n  <br /> 按住 'shift' 可开始拉索选择。点击「这里」切换 trigger 为 'drag'，同时修改拉索样式和关闭画布拖拽`;\nconst container = document.getElementById('container');\ncontainer.appendChild(switchDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitCenter: true,\n  modes: {\n    default: ['lasso-select', 'drag-node', 'drag-canvas'],\n    dragLasso: [\n      {\n        type: 'lasso-select',\n        delegateStyle: {\n          fill: '#f00',\n          fillOpacity: 0.05,\n          stroke: '#f00',\n          lineWidth: 1,\n        },\n        onSelect: (nodes, edges) => {\n          console.log('onSelect', nodes, edges);\n        },\n        trigger: 'drag',\n      },\n      'drag-node',\n    ],\n  },\n  nodeStateStyles: {\n    selected: {\n      stroke: '#f00',\n      lineWidth: 3,\n    },\n  },\n  edgeStateStyles: {\n    selected: {\n      lineWidth: 3,\n      stroke: '#f00',\n    },\n  },\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('nodeselectchange', (e) => {\n  console.log(e.selectedItems, e.select);\n});\n\nswitchDiv.addEventListener('click', (e) => {\n  shift = !shift;\n  if (shift) {\n    graph.setMode('default');\n    switchDiv.innerHTML = `Press down the 'shift' on keyboard and drag to begin select. Click「HERE」to switch trigger to \\'drag\\', and custom lasso style, and disable drag-canvas\n    <br /> 按住 'shift' 可开始拉索选择。点击「这里」切换 trigger 为 'drag'，同时修改拉索样式和关闭画布拖拽`;\n  } else {\n    graph.setMode('dragLasso');\n    switchDiv.innerHTML = `Drag on the canvas to begin lasso select. Click「HERE」to switch trigger to \\'shift\\', and enable drag-canvas\n    <br /> 拖拽画布即可进行拉索选择。点击「这里」切换 trigger 为 'drag'，同时开启画布拖拽`;\n  }\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:"拉索选择",filename:"lasso.js",isNew:!1}],icon:"",id:"select",title:{en:"Select",zh:"选中"},childrenKey:"demos",order:14},{demos:[{id:"fitView",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*FALhS5MhAzAAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = `Press both the keys 'control' and '1' to call graph.fitView. The keys and the called function can be configured.【ATTENTION】: make sure the focus is on the canvas when you pressing keys\n  <br /> 按住 'control' 并按下 '1' 键，将会调用 graph.fitView。组合按键及被调用的函数及其参数均可被配置。【注意】：使用组合件调用函数时，请保证当前焦点在画布上`;\ncontainer.appendChild(tipDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 100;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitCenter: true,\n  modes: {\n    default: ['shortcuts-call'],\n  },\n});\nfetch('https://gw.alipayobjects.com/os/bmw-prod/b0ca4b15-bd0c-43ec-ae41-c810374a1d55.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n    graph.zoom(2);\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);\n  };\n",title:"使用快捷键适配画布",filename:"fitView.js",isNew:!1},{id:"moveTo",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*7RPkSJpwzrQAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = `Press both the keys 'control' and 'm' to call graph.fitView. The keys and the called function can be configured.【ATTENTION】: make sure the focus is on the canvas when you pressing keys\n  <br /> 按住 'control' 并按下 'm' 键，将会调用 graph.moveTo。组合按键及被调用的函数及其参数均可被配置。【注意】：使用组合件调用函数时，请保证当前焦点在画布上`;\ncontainer.appendChild(tipDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 100;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  fitCenter: true,\n  modes: {\n    default: [\n      {\n        type: 'shortcuts-call',\n        functionName: 'moveTo',\n        functionParams: [0, 0],\n        combinedKey: 'm',\n      },\n    ],\n  },\n});\nfetch('https://gw.alipayobjects.com/os/bmw-prod/b0ca4b15-bd0c-43ec-ae41-c810374a1d55.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n    graph.zoom(2);\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);\n  };\n",title:"使用快捷键移动到左上角",filename:"moveTo.js",isNew:!1}],icon:"",id:"fitView",title:{en:"Fit View with Shortcuts",zh:"快捷键适应画布"},childrenKey:"demos",order:15},{demos:[{id:"treePagination",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*v7yASaVZDisAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n// the max number of nodes for each subtree\nconst MAX_NUM_EACH_SUBTREE = 3;\n\nconst container = document.getElementById('container');\nconst tipDiv = document.createElement('div');\ntipDiv.id = 'tip';\ntipDiv.innerHTML = `<div>Hover the nodes of a subtree, and click the triangle icons to switch the nodes patination.</div>\n<div>将鼠标移动到有多个子节点的子树上，点击左右小三角按钮以切换该层级的节点，达到分页效果</div>`;\ncontainer.appendChild(tipDiv);\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/a3ae9b40-ff40-434a-894f-b10c535f8b9f.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const stashSubtrees = {};\n    G6.Util.traverseTreeUp(data, (subtree) => {\n      // process the label\n      (subtree.label = subtree.id),\n        (subtree.labelCfg = {\n          offset: 10,\n          position: subtree.children && subtree.children.length > 0 ? 'left' : 'right',\n        });\n\n      // stash the origin children for the subtree to be pruned\n      if (subtree.children && subtree.children.length > MAX_NUM_EACH_SUBTREE) {\n        subtree.overflow = true;\n        const stashChildren = [];\n        subtree.children.forEach((child) => {\n          stashChildren.push(Object.assign({}, child));\n        });\n        stashSubtrees[subtree.id] = {\n          oriChildren: stashChildren,\n          curBeginIdx: 0,\n          curEndIdx: MAX_NUM_EACH_SUBTREE,\n        };\n      }\n    });\n\n    // pruning the tree\n    G6.Util.traverseTree(data, (subtree) => {\n      if (subtree.overflow) subtree.children = subtree.children.slice(0, MAX_NUM_EACH_SUBTREE);\n    });\n\n    const width = container.scrollWidth;\n    const height = (container.scrollHeight || 500) - 50;\n    const graph = new G6.TreeGraph({\n      container: 'container',\n      width,\n      height,\n      modes: {\n        default: [\n          {\n            type: 'collapse-expand',\n            onChange: function onChange(item, collapsed) {\n              item.getModel().collapsed = collapsed;\n              Object.keys(iconMap).forEach((parentId) => {\n                if (!iconMap[parentId] || iconMap[parentId].destroyed) return;\n                destroyIcons(parentId);\n              });\n              return true;\n            },\n          },\n          'drag-canvas',\n          'zoom-canvas',\n        ],\n      },\n      defaultNode: {\n        size: 26,\n        anchorPoints: [\n          [0, 0.5],\n          [1, 0.5],\n        ],\n        style: {\n          fill: '#C6E5FF',\n          stroke: '#5B8FF9',\n        },\n      },\n      defaultEdge: {\n        type: 'cubic-horizontal',\n        style: {\n          stroke: '#A3B1BF',\n        },\n      },\n      layout: {\n        type: 'compactBox',\n        direction: 'LR',\n        getId: function getId(d) {\n          return d.id;\n        },\n        getHeight: function getHeight() {\n          return 16;\n        },\n        getWidth: function getWidth() {\n          return 16;\n        },\n        getVGap: function getVGap() {\n          return 10;\n        },\n        getHGap: function getHGap() {\n          return 100;\n        },\n      },\n      fitView: true,\n    });\n\n    if (typeof window !== 'undefined')\n      window.onresize = () => {\n        if (!graph || graph.get('destroyed')) return;\n        if (!container || !container.scrollWidth || !container.scrollHeight) return;\n        graph.changeSize(container.scrollWidth, container.scrollHeight - 50);\n      };\n\n    const iconMap = {};\n\n    // draw the icons on the root graphics group of the graph\n    const drawIcons = (parentId) => {\n      const parentNode = graph.findById(parentId);\n      const model = parentNode.getModel();\n      delayDestroyIcons(parentId, 2000);\n      if (model.overflow) {\n        if (iconMap[parentId] && !iconMap[parentId].destroyed) return;\n        const graphicsGroup = graph.getGroup();\n        const children = model.children;\n        const stashSubtree = stashSubtrees[parentId];\n        const prePos = [children[0].x, children[0].y - (children[0].size || 26)];\n        const nextPos = [children[2].x, children[2].y + (children[0].size || 26)];\n        const preIcon = graphicsGroup.addShape('marker', {\n          attrs: {\n            symbol: 'triangle',\n            x: prePos[0],\n            y: prePos[1],\n            r: 6,\n            fill: '#333',\n            opacity: 0,\n            cursor: 'pointer',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: `pre-icon`,\n          subtreeID: model.id,\n        });\n        const nextIcon = graphicsGroup.addShape('marker', {\n          attrs: {\n            symbol: 'triangle-down',\n            x: nextPos[0],\n            y: nextPos[1],\n            r: 6,\n            fill: '#333',\n            opacity: 0,\n            cursor: 'pointer',\n          },\n          // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n          name: `next-icon`,\n          subtreeID: model.id,\n        });\n\n        if (stashSubtree.curBeginIdx > 0) {\n          preIcon.animate(\n            {\n              opacity: 0.5,\n            },\n            {\n              duration: 150,\n              repeat: false,\n            },\n          );\n        }\n        if (stashSubtree.curEndIdx < stashSubtree.oriChildren.length) {\n          nextIcon.animate(\n            {\n              opacity: 0.5,\n            },\n            {\n              duration: 150,\n              repeat: false,\n            },\n          );\n        }\n\n        iconMap[parentId] = {\n          preIcon,\n          nextIcon,\n          destroyed: false,\n        };\n        return true;\n      }\n      return false;\n    };\n\n    // update the icons\n    const updateIcons = (parentId) => {\n      if (!parentId || !iconMap[parentId]) return;\n      const preIcon = iconMap[parentId].preIcon;\n      const nextIcon = iconMap[parentId].nextIcon;\n      const stashSubtree = stashSubtrees[parentId];\n\n      const parentModel = graph.findById(parentId).getModel();\n      const children = parentModel.children;\n      if (!children) return;\n      const prePos = [children[0].x, children[0].y - (children[0].size || 26)];\n      const nextPos = [children[2].x, children[2].y + (children[0].size || 26)];\n      preIcon.attr({\n        opacity: stashSubtree.curBeginIdx <= 0 || parentModel.collapsed ? 0 : 0.5,\n        x: prePos[0],\n        y: prePos[1],\n      });\n      nextIcon.attr({\n        opacity:\n          stashSubtree.curEndIdx >= stashSubtree.oriChildren.length || parentModel.collapsed\n            ? 0\n            : 0.5,\n        x: nextPos[0],\n        y: nextPos[1],\n      });\n    };\n\n    // destroy the icons\n    const destroyIcons = (parentId) => {\n      if (!iconMap[parentId]) return;\n      const preIcon = iconMap[parentId].preIcon;\n      const nextIcon = iconMap[parentId].nextIcon;\n      if (preIcon && !preIcon.destroyed) {\n        preIcon.animate(\n          {\n            opacity: 0,\n          },\n          {\n            duration: 150,\n            repeat: false,\n          },\n        );\n        setTimeout(() => {\n          preIcon.remove();\n          preIcon.destroy();\n        }, 150);\n      }\n      if (nextIcon && !nextIcon.destroyed) {\n        nextIcon.animate(\n          {\n            opacity: 0,\n          },\n          {\n            duration: 150,\n            repeat: false,\n          },\n        );\n        setTimeout(() => {\n          nextIcon.remove();\n          nextIcon.destroy();\n        }, 150);\n      }\n      iconMap[parentId].destroyed = true;\n    };\n\n    // destroy the icons with delay\n    const delayDestroyIcons = (parentId, delay = 2000) => {\n      if (!iconMap[parentId] || window || typeof window === 'undefined') return;\n      if (iconMap[parentId].timeouter) {\n        window.clearTimeout(iconMap[parentId].timeouter);\n      }\n      iconMap[parentId].timeouter = window.setTimeout(() => {\n        destroyIcons(parentId);\n      }, delay);\n    };\n\n    // mouseenter the node to show the previous/next icons\n    graph.on('node:mouseenter', (e) => {\n      const parentNode = e.item.get('parent');\n      if (!parentNode) return;\n      const parentId = parentNode.getID();\n      drawIcons(parentId);\n    });\n\n    // mouseleave the node to destroy the icons\n    graph.on('node:mouseleave', (e) => {\n      const parentNode = e.item.get('parent');\n      if (!parentNode) return;\n      const parentId = parentNode.getID();\n      delayDestroyIcons(parentId, 2000);\n    });\n\n    // click the icon to changeData\n    graph.on('click', (e) => {\n      if (e.name === 'click') return;\n      const target = e.target;\n      const targetName = target.get('name');\n      if (targetName !== 'pre-icon' && targetName !== 'next-icon') return;\n      const parentId = target.get('subtreeID');\n      const stashSubtree = stashSubtrees[parentId];\n      const oriChildren = stashSubtree.oriChildren;\n      if (targetName === 'pre-icon') {\n        if (stashSubtree.curBeginIdx <= 0) return; // touch the top\n        stashSubtree.curBeginIdx--;\n        stashSubtree.curEndIdx--;\n      } else {\n        if (stashSubtree.curEndIdx >= oriChildren.length) return; // touch the bottom\n        stashSubtree.curBeginIdx++;\n        stashSubtree.curEndIdx++;\n      }\n      const newChildren = oriChildren.slice(stashSubtree.curBeginIdx, stashSubtree.curEndIdx);\n      newChildren.forEach((childTree) => {\n        G6.Util.traverseTreeUp(childTree, (subChildTree) => {\n          if (subChildTree.children && subChildTree.children.length > MAX_NUM_EACH_SUBTREE) {\n            subChildTree.children = subChildTree.children.slice(0, MAX_NUM_EACH_SUBTREE);\n          }\n        });\n      });\n      graph.updateChildren(newChildren, parentId);\n    });\n\n    graph.on('afterlayout', (e) => {\n      Object.keys(iconMap).forEach((parentId) => {\n        if (!iconMap[parentId] || iconMap[parentId].destroyed) return;\n        updateIcons(parentId);\n      });\n    });\n\n    graph.data(data);\n    graph.render();\n  });\n",title:{zh:"子树节点分页",en:"Pagination for Subtree"},filename:"treePagination.js",isNew:!1},{id:"dagrePagination",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ztMMS5WPancAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n// the max number of nodes for each level\nconst MAX_NUM_EACH_LEVEL = 3;\nlet nodeMap = {};\nlet curNewNodeIds = [];\n\nconst data = {\n  nodes: [\n    {\n      id: '1',\n      label: 'level 1',\n    },\n    {\n      id: '2-1',\n      label: 'level 2-1',\n    },\n    {\n      id: '2-2',\n      label: 'level 2-2',\n    },\n    {\n      id: '2-3',\n      label: 'level 2-3',\n    },\n    {\n      id: '2-4',\n      label: 'level 2-4',\n    },\n    {\n      id: '2-5',\n      label: 'level 2-5',\n    },\n    {\n      id: '2-6',\n      label: 'level 2-6',\n    },\n    {\n      id: '3',\n      label: 'level 3',\n    },\n    {\n      id: '4',\n      label: 'level 4',\n    },\n    {\n      id: '5-1',\n      label: 'level 5-1',\n    },\n    {\n      id: '5-2',\n      label: 'level 5-2',\n    },\n    {\n      id: '5-3',\n      label: 'level 5-3',\n    },\n    {\n      id: '5-4',\n      label: 'level 5-4',\n    },\n    {\n      id: '5-5',\n      label: 'level 5-5',\n    },\n    {\n      id: '5-6',\n      label: 'level 5-6',\n    },\n    {\n      id: '5-7',\n      label: 'level 5-7',\n    },\n    {\n      id: '5-8',\n      label: 'level 5-8',\n    },\n  ],\n  edges: [\n    {\n      source: '1',\n      target: '2-1',\n    },\n    {\n      source: '1',\n      target: '2-2',\n    },\n    {\n      source: '1',\n      target: '2-3',\n    },\n    {\n      source: '1',\n      target: '2-4',\n    },\n    {\n      source: '1',\n      target: '2-5',\n    },\n    {\n      source: '1',\n      target: '2-6',\n    },\n    {\n      source: '2-1',\n      target: '3',\n    },\n    {\n      source: '2-2',\n      target: '3',\n    },\n    {\n      source: '2-3',\n      target: '3',\n    },\n    {\n      source: '2-4',\n      target: '3',\n    },\n    {\n      source: '2-5',\n      target: '3',\n    },\n    {\n      source: '2-6',\n      target: '3',\n    },\n    {\n      source: '3',\n      target: '4',\n    },\n    {\n      source: '4',\n      target: '5-1',\n    },\n    {\n      source: '4',\n      target: '5-2',\n    },\n    {\n      source: '4',\n      target: '5-3',\n    },\n    {\n      source: '4',\n      target: '5-4',\n    },\n    {\n      source: '4',\n      target: '5-5',\n    },\n    {\n      source: '4',\n      target: '5-6',\n    },\n    {\n      source: '4',\n      target: '5-7',\n    },\n    {\n      source: '4',\n      target: '5-8',\n    },\n  ],\n};\n\nconst compare = (property) => {\n  return (obj1, obj2) => {\n    return obj1[property] - obj2[property];\n  };\n};\n\nconst curNodesToNewData = (levels, initPos) => {\n  const resData = { nodes: [], edges: [] };\n  curNewNodeIds = [];\n  let newNodeMap = {};\n  levels.forEach((level) => {\n    if (level.curNodes) {\n      for (let i = 0; i < level.nodes.length; i++) {\n        const node = level.nodes[i];\n        if (i >= level.curBeginIdx && i < level.curEndIdx) {\n          if (!node.x || !node.y) {\n            node.x = initPos[0];\n            node.y = initPos[1];\n          }\n        } else {\n          node.x = undefined;\n          node.y = undefined;\n        }\n      }\n      resData.nodes = resData.nodes.concat(level.curNodes);\n    } else {\n      resData.nodes = resData.nodes.concat(level.nodes);\n    }\n  });\n  resData.nodes.forEach((node) => {\n    newNodeMap[node.id] = node;\n    if (Object.keys(nodeMap).length !== 0 && !nodeMap[node.id]) {\n      curNewNodeIds.push(node.id);\n    }\n  });\n\n  data.edges.forEach((edge) => {\n    if (newNodeMap[edge.source] && newNodeMap[edge.target]) {\n      resData.edges.push(edge);\n    }\n  });\n  nodeMap = newNodeMap;\n  return resData;\n};\n\nconst container = document.getElementById('container');\nconst tipDiv = document.createElement('div');\ntipDiv.id = 'tip';\ntipDiv.innerHTML = `<div>Hover the nodes of level 2 and leve 5, and click the triangle icons to switch the nodes patination.</div>\n<div>将鼠标移动到 level 2 和 level 5 的节点上后，点击左右小三角按钮以切换该层级的节点，达到分页效果</div>`;\ncontainer.appendChild(tipDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 50;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  layout: {\n    type: 'dagre',\n    nodesepFunc: (d) => {\n      return 20;\n    },\n    ranksep: 30,\n    controlPoints: true,\n  },\n  defaultNode: {\n    type: 'rect',\n    size: [70, 30],\n    style: {\n      radius: 10,\n    },\n  },\n  defaultEdge: {\n    type: 'cubic-vertical',\n    style: {\n      radius: 20,\n      offset: 45,\n      endArrow: true,\n      lineWidth: 2,\n      stroke: '#C2C8D5',\n    },\n  },\n  nodeStateStyles: {\n    selected: {\n      stroke: '#d9d9d9',\n      fill: '#5394ef',\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas', 'click-select'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\n// stash origin data\nconst levelsMap = {};\n// group the nodes according to their y, which indicates the level\ndata.nodes.forEach((node) => {\n  if (!levelsMap[node.y]) {\n    levelsMap[node.y] = {\n      y: node.y,\n      nodes: [],\n    };\n  }\n  levelsMap[node.y].nodes.push(node);\n});\nconst unsortedlevels = [];\nObject.keys(levelsMap).forEach((key) => {\n  unsortedlevels.push(levelsMap[key]);\n});\n// sort the levels according to the y.\n// and slice the nodes for each level if the num of nodes is over MAX_NUM_EACH_LEVEL\nconst levels = unsortedlevels.sort(compare('y'));\nlevels.forEach((level, k) => {\n  if (level.nodes.length > MAX_NUM_EACH_LEVEL) {\n    level.curBeginIdx = 0;\n    level.curEndIdx = MAX_NUM_EACH_LEVEL;\n    level.curNodes = [];\n    level.nodes.forEach((levelNode, i) => {\n      levelNode.overflow = true;\n      levelNode.levelIdx = k;\n      if (i < MAX_NUM_EACH_LEVEL && i >= 0) {\n        level.curNodes.push(levelNode);\n      }\n    });\n  } else {\n    level.nodes.forEach((levelNode) => {\n      levelNode.levelIdx = k;\n    });\n  }\n});\n\ngraph.changeData(curNodesToNewData(levels));\ngraph.fitView();\ngraph.set('animate', true);\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 50);\n  };\n\nconst iconMap = {};\n\n// draw the icons on the root graphics group of the graph\nconst drawIcons = (nodeId) => {\n  const node = graph.findById(nodeId);\n  const model = node.getModel();\n  delayDestroyIcons(nodeId, 2000);\n  if (model.overflow) {\n    const levelIdx = model.levelIdx;\n    const y = model.y;\n    if (iconMap[levelIdx] && !iconMap[levelIdx].destroyed) return;\n    const level = levels[levelIdx];\n    const graphicsGroup = graph.getGroup();\n    const prePos = [level.curNodes[0].x - (level.curNodes[0].size[0] / 2 || 20) - 10, y];\n    const nextPos = [level.curNodes[2].x + (level.curNodes[0].size[0] / 2 || 20) + 10, y];\n    const preIcon = graphicsGroup.addShape('marker', {\n      attrs: {\n        symbol: 'triangle',\n        x: prePos[0],\n        y: prePos[1],\n        r: 5,\n        fill: '#333',\n        opacity: 0,\n        cursor: 'pointer',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: `pre-icon`,\n      levelIdx,\n    });\n    const nextIcon = graphicsGroup.addShape('marker', {\n      attrs: {\n        symbol: 'triangle-down',\n        x: nextPos[0],\n        y: nextPos[1],\n        r: 5,\n        fill: '#333',\n        opacity: 0,\n        cursor: 'pointer',\n      },\n      // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n      name: `next-icon`,\n      levelIdx,\n    });\n\n    if (level.curBeginIdx > 0) {\n      preIcon.animate(\n        {\n          opacity: 1,\n        },\n        {\n          duration: 150,\n          repeat: false,\n        },\n      );\n    }\n    if (level.curEndIdx < level.nodes.length) {\n      nextIcon.animate(\n        {\n          opacity: 1,\n        },\n        {\n          duration: 150,\n          repeat: false,\n        },\n      );\n    }\n\n    iconMap[levelIdx] = {\n      preIcon,\n      nextIcon,\n      destroyed: false,\n    };\n    return true;\n  }\n  return false;\n};\n\n// update the icons\nconst updateIcons = (levelIdx) => {\n  if (!levelIdx || !iconMap[levelIdx]) return;\n  const preIcon = iconMap[levelIdx].preIcon;\n  const nextIcon = iconMap[levelIdx].nextIcon;\n  const level = levels[levelIdx];\n\n  const curNodes = level.curNodes;\n  if (!curNodes) return;\n  const prePos = [curNodes[0].x - (curNodes[0].size[0] / 2 || 20) - 10, curNodes[0].y];\n  const nextPos = [curNodes[2].x + (curNodes[0].size[0] / 2 || 20) + 10, curNodes[2].y];\n  preIcon.attr({\n    opacity: level.curBeginIdx <= 0 ? 0 : 1,\n    x: prePos[0],\n    y: prePos[1],\n  });\n  nextIcon.attr({\n    opacity: level.curEndIdx >= level.nodes.length ? 0 : 1,\n    x: nextPos[0],\n    y: nextPos[1],\n  });\n};\n\n// destroy the icons\nconst destroyIcons = (levelIdx) => {\n  if (!iconMap[levelIdx]) return;\n  const preIcon = iconMap[levelIdx].preIcon;\n  const nextIcon = iconMap[levelIdx].nextIcon;\n  if (preIcon && !preIcon.destroyed) {\n    preIcon.animate(\n      {\n        opacity: 0,\n      },\n      {\n        duration: 150,\n        repeat: false,\n      },\n    );\n    setTimeout(() => {\n      preIcon.remove();\n      preIcon.destroy();\n    }, 150);\n  }\n  if (nextIcon && !nextIcon.destroyed) {\n    nextIcon.animate(\n      {\n        opacity: 0,\n      },\n      {\n        duration: 150,\n        repeat: false,\n      },\n    );\n    setTimeout(() => {\n      nextIcon.remove();\n      nextIcon.destroy();\n    }, 150);\n  }\n  iconMap[levelIdx].destroyed = true;\n};\n\n// destroy the icons with delay\nconst delayDestroyIcons = (levelIdx, delay = 2000) => {\n  if (!iconMap[levelIdx] || typeof window === 'undefined') return;\n  if (iconMap[levelIdx].timeouter) {\n    window.clearTimeout(iconMap[levelIdx].timeouter);\n  }\n  iconMap[levelIdx].timeouter = window.setTimeout(() => {\n    destroyIcons(levelIdx);\n  }, delay);\n};\n\n// mouseenter the node to show the previous/next icons\ngraph.on('node:mouseenter', (e) => {\n  drawIcons(e.item.getID());\n});\n\n// mouseleave the node to destroy the icons\ngraph.on('node:mouseleave', (e) => {\n  const levelIdx = e.item.getModel().levelIdx;\n  delayDestroyIcons(levelIdx, 2000);\n});\n\n// click the icon to changeData\ngraph.on('click', (e) => {\n  if (e.name === 'click') return;\n  const marker = e.target;\n  const targetName = marker.get('name');\n  if (targetName !== 'pre-icon' && targetName !== 'next-icon') return;\n  const levelIdx = marker.get('levelIdx');\n  const level = levels[levelIdx];\n  const oriNodes = level.nodes;\n  if (targetName === 'pre-icon') {\n    if (level.curBeginIdx <= 0) return; // touch the top\n    level.curBeginIdx--;\n    level.curEndIdx--;\n  } else {\n    if (level.curEndIdx >= oriNodes.length) return; // touch the bottom\n    level.curBeginIdx++;\n    level.curEndIdx++;\n  }\n  level.curNodes = oriNodes.slice(level.curBeginIdx, level.curEndIdx);\n\n  const initPos = [marker.attr('x'), level.y];\n\n  graph.changeData(curNodesToNewData(levels, initPos));\n  curNewNodeIds.forEach((newId) => {\n    const newNode = graph.findById(newId);\n    const nodeGroup = newNode.getContainer();\n    nodeGroup.attr('opacity', 0);\n    nodeGroup.animate(\n      {\n        opacity: 1,\n      },\n      150,\n    );\n  });\n});\n\n// update the icon after changeData\ngraph.on('afterlayout', (e) => {\n  Object.keys(iconMap).forEach((levelIdx) => {\n    if (!iconMap[levelIdx] || iconMap[levelIdx].destroyed) return;\n    updateIcons(levelIdx);\n  });\n});\n",title:{zh:"dagre 节点分页",en:"Pagination for Dagre Graph"},filename:"dagrePagination.js",isNew:!1}],icon:"",id:"pagination",title:{en:"Nodes Paginaion",zh:"节点分页器"},childrenKey:"demos",order:15}],childrenKey:"examples"},{id:"scatter",title:{zh:"动画",en:"Animation"},icon:"scatter",examples:[{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HRIpRobLTr0AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = `Click node or edge to focus on it with animate. 点击节点或边可带动画地聚焦到该元素上`;\ndocument.getElementById('container').appendChild(tipDiv);\nconst tipDiv2 = document.createElement('div');\ntipDiv2.innerHTML = `Click the button on toolbar to see viewport change animately. 点击 Toolbar 上的按钮可带动画地操作视图`;\ndocument.getElementById('container').appendChild(tipDiv2);\n\nconst data = {\n  nodes: [\n    {\n      id: 'a',\n      x: 200,\n      y: 100,\n      style: { fill: '#5B8FF9', stroke: null },\n    },\n    {\n      id: 'b',\n      x: 100,\n      y: 200,\n      style: { fill: '#5AD8A6', stroke: null },\n    },\n    {\n      id: 'c',\n      x: 300,\n      y: 200,\n      style: { fill: '#5D7092', stroke: null },\n    },\n  ],\n  edges: [\n    {\n      id: 'a2b',\n      source: 'a',\n      target: 'b',\n    },\n    {\n      id: 'a2c',\n      source: 'a',\n      target: 'c',\n    },\n  ],\n};\n\nconst animateCfg = { duration: 200, easing: 'easeCubic' }\n\nconst toolbar = new G6.ToolBar({\n  position: { x: 10, y: 70 },\n  getContent: () => `\n  <ul class='g6-component-toolbar'>\n    <li  code='zoomOut'>\n      <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\">\n        <path d=\"M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z\"></path>\n      </svg>\n    </li>\n    <li code='zoomIn'>\n      <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\">\n        <path d=\"M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z\" p-id=\"3853\"></path>\n      </svg>\n    </li>\n    <li code='realZoom'>\n      <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"24\">\n        <path d=\"M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z\"></path>\n      </svg>\n    </li>\n    <li code='autoZoom'>\n      <svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"24\">\n        <path d=\"M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z\"></path>\n      </svg>\n    </li>\n  </ul>`,\n  handleClick: (code, graph) => {\n    switch (code) {\n      case 'zoomOut':\n        graph.zoom(1.2, undefined, true, animateCfg);\n        break;\n      case 'zoomIn':\n        graph.zoom(0.8, undefined, true, animateCfg);\n        break;\n      case 'realZoom':\n        graph.zoomTo(1, undefined, true, animateCfg);\n        break;\n      case 'autoZoom':\n        graph.fitView(20, undefined, true, animateCfg);\n        break;\n    }\n  }\n})\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 50;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  plugins: [toolbar],\n});\n\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:click', e => {\n  graph.focusItem(e.item, true, animateCfg)\n})\ngraph.on('edge:click', e => {\n  graph.focusItem(e.item, true, animateCfg)\n})\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"视口变换动画",en:"Viewport Animation"},filename:"default.js",isNew:!1}],icon:"",id:"viewport",title:{en:"Viewport Animation",zh:"视口变换动画"},childrenKey:"demos",order:0},{demos:[{id:"node",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MDDjSov7gMkAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst Util = G6.Util;\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 100,\n      type: 'circle-animate',\n      size: 20,\n      label: 'Scale Animation',\n      labelCfg: {\n        position: 'top',\n      },\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 200,\n      type: 'background-animate',\n      color: '#40a9ff',\n      size: 20,\n      label: 'Background Animation',\n      labelCfg: {\n        position: 'left',\n        offset: 10,\n      },\n    },\n    {\n      id: 'node3',\n      x: 400,\n      y: 100,\n      size: [40, 40],\n      type: 'inner-animate',\n      img:\n        'data:image/webp;base64,UklGRq4FAABXRUJQVlA4IKIFAABwHwCdASo8ADwAPiEMhEGhhv6rQAYAgS2NHsdCq/4D8AOoA64OEUAj/XPxVwyvRGvyO/gGxN/t3oK/1X6zesX3L/p/RP/2HCgKAB9AGeAbCB+AGwAbQBtA/8c/m/4PYHTonm+SzRH6B9sv2i/rOZC+G/ln9l/ML/GdoD7APcA/TD+09QDzAfrX+vHYM9AD+Uf0zrAPQA/bH0vv2t+CH9qf2R+A39e6X098/I7IAcLcs8Gjmc/9T7gPbX9H+wJ+rPVV9En9ZmBI5oUiYhkYHIVjRr9hzCTPcV5Rs/wjjIHkxPgtr/3ALZSuUm146HHwqQVA23hnnqH/4aJ/k4v4hU6RBZ0AAAD+//8ARPyL9yWIlAbWBAD0oKSqlYWreuRa3Oj02u+TvSQS8iwMYewUYTWLDNp9wOlFJaWnqE+za35UwUXuDAT6T0I4fwY+u+qrRVhl+S1ir4X7BQiNswug5AX+MjQcXEeUwfSIEUT+DFPCr+BUiwTbFxLni7fv61vRbmXoauLz4tiqOFTzEGP8tNXP5+H7mZVGfNjIxapT3FGUtqBdp/SD5cTOYOkn2fawkpqpCSqf2+CfiGWtIF673fEzlk/hIbWDhQ81C/ddxLn609d/5efckbdZ8HZbhhVmM82/Uat7CFmw1SH5xCxRxEEhjpf1EP1Xn5q9VZfm1+OFTab/MN67Xha8K//5oVBlMgZALE653X0fas/+2xMqiyCu5Wa7PHsCwbBwqROfNmzi4LPOTjkFPHVKDD1Nfj4/sul6cANdF68rf2jszlyZsUUoLTP7H3swSroc3ssNXSRVAcYd7+iBZpfoAYWvKgnr+Hv62fHZX5ZbjYbYzVjq6fsXkubto858NuUx4+ILb5y7dP6W3/IYVeUSF0yZseKIZhOMs9BBf5uB2Y3Ott//+1OG7hYINzcqigrzWAOJbSmVw3G0ULywkobx+rvfk8VmZFzQGgP/+4T74mp/vsZyM1NLguiTO2gNO05tcpXwveq5mrcweXrJ/bRZDmU2KBrnXhkXq+735c+UHTFq4h4jMOPm5shKioB6XaqhUf3DJlMg8937g/SKjrgD0H5sNm0/k4FfilBbcrsjc3dd6cwEYJo3CNhe3SpNJ2geNXyV4/hq/BZXZ1kiVknjmf5cUx7Tv/9Sb+fQ/DgAsRNSz1wiVodiLjP7aVrkxbWx5gJ8U/j0o1Ipm/nyDZRPrQXmbPAcy1eDDejxTDBKe42ElHpC2QlFdhOedsp4i9QVjt8EqWGy1YzPaGqZhCVg/LWt8/+4BmiCzNGtpR21MGJf4kI/n/1sbe36e1QBCBAx4EVfTM82ZM2lh0P189e7eY0A3NzXWVrUek8SEn+DYYCQeEaC5hDHGreFHT1baY6KyrFx3G9oMm3fLrCqmNjFRnZa3LB/5m8FgCpq9B/1OCLRE5GzVTZnVzj/4V38PgCIpX16Kznijf01+MkDeS9oCF2hEXQ9tr+mPLrjGy4Cg5fyLgyCj1fUq33nMf79Svli2h83m3gqkoxJcXvBetFQP8V/gRjBNGmFXK5TfwLhbolWEjDqUGK3n+hxzQLif9zreYO88EIRTUNbzE1/Sn7rBEtjB0uawNje5OubWsB62SOlMZoZpxrDbMb4UvQrODPhSafmhcYe9zm/dHxssMfUthhDKjyMhoRhngPjbzfGXmIV2Omgrn/zbefK/PawUGSH6x4Qk4HCN4/X8S+XCf51JJtOQeHST/yfwg69uMkE07SONnhGUrL6j5oQn6JI+zkaH/H/P/Ti/pfOTfAWxQNiMvWX08mqbuUweFSQ/G5YUP/uCvZAXutf1+Nhl2jj/n4/fPOihPjwvfFnnjOaQvs9PSpF33d+396LASZ3IID/4UP4pf9eOMXw82ccoUUUHX6MfBWyBDvARCrdPmerUwKwW+lBIAe1dsAAAA==',\n      label: 'Image Rotate',\n      labelCfg: {\n        position: 'right',\n      },\n    },\n    {\n      id: 'node4',\n      x: 300,\n      y: 300,\n      type: 'rect',\n      label: 'No Animation',\n      labelCfg: {\n        position: 'bottom',\n      },\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n    {\n      source: 'node3',\n      target: 'node2',\n    },\n    {\n      source: 'node2',\n      target: 'node4',\n    },\n  ],\n};\n\n// Scale Animation\nG6.registerNode(\n  'circle-animate',\n  {\n    afterDraw(cfg, group) {\n      const shape = group.get('children')[0];\n      shape.animate(\n        (ratio) => {\n          const diff = ratio <= 0.5 ? ratio * 10 : (1 - ratio) * 10;\n          return {\n            r: cfg.size / 2 + diff,\n          };\n        },\n        {\n          repeat: true,\n          duration: 3000,\n          easing: 'easeCubic',\n        },\n      );\n    },\n  },\n  'circle',\n);\n\n// Background Animation\nG6.registerNode(\n  'background-animate',\n  {\n    afterDraw(cfg, group) {\n      const r = cfg.size / 2;\n      const back1 = group.addShape('circle', {\n        zIndex: -3,\n        attrs: {\n          x: 0,\n          y: 0,\n          r,\n          fill: cfg.color,\n          opacity: 0.6,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'back1-shape',\n      });\n      const back2 = group.addShape('circle', {\n        zIndex: -2,\n        attrs: {\n          x: 0,\n          y: 0,\n          r,\n          fill: cfg.color,\n          opacity: 0.6,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'back2-shape',\n      });\n      const back3 = group.addShape('circle', {\n        zIndex: -1,\n        attrs: {\n          x: 0,\n          y: 0,\n          r,\n          fill: cfg.color,\n          opacity: 0.6,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'back3-shape',\n      });\n      group.sort(); // Sort according to the zIndex\n      back1.animate(\n        {\n          // Magnifying and disappearing\n          r: r + 10,\n          opacity: 0.1,\n        },\n        {\n          duration: 3000,\n          easing: 'easeCubic',\n          delay: 0,\n          repeat: true, // repeat\n        },\n      ); // no delay\n      back2.animate(\n        {\n          // Magnifying and disappearing\n          r: r + 10,\n          opacity: 0.1,\n        },\n        {\n          duration: 3000,\n          easing: 'easeCubic',\n          delay: 1000,\n          repeat: true, // repeat\n        },\n      ); // 1s delay\n      back3.animate(\n        {\n          // Magnifying and disappearing\n          r: r + 10,\n          opacity: 0.1,\n        },\n        {\n          duration: 3000,\n          easing: 'easeCubic',\n          delay: 2000,\n          repeat: true, // repeat\n        },\n      ); // 3s delay\n    },\n  },\n  'circle',\n);\n\n// Image animation\nG6.registerNode(\n  'inner-animate',\n  {\n    afterDraw(cfg, group) {\n      const size = cfg.size;\n      const width = size[0] - 12;\n      const height = size[1] - 12;\n      const image = group.addShape('image', {\n        attrs: {\n          x: -width / 2,\n          y: -height / 2,\n          width,\n          height,\n          img: cfg.img,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'image-shape',\n      });\n      image.animate(\n        (ratio) => {\n          const toMatrix = Util.transform(\n            [1, 0, 0, 0, 1, 0, 0, 0, 1],\n            [['r', ratio * Math.PI * 2]],\n          );\n          return {\n            matrix: toMatrix,\n          };\n        },\n        {\n          repeat: true,\n          duration: 3000,\n          easing: 'easeCubic',\n        },\n      );\n    },\n  },\n  'rect',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultNode: {\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      lineWidth: 1,\n      stroke: '#b5b5b5',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"节点动画",en:"Node Animation"},filename:"node.js",isNew:!1}],icon:"",id:"node",title:{en:"Node Animation",zh:"节点动画"},childrenKey:"demos",order:1},{demos:[{id:"arrowAnimate",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*KZNLQrnz3o0AAAAAAAAAAAAAARQnAQ",source:'import G6 from "@antv/g6";\nimport { ext } from "@antv/matrix-util";\n\nconst { getLabelPosition, transform } = G6.Util;\n\nG6.registerEdge(\n  "arrow-running",\n  {\n    afterDraw(cfg, group) {\n      // get the first shape in the group, it is the edge\'s path here=\n      const shape = group.get("children")[0];\n\n      const arrow = group.addShape("marker", {\n        attrs: {\n          x: 16,\n          y: 0,\n          r: 8,\n          lineWidth: 2,\n          stroke: "#3370ff",\n          fill: "#fff",\n          symbol: (x, y, r) => {\n            return [\n              ["M", x - 6, y - 4],\n              ["L", x - 2, y],\n              ["L", x - 6, y + 4]\n            ];\n          }\n        }\n      });\n\n      // animation for the red circle\n      arrow.animate(\n        (ratio) => {\n          // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations\n          // get the position on the edge according to the ratio\n          const tmpPoint = shape.getPoint(ratio);\n          const pos = getLabelPosition(shape, ratio);\n          let matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n          matrix = transform(matrix, [\n            ["t", -tmpPoint.x, -tmpPoint.y],\n            ["r", pos.angle],\n            ["t", tmpPoint.x, tmpPoint.y]\n          ]);\n\n          // returns the modified configurations here, x and y here\n          return {\n            x: tmpPoint.x,\n            y: tmpPoint.y,\n            matrix\n          };\n        },\n        {\n          // repeat: true, // Whether executes the animation repeatly\n          duration: 3000 // the duration for executing once\n        }\n      );\n    }\n  },\n  "cubic" // extend the built-in edge \'cubic\'\n);\n\nconst data = {\n  nodes: [\n    {\n      id: "node1",\n      x: 100,\n      y: 100,\n      label: "Node 1",\n      labelCfg: {\n        position: "top"\n      }\n    },\n    {\n      id: "node2",\n      x: 300,\n      y: 200,\n      color: "#40a9ff",\n      label: "Node 2",\n      labelCfg: {\n        position: "left",\n        offset: 10\n      }\n    }\n  ],\n  edges: [\n    {\n      source: "node1",\n      target: "node2"\n    }\n  ]\n};\n\nconst container = document.getElementById("container");\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: "container",\n  width,\n  height,\n  defaultEdge: {\n    type: "arrow-running",\n    style: {\n      lineWidth: 2,\n      stroke: "#bae7ff"\n    }\n  }\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== "undefined")\n  window.onresize = () => {\n    if (!graph || graph.get("destroyed")) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n',title:{zh:"箭头沿边运动",en:"Running Arrow"},filename:"arrowAnimate.js",isNew:!1},{id:"pointInLine",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*HqX_Q7lljpsAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nG6.registerEdge(\n  'circle-running',\n  {\n    afterDraw(cfg, group) {\n      // get the first shape in the group, it is the edge's path here=\n      const shape = group.get('children')[0];\n      // the start position of the edge's path\n      const startPoint = shape.getPoint(0);\n\n      // add red circle shape\n      const circle = group.addShape('circle', {\n        attrs: {\n          x: startPoint.x,\n          y: startPoint.y,\n          fill: '#1890ff',\n          r: 3,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape',\n      });\n\n      // animation for the red circle\n      circle.animate(\n        (ratio) => {\n          // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations\n          // get the position on the edge according to the ratio\n          const tmpPoint = shape.getPoint(ratio);\n          // returns the modified configurations here, x and y here\n          return {\n            x: tmpPoint.x,\n            y: tmpPoint.y,\n          };\n        },\n        {\n          repeat: true, // Whether executes the animation repeatly\n          duration: 3000, // the duration for executing once\n        },\n      );\n    },\n  },\n  'cubic', // extend the built-in edge 'cubic'\n);\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 100,\n      label: 'Node 1',\n      labelCfg: {\n        position: 'top',\n      },\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 200,\n      color: '#40a9ff',\n      label: 'Node 2',\n      labelCfg: {\n        position: 'left',\n        offset: 10,\n      },\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultEdge: {\n    type: 'circle-running',\n    style: {\n      lineWidth: 2,\n      stroke: '#bae7ff',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"圆点沿边运动",en:"Running Circle"},filename:"pointInLine.js",isNew:!1},{id:"edge",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*70lpSLPAxb8AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst lineDash = [4, 2, 1, 2];\nG6.registerEdge(\n  'line-dash',\n  {\n    afterDraw(cfg, group) {\n      // get the first shape in the group, it is the edge's path here=\n      const shape = group.get('children')[0];\n      let index = 0;\n      // Define the animation\n      shape.animate(\n        () => {\n          index++;\n          if (index > 9) {\n            index = 0;\n          }\n          const res = {\n            lineDash,\n            lineDashOffset: -index,\n          };\n          // returns the modified configurations here, lineDash and lineDashOffset here\n          return res;\n        },\n        {\n          repeat: true, // whether executes the animation repeatly\n          duration: 3000, // the duration for executing once\n        },\n      );\n    },\n  },\n  'cubic', // extend the built-in edge 'cubic'\n);\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 100,\n      label: 'Node 1',\n      labelCfg: {\n        position: 'top',\n      },\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 200,\n      color: '#40a9ff',\n      label: 'Node 2',\n      labelCfg: {\n        position: 'left',\n        offset: 10,\n      },\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultEdge: {\n    type: 'line-dash',\n    style: {\n      lineWidth: 2,\n      stroke: '#bae7ff',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"虚线运动",en:"Running Dashed Edge"},filename:"edge.js",isNew:!1},{id:"lineGrowth",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*W40_RKyCrDsAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nG6.registerEdge(\n  'line-growth',\n  {\n    afterDraw(cfg, group) {\n      const shape = group.get('children')[0];\n      const length = shape.getTotalLength();\n      shape.animate(\n        (ratio) => {\n          // the operations in each frame. Ratio ranges from 0 to 1 indicating the prograss of the animation. Returns the modified configurations\n          const startLen = ratio * length;\n          // Calculate the lineDash\n          const cfg = {\n            lineDash: [startLen, length - startLen],\n          };\n          return cfg;\n        },\n        {\n          repeat: true, // Whether executes the animation repeatly\n          duration: 2000, // the duration for executing once\n        },\n      );\n    },\n  },\n  'cubic', // extend the built-in edge 'cubic'\n);\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      x: 100,\n      y: 100,\n      label: 'Node 1',\n      labelCfg: {\n        position: 'top',\n      },\n    },\n    {\n      id: 'node2',\n      x: 300,\n      y: 200,\n      color: '#40a9ff',\n      label: 'Node 2',\n      labelCfg: {\n        position: 'left',\n        offset: 10,\n      },\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultEdge: {\n    type: 'line-growth',\n    style: {\n      lineWidth: 2,\n      stroke: '#bae7ff',\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"无到有的边",en:"Growing Edge"},filename:"lineGrowth.js",isNew:!1}],icon:"",id:"edge",title:{en:"Edge Animation",zh:"边动画"},childrenKey:"demos",order:2},{demos:[{id:"hover",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*WJhtR4pSJssAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst nodes = [];\nconst edges = [];\n\n// Center node\nconst centerNode = {\n  id: 'center',\n  x: 500,\n  y: 300,\n  type: 'center-node',\n  size: 20,\n};\nnodes.push(centerNode);\n// Add 4 nodes on the left\nfor (let i = 0; i < 4; i++) {\n  const id = 'left' + i;\n  nodes.push({\n    id,\n    x: 250,\n    y: (i + 1) * 100 + 50,\n    type: 'leaf-node',\n  });\n  edges.push({ source: id, target: 'center', type: 'can-running' });\n}\n// Add 6 nodes on the right\nfor (let i = 0; i < 6; i++) {\n  const id = 'right' + i;\n  nodes.push({\n    id,\n    x: 750,\n    y: i * 100 + 50,\n    type: 'leaf-node',\n  });\n  edges.push({ source: 'center', target: id, type: 'can-running' });\n}\n\nG6.registerNode(\n  'leaf-node',\n  {\n    afterDraw(cfg, group) {\n      group.addShape('circle', {\n        attrs: {\n          x: 0,\n          y: 0,\n          r: 5,\n          fill: cfg.color || '#5B8FF9',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape',\n      });\n    },\n    getAnchorPoints() {\n      return [\n        [0, 0.5],\n        [1, 0.5],\n      ];\n    },\n  },\n  'circle',\n);\n\nG6.registerNode(\n  'center-node',\n  {\n    afterDraw(cfg, group) {\n      const r = cfg.size / 2;\n      group.addShape('circle', {\n        zIndex: -3,\n        attrs: {\n          x: 0,\n          y: 0,\n          r: r + 10,\n          fill: 'gray',\n          opacity: 0.4,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape1',\n      });\n      group.addShape('circle', {\n        zIndex: -2,\n        attrs: {\n          x: 0,\n          y: 0,\n          r: r + 20,\n          fill: 'gray',\n          opacity: 0.2,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'circle-shape2',\n      });\n      group.sort();\n    },\n    getAnchorPoints() {\n      return [\n        [0, 0.5],\n        [1, 0.5],\n      ];\n    },\n  },\n  'circle',\n);\n\n// lineDash array\nconst lineDash = [4, 2, 1, 2];\n\nG6.registerEdge(\n  'can-running',\n  {\n    setState(name, value, item) {\n      const shape = item.get('keyShape');\n      if (name === 'running') {\n        if (value) {\n          let index = 0;\n          shape.animate(\n            () => {\n              index++;\n              if (index > 9) {\n                index = 0;\n              }\n              const res = {\n                lineDash,\n                lineDashOffset: -index,\n              };\n              // return the params for this frame\n              return res;\n            },\n            {\n              repeat: true,\n              duration: 3000,\n            },\n          );\n        } else {\n          shape.stopAnimate();\n          shape.attr('lineDash', null);\n        }\n      }\n    },\n  },\n  'cubic-horizontal',\n);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultNode: {\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n    },\n  },\n});\ngraph.data({ nodes, edges });\ngraph.render();\ngraph.fitView();\n\n// set hover state\ngraph.on('node:mouseenter', (ev) => {\n  const node = ev.item;\n  const edges = node.getEdges();\n  edges.forEach((edge) => graph.setItemState(edge, 'running', true));\n});\ngraph.on('node:mouseleave', (ev) => {\n  const node = ev.item;\n  const edges = node.getEdges();\n  edges.forEach((edge) => graph.setItemState(edge, 'running', false));\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"状态与动画",en:"State and Animation"},filename:"hover.js",isNew:!1}],icon:"",id:"stateChange",title:{en:"State Switch",zh:"状态切换"},childrenKey:"demos",order:3},{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*M-EGS5v6RnUAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: 'a',\n      x: 200,\n      y: 100,\n      style: { fill: '#5B8FF9', stroke: null },\n    },\n    {\n      id: 'b',\n      x: 100,\n      y: 200,\n      style: { fill: '#5AD8A6', stroke: null },\n    },\n    {\n      id: 'c',\n      x: 300,\n      y: 200,\n      style: { fill: '#5D7092', stroke: null },\n    },\n  ],\n  edges: [\n    {\n      id: 'a2b',\n      source: 'a',\n      target: 'b',\n    },\n    {\n      id: 'a2c',\n      source: 'a',\n      target: 'c',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  animate: true,\n});\n\ngraph.data(data);\ngraph.render();\n\nsetInterval(() => {\n  data.nodes.forEach((node) => {\n    node.x += Math.random() * 50 - 25;\n    node.y += Math.random() * 50 - 25;\n  });\n  graph.changeData(data);\n}, 600);\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"节点移动动画",en:"Node Move Animation"},filename:"default.js",isNew:!1}],icon:"",id:"changePosition",title:{en:"Node Move Animation",zh:"节点移动动画"},childrenKey:"demos",order:5},{demos:[{id:"position",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*tN3KQ59_XO8AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst r = 50;\nconst radius = Math.PI;\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  animate: true,\n  animateCfg: {\n    duration: 1000,\n    onFrame(node, ratio, toAttrs, fromAttrs) {\n      const current = radius * ratio;\n      let x = fromAttrs.x;\n      let y = fromAttrs.y;\n      if (fromAttrs.x > toAttrs.x) {\n        x = x - r + r * Math.cos(current);\n        y += r * Math.sin(current);\n      } else {\n        x = x + r - r * Math.cos(current);\n        y -= r * Math.sin(current);\n      }\n      return { x, y };\n    },\n  },\n});\n\n// 加入两个节点\nconst node1 = graph.addItem('node', {\n  id: 'node1',\n  x: 100,\n  y: 100,\n  type: 'circle',\n  style: { fill: '#5B8FF9', lineWidth: 0 },\n});\nconst node2 = graph.addItem('node', {\n  id: 'node2',\n  x: 200,\n  y: 100,\n  type: 'circle',\n  style: { fill: '#5AD8A6', lineWidth: 0 },\n});\n\n// 循环动画\nlet count = 0;\nsetInterval(() => {\n  if (count % 2 === 0) {\n    node1.get('model').x = 200;\n    node2.get('model').x = 100;\n  } else {\n    node1.get('model').x = 100;\n    node2.get('model').x = 200;\n  }\n  count++;\n  graph.refresh();\n}, 1000);\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义动画",en:"Custom Animation"},filename:"position.js",isNew:!1}],icon:"",id:"customAnimate",title:{en:"Custom Animation",zh:"自定义动画"},childrenKey:"demos",order:6}],childrenKey:"examples"},{id:"tool",title:{zh:"组件",en:"Component"},icon:"tool",examples:[{demos:[{id:"tooltipPlugin",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-component-tooltip {\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 0px 10px 24px 10px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'node-0',\n      x: 100,\n      y: 100,\n      description: 'This is node-0.',\n      subdescription: 'This is subdescription of node-0.',\n    },\n    {\n      id: '1',\n      label: 'node-1',\n      x: 250,\n      y: 100,\n      description: 'This is node-1.',\n      subdescription: 'This is subdescription of node-1.',\n    },\n    {\n      id: '2',\n      label: 'node-2',\n      x: 150,\n      y: 310,\n      description: 'This is node-2.',\n      subdescription: 'This is subdescription of node-2.',\n    },\n    {\n      id: '3',\n      label: 'node-3',\n      x: 320,\n      y: 310,\n      description: 'This is node-3.',\n      subdescription: 'This is subdescription of node-3.',\n    },\n  ],\n  edges: [\n    {\n      id: 'e0',\n      source: '0',\n      target: '1',\n      description: 'This is edge from node 0 to node 1.',\n    },\n    {\n      id: 'e1',\n      source: '0',\n      target: '2',\n      description: 'This is edge from node 0 to node 2.',\n    },\n    {\n      id: 'e2',\n      source: '0',\n      target: '3',\n      description: 'This is edge from node 0 to node 3.',\n    },\n  ],\n};\nconst tooltip = new G6.Tooltip({\n  offsetX: 10,\n  offsetY: 10,\n  // the types of items that allow the tooltip show up\n  // 允许出现 tooltip 的 item 类型\n  itemTypes: ['node', 'edge'],\n  // custom the tooltip's content\n  // 自定义 tooltip 内容\n  getContent: (e) => {\n    const outDiv = document.createElement('div');\n    outDiv.style.width = 'fit-content';\n    //outDiv.style.padding = '0px 0px 20px 0px';\n    outDiv.innerHTML = `\n      <h4>Custom Content</h4>\n      <ul>\n        <li>Type: ${e.item.getType()}</li>\n      </ul>\n      <ul>\n        <li>Label: ${e.item.getModel().label || e.item.getModel().id}</li>\n      </ul>`;\n    return outDiv;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [tooltip],\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n      lineAppendWidth: 3,\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\ngraph.on('edge:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('edge:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"提示框插件",en:"Tooltip Plugin"},filename:"tooltipPlugin.js",isNew:!1},{id:"tooltipFix",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-component-tooltip {\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 0px 10px 24px 10px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'node-0',\n      x: 100,\n      y: 100,\n      description: 'This is node-0.',\n      subdescription: 'This is subdescription of node-0.',\n    },\n    {\n      id: '1',\n      label: 'node-1',\n      x: 250,\n      y: 100,\n      description: 'This is node-1.',\n      subdescription: 'This is subdescription of node-1.',\n    },\n    {\n      id: '2',\n      label: 'node-2',\n      x: 150,\n      y: 310,\n      description: 'This is node-2.',\n      subdescription: 'This is subdescription of node-2.',\n    },\n    {\n      id: '3',\n      label: 'node-3',\n      x: 320,\n      y: 310,\n      description: 'This is node-3.',\n      subdescription: 'This is subdescription of node-3.',\n    },\n  ],\n  edges: [\n    {\n      id: 'e0',\n      source: '0',\n      target: '1',\n      description: 'This is edge from node 0 to node 1.',\n    },\n    {\n      id: 'e1',\n      source: '0',\n      target: '2',\n      description: 'This is edge from node 0 to node 2.',\n    },\n    {\n      id: 'e2',\n      source: '0',\n      target: '3',\n      description: 'This is edge from node 0 to node 3.',\n    },\n  ],\n};\nconst tooltip = new G6.Tooltip({\n  offsetX: 10,\n  offsetY: 0,\n  // v4.2.1 起支持 fixToNode，tooltip 相对于节点固定位置\n  fixToNode: [1, 0],\n  // the types of items that allow the tooltip show up\n  // 允许出现 tooltip 的 item 类型\n  itemTypes: ['node', 'edge'],\n  // custom the tooltip's content\n  // 自定义 tooltip 内容\n  getContent: (e) => {\n    const outDiv = document.createElement('div');\n    outDiv.style.width = 'fit-content';\n    //outDiv.style.padding = '0px 0px 20px 0px';\n    outDiv.innerHTML = `\n      <h4>Custom Content</h4>\n      <ul>\n        <li>Type: ${e.item.getType()}</li>\n      </ul>\n      <ul>\n        <li>Label: ${e.item.getModel().label || e.item.getModel().id}</li>\n      </ul>`;\n    return outDiv;\n  },\n});\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [tooltip],\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n  },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\ngraph.on('edge:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('edge:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"固定提示框位置",en:"Tooltip Plugin with fixToNode"},filename:"tooltipFix.js",isNew:!1},{id:"tooltipPluginLocal",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-component-tooltip {\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 0px 10px 24px 10px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'Has Tooltip - node0',\n      x: 100,\n      y: 100,\n      description: 'This is node-0.',\n      subdescription: 'This is subdescription of node-0.',\n    },\n    {\n      id: '1',\n      label: 'No Tooltip - node1',\n      x: 250,\n      y: 100,\n      description: 'This is node-1.',\n      subdescription: 'This is subdescription of node-1.',\n    },\n    {\n      id: '2',\n      label: 'Tooltip on Text - node2',\n      x: 150,\n      y: 310,\n      description: 'This is node-2.',\n      subdescription: 'This is subdescription of node-2.',\n    },\n    {\n      id: '3',\n      label: 'Tooltip on KeyShape - node-3',\n      x: 320,\n      y: 310,\n      description: 'This is node-3.',\n      subdescription: 'This is subdescription of node-3.',\n    },\n  ],\n  edges: [\n    {\n      id: 'e0',\n      source: '0',\n      target: '1',\n      description: 'This is edge from node 0 to node 1.',\n    },\n    {\n      id: 'e1',\n      source: '0',\n      target: '2',\n      description: 'This is edge from node 0 to node 2.',\n    },\n    {\n      id: 'e2',\n      source: '0',\n      target: '3',\n      description: 'This is edge from node 0 to node 3.',\n    },\n  ],\n};\nconst tooltip = new G6.Tooltip({\n  offsetX: 10,\n  offsetY: 10,\n  // the types of items that allow the tooltip show up\n  // 允许出现 tooltip 的 item 类型\n  itemTypes: ['node', 'edge'],\n  // custom the tooltip's content\n  // 自定义 tooltip 内容\n  getContent: (e) => {\n    const outDiv = document.createElement('div');\n    outDiv.style.width = 'fit-content';\n    //outDiv.style.padding = '0px 0px 20px 0px';\n    outDiv.innerHTML = `\n      <h4>Custom Content</h4>\n      <ul>\n        <li>Type: ${e.item.getType()}</li>\n      </ul>\n      <ul>\n        <li>Label: ${e.item.getModel().label || e.item.getModel().id}</li>\n      </ul>`;\n    return outDiv;\n  },\n  shouldBegin: (e) => {\n    console.log(e.target);\n    let res = true;\n    switch (e.item.getModel().id) {\n      case '1':\n        res = false;\n        break;\n      case '2':\n        if (e.target.get('name') === 'text-shape') res = true;\n        else res = false;\n        break;\n      case '3':\n        if (e.target.get('name') !== 'text-shape') res = true;\n        else res = false;\n        break;\n      default:\n        res = true;\n        break;\n    }\n    return res;\n  },\n});\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [tooltip],\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n  },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\ngraph.on('edge:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('edge:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"提示框插件局部生效",en:"Local Tooltip Plugin"},filename:"tooltipPluginLocal.js",isNew:!1},{id:"tooltipClick",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kjsSQ5pgVmoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-component-tooltip {\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 0px 10px 24px 10px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'node-0',\n      x: 100,\n      y: 100,\n      description: 'This is node-0.',\n      subdescription: 'This is subdescription of node-0.',\n    },\n    {\n      id: '1',\n      label: 'node-1',\n      x: 250,\n      y: 100,\n      description: 'This is node-1.',\n      subdescription: 'This is subdescription of node-1.',\n    },\n    {\n      id: '2',\n      label: 'node-2',\n      x: 150,\n      y: 310,\n      description: 'This is node-2.',\n      subdescription: 'This is subdescription of node-2.',\n    },\n    {\n      id: '3',\n      label: 'node-3',\n      x: 320,\n      y: 310,\n      description: 'This is node-3.',\n      subdescription: 'This is subdescription of node-3.',\n    },\n  ],\n  edges: [\n    {\n      id: 'e0',\n      source: '0',\n      target: '1',\n      description: 'This is edge from node 0 to node 1.',\n    },\n    {\n      id: 'e1',\n      source: '0',\n      target: '2',\n      description: 'This is edge from node 0 to node 2.',\n    },\n    {\n      id: 'e2',\n      source: '0',\n      target: '3',\n      description: 'This is edge from node 0 to node 3.',\n    },\n  ],\n};\nconst tooltip = new G6.Tooltip({\n  offsetX: 10,\n  offsetY: 10,\n  // v4.2.1 起支持配置 trigger，click 代表点击后出现 tooltip。默认为 mouseenter\n  trigger: 'click',\n  // the types of items that allow the tooltip show up\n  // 允许出现 tooltip 的 item 类型\n  itemTypes: ['node', 'edge'],\n  // custom the tooltip's content\n  // 自定义 tooltip 内容\n  getContent: (e) => {\n    const outDiv = document.createElement('div');\n    outDiv.style.width = 'fit-content';\n    //outDiv.style.padding = '0px 0px 20px 0px';\n    outDiv.innerHTML = `\n      <h4>Custom Content</h4>\n      <ul>\n        <li>Type: ${e.item.getType()}</li>\n      </ul>\n      <ul>\n        <li>Label: ${e.item.getModel().label || e.item.getModel().id}</li>\n      </ul>`;\n    return outDiv;\n  },\n});\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [tooltip],\n  modes: {\n    default: ['drag-node'],\n  },\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n  },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\ngraph.on('edge:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('edge:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"点击出现提示框",en:"Tooltip Plugin with Click Trigger"},filename:"tooltipClick.js",isNew:!1},{id:"tooltipLocalCustom",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*bIHUToKq6OYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n`);\n\nG6.registerNode(\n  'rNode',\n  {\n    drawShape: (cfg, group) => {\n      const rect = group.addShape('rect', {\n        attrs: {\n          x: -cfg.size[0] / 2,\n          y: -cfg.size[1] / 2,\n          width: cfg.size[0],\n          height: cfg.size[1],\n          ...cfg.style,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'rect-shape',\n      });\n      const responseRect = group.addShape('rect', {\n        attrs: {\n          width: 30,\n          height: 15,\n          x: -cfg.size[0] / 2 + 5,\n          y: -cfg.size[1] / 2 + 5,\n          fill: '#fff',\n          stroke: cfg.style.stroke,\n          lineWidth: 1,\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'tooltip-response-shape',\n      });\n      const responseText = group.addShape('text', {\n        attrs: {\n          text: 'hover here!',\n          fill: '#f00',\n          x: -cfg.size[0] / 2 + 10,\n          y: -cfg.size[1] / 2 + 10,\n          textBaseline: 'top',\n        },\n        // must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type\n        name: 'tooltip-response-text-shape',\n      });\n      const textBBox = responseText.getBBox();\n      responseRect.attr({\n        width: textBBox.width + 10,\n        height: textBBox.height + 10,\n      });\n      return rect;\n    },\n  },\n  'rect',\n);\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'A',\n      x: 220,\n      y: 100,\n      description: 'This is node A.',\n      subdescription: 'This is subdescription of node A.',\n    },\n    {\n      id: '2',\n      label: 'No Tooltip',\n      x: 150,\n      y: 310,\n      description: 'This is node B.',\n      subdescription: 'This is subdescription of node B.',\n    },\n    {\n      id: '3',\n      label: 'C',\n      x: 320,\n      y: 310,\n      description: 'This is node C.',\n      subdescription: 'This is subdescription of node C.',\n    },\n  ],\n  edges: [\n    {\n      id: 'e1',\n      source: '0',\n      target: '2',\n      description: 'This is edge from node 0 to node 2.',\n    },\n    {\n      id: 'e2',\n      source: '0',\n      target: '3',\n      description: 'This is edge from node 0 to node 3.',\n    },\n  ],\n};\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = 'Hover the sub rect with red border to show the tooltip.';\nconst container = document.getElementById('container');\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 30;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  defaultNode: {\n    size: [100, 100],\n    type: 'rNode',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n      lineAppendWidth: 3,\n    },\n  },\n  modes: {\n    default: [\n      'drag-node',\n      {\n        type: 'tooltip',\n        formatText: function formatText(model) {\n          const text = 'description: ' + model.description;\n          return text;\n        },\n        offset: 30,\n        shouldBegin: (e) => {\n          if (e.item.getModel().id === '2') return false;\n          const target = e.target;\n          if (target.get('name') === 'tooltip-response-text-shape') return true;\n          return false;\n        },\n      },\n    ],\n  },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\ngraph.on('edge:mouseenter', (e) => {\n  graph.setItemState(e.item, 'active', true);\n});\ngraph.on('edge:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 30);\n  };\n",title:{zh:"局部图形响应提示框 behavior-自定义节点",en:"Local Tooltip Behavor"},filename:"tooltipLocalCustom.js",isNew:!1}],icon:"",id:"tooltip",title:{en:"Tooltip",zh:"提示框"},childrenKey:"demos",order:0},{demos:[{id:"contextMenu",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*YtBHR5akE2gAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\n// define the CSS with the id of your menu\n\ninsertCss(`\n  #contextMenu {\n    position: absolute;\n    list-style-type: none;\n    padding: 10px 8px;\n    left: -150px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n  }\n  #contextMenu li {\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  #contextMenu li:hover {\n    color: #aaa;\n  }\n`);\n\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.id = 'discription';\ndescriptionDiv.innerHTML = 'Right click a node to activate a contextMenu.';\ndocument.getElementById('container').appendChild(descriptionDiv);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst contextMenu = new G6.Menu({\n  getContent(evt) {\n    let header;\n    if (evt.target && evt.target.isCanvas && evt.target.isCanvas()) {\n      header = 'Canvas ContextMenu';\n    } else if (evt.item) {\n      const itemType = evt.item.getType();\n      header = `${itemType.toUpperCase()} ContextMenu`;\n    }\n    return `\n    <h3>${header}</h3>\n    <ul>\n      <li title='1'>li 1</li>\n      <li title='2'>li 2</li>\n      <li>li 3</li>\n      <li>li 4</li>\n      <li>li 5</li>\n    </ul>`;\n  },\n  handleMenuClick: (target, item) => {\n    console.log(target, item);\n  },\n  // offsetX and offsetY include the padding of the parent container\n  // 需要加上父级容器的 padding-left 16 与自身偏移量 10\n  offsetX: 16 + 10,\n  // 需要加上父级容器的 padding-top 24 、画布兄弟元素高度、与自身偏移量 10\n  offsetY: 0,\n  // the types of items that allow the menu show up\n  // 在哪些类型的元素上响应\n  itemTypes: ['node', 'edge', 'canvas'],\n});\n\nconst graph = new G6.Graph({\n  // 使用 contextMenu plugins 时，需要将 container 设置为 position: relative;\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [contextMenu],\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n      lineAppendWidth: 3, // Enlarge the range the edge to be hitted\n    },\n    labelCfg: {\n      autoRotate: true,\n      style: {\n        // A white stroke with width 5 helps show the label more clearly avoiding the interference of the overlapped edge\n        stroke: 'white',\n        lineWidth: 5,\n      },\n    },\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n});\n\nconst data = {\n  nodes: [\n    {\n      id: 'node1',\n      label: 'node1',\n      x: 200,\n      y: 100,\n      type: 'rect',\n    },\n    {\n      id: 'node2',\n      label: 'node2',\n      x: 250,\n      y: 250,\n      type: 'rect',\n    },\n    {\n      id: 'node3',\n      label: 'node3',\n      x: 350,\n      y: 100,\n      type: 'rect',\n    },\n  ],\n  edges: [\n    {\n      source: 'node1',\n      target: 'node2',\n      label: 'Test Label',\n    },\n    {\n      source: 'node1',\n      target: 'node3',\n      label: 'Test Label 2',\n    },\n  ],\n};\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"上下文菜单",en:"Context Menu"},filename:"contextMenu.js",isNew:!1}],icon:"",id:"contextMenu",title:{en:"ContextMenu",zh:"上下文菜单"},childrenKey:"demos",order:1},{demos:[{id:"minimap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*r3dAQo-R3BoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-minimap-container {\n    border: 1px solid #e2e2e2;\n  }\n  .g6-minimap-viewport {\n    border: 2px solid rgb(25, 128, 255);\n  }\n`);\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 110;\nconst minimap = new G6.Minimap({\n  size: [150, 100],\n});\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  layout: {\n    type: 'dagre',\n    rankdir: 'LR',\n    align: 'DL',\n    nodesepFunc: () => 1,\n    ranksepFunc: () => 1,\n  },\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n      lineAppendWidth: 3,\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas'],\n  },\n  plugins: [minimap],\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);\n  };\n",title:{zh:"小地图",en:"Minimap"},filename:"minimap.js",isNew:!1},{id:"imageMinimap",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*r3dAQo-R3BoAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-minimap-container {\n    border: 1px solid #e2e2e2;\n  }\n  .g6-minimap-viewport {\n    border: 2px solid rgb(25, 128, 255);\n  }\n`);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 110;\nconst minimap = new G6.ImageMinimap({\n  height: 100,\n  padding: 10,\n  graphImg: 'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*DcGMQ7AN3Z0AAAAAAAAAAABkARQnAQ',\n});\nconst graph = new G6.TreeGraph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  layout: {\n    type: 'dendrogram',\n    direction: 'LR', // H / V / LR / RL / TB / BT\n    nodeSep: 30,\n    rankSep: 100,\n  },\n  defaultNode: {\n    size: 26,\n    style: {\n      fill: '#C6E5FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    type: 'cubic-horizontal',\n    style: {\n      stroke: '#A3B1BF',\n    },\n  },\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas'],\n  },\n  plugins: [minimap],\n});\n\ngraph.node(function (node) {\n  return {\n    label: node.id,\n    labelCfg: {\n      position: node.children && node.children.length > 0 ? 'left' : 'right',\n      offset: 5,\n    },\n  };\n});\n\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/algorithm-category.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n  });\n\ngraph.on('canvas:click', () => {\n  minimap.updateGraphImg(\n    'https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*7QSRRJwAWxQAAAAAAAAAAABkARQnAQ',\n  );\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);\n  };\n",title:{zh:"使用图片的小地图",en:"Image Minimap"},filename:"imageMinimap.js",isNew:!1}],icon:"",id:"minimap",title:{en:"Minimap",zh:"Minimap"},childrenKey:"demos",order:2},{demos:[{id:"edgeBundling",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*7g4iRqVfkHQAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n    {\n      id: '16',\n      label: '16',\n    },\n    {\n      id: '17',\n      label: '17',\n    },\n    {\n      id: '18',\n      label: '18',\n    },\n    {\n      id: '19',\n      label: '19',\n    },\n    {\n      id: '20',\n      label: '20',\n    },\n    {\n      id: '21',\n      label: '21',\n    },\n    {\n      id: '22',\n      label: '22',\n    },\n    {\n      id: '23',\n      label: '23',\n    },\n    {\n      id: '24',\n      label: '24',\n    },\n    {\n      id: '25',\n      label: '25',\n    },\n    {\n      id: '26',\n      label: '26',\n    },\n    {\n      id: '27',\n      label: '27',\n    },\n    {\n      id: '28',\n      label: '28',\n    },\n    {\n      id: '29',\n      label: '29',\n    },\n    {\n      id: '30',\n      label: '30',\n    },\n    {\n      id: '31',\n      label: '31',\n    },\n    {\n      id: '32',\n      label: '32',\n    },\n    {\n      id: '33',\n      label: '33',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst edgeBundling = new G6.Bundling({\n  bundleThreshold: 0.1,\n});\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  layout: {\n    type: 'circular',\n    center: [width / 2, height / 2],\n    radius: height / 2.5,\n    ordering: null,\n  },\n  plugins: [edgeBundling],\n  defaultNode: {\n    size: [20, 20],\n    color: 'steelblue',\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#999',\n  },\n});\ngraph.data(data);\ngraph.render();\n\nsetTimeout(() => {\n  edgeBundling.bundling(data);\n}, 1000);\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"边绑定",en:"Edge Bundling"},filename:"edgeBundling.js",isNew:!1}],icon:"",id:"edgeBundling",title:{en:"Edge Bundling",zh:"边绑定"},childrenKey:"demos",order:3},{demos:[{id:"toolbar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*MhpmS68lZW0AAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-component-toolbar li {\n    list-style-type: none !important;\n  }\n`);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'node-0',\n      x: 100,\n      y: 100,\n      description: 'This is node-0.',\n      subdescription: 'This is subdescription of node-0.',\n    },\n    {\n      id: '1',\n      label: 'node-1',\n      x: 250,\n      y: 100,\n      description: 'This is node-1.',\n      subdescription: 'This is subdescription of node-1.',\n    },\n    {\n      id: '2',\n      label: 'node-2',\n      x: 150,\n      y: 310,\n      description: 'This is node-2.',\n      subdescription: 'This is subdescription of node-2.',\n    },\n    {\n      id: '3',\n      label: 'node-3',\n      x: 320,\n      y: 310,\n      description: 'This is node-3.',\n      subdescription: 'This is subdescription of node-3.',\n    },\n  ],\n  edges: [\n    {\n      id: 'e0',\n      source: '0',\n      target: '1',\n      description: 'This is edge from node 0 to node 1.',\n    },\n    {\n      id: 'e1',\n      source: '0',\n      target: '2',\n      description: 'This is edge from node 0 to node 2.',\n    },\n    {\n      id: 'e2',\n      source: '0',\n      target: '3',\n      description: 'This is edge from node 0 to node 3.',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst toolbar = new G6.ToolBar({\n  position: { x: 10, y: 10 },\n});\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [toolbar],\n  // 设置为true，启用 redo & undo 栈功能\n  enabledStack: true,\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n      lineAppendWidth: 3,\n    },\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"工具栏",en:"ToolBar"},filename:"toolbar.js",isNew:!1},{id:"self-toolbar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ljOiTJAuQnIAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\nimport insertCss from 'insert-css';\n\ninsertCss(`\n  .g6-toolbar-ul {\n    position: absolute;\n    top: 70px;\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n    width: 100px;\n    cursor: pointer;\n  }\n`);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: 'node-0',\n      x: 100,\n      y: 100,\n      description: 'This is node-0.',\n      subdescription: 'This is subdescription of node-0.',\n    },\n    {\n      id: '1',\n      label: 'node-1',\n      x: 250,\n      y: 100,\n      description: 'This is node-1.',\n      subdescription: 'This is subdescription of node-1.',\n    },\n    {\n      id: '2',\n      label: 'node-2',\n      x: 150,\n      y: 310,\n      description: 'This is node-2.',\n      subdescription: 'This is subdescription of node-2.',\n    },\n    {\n      id: '3',\n      label: 'node-3',\n      x: 320,\n      y: 310,\n      description: 'This is node-3.',\n      subdescription: 'This is subdescription of node-3.',\n    },\n  ],\n  edges: [\n    {\n      id: 'e0',\n      source: '0',\n      target: '1',\n      description: 'This is edge from node 0 to node 1.',\n    },\n    {\n      id: 'e1',\n      source: '0',\n      target: '2',\n      description: 'This is edge from node 0 to node 2.',\n    },\n    {\n      id: 'e2',\n      source: '0',\n      target: '3',\n      description: 'This is edge from node 0 to node 3.',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\n\nconst toolbar = new G6.ToolBar({\n  // container: tc,\n  className: 'g6-toolbar-ul',\n  getContent: () => {\n    return `\n      <ul>\n        <li code='add'>增加节点</li>\n        <li code='undo'>撤销</li>\n        <li code='redo'>回退</li>\n      </ul>\n    `;\n  },\n  handleClick: (code, graph) => {\n    if (code === 'add') {\n      graph.addItem('node', {\n        id: 'node2',\n        label: 'node2',\n        x: 300,\n        y: 150,\n      });\n    } else if (code === 'undo') {\n      toolbar.undo();\n    } else if (code === 'redo') {\n      toolbar.redo();\n    }\n  },\n});\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  // 设置为true，启用 redo & undo 栈功能\n  enabledStack: true,\n  plugins: [toolbar],\n  defaultNode: {\n    size: [80, 40],\n    type: 'rect',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  defaultEdge: {\n    style: {\n      stroke: '#b5b5b5',\n      lineAppendWidth: 3,\n    },\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"自定义工具栏",en:"ToolBar"},filename:"self-toolbar.js",isNew:!1}],icon:"",id:"toolbar",title:{en:"ToolBar",zh:"工具栏"},childrenKey:"demos",order:4},{demos:[{id:"timebar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*lfvIQJYbs7oAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [],\n  edges: [],\n};\n\nfor (let i = 0; i < 100; i++) {\n  const id = `node-${i}`;\n  data.nodes.push({\n    id,\n    date: `2020${i}`,\n    value: Math.round(Math.random() * 300),\n  });\n\n  data.edges.push({\n    source: `node-${Math.round(Math.random() * 90)}`,\n    target: `node-${Math.round(Math.random() * 90)}`,\n  });\n}\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 100;\nconst timeBarData = [];\n\nconst nodeSize = 20;\n\nfor (let i = 0; i < 100; i++) {\n  timeBarData.push({\n    date: `2020${i}`,\n    value: Math.round(Math.random() * 300),\n  });\n}\n\nconst timebar = new G6.TimeBar({\n  x: 0,\n  y: 0,\n  width,\n  height: 150,\n  padding: 10,\n  type: 'trend',\n  trend: {\n    data: timeBarData,\n  },\n});\n\n// constrained the layout inside the area\nconst constrainBox = { x: 10, y: 10, width: 580, height: 450 };\n\nconst onTick = () => {\n  let minx = 99999999;\n  let maxx = -99999999;\n  let miny = 99999999;\n  let maxy = -99999999;\n  let maxsize = -9999999;\n  data.nodes.forEach((node) => {\n    if (minx > node.x) {\n      minx = node.x;\n    }\n    if (maxx < node.x) {\n      maxx = node.x;\n    }\n    if (miny > node.y) {\n      miny = node.y;\n    }\n    if (maxy < node.y) {\n      maxy = node.y;\n    }\n  });\n  const scalex = (constrainBox.width - nodeSize / 2) / (maxx - minx);\n  const scaley = (constrainBox.height - nodeSize / 2) / (maxy - miny);\n  data.nodes.forEach((node) => {\n    node.x = (node.x - minx) * scalex + constrainBox.x;\n    node.y = (node.y - miny) * scaley + constrainBox.y;\n  });\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [timebar],\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n    onTick,\n  },\n  defaultNode: {\n    size: nodeSize,\n    type: 'circle',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);\n  };\n",title:{zh:"趋势时间轴",en:"TrendTimeBar"},filename:"timebar.js",isNew:!1},{id:"simple-timebar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*g2zhQqP6ruYAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [],\n  edges: [],\n};\n\nfor (let i = 0; i < 100; i++) {\n  const id = `node-${i}`;\n  data.nodes.push({\n    id,\n    date: `2020${i}`,\n    value: Math.round(Math.random() * 300),\n  });\n\n  data.edges.push({\n    source: `node-${Math.round(Math.random() * 90)}`,\n    target: `node-${Math.round(Math.random() * 90)}`,\n  });\n}\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 100;\n\nconst timeBarData = [];\n\nconst nodeSize = 20;\n\nfor (let i = 0; i < 100; i++) {\n  timeBarData.push({\n    date: `2020${i}`,\n    value: Math.round(Math.random() * 300),\n  });\n}\n\nconst timebar = new G6.TimeBar({\n  x: 0,\n  y: 0,\n  width,\n  height: 150,\n  padding: 10,\n  type: 'simple',\n  trend: {\n    data: timeBarData,\n  },\n});\n\n// constrained the layout inside the area\nconst constrainBox = { x: 10, y: 10, width: 580, height: 450 };\n\nconst onTick = () => {\n  let minx = 99999999;\n  let maxx = -99999999;\n  let miny = 99999999;\n  let maxy = -99999999;\n  data.nodes.forEach((node) => {\n    if (minx > node.x) {\n      minx = node.x;\n    }\n    if (maxx < node.x) {\n      maxx = node.x;\n    }\n    if (miny > node.y) {\n      miny = node.y;\n    }\n    if (maxy < node.y) {\n      maxy = node.y;\n    }\n  });\n  const scalex = (constrainBox.width - nodeSize / 2) / (maxx - minx);\n  const scaley = (constrainBox.height - nodeSize / 2) / (maxy - miny);\n  data.nodes.forEach((node) => {\n    node.x = (node.x - minx) * scalex + constrainBox.x;\n    node.y = (node.y - miny) * scaley + constrainBox.y;\n  });\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [timebar],\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n    onTick,\n  },\n  defaultNode: {\n    size: nodeSize,\n    type: 'circle',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);\n  };\n",title:{zh:"简易时间轴",en:"SimperTimeBar"},filename:"simple-timebar.js",isNew:!1},{id:"slice-timebar",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*n6ECQ7Jn5pQAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [],\n  edges: [],\n};\n\nfor (let i = 1; i < 60; i++) {\n  const id = `node-${i}`;\n  const month = i < 30 ? '01' : '02';\n  const day = i % 30 < 10 ? `0${i % 30}` : `${i % 30}`;\n  data.nodes.push({\n    id,\n    date: parseInt(`2020${month}${day}`),\n    value: Math.round(Math.random() * 300),\n    label: parseInt(`2020${i}`),\n  });\n\n  data.edges.push({\n    source: `node-${Math.round(Math.random() * 60)}`,\n    target: `node-${Math.round(Math.random() * 60)}`,\n  });\n}\n\nconst timeBarData = [];\n\nfor (let i = 1; i < 60; i++) {\n  const month = i < 30 ? '01' : '02';\n  const day = i % 30 < 10 ? `0${i % 30}` : `${i % 30}`;\n  timeBarData.push({\n    date: parseInt(`2020${month}${day}`),\n    value: Math.round(Math.random() * 300),\n  });\n}\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 100;\n\nconst nodeSize = 20;\n\nlet count = 0;\nconst timebar = new G6.TimeBar({\n  x: 0,\n  y: 0,\n  width,\n  height: 150,\n  padding: 10,\n  type: 'tick',\n  tick: {\n    data: timeBarData,\n    width: width,\n    height: 42,\n    padding: 2,\n    tickLabelFormatter: (d) => {\n      count++;\n      const dateStr = `${d.date}`;\n      if ((count - 1) % 10 === 0) {\n        return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;\n      }\n      return false;\n    },\n    tooltipFomatter: (d) => {\n      const dateStr = `${d}`;\n      return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;\n    },\n  },\n});\n\n// constrained the layout inside the area\nconst constrainBox = { x: 10, y: 10, width: 580, height: 450 };\n\nconst onTick = () => {\n  let minx = 99999999;\n  let maxx = -99999999;\n  let miny = 99999999;\n  let maxy = -99999999;\n  data.nodes.forEach((node) => {\n    if (minx > node.x) {\n      minx = node.x;\n    }\n    if (maxx < node.x) {\n      maxx = node.x;\n    }\n    if (miny > node.y) {\n      miny = node.y;\n    }\n    if (maxy < node.y) {\n      maxy = node.y;\n    }\n  });\n  const scalex = (constrainBox.width - nodeSize / 2) / (maxx - minx);\n  const scaley = (constrainBox.height - nodeSize / 2) / (maxy - miny);\n  data.nodes.forEach((node) => {\n    node.x = (node.x - minx) * scalex + constrainBox.x;\n    node.y = (node.y - miny) * scaley + constrainBox.y;\n  });\n};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  plugins: [timebar],\n  layout: {\n    type: 'force',\n    preventOverlap: true,\n    onTick,\n  },\n  defaultNode: {\n    size: nodeSize,\n    type: 'circle',\n    style: {\n      fill: '#DEE9FF',\n      stroke: '#5B8FF9',\n    },\n  },\n  modes: {\n    default: ['drag-node'],\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 100);\n  };\n",title:{zh:"刻度时间轴",en:"SliceTimeBar"},filename:"slice-timebar.js",isNew:!1}],icon:"",id:"timebar",title:{en:"TimeBar",zh:"时间轴"},childrenKey:"demos",order:5},{demos:[{id:"fisheye",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kHtkQ5N4TNEAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nlet fisheye = new G6.Fisheye({\n  r: 200,\n  showLabel: true,\n});\nconst colors = [\n  '#8FE9FF',\n  '#87EAEF',\n  '#FFC9E3',\n  '#A7C2FF',\n  '#FFA1E3',\n  '#FFE269',\n  '#BFCFEE',\n  '#FFA0C5',\n  '#D5FF86',\n];\n\n// ================= The DOMs for configurations =============== //\nconst graphDiv = document.getElementById('container');\n\nconst buttonContainer = document.createElement('div');\nbuttonContainer.style.display = 'inline-block';\nbuttonContainer.style.height = '35px';\nbuttonContainer.style.width = '100%';\nbuttonContainer.style.textAlign = 'center';\n\n// clear the fisheye effect button\nconst clearButton = document.createElement('input');\nclearButton.type = 'button';\nclearButton.value = 'Clear';\nclearButton.style.height = '25px';\nclearButton.style.width = '60px';\nbuttonContainer.appendChild(clearButton);\n\n// enable/disable the fisheye lens button\nconst swithButton = document.createElement('input');\nswithButton.type = 'button';\nswithButton.value = 'Disable';\nswithButton.style.height = '25px';\nswithButton.style.width = '60px';\nswithButton.style.marginLeft = '16px';\nbuttonContainer.appendChild(swithButton);\n\nbuttonContainer.appendChild(document.createElement('br'));\n\n// list for changing trigger\nconst trigger = document.createElement('span');\ntrigger.innerHTML = 'Trigger:';\ntrigger.style.marginLeft = '16px';\nbuttonContainer.appendChild(trigger);\nconst configTrigger = document.createElement('select');\nconfigTrigger.value = 'mousemove';\nconfigTrigger.style.height = '25px';\nconfigTrigger.style.width = '100px';\nconfigTrigger.style.marginLeft = '8px';\nconst mousemoveTrigger = document.createElement('option');\nmousemoveTrigger.value = 'mousemove';\nmousemoveTrigger.innerHTML = 'mousemove';\nconfigTrigger.appendChild(mousemoveTrigger);\nconst dragTrigger = document.createElement('option');\ndragTrigger.value = 'drag';\ndragTrigger.innerHTML = 'drag';\nconfigTrigger.appendChild(dragTrigger);\nconst clickTrigger = document.createElement('option');\nclickTrigger.value = 'click';\nclickTrigger.innerHTML = 'click';\nconfigTrigger.appendChild(clickTrigger);\nbuttonContainer.appendChild(configTrigger);\n\n// list for changing scaleRBy\nconst scaleR = document.createElement('span');\nscaleR.innerHTML = 'Scale r by:';\nscaleR.style.marginLeft = '16px';\nbuttonContainer.appendChild(scaleR);\nconst configScaleRBy = document.createElement('select');\nconfigScaleRBy.value = 'unset';\nconfigScaleRBy.style.height = '25px';\nconfigScaleRBy.style.width = '100px';\nconfigScaleRBy.style.marginLeft = '8px';\nconst scaleRByUnset = document.createElement('option');\nscaleRByUnset.value = 'unset';\nscaleRByUnset.innerHTML = 'unset';\nconfigScaleRBy.appendChild(scaleRByUnset);\nconst scaleRByWheel = document.createElement('option');\nscaleRByWheel.value = 'wheel';\nscaleRByWheel.innerHTML = 'wheel';\nconfigScaleRBy.appendChild(scaleRByWheel);\nconst scaleRByDrag = document.createElement('option');\nscaleRByDrag.value = 'drag';\nscaleRByDrag.innerHTML = 'drag';\nconfigScaleRBy.appendChild(scaleRByDrag);\nbuttonContainer.appendChild(configScaleRBy);\n\n// list for changing scaleDBy\nconst scaleD = document.createElement('span');\nscaleD.innerHTML = 'Scale d by:';\nscaleD.style.marginLeft = '16px';\nbuttonContainer.appendChild(scaleD);\nconst configScaleDBy = document.createElement('select');\nconfigScaleDBy.value = 'unset';\nconfigScaleDBy.style.height = '25px';\nconfigScaleDBy.style.width = '100px';\nconfigScaleDBy.style.marginLeft = '8px';\nconst scaleDByUnset = document.createElement('option');\nscaleDByUnset.value = 'unset';\nscaleDByUnset.innerHTML = 'unset';\nconfigScaleDBy.appendChild(scaleDByUnset);\nconst scaleDByWheel = document.createElement('option');\nscaleDByWheel.value = 'wheel';\nscaleDByWheel.innerHTML = 'wheel';\nconfigScaleDBy.appendChild(scaleDByWheel);\nconst scaleDByDrag = document.createElement('option');\nscaleDByDrag.value = 'drag';\nscaleDByDrag.innerHTML = 'drag';\nconfigScaleDBy.appendChild(scaleDByDrag);\nbuttonContainer.appendChild(configScaleDBy);\n\ngraphDiv.parentNode.appendChild(buttonContainer);\n\n// ========================================================= //\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  plugins: [fisheye],\n});\n\nclearButton.addEventListener('click', (e) => {\n  fisheye.clear();\n});\nswithButton.addEventListener('click', (e) => {\n  if (swithButton.value === 'Disable') {\n    swithButton.value = 'Enable';\n    graph.removePlugin(fisheye);\n  } else {\n    swithButton.value = 'Disable';\n    fisheye = new G6.Fisheye({\n      r: 200,\n      showLabel: true,\n    });\n    graph.addPlugin(fisheye);\n  }\n});\nconfigScaleRBy.addEventListener('change', (e) => {\n  fisheye.updateParams({ scaleRBy: e.target.value });\n});\nconfigScaleDBy.addEventListener('change', (e) => {\n  fisheye.updateParams({ scaleDBy: e.target.value });\n});\nconfigTrigger.addEventListener('change', (e) => {\n  const fisheyConfigs = fisheye._cfgs;\n  graph.removePlugin(fisheye);\n  fisheye = new G6.Fisheye({\n    ...fisheyConfigs,\n    trigger: e.target.value,\n  });\n  graph.addPlugin(fisheye);\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')\n  .then((res) => res.json())\n  .then((data) => {\n    data.nodes.forEach((node) => {\n      node.label = node.id;\n      node.size = Math.random() * 30 + 10;\n      node.style = {\n        fill: colors[Math.floor(Math.random() * 9)],\n        lineWidth: 0,\n      };\n    });\n    graph.data(data);\n    graph.render();\n    graph.getNodes().forEach((node) => {\n      node\n        .getContainer()\n        .getChildren()\n        .forEach((shape) => {\n          if (shape.get('type') === 'text') shape.hide();\n        });\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"鱼眼放大镜",en:"Fisheye Lens"},filename:"fisheye.js",isNew:!1},{id:"fisheyeStyle",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*kHtkQ5N4TNEAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nlet fisheye = new G6.Fisheye({\n  r: 200,\n  showLabel: true,\n  delegateStyle: {\n    fill: '#f00',\n    lineDash: [5, 5],\n    stroke: '#666',\n  },\n});\nconst colors = [\n  '#8FE9FF',\n  '#87EAEF',\n  '#FFC9E3',\n  '#A7C2FF',\n  '#FFA1E3',\n  '#FFE269',\n  '#BFCFEE',\n  '#FFA0C5',\n  '#D5FF86',\n];\n\nconst graphDiv = document.getElementById('container');\n\nconst buttonContainer = document.createElement('div');\nbuttonContainer.style.display = 'inline-block';\nbuttonContainer.style.height = '35px';\nbuttonContainer.style.width = '220px';\n\n// clear the fisheye effect button\nconst clearButton = document.createElement('input');\nclearButton.type = 'button';\nclearButton.value = 'Clear';\nclearButton.style.height = '25px';\nclearButton.style.width = '100px';\nbuttonContainer.appendChild(clearButton);\n\n// enable/disable the fisheye lens button\nconst switchButton = document.createElement('input');\nswitchButton.type = 'button';\nswitchButton.value = 'Disable';\nswitchButton.style.height = '25px';\nswitchButton.style.width = '100px';\nswitchButton.style.marginLeft = '10px';\nbuttonContainer.appendChild(switchButton);\n\ngraphDiv.parentNode.appendChild(buttonContainer);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  plugins: [fisheye],\n});\n\nclearButton.addEventListener('click', (e) => {\n  fisheye.clear();\n});\nswitchButton.addEventListener('click', (e) => {\n  if (switchButton.value === 'Disable') {\n    switchButton.value = 'Enable';\n    graph.removePlugin(fisheye);\n  } else {\n    switchButton.value = 'Disable';\n    fisheye = new G6.Fisheye({\n      r: 200,\n      showLabel: true,\n    });\n    graph.addPlugin(fisheye);\n  }\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')\n  .then((res) => res.json())\n  .then((data) => {\n    data.nodes.forEach((node) => {\n      node.label = node.id;\n      node.size = Math.random() * 30 + 10;\n      node.style = {\n        fill: colors[Math.floor(Math.random() * 9)],\n        lineWidth: 0,\n      };\n    });\n    graph.data(data);\n    graph.render();\n    graph.getNodes().forEach((node) => {\n      node\n        .getContainer()\n        .getChildren()\n        .forEach((shape) => {\n          if (shape.get('type') === 'text') shape.hide();\n        });\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"鱼眼放大镜样式",en:"Fisheye Lens Style"},filename:"fisheyeStyle.js",isNew:!1}],icon:"",id:"fisheye",title:{en:"Fisheye",zh:"鱼眼放大镜"},childrenKey:"demos",order:6},{demos:[{id:"edgeFilter",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*elTYSJwOR7MAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nlet trigger = 'mousemove';\nconst filterConfigs = {\n  trigger,\n  showLabel: 'edge',\n  r: 60,\n};\nlet filterLens = new G6.EdgeFilterLens(filterConfigs);\n\n// ================= The DOMs for configurations =============== //\nconst graphDiv = document.getElementById('container');\n\nconst buttonContainer = document.createElement('div');\nbuttonContainer.style.display = 'inline-block';\nbuttonContainer.style.height = '35px';\nbuttonContainer.style.width = '100%';\nbuttonContainer.style.textAlign = 'center';\n\n// tip\nconst tip = document.createElement('span');\ntip.innerHTML = '点击画布任意位置开始探索。过滤镜中显示两端节点均在过滤镜中的边。';\nbuttonContainer.appendChild(tip);\n\nbuttonContainer.appendChild(document.createElement('br'));\n\n// tip english\nconst tipEn = document.createElement('span');\ntipEn.innerHTML =\n  'Click the canvas to begin. Show the edge whose both end nodes are inside the lens.';\nbuttonContainer.appendChild(tipEn);\n\nbuttonContainer.appendChild(document.createElement('br'));\n\n// enable/disable the fisheye lens button\nconst swithButton = document.createElement('input');\nswithButton.type = 'button';\nswithButton.value = 'Disable';\nswithButton.style.height = '25px';\nswithButton.style.width = '60px';\nswithButton.style.marginLeft = '16px';\nbuttonContainer.appendChild(swithButton);\n\n// list for changing trigger\nconst triggerTag = document.createElement('span');\ntriggerTag.innerHTML = 'Trigger:';\ntriggerTag.style.marginLeft = '16px';\nbuttonContainer.appendChild(triggerTag);\nconst configTrigger = document.createElement('select');\nconfigTrigger.value = 'mousemove';\nconfigTrigger.style.height = '25px';\nconfigTrigger.style.width = '100px';\nconfigTrigger.style.marginLeft = '8px';\nconst mousemoveTrigger = document.createElement('option');\nmousemoveTrigger.value = 'mousemove';\nmousemoveTrigger.innerHTML = 'mousemove';\nconfigTrigger.appendChild(mousemoveTrigger);\nconst dragTrigger = document.createElement('option');\ndragTrigger.value = 'drag';\ndragTrigger.innerHTML = 'drag';\nconfigTrigger.appendChild(dragTrigger);\nconst clickTrigger = document.createElement('option');\nclickTrigger.value = 'click';\nclickTrigger.innerHTML = 'click';\nconfigTrigger.appendChild(clickTrigger);\nbuttonContainer.appendChild(configTrigger);\n\n// list for changing scaleRBy\nconst scaleR = document.createElement('span');\nscaleR.innerHTML = 'Scale r by:';\nscaleR.style.marginLeft = '16px';\nbuttonContainer.appendChild(scaleR);\nconst configScaleRBy = document.createElement('select');\nconfigScaleRBy.value = 'wheel';\nconfigScaleRBy.style.height = '25px';\nconfigScaleRBy.style.width = '100px';\nconfigScaleRBy.style.marginLeft = '8px';\nconst scaleRByWheel = document.createElement('option');\nscaleRByWheel.value = 'wheel';\nscaleRByWheel.innerHTML = 'wheel';\nconfigScaleRBy.appendChild(scaleRByWheel);\nconst scaleRByUnset = document.createElement('option');\nscaleRByUnset.value = undefined;\nscaleRByUnset.innerHTML = 'undefined';\nconfigScaleRBy.appendChild(scaleRByUnset);\nbuttonContainer.appendChild(configScaleRBy);\n\ngraphDiv.appendChild(buttonContainer);\n\n// ========================================================= //\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 60;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height: height,\n  plugins: [filterLens],\n  fitView: true,\n  defaultEdge: {\n    labelCfg: {\n      autoRotate: true,\n      style: {\n        stroke: '#fff',\n        lineWidth: 2,\n      },\n    },\n  },\n  defaultNode: {\n    size: 15,\n    color: '#5B8FF9',\n    style: {\n      lineWidth: 2,\n      fill: '#C6E5FF',\n    },\n  },\n  modes: {\n    default: ['drag-canvas'],\n  },\n});\n\nswithButton.addEventListener('click', (e) => {\n  if (swithButton.value === 'Disable') {\n    swithButton.value = 'Enable';\n    graph.removePlugin(filterLens);\n  } else {\n    swithButton.value = 'Disable';\n    filterLens = new G6.EdgeFilterLens({\n      ...filterConfigs,\n      trigger,\n    });\n    graph.addPlugin(filterLens);\n  }\n});\nconfigScaleRBy.addEventListener('change', (e) => {\n  filterLens.updateParams({ scaleRBy: e.target.value });\n});\nconfigTrigger.addEventListener('change', (e) => {\n  const filterLensConfigs = filterLens._cfgs;\n  graph.removePlugin(filterLens);\n  trigger = e.target.value;\n  filterLens = new G6.EdgeFilterLens({\n    ...filterLensConfigs,\n    trigger,\n  });\n  graph.addPlugin(filterLens);\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')\n  .then((res) => res.json())\n  .then((data) => {\n    data.edges.forEach((edge) => {\n      edge.color = '#aaa';\n      edge.size = 2;\n      edge.style = {\n        opacity: 0.7,\n      };\n      edge.label = 'a';\n    });\n    graph.data(data);\n    graph.render();\n    graph.getEdges().forEach((edge) => {\n      edge\n        .getContainer()\n        .getChildren()\n        .forEach((shape) => {\n          if (shape.get('type') === 'text') shape.set('visible', false);\n        });\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 60);\n  };\n",title:{zh:"边过滤镜",en:"Edge Filter Lens"},filename:"edgeFilter.js",isNew:!1},{id:"edgeFilterConfig",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ZkZ4Q6JeIaQAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nlet trigger = 'drag';\nconst filterConfigs = {\n  trigger,\n  showLabel: 'edge',\n  r: 100,\n  shouldShow: (e) => {\n    return e.size > 3;\n  },\n  delegateStyle: {\n    fill: '#F8E8D9',\n    lineDash: [5, 5],\n    stroke: '#666',\n  },\n};\n\nlet filterLens = new G6.EdgeFilterLens(filterConfigs);\n\n// ================= The DOMs for configurations =============== //\nconst graphDiv = document.getElementById('container');\n\nconst buttonContainer = document.createElement('div');\nbuttonContainer.style.display = 'inline-block';\nbuttonContainer.style.height = '35px';\nbuttonContainer.style.width = '100%';\nbuttonContainer.style.textAlign = 'center';\n\n// tip\nconst tip = document.createElement('span');\ntip.innerHTML =\n  '点击画布任意位置开始探索。过滤镜中显示两端节点均在过滤镜中，且满足 shouldShow 所定义的条件的边。';\nbuttonContainer.appendChild(tip);\n\nbuttonContainer.appendChild(document.createElement('br'));\n\n// tip english\nconst tipEn = document.createElement('span');\ntipEn.innerHTML =\n  'Click the canvas to begin. Show the edge whose both end nodes are inside the lens, meanwhile the edge should meet the requirements defined by shouldShow in.';\nbuttonContainer.appendChild(tipEn);\n\nbuttonContainer.appendChild(document.createElement('br'));\n\n// enable/disable the fisheye lens button\nconst swithButton = document.createElement('input');\nswithButton.type = 'button';\nswithButton.value = 'Disable';\nswithButton.style.height = '25px';\nswithButton.style.width = '60px';\nswithButton.style.marginLeft = '16px';\nbuttonContainer.appendChild(swithButton);\n\n// list for changing trigger\nconst triggerTag = document.createElement('span');\ntriggerTag.innerHTML = 'Trigger:';\ntriggerTag.style.marginLeft = '16px';\nbuttonContainer.appendChild(triggerTag);\nconst configTrigger = document.createElement('select');\nconfigTrigger.value = 'drag';\nconfigTrigger.style.height = '25px';\nconfigTrigger.style.width = '100px';\nconfigTrigger.style.marginLeft = '8px';\nconst dragTrigger = document.createElement('option');\ndragTrigger.value = 'drag';\ndragTrigger.innerHTML = 'drag';\nconfigTrigger.appendChild(dragTrigger);\nconst mousemoveTrigger = document.createElement('option');\nmousemoveTrigger.value = 'mousemove';\nmousemoveTrigger.innerHTML = 'mousemove';\nconfigTrigger.appendChild(mousemoveTrigger);\nconst clickTrigger = document.createElement('option');\nclickTrigger.value = 'click';\nclickTrigger.innerHTML = 'click';\nconfigTrigger.appendChild(clickTrigger);\nbuttonContainer.appendChild(configTrigger);\n\n// list for changing scaleRBy\nconst scaleR = document.createElement('span');\nscaleR.innerHTML = 'Scale r by:';\nscaleR.style.marginLeft = '16px';\nbuttonContainer.appendChild(scaleR);\nconst configScaleRBy = document.createElement('select');\nconfigScaleRBy.value = 'wheel';\nconfigScaleRBy.style.height = '25px';\nconfigScaleRBy.style.width = '100px';\nconfigScaleRBy.style.marginLeft = '8px';\nconst scaleRByWheel = document.createElement('option');\nscaleRByWheel.value = 'wheel';\nscaleRByWheel.innerHTML = 'wheel';\nconfigScaleRBy.appendChild(scaleRByWheel);\nconst scaleRByUnset = document.createElement('option');\nscaleRByUnset.value = undefined;\nscaleRByUnset.innerHTML = 'undefined';\nconfigScaleRBy.appendChild(scaleRByUnset);\nbuttonContainer.appendChild(configScaleRBy);\n\ngraphDiv.appendChild(buttonContainer);\n\n// ========================================================= //\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 120;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  plugins: [filterLens],\n  fitView: true,\n  defaultEdge: {\n    labelCfg: {\n      autoRotate: true,\n      style: {\n        stroke: '#fff',\n        lineWidth: 2,\n      },\n    },\n  },\n  defaultNode: {\n    size: 15,\n    color: '#5B8FF9',\n    style: {\n      lineWidth: 2,\n      fill: '#C6E5FF',\n    },\n  },\n  modes: {\n    default: ['drag-canvas'],\n  },\n});\n\nswithButton.addEventListener('click', (e) => {\n  if (swithButton.value === 'Disable') {\n    swithButton.value = 'Enable';\n    graph.removePlugin(filterLens);\n  } else {\n    swithButton.value = 'Disable';\n    filterLens = new G6.EdgeFilterLens({\n      ...filterConfigs,\n      trigger,\n    });\n    graph.addPlugin(filterLens);\n  }\n});\nconfigScaleRBy.addEventListener('change', (e) => {\n  filterLens.updateParams({ scaleRBy: e.target.value });\n});\nconfigTrigger.addEventListener('change', (e) => {\n  const filterLensConfigs = filterLens._cfgs;\n  graph.removePlugin(filterLens);\n  trigger = e.target.value;\n  filterLens = new G6.EdgeFilterLens({\n    ...filterLensConfigs,\n    trigger,\n  });\n  graph.addPlugin(filterLens);\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/afe8b2a6-f691-4070-aa73-46fc07fd1171.json')\n  .then((res) => res.json())\n  .then((data) => {\n    data.edges.forEach((edge) => {\n      edge.size = 1 + Math.random() * 3;\n      edge.color = edge.size > 3 ? '#FB4B4B' : '#aaa';\n      edge.style = {\n        opacity: 0.7,\n      };\n      edge.label = 'a';\n    });\n    graph.data(data);\n    graph.render();\n    graph.getEdges().forEach((edge) => {\n      edge\n        .getContainer()\n        .getChildren()\n        .forEach((shape) => {\n          if (shape.get('type') === 'text') shape.set('visible', false);\n        });\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 120);\n  };\n",title:{zh:"更多配置",en:"More Configs"},filename:"edgeFilterConfig.js",isNew:!1}],icon:"",id:"edgeFilterLens",title:{en:"Edge Filter Lens",zh:"边过滤镜"},childrenKey:"demos",order:7},{demos:[{id:"default",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*fRMFSZCjuoMAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 110;\nconst snapLine = new G6.SnapLine();\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  defaultNode: {\n    size: 30,\n  },\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas', 'drag-node'],\n  },\n  plugins: [snapLine],\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);\n  };\n",title:{zh:"对齐线",en:"SnapLine"},filename:"default.js",isNew:!1},{id:"custom",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*G-vPSa3I1lkAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n    },\n    {\n      id: '1',\n      label: '1',\n    },\n    {\n      id: '2',\n      label: '2',\n    },\n    {\n      id: '3',\n      label: '3',\n    },\n    {\n      id: '4',\n      label: '4',\n    },\n    {\n      id: '5',\n      label: '5',\n    },\n    {\n      id: '6',\n      label: '6',\n    },\n    {\n      id: '7',\n      label: '7',\n    },\n    {\n      id: '8',\n      label: '8',\n    },\n    {\n      id: '9',\n      label: '9',\n    },\n    {\n      id: '10',\n      label: '10',\n    },\n    {\n      id: '11',\n      label: '11',\n    },\n    {\n      id: '12',\n      label: '12',\n    },\n    {\n      id: '13',\n      label: '13',\n    },\n    {\n      id: '14',\n      label: '14',\n    },\n    {\n      id: '15',\n      label: '15',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n  ],\n};\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 110;\nconst snapLine = new G6.SnapLine({\n  line: {\n    stroke: 'red',\n    lineWidth: 3,\n  },\n  itemAlignType: true,\n});\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  defaultNode: {\n    size: 30,\n  },\n  modes: {\n    default: ['drag-canvas', 'zoom-canvas', 'drag-node'],\n  },\n  plugins: [snapLine],\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 110);\n  };\n",title:{zh:"自定义对齐线样式",en:"Custom SnapLine"},filename:"custom.js",isNew:!1}],icon:"",id:"snapline",title:{en:"SnapLine",zh:"对齐线"},childrenKey:"demos",order:8},{demos:[{id:"legend",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*0RYmToKWsOQAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6'\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 50;\nconst el = document.createElement('pre');\nel.innerHTML =\n  'Click the legend item to filter\\n点击图例上的元素进行筛选';\ncontainer.appendChild(el);\n\nconst typeConfigs = {\n  'type1': {\n    type: 'circle',\n    size: 5,\n    style: {\n      fill: '#5B8FF9'\n    }\n  },\n  'type2': {\n    type: 'circle',\n    size: 20,\n    style: {\n      fill: '#5AD8A6'\n    }\n  },\n  'type3': {\n    type: 'rect',\n    size: [10, 10],\n    style: {\n      fill: '#5D7092'\n    }\n  },\n  'eType1': {\n    type: 'line',\n    style: {\n      width: 20,\n      stroke: '#F6BD16',\n    }\n  },\n  'eType2': {\n    type: 'cubic',\n  },\n  'eType3': {\n    type: 'quadratic',\n    style: {\n      width: 25,\n      stroke: '#6F5EF9'\n    }\n  }\n}\n\nconst data = {\n  nodes: [\n    {\n      id: '1',\n      label: '1:type1',\n      legendType: 'type1',\n    },\n    {\n      id: '2',\n      label: '2:type2',\n      legendType: 'type2',\n    },\n    {\n      id: '3',\n      label: '3:type1',\n      legendType: 'type1',\n    },\n    {\n      id: '4',\n      label: '4:type3',\n      legendType: 'type3',\n    },\n  ],\n  edges: [{\n    source: '1',\n    target: '2',\n    legendType: 'eType1',\n    label: '1->2:edge-type1',\n  }, {\n    source: '1',\n    target: '4',\n    legendType: 'eType3',\n    label: '1->4:edge-type3'\n  }, {\n    source: '3',\n    target: '4'\n  }, {\n    source: '2',\n    target: '4',\n    legendType: 'eType1',\n    label: '2->4:edge-type1'\n  }]\n};\n\ndata.nodes.forEach(node => {\n  if (!node.legendType) return;\n  node = Object.assign(node, {...typeConfigs[node.legendType]});\n})\ndata.edges.forEach(edge => {\n  if (!edge.legendType) return;\n  const config = typeConfigs[edge.legendType];\n  edge = Object.assign(edge, {...config});\n})\n\nconst legendData = {\n  nodes: [{\n    id: 'type1',\n    label: 'node-type1',\n    order: 4,\n    ...typeConfigs['type1']\n  }, {\n    id: 'type2',\n    label: 'node-type2',\n    order: 0,\n    ...typeConfigs['type2']\n  }, {\n    id: 'type3',\n    label: 'node-type3',\n    order: 2,\n    ...typeConfigs['type3']\n  }],\n  edges: [{\n    id: 'eType1',\n    label: 'edge-type1',\n    order: 2,\n    ...typeConfigs['eType1']\n  }, {\n    id: 'eType2',\n    label: 'edge-type2',\n    ...typeConfigs['eType2']\n  }, {\n    id: 'eType3',\n    label: 'edge-type3',\n    ...typeConfigs['eType3']\n  }]\n}\nconst legend = new G6.Legend({\n  data: legendData,\n  align: 'center',\n  layout: 'horizontal', // vertical\n  position: 'bottom-right',\n  vertiSep: 12,\n  horiSep: 24,\n  offsetY: -24,\n  padding: [4, 16, 8, 16],\n  containerStyle: {\n    fill: '#ccc',\n    lineWidth: 1\n  },\n  title: 'Legend',\n  titleConfig: {\n    position: 'center',\n    offsetX: 0,\n    offsetY: 12,\n  },\n  filter: {\n    enable: true,\n    multiple: true,\n    trigger: 'click',\n    graphActiveState: 'activeByLegend',\n    graphInactiveState: 'inactiveByLegend',\n    filterFunctions: {\n      'type1': (d) => {\n        if (d.legendType === 'type1') return true;\n        return false\n      },\n      'type2': (d) => {\n        if (d.legendType === 'type2') return true;\n        return false\n      },\n      'type3': (d) => {\n        if (d.legendType === 'type3') return true;\n        return false\n      },\n      'eType1': (d) => {\n        if (d.legendType === 'eType1') return true;\n        return false\n      },\n      'eType2': (d) => {\n        if (d.legendType === 'eType2') return true;\n        return false\n      },\n      'eType3': (d) => {\n        if (d.legendType === 'eType3') return true;\n        return false\n      },\n    }\n  }\n});\n\n\nconst graph = new G6.Graph({\n  // 使用 contextMenu plugins 时，需要将 container 设置为 position: relative;\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  defaultNode: {\n    labelCfg: {\n      position: \"bottom\",\n      style: {\n        stroke: '#fff',\n        lineWidth: 4\n      }\n    }\n  },\n  defaultEdge: {\n    labelCfg: {\n      autoRotate: true,\n      style: {\n        stroke: '#fff',\n        lineWidth: 4\n      }\n    }\n  },\n  nodeStateStyles: {\n    activeByLegend: {\n      lineWidth: 10,\n      strokeOpacity: 0.5\n    },\n    inactiveByLegend: {\n      opacity: 0.5\n    }\n  },\n  edgeStateStyles: {\n    activeByLegend: {\n      lineWidth: 3\n    },\n    inactiveByLegend: {\n      opacity: 0.5\n    }\n  },\n  plugins: [legend],\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"图例-点击筛选",en:"Legend with Clicking Filtering"},filename:"legend.js",isNew:!1},{id:"legendMouseenter",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ftAtR6k9RWIAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6'\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 50;\nconst el = document.createElement('pre');\nel.innerHTML =\n  'Hover the legend item to filter\\n鼠标进入图例上的元素进行筛选';\ncontainer.appendChild(el);\n\nconst typeConfigs = {\n  'type1': {\n    type: 'circle',\n    size: 5,\n    style: {\n      fill: '#5B8FF9'\n    }\n  },\n  'type2': {\n    type: 'circle',\n    size: 20,\n    style: {\n      fill: '#5AD8A6'\n    }\n  },\n  'type3': {\n    type: 'rect',\n    size: [10, 10],\n    style: {\n      fill: '#5D7092'\n    }\n  },\n  'eType1': {\n    type: 'line',\n    style: {\n      width: 20,\n      stroke: '#F6BD16',\n    }\n  },\n  'eType2': {\n    type: 'cubic',\n  },\n  'eType3': {\n    type: 'quadratic',\n    style: {\n      width: 25,\n      stroke: '#6F5EF9'\n    }\n  }\n}\n\nconst data = {\n  nodes: [\n    {\n      id: '1',\n      label: '1:type1',\n      legendType: 'type1',\n    },\n    {\n      id: '2',\n      label: '2:type2',\n      legendType: 'type2',\n    },\n    {\n      id: '3',\n      label: '3:type1',\n      legendType: 'type1',\n    },\n    {\n      id: '4',\n      label: '4:type3',\n      legendType: 'type3',\n    },\n  ],\n  edges: [{\n    source: '1',\n    target: '2',\n    legendType: 'eType1',\n    label: '1->2:edge-type1',\n  }, {\n    source: '1',\n    target: '4',\n    legendType: 'eType3',\n    label: '1->4:edge-type3'\n  }, {\n    source: '3',\n    target: '4'\n  }, {\n    source: '2',\n    target: '4',\n    legendType: 'eType1',\n    label: '2->4:edge-type1'\n  }]\n};\n\ndata.nodes.forEach(node => {\n  if (!node.legendType) return;\n  node = Object.assign(node, {...typeConfigs[node.legendType]});\n})\ndata.edges.forEach(edge => {\n  if (!edge.legendType) return;\n  const config = typeConfigs[edge.legendType];\n  edge = Object.assign(edge, {...config});\n})\n\nconst legendData = {\n  nodes: [{\n    id: 'type1',\n    label: 'node-type1',\n    order: 4,\n    ...typeConfigs['type1']\n  }, {\n    id: 'type2',\n    label: 'node-type2',\n    order: 0,\n    ...typeConfigs['type2']\n  }, {\n    id: 'type3',\n    label: 'node-type3',\n    order: 2,\n    ...typeConfigs['type3']\n  }],\n  edges: [{\n    id: 'eType1',\n    label: 'edge-type1',\n    order: 2,\n    ...typeConfigs['eType1']\n  }, {\n    id: 'eType2',\n    label: 'edge-type2',\n    ...typeConfigs['eType2']\n  }, {\n    id: 'eType3',\n    label: 'edge-type3',\n    ...typeConfigs['eType3']\n  }]\n}\nconst legend = new G6.Legend({\n  data: legendData,\n  align: 'center',\n  layout: 'horizontal', // vertical\n  position: 'bottom-right',\n  vertiSep: 12,\n  horiSep: 24,\n  offsetY: -24,\n  padding: [4, 16, 8, 16],\n  containerStyle: {\n    fill: '#ccc',\n    lineWidth: 1\n  },\n  title: 'Legend',\n  titleConfig: {\n    position: 'center',\n    offsetX: 0,\n    offsetY: 12,\n  },\n  filter: {\n    enable: true,\n    trigger: 'mouseenter',\n    graphActiveState: 'activeByLegend',\n    graphInactiveState: 'inactiveByLegend',\n    filterFunctions: {\n      'type1': (d) => {\n        if (d.legendType === 'type1') return true;\n        return false\n      },\n      'type2': (d) => {\n        if (d.legendType === 'type2') return true;\n        return false\n      },\n      'type3': (d) => {\n        if (d.legendType === 'type3') return true;\n        return false\n      },\n      'eType1': (d) => {\n        if (d.legendType === 'eType1') return true;\n        return false\n      },\n      'eType2': (d) => {\n        if (d.legendType === 'eType2') return true;\n        return false\n      },\n      'eType3': (d) => {\n        if (d.legendType === 'eType3') return true;\n        return false\n      },\n    }\n  }\n});\n\n\nconst graph = new G6.Graph({\n  // 使用 contextMenu plugins 时，需要将 container 设置为 position: relative;\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  defaultNode: {\n    labelCfg: {\n      position: \"bottom\",\n      style: {\n        stroke: '#fff',\n        lineWidth: 4\n      }\n    }\n  },\n  defaultEdge: {\n    labelCfg: {\n      autoRotate: true,\n      style: {\n        stroke: '#fff',\n        lineWidth: 4\n      }\n    }\n  },\n  nodeStateStyles: {\n    activeByLegend: {\n      lineWidth: 10,\n      strokeOpacity: 0.5\n    },\n    inactiveByLegend: {\n      opacity: 0.5\n    }\n  },\n  edgeStateStyles: {\n    activeByLegend: {\n      lineWidth: 3\n    },\n    inactiveByLegend: {\n      opacity: 0.5\n    }\n  },\n  plugins: [legend],\n});\n\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"图例-Hover 筛选",en:"Legend with Hovering Filtering"},filename:"legendMouseenter.js",isNew:!1},{id:"legendClick",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*nCTfRq6522kAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 50;\nconst el = document.createElement('pre');\nel.innerHTML =\n  'Click the legend item to filter\\n点击图例上的元素进行筛选';\ncontainer.appendChild(el);\n\nconst data = {\n  nodes: [\n    {\n      id: '0',\n      label: '0',\n      cluster: 'a',\n    },\n    {\n      id: '1',\n      label: '1',\n      cluster: 'a',\n    },\n    {\n      id: '2',\n      label: '2',\n      cluster: 'a',\n    },\n    {\n      id: '3',\n      label: '3',\n      cluster: 'a',\n    },\n    {\n      id: '4',\n      label: '4',\n      cluster: 'a',\n    },\n    {\n      id: '5',\n      label: '5',\n      cluster: 'a',\n    },\n    {\n      id: '6',\n      label: '6',\n      cluster: 'a',\n    },\n    {\n      id: '7',\n      label: '7',\n      cluster: 'a',\n    },\n    {\n      id: '8',\n      label: '8',\n      cluster: 'a',\n    },\n    {\n      id: '9',\n      label: '9',\n      cluster: 'a',\n    },\n    {\n      id: '10',\n      label: '10',\n      cluster: 'a',\n    },\n    {\n      id: '11',\n      label: '11',\n      cluster: 'a',\n    },\n    {\n      id: '12',\n      label: '12',\n      cluster: 'a',\n    },\n    {\n      id: '13',\n      label: '13',\n      cluster: 'b',\n    },\n    {\n      id: '14',\n      label: '14',\n      cluster: 'b',\n    },\n    {\n      id: '15',\n      label: '15',\n      cluster: 'b',\n    },\n    {\n      id: '16',\n      label: '16',\n      cluster: 'b',\n    },\n    {\n      id: '17',\n      label: '17',\n      cluster: 'b',\n    },\n    {\n      id: '18',\n      label: '18',\n      cluster: 'c',\n    },\n    {\n      id: '19',\n      label: '19',\n      cluster: 'c',\n    },\n    {\n      id: '20',\n      label: '20',\n      cluster: 'c',\n    },\n    {\n      id: '21',\n      label: '21',\n      cluster: 'c',\n    },\n    {\n      id: '22',\n      label: '22',\n      cluster: 'c',\n    },\n    {\n      id: '23',\n      label: '23',\n      cluster: 'c',\n    },\n    {\n      id: '24',\n      label: '24',\n      cluster: 'c',\n    },\n    {\n      id: '25',\n      label: '25',\n      cluster: 'c',\n    },\n    {\n      id: '26',\n      label: '26',\n      cluster: 'c',\n    },\n    {\n      id: '27',\n      label: '27',\n      cluster: 'c',\n    },\n    {\n      id: '28',\n      label: '28',\n      cluster: 'c',\n    },\n    {\n      id: '29',\n      label: '29',\n      cluster: 'c',\n    },\n    {\n      id: '30',\n      label: '30',\n      cluster: 'c',\n    },\n    {\n      id: '31',\n      label: '31',\n      cluster: 'd',\n    },\n    {\n      id: '32',\n      label: '32',\n      cluster: 'd',\n    },\n    {\n      id: '33',\n      label: '33',\n      cluster: 'd',\n    },\n  ],\n  edges: [\n    {\n      source: '0',\n      target: '1',\n    },\n    {\n      source: '0',\n      target: '2',\n    },\n    {\n      source: '0',\n      target: '3',\n    },\n    {\n      source: '0',\n      target: '4',\n    },\n    {\n      source: '0',\n      target: '5',\n    },\n    {\n      source: '0',\n      target: '7',\n    },\n    {\n      source: '0',\n      target: '8',\n    },\n    {\n      source: '0',\n      target: '9',\n    },\n    {\n      source: '0',\n      target: '10',\n    },\n    {\n      source: '0',\n      target: '11',\n    },\n    {\n      source: '0',\n      target: '13',\n    },\n    {\n      source: '0',\n      target: '14',\n    },\n    {\n      source: '0',\n      target: '15',\n    },\n    {\n      source: '0',\n      target: '16',\n    },\n    {\n      source: '2',\n      target: '3',\n    },\n    {\n      source: '4',\n      target: '5',\n    },\n    {\n      source: '4',\n      target: '6',\n    },\n    {\n      source: '5',\n      target: '6',\n    },\n    {\n      source: '7',\n      target: '13',\n    },\n    {\n      source: '8',\n      target: '14',\n    },\n    {\n      source: '9',\n      target: '10',\n    },\n    {\n      source: '10',\n      target: '22',\n    },\n    {\n      source: '10',\n      target: '14',\n    },\n    {\n      source: '10',\n      target: '12',\n    },\n    {\n      source: '10',\n      target: '24',\n    },\n    {\n      source: '10',\n      target: '21',\n    },\n    {\n      source: '10',\n      target: '20',\n    },\n    {\n      source: '11',\n      target: '24',\n    },\n    {\n      source: '11',\n      target: '22',\n    },\n    {\n      source: '11',\n      target: '14',\n    },\n    {\n      source: '12',\n      target: '13',\n    },\n    {\n      source: '16',\n      target: '17',\n    },\n    {\n      source: '16',\n      target: '18',\n    },\n    {\n      source: '16',\n      target: '21',\n    },\n    {\n      source: '16',\n      target: '22',\n    },\n    {\n      source: '17',\n      target: '18',\n    },\n    {\n      source: '17',\n      target: '20',\n    },\n    {\n      source: '18',\n      target: '19',\n    },\n    {\n      source: '19',\n      target: '20',\n    },\n    {\n      source: '19',\n      target: '33',\n    },\n    {\n      source: '19',\n      target: '22',\n    },\n    {\n      source: '19',\n      target: '23',\n    },\n    {\n      source: '20',\n      target: '21',\n    },\n    {\n      source: '21',\n      target: '22',\n    },\n    {\n      source: '22',\n      target: '24',\n    },\n    {\n      source: '22',\n      target: '25',\n    },\n    {\n      source: '22',\n      target: '26',\n    },\n    {\n      source: '22',\n      target: '23',\n    },\n    {\n      source: '22',\n      target: '28',\n    },\n    {\n      source: '22',\n      target: '30',\n    },\n    {\n      source: '22',\n      target: '31',\n    },\n    {\n      source: '22',\n      target: '32',\n    },\n    {\n      source: '22',\n      target: '33',\n    },\n    {\n      source: '23',\n      target: '28',\n    },\n    {\n      source: '23',\n      target: '27',\n    },\n    {\n      source: '23',\n      target: '29',\n    },\n    {\n      source: '23',\n      target: '30',\n    },\n    {\n      source: '23',\n      target: '31',\n    },\n    {\n      source: '23',\n      target: '33',\n    },\n    {\n      source: '32',\n      target: '33',\n    },\n  ],\n};\n\nconst colors = [\n  '#BDD2FD',\n  '#BDEFDB',\n  '#C2C8D5',\n  '#FBE5A2',\n  '#F6C3B7',\n  '#B6E3F5',\n  '#D3C6EA',\n  '#FFD8B8',\n  '#AAD8D8',\n  '#FFD6E7',\n];\nconst strokes = [\n  '#5B8FF9',\n  '#5AD8A6',\n  '#5D7092',\n  '#F6BD16',\n  '#E8684A',\n  '#6DC8EC',\n  '#9270CA',\n  '#FF9D4D',\n  '#269A99',\n  '#FF99C3',\n];\n\nconst clusterMap = new Map();\nlet clusterId = 0;\ndata.nodes.forEach(function (node) {\n  // cluster\n  if (node.cluster && clusterMap.get(node.cluster) === undefined) {\n    clusterMap.set(node.cluster, clusterId);\n    clusterId++;\n  }\n  const cid = clusterMap.get(node.cluster);\n  if (!node.style) {\n    node.style = {};\n  }\n  node.style.fill = colors[cid % colors.length];\n  node.style.stroke = strokes[cid % strokes.length];\n});\n\ndata.edges.forEach(edge => {\n  edge.cluster = data.nodes[+edge.source].cluster;\n  const cid = clusterMap.get(edge.cluster);\n  console.log(edge.cluster, cid)\n  edge.style = {\n    stroke: colors[cid % colors.length]\n  }\n})\n\n\nconst legendData = {\n  nodes: [\n    { id: 'a', label: 'a', },\n    { id: 'b', label: 'b', },\n    { id: 'c', label: 'c', },\n    { id: 'd', label: 'd', }\n  ], edges: [\n    { id: 'a', label: 'a', },\n    { id: 'b', label: 'b', },\n    { id: 'c', label: 'c', },\n    { id: 'd', label: 'd', }\n  ]\n}\nlegendData.nodes.forEach(node => {\n  const cid = clusterMap.get(node.id);\n  node.style = {\n    fill: colors[cid % colors.length],\n    stroke: strokes[cid % strokes.length]\n  };\n})\nlegendData.edges.forEach(node => {\n  const cid = clusterMap.get(node.id);\n  node.style = {\n    fill: colors[cid % colors.length],\n    stroke: strokes[cid % strokes.length]\n  };\n})\nconst legend = new G6.Legend({\n  data: legendData,\n  align: 'center',\n  layout: 'horizontal', // vertical\n  position: 'bottom-left',\n  vertiSep: 12,\n  horiSep: 24,\n  offsetY: -24,\n  padding: [4, 16, 8, 16],\n  containerStyle: {\n    fill: '#ccc',\n    lineWidth: 1\n  },\n  title: 'Legend',\n  titleConfig: {\n    position: 'left',\n    offsetX: 0,\n    offsetY: 12,\n  },\n  filter: {\n    enable: true,\n    multiple: true,\n    trigger: 'click',\n    graphActiveState: 'activeByLegend',\n    graphInactiveState: 'inactiveByLegend',\n    filterFunctions: {\n      'a': (d) => {\n        if (d.cluster === 'a') return true;\n        return false\n      },\n      'b': (d) => {\n        if (d.cluster === 'b') return true;\n        return false\n      },\n      'c': (d) => {\n        if (d.cluster === 'c') return true;\n        return false\n      },\n      'd': (d) => {\n        if (d.cluster === 'd') return true;\n        return false\n      },\n    }\n  }\n});\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  modes: {\n    default: ['drag-canvas', 'drag-node'],\n  },\n  plugins: [legend],\n  animate: true,\n  defaultNode: {\n    size: 20,\n    style: {\n      lineWidth: 2,\n    },\n  },\n  defaultEdge: {\n    size: 1,\n    color: '#e2e2e2',\n    style: {\n      endArrow: {\n        path: 'M 0,0 L 8,4 L 8,-4 Z',\n        fill: '#e2e2e2',\n      },\n    },\n  },\n  nodeStateStyles: {\n    activeByLegend: {\n      lineWidth: 5,\n      strokeOpacity: 0.5,\n      stroke: '#f00'\n    },\n    inactiveByLegend: {\n      opacity: 0.5\n    }\n  },\n  edgeStateStyles: {\n    activeByLegend: {\n      lineWidth: 10,\n      strokeOpacity: 0.5\n    },\n    inactiveByLegend: {\n      opacity: 0.5\n    }\n  },\n  layout: {\n    type: 'gForce',\n  },\n});\ngraph.data(data);\ngraph.render();\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"图例-点击筛选2",en:"Legend with Clicking Filtering 2"},filename:"legendClick.js",isNew:!1}],icon:"",id:"legend",title:{en:"Legend",zh:"图例 Legend"},childrenKey:"demos",order:9}],childrenKey:"examples"},{id:"algorithm",title:{zh:"算法",en:"Algorithm"},icon:"gallery",examples:[{demos:[{id:"gaddi",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*ucUBSoDw2TwAAAAAAAAAAAAAARQnAQ",source:'import G6 from \'@antv/g6\';\n\nconst { GADDI } = G6.Algorithm;\n\nconst colors = [\n  \'#5F95FF\', // blue\n  \'#61DDAA\',\n  \'#65789B\',\n  \'#F6BD16\',\n  \'#7262FD\',\n  \'#78D3F8\',\n  \'#9661BC\',\n  \'#F6903D\',\n  \'#008685\',\n  \'#F08BB4\',\n];\nconst colorSets = G6.Util.getColorSetsBySubjectColors(colors, \'#fff\', \'default\', \'#777\');\n\n\nconst data = {"nodes":[{"id":"0","label":"0","x":217.86420885505296,"y":114.28884847734246,"cluster":"nodeType-0"},{"id":"1","label":"1","x":113.58792632732174,"y":25.785315472468127,"cluster":"nodeType-1"},{"id":"2","label":"2","x":179.59682070334452,"y":38.87850516662148,"cluster":"nodeType-2"},{"id":"3","label":"3","x":204.20226244579672,"y":-5.33508012158744,"cluster":"nodeType-0"},{"id":"4","label":"4","x":308.74171746938134,"y":10.554714934145961,"cluster":"nodeType-1"},{"id":"5","label":"5","x":341.99836557519745,"y":48.30310308747067,"cluster":"nodeType-2"},{"id":"6","label":"6","x":376.62085426957793,"y":-10.286527884559707,"cluster":"nodeType-0"},{"id":"7","label":"7","x":254.42832676365109,"y":62.51510456243093,"cluster":"nodeType-1"},{"id":"8","label":"8","x":139.32504277036227,"y":135.40373347960067,"cluster":"nodeType-2"},{"id":"9","label":"9","x":245.24964464688256,"y":166.03052347036282,"cluster":"nodeType-0"},{"id":"10","label":"10","x":250.33418485239127,"y":227.6830390965898,"cluster":"nodeType-1"},{"id":"11","label":"11","x":176.79897890681895,"y":235.80422881594598,"cluster":"nodeType-2"},{"id":"12","label":"12","x":331.32653587613936,"y":158.8731219947074,"cluster":"nodeType-0"},{"id":"13","label":"13","x":292.8309736938475,"y":106.794007203338,"cluster":"nodeType-1"},{"id":"14","label":"14","x":175.6768625027686,"y":179.3951732038534,"cluster":"nodeType-2"},{"id":"15","label":"15","x":83.26466725029928,"y":96.50488885477502,"cluster":"nodeType-0"},{"id":"16","label":"16","x":318.09206038019914,"y":241.38853020289633,"cluster":"nodeType-1"},{"id":"17","label":"17","x":397.2096443837184,"y":251.11323425020436,"cluster":"nodeType-2"},{"id":"18","label":"18","x":396.9307017482416,"y":305.79619379078093,"cluster":"nodeType-0"},{"id":"19","label":"19","x":323.19884694585255,"y":354.7889914141042,"cluster":"nodeType-1"},{"id":"20","label":"20","x":334.7320270398703,"y":289.0437229111331,"cluster":"nodeType-2"},{"id":"21","label":"21","x":276.9512819725375,"y":284.9808595526045,"cluster":"nodeType-0"},{"id":"22","label":"22","x":235.086300958203,"y":348.23515388308186,"cluster":"nodeType-1"},{"id":"23","label":"23","x":263.36101059763547,"y":442.4976175844671,"cluster":"nodeType-2"},{"id":"24","label":"24","x":195.01142425098806,"y":287.081197770762,"cluster":"nodeType-0"},{"id":"25","label":"25","x":120.39188452563401,"y":337.8524937873151,"cluster":"nodeType-1"},{"id":"26","label":"26","x":109.74700930888443,"y":407.5171194512714,"cluster":"nodeType-2"},{"id":"27","label":"27","x":328.18870325041166,"y":527.9726877901181,"cluster":"nodeType-0"},{"id":"28","label":"28","x":221.745767731853,"y":400.38906283199213,"cluster":"nodeType-1"},{"id":"29","label":"29","x":243.98258526664858,"y":553.9974335527247,"cluster":"nodeType-2"},{"id":"30","label":"30","x":179.30103487685315,"y":433.1126685019916,"cluster":"nodeType-0"},{"id":"31","label":"31","x":221.65781762707928,"y":474.10779931544715,"cluster":"nodeType-1"},{"id":"32","label":"32","x":349.13614579528684,"y":422.65934738145364,"cluster":"nodeType-2"},{"id":"33","label":"33","x":300.5432325124777,"y":401.2786277319002,"cluster":"nodeType-0"}],"edges":[{"source":"0","target":"1","cluster":"edgeType-0"},{"source":"0","target":"2","cluster":"edgeType-1"},{"source":"0","target":"3","cluster":"edgeType-2"},{"source":"0","target":"4","cluster":"edgeType-0"},{"source":"0","target":"5","cluster":"edgeType-1"},{"source":"0","target":"7","cluster":"edgeType-2"},{"source":"0","target":"8","cluster":"edgeType-0"},{"source":"0","target":"9","cluster":"edgeType-1"},{"source":"0","target":"10","cluster":"edgeType-2"},{"source":"0","target":"11","cluster":"edgeType-0"},{"source":"0","target":"13","cluster":"edgeType-1"},{"source":"0","target":"14","cluster":"edgeType-2"},{"source":"0","target":"15","cluster":"edgeType-0"},{"source":"0","target":"16","cluster":"edgeType-1"},{"source":"2","target":"3","cluster":"edgeType-2"},{"source":"4","target":"5","cluster":"edgeType-0"},{"source":"4","target":"6","cluster":"edgeType-1"},{"source":"5","target":"6","cluster":"edgeType-2"},{"source":"7","target":"13","cluster":"edgeType-0"},{"source":"8","target":"14","cluster":"edgeType-1"},{"source":"9","target":"10","cluster":"edgeType-2"},{"source":"10","target":"22","cluster":"edgeType-0"},{"source":"10","target":"14","cluster":"edgeType-1"},{"source":"10","target":"12","cluster":"edgeType-2"},{"source":"10","target":"24","cluster":"edgeType-0"},{"source":"10","target":"21","cluster":"edgeType-1"},{"source":"10","target":"20","cluster":"edgeType-2"},{"source":"11","target":"24","cluster":"edgeType-0"},{"source":"11","target":"22","cluster":"edgeType-1"},{"source":"11","target":"14","cluster":"edgeType-2"},{"source":"12","target":"13","cluster":"edgeType-0"},{"source":"16","target":"17","cluster":"edgeType-1"},{"source":"16","target":"18","cluster":"edgeType-2"},{"source":"16","target":"21","cluster":"edgeType-0"},{"source":"16","target":"22","cluster":"edgeType-1"},{"source":"17","target":"18","cluster":"edgeType-2"},{"source":"17","target":"20","cluster":"edgeType-0"},{"source":"18","target":"19","cluster":"edgeType-1"},{"source":"19","target":"20","cluster":"edgeType-2"},{"source":"19","target":"33","cluster":"edgeType-0"},{"source":"19","target":"22","cluster":"edgeType-1"},{"source":"19","target":"23","cluster":"edgeType-2"},{"source":"20","target":"21","cluster":"edgeType-0"},{"source":"21","target":"22","cluster":"edgeType-1"},{"source":"22","target":"24","cluster":"edgeType-2"},{"source":"22","target":"25","cluster":"edgeType-0"},{"source":"22","target":"26","cluster":"edgeType-1"},{"source":"22","target":"23","cluster":"edgeType-2"},{"source":"22","target":"28","cluster":"edgeType-0"},{"source":"22","target":"30","cluster":"edgeType-1"},{"source":"22","target":"31","cluster":"edgeType-2"},{"source":"22","target":"32","cluster":"edgeType-0"},{"source":"22","target":"33","cluster":"edgeType-1"},{"source":"23","target":"28","cluster":"edgeType-2"},{"source":"23","target":"27","cluster":"edgeType-0"},{"source":"23","target":"29","cluster":"edgeType-1"},{"source":"23","target":"30","cluster":"edgeType-2"},{"source":"23","target":"31","cluster":"edgeType-0"},{"source":"23","target":"33","cluster":"edgeType-1"},{"source":"32","target":"33","cluster":"edgeType-2"}]};\nconst button = document.createElement(\'button\');\nbutton.innerHTML = `Click Here to Match 点此开始匹配`;\ndocument.getElementById(\'container\').appendChild(button);\n\nconst container = document.getElementById(\'container\');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\n\nconst graph = new G6.Graph({\n  container: \'container\',\n  width,\n  height,\n  fitView: true,\n  modes: {\n    default: [\'drag-canvas\', \'drag-node\', \'zoom-canvas\'],\n  },\n});\n\nconst legendDataMap = {}\ndata.nodes.forEach((node, i) => {\n  const colorSet = colorSets[(+node.cluster.split(\'-\')[1])];\n  node.style = {\n    fill: colorSet.mainFill,\n    stroke: colorSet.mainStroke,\n  }\n  if (!legendDataMap[node.cluster]) {\n    legendDataMap[node.cluster] = {\n      shape: \'circle\',\n      r: 6,\n      text: node.cluster,\n      fill: colorSet.mainFill,\n      stroke: colorSet.mainStroke,\n    }\n  }\n})\ndata.edges.forEach((edge, i) => {\n  const colorSet = colorSets[(+edge.cluster.split(\'-\')[1])];\n  edge.style = {\n    stroke: colorSet.mainStroke,\n    lineWidth: 2,\n    opacity: 0.3,\n    endArrow: true\n  }\n\n  if (!legendDataMap[edge.cluster]) {\n    legendDataMap[edge.cluster] = {\n      shape: \'line\',\n      text: edge.cluster,\n      stroke: colorSet.mainStroke,\n      lineWidth: 2,\n      opacity: 0.3,\n      endArrow: true\n    }\n  }\n})\ngraph.data(data);\ngraph.render();\n\n// pattern graph data\nconst pattern = {\n  nodes: [{\n    id: \'pn0\',\n    cluster: \'nodeType-0\'\n  },{\n    id: \'pn1\',\n    cluster: \'nodeType-1\'\n  },{\n    id: \'pn2\',\n    cluster: \'nodeType-2\'\n  }],\n  edges: [\n    { source: \'pn1\', target: \'pn0\', cluster: \'edgeType-1\' },\n    { source: \'pn1\', target: \'pn2\', cluster: \'edgeType-0\' },\n    { source: \'pn2\', target: \'pn0\', cluster: \'edgeType-2\' },\n  ]\n}\n\n\n// draw pattern graph\npattern.nodes.forEach(pNode => {\n  const colorSet = colorSets[(+pNode.cluster.split(\'-\')[1])];\n  pNode.style = {\n    fill: colorSet.mainFill,\n    stroke: colorSet.mainStroke,\n  }\n});\npattern.edges.forEach(pEdge => {\n  const colorSet = colorSets[(+pEdge.cluster.split(\'-\')[1])];\n  pEdge.style = {\n    stroke: colorSet.mainStroke,\n  }\n});\nconst patternGraphWidth = Math.max(width / 5, 100);\nconst patternGraphHeight = Math.max(height / 5, 100);\nconst patternGraph = new G6.Graph({\n  container: \'container\',\n  width: patternGraphWidth,\n  height: patternGraphHeight,\n  fitView: true,\n  defaultEdge: {\n    style: {\n      endArrow: true\n    }\n  },\n  layout: {\n    type: \'circular\'\n  }\n})\npatternGraph.data(pattern);\npatternGraph.render();\nconst patternCanvas = patternGraph.get(\'canvas\');\nconst patternCanvasEl = patternCanvas.get(\'el\');\npatternCanvasEl.style.position = \'absolute\';\npatternCanvasEl.style.top = \'50px\';\npatternCanvasEl.style.left = \'15px\';\npatternCanvasEl.style.backgroundColor = \'#eee\';\npatternCanvasEl.style.opacity = 0.7;\npatternCanvas.addShape(\'text\', {\n  attrs: {\n    text: \'Pattern\',\n    x: patternGraphWidth - 55,\n    y: patternGraphHeight - 10,\n    fill: \'#000\',\n    fontWeight: 500\n  }\n})\n\n\n// draw legend\nconst legendGroup = graph.get(\'canvas\').addGroup({\n  attrs: {\n    opacity: 0.7\n  }\n});\nconst legendBack = legendGroup.addShape(\'rect\', {\n  attrs: {\n    height: 10,\n    width: 10,\n    x: 5,\n    y: -10,\n    fill: \'#eee\'\n  }\n})\nlegendGroup.addShape(\'text\', {\n  attrs: {\n    text: \'Legend\',\n    x: 40,\n    y: 5,\n    fill: \'#000\',\n    fontWeight: 500\n  }\n})\nObject.keys(legendDataMap).forEach((cluster, i) => {\n  const lData = legendDataMap[cluster];\n  legendGroup.addShape(lData.shape, {\n    attrs: {\n      x: 20,\n      y: 20 + i * 25,\n      x1: 13,\n      x2: 28,\n      y1: 20 + i * 25,\n      y2: 20 + i * 25,\n      ...lData\n    }\n  })\n  legendGroup.addShape(\'text\', {\n    attrs: {\n      x: 35,\n      y: 20 + i * 25,\n      text: lData.text,\n      fill: \'#000\',\n      textBaseline: \'middle\'\n    }\n  })\n}) \nconst legendBBox = legendGroup.getBBox();\nlegendBack.attr({\n  width: legendBBox.width + 10,\n  height: legendBBox.height + 10\n})\nlegendGroup.setMatrix([1, 0, 0, 0, 1, 0, -10, patternGraphHeight + 40, 1])\n\n\n// click the button to run GADDI graph pattern matching\n// and the result will be marked with hull\nbutton.addEventListener(\'click\', (e) => {\n  const matches = GADDI(\n    data,\n    pattern,\n    true,\n    undefined,\n    undefined,\n    \'cluster\',\n    \'cluster\'\n  );\n  matches.forEach((match, i) => {\n    graph.createHull({\n      id: `match-${i}`,\n      members: match.nodes.map(node => node.id)\n    })\n  });\n  button.innerHTML = `The results are marked with hulls 结果已用轮廓标记`;\n  button.disabled = true;\n});\n\nif (typeof window !== \'undefined\')\n  window.onresize = () => {\n    if (!graph || graph.get(\'destroyed\')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n',title:{zh:"图模式匹配",en:"Graph Pattern Matching"},filename:"gaddi.js",isNew:!1},{id:"shortestPath",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*pBV2T6BU6g8AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = `Press 'shift' and click two nodes to select begin and end nodes. 按住 'shift' 并点选两个节点作为起点和终点。`;\ndocument.getElementById('container').appendChild(tipDiv);\n\nconst button = document.createElement('button');\nbutton.innerHTML = `查看最短路径`;\ndocument.getElementById('container').appendChild(button);\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 40;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: ['click-select', 'drag-canvas', 'drag-node', 'zoom-canvas'],\n  },\n  fitView: true,\n});\nfetch('https://gw.alipayobjects.com/os/bmw-prod/b0ca4b15-bd0c-43ec-ae41-c810374a1d55.json')\n  .then((res) => res.json())\n  .then((data) => {\n    const clearStates = () => {\n      graph.getNodes().forEach((node) => {\n        graph.clearItemStates(node);\n      });\n      graph.getEdges().forEach((edge) => {\n        graph.clearItemStates(edge);\n      });\n    };\n\n    graph.on('canvas:click', (e) => {\n      clearStates();\n    });\n\n    graph.data(data);\n    graph.render();\n\n    // store the selected nodes according to the clicked order\n    let selectedNodeIds = [];\n    graph.on('node:click', ({ item }) => {\n      const id = item.getID();\n      const index = selectedNodeIds.indexOf(id);\n      if (item.hasState('selected') && index < 0) {\n        selectedNodeIds.push(id);\n      } else if (!item.hasState('selected')) {\n        selectedNodeIds.splice(index, 1);\n      }\n    });\n\n    graph.on('canvas:click', e => {\n      selectedNodeIds = [];\n    });\n\n    button.addEventListener('click', (e) => {\n      if (selectedNodeIds.length !== 2) {\n        alert('Please select TWO nodes!\\n\\r请选择有且两个节点！');\n        return;\n      }\n      clearStates();\n      const { findShortestPath } = G6.Algorithm;\n      // path 为其中一条最短路径，allPath 为所有的最短路径\n      const { path, allPath } = findShortestPath(\n        data,\n        selectedNodeIds[0],\n        selectedNodeIds[1],\n        true\n      );\n      selectedNodeIds = [];\n\n      if (path?.length) {\n        const pathNodeMap = {};\n        path.forEach((id) => {\n          const pathNode = graph.findById(id);\n          pathNode.toFront();\n          graph.setItemState(pathNode, 'highlight', true);\n          pathNodeMap[id] = true;\n        });\n        graph.getEdges().forEach((edge) => {\n          const edgeModel = edge.getModel();\n          const source = edgeModel.source;\n          const target = edgeModel.target;\n          const sourceInPathIdx = path.indexOf(source);\n          const targetInPathIdx = path.indexOf(target);\n          if (sourceInPathIdx === -1 || targetInPathIdx === -1) return;\n          if (Math.abs(sourceInPathIdx - targetInPathIdx) === 1) {\n            graph.setItemState(edge, 'highlight', true);\n          } else {\n            graph.setItemState(edge, 'inactive', true);\n          }\n        });\n        graph.getNodes().forEach((node) => {\n          if (!pathNodeMap[node.getID()]) {\n            graph.setItemState(node, 'inactive', true);\n          }\n        });\n      }\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 40);\n  };\n",title:{zh:"最短路径",en:"Shortest Path"},filename:"shortestPath.js",isNew:!1},{id:"labelPropagation",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*NXkTSbPhEA0AAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst { labelPropagation } = G6.Algorithm;\n\nconst button = document.createElement('button');\nbutton.innerHTML = `Click Here to Clustering 点此自动聚类`;\ndocument.getElementById('container').appendChild(button);\n\n// Generate color sets according to subject colors\nconst subjectColors = [\n  '#5F95FF', // blue\n  '#61DDAA',\n  '#65789B',\n  '#F6BD16',\n  '#7262FD',\n  '#78D3F8',\n  '#9661BC',\n  '#F6903D',\n  '#008685',\n  '#F08BB4',\n];\nconst colorSets = G6.Util.getColorSetsBySubjectColors(subjectColors, '#fff', 'default', '#777');\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],\n  },\n  layout: {\n    type: 'gForce',\n    minMovement: 0.1,\n  },\n});\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n\n    button.addEventListener('click', (e) => {\n      const clusteredData = labelPropagation(data, false);\n      clusteredData.clusters.forEach((cluster, i) => {\n        const colorSet = colorSets[i % colorSets.length];\n        cluster.nodes.forEach((node) => {\n          node.style = {\n            fill: colorSet.mainFill,\n            stroke: colorSet.mainStroke,\n          };\n        });\n      });\n      graph.refresh();\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:{zh:"LP 自动聚类",en:"Label Propagation Clustering"},filename:"labelPropagation.js",isNew:!1},{id:"louvain",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*OVgcSa33xBYAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst { louvain } = G6.Algorithm;\n\nconst button = document.createElement('button');\nbutton.innerHTML = `Click Here to Clustering 点此自动聚类`;\ndocument.getElementById('container').appendChild(button);\n\n// Generate color sets according to subject colors\nconst subjectColors = [\n  '#5F95FF', // blue\n  '#61DDAA',\n  '#65789B',\n  '#F6BD16',\n  '#7262FD',\n  '#78D3F8',\n  '#9661BC',\n  '#F6903D',\n  '#008685',\n  '#F08BB4',\n];\nconst colorSets = G6.Util.getColorSetsBySubjectColors(subjectColors, '#fff', 'default', '#777');\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 20;\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],\n  },\n  layout: {\n    type: 'gForce',\n    minMovement: 0.1,\n  },\n});\nfetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/relations.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n\n    button.addEventListener('click', (e) => {\n      const clusteredData = louvain(data, false);\n      \n      clusteredData.clusters.forEach((cluster, i) => {\n        const colorSet = colorSets[i % colorSets.length];\n        cluster.nodes.forEach((node) => {\n          const model = graph.findById(node.id).getModel();\n          model.style.fill = colorSet.mainFill\n          model.style.stroke = colorSet.mainStroke\n        });\n      });\n      graph.refresh();\n    });\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 20);\n  };\n",title:{zh:"LOUVAIN 自动聚类",en:"LOUVAIN Clustering"},filename:"louvain.js",isNew:!1},{id:"colorSets",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*hS7MTKlo6LsAAAAAAAAAAAAAARQnAQ",source:"import G6 from '@antv/g6';\n\nconst tipDiv = document.createElement('div');\ntipDiv.innerHTML = `These are the suggested categorical color palette in G6. Input the subject colors, 'getColorSetsBySubjectColors' generate a set of colors for different state styles. You can modify the 'subjectColors' in the code to try your subject color. And it also provide default and dark theme with different background colors. <br /> 下面是 G6 的推荐色板。输入主题色，'getColorSetsBySubjectColors' 将会输出与该主题色相关的一系列状态颜色。还可以指定叠加背景色的同时，指定主题是 default（亮色）或 dark（暗色）`;\ndocument.getElementById('container').appendChild(tipDiv);\n\n// Generate color sets according to subject colors\nconst subjectColors = [\n  '#5F95FF', // blue\n  '#61DDAA',\n  '#65789B',\n  '#F6BD16',\n  '#7262FD',\n  '#78D3F8',\n  '#9661BC',\n  '#F6903D',\n  '#008685',\n  '#F08BB4',\n];\nconst backColor = '#fff';\nconst theme = 'default';\nconst disableColor = '#777';\nconst colorSets = G6.Util.getColorSetsBySubjectColors(\n  subjectColors,\n  backColor,\n  theme,\n  disableColor,\n);\n\nconst data = { nodes: [] };\n\nsubjectColors.forEach((color, i) => {\n  data.nodes.push({\n    id: `node-${color}`,\n    label: color,\n    labelCfg: {\n      position: 'bottom',\n    },\n    style: {\n      fill: colorSets[i].mainFill,\n      stroke: colorSets[i].mainStroke,\n    },\n    stateStyles: {\n      active: {\n        fill: colorSets[i].activeFill,\n        stroke: colorSets[i].activeStroke,\n        shadowColor: colorSets[i].activeStroke,\n      },\n      inactive: {\n        fill: colorSets[i].inactiveFill,\n        stroke: colorSets[i].inactiveStroke,\n      },\n      selected: {\n        fill: colorSets[i].selectedFill,\n        stroke: colorSets[i].selectedStroke,\n        shadowColor: colorSets[i].selectedStroke,\n      },\n      highlight: {\n        fill: colorSets[i].highlightFill,\n        stroke: colorSets[i].highlightStroke,\n      },\n      disable: {\n        fill: colorSets[i].disableFill,\n        stroke: colorSets[i].disableStroke,\n      },\n    },\n  });\n});\n\n// data.nodes.push({\n//   id: `node-custom`,\n//   label: `customColor`\n// })\n\nconst container = document.getElementById('container');\nconst width = container.scrollWidth;\nconst height = (container.scrollHeight || 500) - 160;\n\nG6.Global.nodeStateStyles = {};\n\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  linkCenter: true,\n  modes: {\n    default: ['drag-canvas', 'drag-node', 'zoom-canvas'],\n  },\n  fitView: true,\n  layout: {\n    type: 'grid',\n  },\n  defaultNode: {\n    type: 'circle',\n    labelCfg: {\n      position: 'bottom',\n    },\n  },\n  nodeStateStyles: {\n    active: {\n      fill: colorSets[1].activeFill,\n      stroke: colorSets[1].activeStroke,\n    },\n  },\n});\ngraph.data(data);\ngraph.render();\n\ngraph.on('node:mouseenter', (e) => {\n  graph.getNodes().forEach((node) => {\n    graph.setItemState(node, 'active', false);\n  });\n  graph.setItemState(e.item, 'active', true);\n});\n\ngraph.on('node:mouseleave', (e) => {\n  graph.setItemState(e.item, 'active', false);\n});\n\ngraph.on('node:click', (e) => {\n  graph.getNodes().forEach((node) => {\n    graph.setItemState(node, 'selected', false);\n  });\n  graph.setItemState(e.item, 'selected', true);\n});\n\ngraph.on('canvas:click', (e) => {\n  graph.getNodes().forEach((node) => {\n    graph.setItemState(node, 'selected', false);\n  });\n});\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight - 160);\n  };\n",title:{zh:"自动计算色板",en:"Color Sets Compoting"},filename:"colorSets.js",isNew:!1}],icon:"",id:"algoDemos",title:{en:"Shortest Path",zh:"算法示例"},childrenKey:"demos",order:1}],childrenKey:"examples"},{id:"performance",title:{zh:"性能测试",en:"Performance"},icon:"net",examples:[{demos:[{id:"netscience",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*Q6eRT7RNwBYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst mapNodeSize = (nodes, propertyName, visualRange) => {\n  let minp = 9999999999;\n  let maxp = -9999999999;\n  nodes.forEach((node) => {\n    node[propertyName] = Math.pow(node[propertyName], 1 / 3);\n    minp = node[propertyName] < minp ? node[propertyName] : minp;\n    maxp = node[propertyName] > maxp ? node[propertyName] : maxp;\n  });\n  const rangepLength = maxp - minp;\n  const rangevLength = visualRange[1] - visualRange[0];\n  nodes.forEach((node) => {\n    node.size = ((node[propertyName] - minp) / rangepLength) * rangevLength + visualRange[0];\n  });\n};\n\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = `正在渲染大规模数据，请稍等……`;\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultNode: {\n    size: 2,\n    style: {\n      fill: '#C6E5FF',\n      stroke: '#5B8FF9',\n      lineWidth: 0.3,\n    },\n    labelCfg: {\n      style: {\n        fontSize: 3,\n      },\n      position: 'right',\n      offset: 1,\n    },\n  },\n  defaultEdge: {\n    size: 0.1,\n    color: '#333',\n  },\n  nodeStateStyles: {\n    selected: {\n      fill: 'steelblue',\n      stroke: '#000',\n      lineWidth: 1,\n    },\n  },\n  modes: {\n    default: [\n      {\n        type: 'zoom-canvas',\n        enableOptimize: true,\n        optimizeZoom: 0.9,\n      },\n      {\n        type: 'drag-canvas',\n        enableOptimize: true,\n      },\n      'drag-node',\n      'brush-select',\n    ],\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/da5a1b47-37d6-44d7-8d10-f3e046dabf82.json')\n  .then((res) => res.json())\n  .then((data) => {\n    data.nodes.forEach((node) => {\n      node.label = node.olabel;\n      node.degree = 0;\n      data.edges.forEach((edge) => {\n        if (edge.source === node.id || edge.target === node.id) {\n          node.degree++;\n        }\n      });\n    });\n    mapNodeSize(data.nodes, 'degree', [1, 10]);\n    graph.data(data);\n    graph.render();\n\n    const graphData = graph.save();\n    const nodeLen = graphData.nodes.length;\n    const edgeLen = graphData.edges.length;\n    descriptionDiv.innerHTML = `节点数量：${nodeLen}, 边数量：${edgeLen}, 图元数量：${\n      nodeLen * 2 + edgeLen\n    }`;\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"5000+ 图元",en:"5000+ Graphic Shapes"},filename:"netscience.js",isNew:!1},{id:"eva",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*mysRTLxipwMAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst mapNodeSize = (nodes, propertyName, visualRange) => {\n  let minp = 9999999999;\n  let maxp = -9999999999;\n  nodes.forEach((node) => {\n    node[propertyName] = Math.pow(node[propertyName], 1 / 3);\n    minp = node[propertyName] < minp ? node[propertyName] : minp;\n    maxp = node[propertyName] > maxp ? node[propertyName] : maxp;\n  });\n  const rangepLength = maxp - minp;\n  const rangevLength = visualRange[1] - visualRange[0];\n  nodes.forEach((node) => {\n    node.size = ((node[propertyName] - minp) / rangepLength) * rangevLength + visualRange[0];\n  });\n};\n\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = `正在渲染大规模数据，请稍等……`;\ncontainer.appendChild(descriptionDiv);\n\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultNode: {\n    size: 2,\n    style: {\n      fill: '#C6E5FF',\n      stroke: '#5B8FF9',\n      lineWidth: 0.3,\n    },\n    labelCfg: {\n      style: {\n        fontSize: 3,\n      },\n      position: 'right',\n      offset: 1,\n    },\n  },\n  defaultEdge: {\n    size: 0.1,\n    color: '#333',\n    type: 'line',\n  },\n  nodeStateStyles: {\n    selected: {\n      fill: 'steelblue',\n      stroke: '#000',\n      lineWidth: 1,\n    },\n    hover: {\n      fill: 'red',\n      stroke: '#000',\n      lineWidth: 1,\n    },\n  },\n  modes: {\n    default: [\n      {\n        type: 'zoom-canvas',\n        enableOptimize: true,\n        optimizeZoom: 0.9,\n      },\n      {\n        type: 'drag-canvas',\n        enableOptimize: true,\n      },\n      'drag-node',\n      'brush-select',\n    ], // 'drag-canvas',\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/basement_prod/0b9730ff-0850-46ff-84d0-1d4afecd43e6.json')\n  .then((res) => res.json())\n  .then((data) => {\n    data.nodes.forEach((node) => {\n      node.label = node.olabel;\n      node.labelCfg.style = {\n        fontSize: 1.3,\n      };\n      node.degree = 0;\n      data.edges.forEach((edge) => {\n        if (edge.source === node.id || edge.target === node.id) {\n          node.degree++;\n        }\n      });\n    });\n    console.log('原始数据', data.nodes.length, data.edges.length);\n    mapNodeSize(data.nodes, 'degree', [1, 15]);\n    // console.log(data.nodes);\n    graph.data(data);\n    graph.render();\n    graph.on('node:mouseenter', (e) => {\n      const { item } = e;\n      graph.setItemState(item, 'hover', true);\n    });\n    graph.on('node:mouseleave', (e) => {\n      const { item } = e;\n      graph.setItemState(item, 'hover', false);\n    });\n\n    const graphData = graph.save();\n    const nodeLen = graphData.nodes.length;\n    const edgeLen = graphData.edges.length;\n    descriptionDiv.innerHTML = `节点数量：${nodeLen}, 边数量：${edgeLen}, 图元数量：${\n      nodeLen * 2 + edgeLen\n    }`;\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"~20000 图元",en:"~20000 Graphic Shapes"},filename:"eva.js",isNew:!1},{id:"moreData",screenshot:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*6U-cSrdpBjYAAAAAAAAAAABkARQnAQ",source:"import G6 from '@antv/g6';\n\nconst container = document.getElementById('container');\nconst descriptionDiv = document.createElement('div');\ndescriptionDiv.innerHTML = `正在渲染大规模数据，请稍等……`;\ncontainer.appendChild(descriptionDiv);\nconst width = container.scrollWidth;\nconst height = container.scrollHeight || 500;\nconst graph = new G6.Graph({\n  container: 'container',\n  width,\n  height,\n  defaultNode: {\n    size: 2,\n    style: {\n      fill: '#C6E5FF',\n      stroke: '#5B8FF9',\n      lineWidth: 0.3,\n    },\n    labelCfg: {\n      style: {\n        fontSize: 3,\n      },\n      position: 'right',\n      offset: 1,\n    },\n  },\n  defaultEdge: {\n    size: 0.1,\n    color: '#333',\n    opacity: 0.2,\n  },\n  nodeStateStyles: {\n    selected: {\n      fill: 'steelblue',\n      stroke: '#000',\n      lineWidth: 1,\n    },\n  },\n  modes: {\n    default: [\n      {\n        type: 'zoom-canvas',\n        enableOptimize: true,\n        optimizeZoom: 0.9,\n      },\n      {\n        type: 'drag-canvas',\n        enableOptimize: true,\n      },\n      'drag-node',\n      'brush-select',\n    ],\n  },\n});\n\nfetch('https://gw.alipayobjects.com/os/bmw-prod/f1565312-d537-4231-adf5-81cb1cd3a0e8.json')\n  .then((res) => res.json())\n  .then((data) => {\n    graph.data(data);\n    graph.render();\n\n    const graphData = graph.save();\n    const nodeLen = graphData.nodes.length;\n    const edgeLen = graphData.edges.length;\n    descriptionDiv.innerHTML = `节点数量：${nodeLen}, 边数量：${edgeLen}, 图元数量：${\n      nodeLen + edgeLen\n    }`;\n  });\n\nif (typeof window !== 'undefined')\n  window.onresize = () => {\n    if (!graph || graph.get('destroyed')) return;\n    if (!container || !container.scrollWidth || !container.scrollHeight) return;\n    graph.changeSize(container.scrollWidth, container.scrollHeight);\n  };\n",title:{zh:"50000+ 图元",en:"50000+ Graphic Shapes"},filename:"moreData.js",isNew:!1}],icon:"",id:"perf",title:{en:"Performance Case",zh:"性能案例"},childrenKey:"demos",order:0}],childrenKey:"examples"}]}},children:n})}}}]);